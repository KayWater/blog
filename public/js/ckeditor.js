/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 1);
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/@babel/runtime/regenerator/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@babel/runtime/regenerator/index.js ***!
  \**********************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! regenerator-runtime */ "./node_modules/regenerator-runtime/runtime.js");


/***/ }),

/***/ "./node_modules/regenerator-runtime/runtime.js":
/*!*****************************************************!*\
  !*** ./node_modules/regenerator-runtime/runtime.js ***!
  \*****************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

/**
 * Copyright (c) 2014-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

var runtime = (function (exports) {
  "use strict";

  var Op = Object.prototype;
  var hasOwn = Op.hasOwnProperty;
  var undefined; // More compressible than void 0.
  var $Symbol = typeof Symbol === "function" ? Symbol : {};
  var iteratorSymbol = $Symbol.iterator || "@@iterator";
  var asyncIteratorSymbol = $Symbol.asyncIterator || "@@asyncIterator";
  var toStringTagSymbol = $Symbol.toStringTag || "@@toStringTag";

  function wrap(innerFn, outerFn, self, tryLocsList) {
    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.
    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;
    var generator = Object.create(protoGenerator.prototype);
    var context = new Context(tryLocsList || []);

    // The ._invoke method unifies the implementations of the .next,
    // .throw, and .return methods.
    generator._invoke = makeInvokeMethod(innerFn, self, context);

    return generator;
  }
  exports.wrap = wrap;

  // Try/catch helper to minimize deoptimizations. Returns a completion
  // record like context.tryEntries[i].completion. This interface could
  // have been (and was previously) designed to take a closure to be
  // invoked without arguments, but in all the cases we care about we
  // already have an existing method we want to call, so there's no need
  // to create a new function object. We can even get away with assuming
  // the method takes exactly one argument, since that happens to be true
  // in every case, so we don't have to touch the arguments object. The
  // only additional allocation required is the completion record, which
  // has a stable shape and so hopefully should be cheap to allocate.
  function tryCatch(fn, obj, arg) {
    try {
      return { type: "normal", arg: fn.call(obj, arg) };
    } catch (err) {
      return { type: "throw", arg: err };
    }
  }

  var GenStateSuspendedStart = "suspendedStart";
  var GenStateSuspendedYield = "suspendedYield";
  var GenStateExecuting = "executing";
  var GenStateCompleted = "completed";

  // Returning this object from the innerFn has the same effect as
  // breaking out of the dispatch switch statement.
  var ContinueSentinel = {};

  // Dummy constructor functions that we use as the .constructor and
  // .constructor.prototype properties for functions that return Generator
  // objects. For full spec compliance, you may wish to configure your
  // minifier not to mangle the names of these two functions.
  function Generator() {}
  function GeneratorFunction() {}
  function GeneratorFunctionPrototype() {}

  // This is a polyfill for %IteratorPrototype% for environments that
  // don't natively support it.
  var IteratorPrototype = {};
  IteratorPrototype[iteratorSymbol] = function () {
    return this;
  };

  var getProto = Object.getPrototypeOf;
  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));
  if (NativeIteratorPrototype &&
      NativeIteratorPrototype !== Op &&
      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {
    // This environment has a native %IteratorPrototype%; use it instead
    // of the polyfill.
    IteratorPrototype = NativeIteratorPrototype;
  }

  var Gp = GeneratorFunctionPrototype.prototype =
    Generator.prototype = Object.create(IteratorPrototype);
  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;
  GeneratorFunctionPrototype.constructor = GeneratorFunction;
  GeneratorFunctionPrototype[toStringTagSymbol] =
    GeneratorFunction.displayName = "GeneratorFunction";

  // Helper for defining the .next, .throw, and .return methods of the
  // Iterator interface in terms of a single ._invoke method.
  function defineIteratorMethods(prototype) {
    ["next", "throw", "return"].forEach(function(method) {
      prototype[method] = function(arg) {
        return this._invoke(method, arg);
      };
    });
  }

  exports.isGeneratorFunction = function(genFun) {
    var ctor = typeof genFun === "function" && genFun.constructor;
    return ctor
      ? ctor === GeneratorFunction ||
        // For the native GeneratorFunction constructor, the best we can
        // do is to check its .name property.
        (ctor.displayName || ctor.name) === "GeneratorFunction"
      : false;
  };

  exports.mark = function(genFun) {
    if (Object.setPrototypeOf) {
      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);
    } else {
      genFun.__proto__ = GeneratorFunctionPrototype;
      if (!(toStringTagSymbol in genFun)) {
        genFun[toStringTagSymbol] = "GeneratorFunction";
      }
    }
    genFun.prototype = Object.create(Gp);
    return genFun;
  };

  // Within the body of any async function, `await x` is transformed to
  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test
  // `hasOwn.call(value, "__await")` to determine if the yielded value is
  // meant to be awaited.
  exports.awrap = function(arg) {
    return { __await: arg };
  };

  function AsyncIterator(generator) {
    function invoke(method, arg, resolve, reject) {
      var record = tryCatch(generator[method], generator, arg);
      if (record.type === "throw") {
        reject(record.arg);
      } else {
        var result = record.arg;
        var value = result.value;
        if (value &&
            typeof value === "object" &&
            hasOwn.call(value, "__await")) {
          return Promise.resolve(value.__await).then(function(value) {
            invoke("next", value, resolve, reject);
          }, function(err) {
            invoke("throw", err, resolve, reject);
          });
        }

        return Promise.resolve(value).then(function(unwrapped) {
          // When a yielded Promise is resolved, its final value becomes
          // the .value of the Promise<{value,done}> result for the
          // current iteration.
          result.value = unwrapped;
          resolve(result);
        }, function(error) {
          // If a rejected Promise was yielded, throw the rejection back
          // into the async generator function so it can be handled there.
          return invoke("throw", error, resolve, reject);
        });
      }
    }

    var previousPromise;

    function enqueue(method, arg) {
      function callInvokeWithMethodAndArg() {
        return new Promise(function(resolve, reject) {
          invoke(method, arg, resolve, reject);
        });
      }

      return previousPromise =
        // If enqueue has been called before, then we want to wait until
        // all previous Promises have been resolved before calling invoke,
        // so that results are always delivered in the correct order. If
        // enqueue has not been called before, then it is important to
        // call invoke immediately, without waiting on a callback to fire,
        // so that the async generator function has the opportunity to do
        // any necessary setup in a predictable way. This predictability
        // is why the Promise constructor synchronously invokes its
        // executor callback, and why async functions synchronously
        // execute code before the first await. Since we implement simple
        // async functions in terms of async generators, it is especially
        // important to get this right, even though it requires care.
        previousPromise ? previousPromise.then(
          callInvokeWithMethodAndArg,
          // Avoid propagating failures to Promises returned by later
          // invocations of the iterator.
          callInvokeWithMethodAndArg
        ) : callInvokeWithMethodAndArg();
    }

    // Define the unified helper method that is used to implement .next,
    // .throw, and .return (see defineIteratorMethods).
    this._invoke = enqueue;
  }

  defineIteratorMethods(AsyncIterator.prototype);
  AsyncIterator.prototype[asyncIteratorSymbol] = function () {
    return this;
  };
  exports.AsyncIterator = AsyncIterator;

  // Note that simple async functions are implemented on top of
  // AsyncIterator objects; they just return a Promise for the value of
  // the final result produced by the iterator.
  exports.async = function(innerFn, outerFn, self, tryLocsList) {
    var iter = new AsyncIterator(
      wrap(innerFn, outerFn, self, tryLocsList)
    );

    return exports.isGeneratorFunction(outerFn)
      ? iter // If outerFn is a generator, return the full iterator.
      : iter.next().then(function(result) {
          return result.done ? result.value : iter.next();
        });
  };

  function makeInvokeMethod(innerFn, self, context) {
    var state = GenStateSuspendedStart;

    return function invoke(method, arg) {
      if (state === GenStateExecuting) {
        throw new Error("Generator is already running");
      }

      if (state === GenStateCompleted) {
        if (method === "throw") {
          throw arg;
        }

        // Be forgiving, per 25.3.3.3.3 of the spec:
        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume
        return doneResult();
      }

      context.method = method;
      context.arg = arg;

      while (true) {
        var delegate = context.delegate;
        if (delegate) {
          var delegateResult = maybeInvokeDelegate(delegate, context);
          if (delegateResult) {
            if (delegateResult === ContinueSentinel) continue;
            return delegateResult;
          }
        }

        if (context.method === "next") {
          // Setting context._sent for legacy support of Babel's
          // function.sent implementation.
          context.sent = context._sent = context.arg;

        } else if (context.method === "throw") {
          if (state === GenStateSuspendedStart) {
            state = GenStateCompleted;
            throw context.arg;
          }

          context.dispatchException(context.arg);

        } else if (context.method === "return") {
          context.abrupt("return", context.arg);
        }

        state = GenStateExecuting;

        var record = tryCatch(innerFn, self, context);
        if (record.type === "normal") {
          // If an exception is thrown from innerFn, we leave state ===
          // GenStateExecuting and loop back for another invocation.
          state = context.done
            ? GenStateCompleted
            : GenStateSuspendedYield;

          if (record.arg === ContinueSentinel) {
            continue;
          }

          return {
            value: record.arg,
            done: context.done
          };

        } else if (record.type === "throw") {
          state = GenStateCompleted;
          // Dispatch the exception by looping back around to the
          // context.dispatchException(context.arg) call above.
          context.method = "throw";
          context.arg = record.arg;
        }
      }
    };
  }

  // Call delegate.iterator[context.method](context.arg) and handle the
  // result, either by returning a { value, done } result from the
  // delegate iterator, or by modifying context.method and context.arg,
  // setting context.delegate to null, and returning the ContinueSentinel.
  function maybeInvokeDelegate(delegate, context) {
    var method = delegate.iterator[context.method];
    if (method === undefined) {
      // A .throw or .return when the delegate iterator has no .throw
      // method always terminates the yield* loop.
      context.delegate = null;

      if (context.method === "throw") {
        // Note: ["return"] must be used for ES3 parsing compatibility.
        if (delegate.iterator["return"]) {
          // If the delegate iterator has a return method, give it a
          // chance to clean up.
          context.method = "return";
          context.arg = undefined;
          maybeInvokeDelegate(delegate, context);

          if (context.method === "throw") {
            // If maybeInvokeDelegate(context) changed context.method from
            // "return" to "throw", let that override the TypeError below.
            return ContinueSentinel;
          }
        }

        context.method = "throw";
        context.arg = new TypeError(
          "The iterator does not provide a 'throw' method");
      }

      return ContinueSentinel;
    }

    var record = tryCatch(method, delegate.iterator, context.arg);

    if (record.type === "throw") {
      context.method = "throw";
      context.arg = record.arg;
      context.delegate = null;
      return ContinueSentinel;
    }

    var info = record.arg;

    if (! info) {
      context.method = "throw";
      context.arg = new TypeError("iterator result is not an object");
      context.delegate = null;
      return ContinueSentinel;
    }

    if (info.done) {
      // Assign the result of the finished delegate to the temporary
      // variable specified by delegate.resultName (see delegateYield).
      context[delegate.resultName] = info.value;

      // Resume execution at the desired location (see delegateYield).
      context.next = delegate.nextLoc;

      // If context.method was "throw" but the delegate handled the
      // exception, let the outer generator proceed normally. If
      // context.method was "next", forget context.arg since it has been
      // "consumed" by the delegate iterator. If context.method was
      // "return", allow the original .return call to continue in the
      // outer generator.
      if (context.method !== "return") {
        context.method = "next";
        context.arg = undefined;
      }

    } else {
      // Re-yield the result returned by the delegate method.
      return info;
    }

    // The delegate iterator is finished, so forget it and continue with
    // the outer generator.
    context.delegate = null;
    return ContinueSentinel;
  }

  // Define Generator.prototype.{next,throw,return} in terms of the
  // unified ._invoke helper method.
  defineIteratorMethods(Gp);

  Gp[toStringTagSymbol] = "Generator";

  // A Generator should always return itself as the iterator object when the
  // @@iterator function is called on it. Some browsers' implementations of the
  // iterator prototype chain incorrectly implement this, causing the Generator
  // object to not be returned from this call. This ensures that doesn't happen.
  // See https://github.com/facebook/regenerator/issues/274 for more details.
  Gp[iteratorSymbol] = function() {
    return this;
  };

  Gp.toString = function() {
    return "[object Generator]";
  };

  function pushTryEntry(locs) {
    var entry = { tryLoc: locs[0] };

    if (1 in locs) {
      entry.catchLoc = locs[1];
    }

    if (2 in locs) {
      entry.finallyLoc = locs[2];
      entry.afterLoc = locs[3];
    }

    this.tryEntries.push(entry);
  }

  function resetTryEntry(entry) {
    var record = entry.completion || {};
    record.type = "normal";
    delete record.arg;
    entry.completion = record;
  }

  function Context(tryLocsList) {
    // The root entry object (effectively a try statement without a catch
    // or a finally block) gives us a place to store values thrown from
    // locations where there is no enclosing try statement.
    this.tryEntries = [{ tryLoc: "root" }];
    tryLocsList.forEach(pushTryEntry, this);
    this.reset(true);
  }

  exports.keys = function(object) {
    var keys = [];
    for (var key in object) {
      keys.push(key);
    }
    keys.reverse();

    // Rather than returning an object with a next method, we keep
    // things simple and return the next function itself.
    return function next() {
      while (keys.length) {
        var key = keys.pop();
        if (key in object) {
          next.value = key;
          next.done = false;
          return next;
        }
      }

      // To avoid creating an additional object, we just hang the .value
      // and .done properties off the next function object itself. This
      // also ensures that the minifier will not anonymize the function.
      next.done = true;
      return next;
    };
  };

  function values(iterable) {
    if (iterable) {
      var iteratorMethod = iterable[iteratorSymbol];
      if (iteratorMethod) {
        return iteratorMethod.call(iterable);
      }

      if (typeof iterable.next === "function") {
        return iterable;
      }

      if (!isNaN(iterable.length)) {
        var i = -1, next = function next() {
          while (++i < iterable.length) {
            if (hasOwn.call(iterable, i)) {
              next.value = iterable[i];
              next.done = false;
              return next;
            }
          }

          next.value = undefined;
          next.done = true;

          return next;
        };

        return next.next = next;
      }
    }

    // Return an iterator with no values.
    return { next: doneResult };
  }
  exports.values = values;

  function doneResult() {
    return { value: undefined, done: true };
  }

  Context.prototype = {
    constructor: Context,

    reset: function(skipTempReset) {
      this.prev = 0;
      this.next = 0;
      // Resetting context._sent for legacy support of Babel's
      // function.sent implementation.
      this.sent = this._sent = undefined;
      this.done = false;
      this.delegate = null;

      this.method = "next";
      this.arg = undefined;

      this.tryEntries.forEach(resetTryEntry);

      if (!skipTempReset) {
        for (var name in this) {
          // Not sure about the optimal order of these conditions:
          if (name.charAt(0) === "t" &&
              hasOwn.call(this, name) &&
              !isNaN(+name.slice(1))) {
            this[name] = undefined;
          }
        }
      }
    },

    stop: function() {
      this.done = true;

      var rootEntry = this.tryEntries[0];
      var rootRecord = rootEntry.completion;
      if (rootRecord.type === "throw") {
        throw rootRecord.arg;
      }

      return this.rval;
    },

    dispatchException: function(exception) {
      if (this.done) {
        throw exception;
      }

      var context = this;
      function handle(loc, caught) {
        record.type = "throw";
        record.arg = exception;
        context.next = loc;

        if (caught) {
          // If the dispatched exception was caught by a catch block,
          // then let that catch block handle the exception normally.
          context.method = "next";
          context.arg = undefined;
        }

        return !! caught;
      }

      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        var record = entry.completion;

        if (entry.tryLoc === "root") {
          // Exception thrown outside of any try block that could handle
          // it, so set the completion value of the entire function to
          // throw the exception.
          return handle("end");
        }

        if (entry.tryLoc <= this.prev) {
          var hasCatch = hasOwn.call(entry, "catchLoc");
          var hasFinally = hasOwn.call(entry, "finallyLoc");

          if (hasCatch && hasFinally) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            } else if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else if (hasCatch) {
            if (this.prev < entry.catchLoc) {
              return handle(entry.catchLoc, true);
            }

          } else if (hasFinally) {
            if (this.prev < entry.finallyLoc) {
              return handle(entry.finallyLoc);
            }

          } else {
            throw new Error("try statement without catch or finally");
          }
        }
      }
    },

    abrupt: function(type, arg) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc <= this.prev &&
            hasOwn.call(entry, "finallyLoc") &&
            this.prev < entry.finallyLoc) {
          var finallyEntry = entry;
          break;
        }
      }

      if (finallyEntry &&
          (type === "break" ||
           type === "continue") &&
          finallyEntry.tryLoc <= arg &&
          arg <= finallyEntry.finallyLoc) {
        // Ignore the finally entry if control is not jumping to a
        // location outside the try/catch block.
        finallyEntry = null;
      }

      var record = finallyEntry ? finallyEntry.completion : {};
      record.type = type;
      record.arg = arg;

      if (finallyEntry) {
        this.method = "next";
        this.next = finallyEntry.finallyLoc;
        return ContinueSentinel;
      }

      return this.complete(record);
    },

    complete: function(record, afterLoc) {
      if (record.type === "throw") {
        throw record.arg;
      }

      if (record.type === "break" ||
          record.type === "continue") {
        this.next = record.arg;
      } else if (record.type === "return") {
        this.rval = this.arg = record.arg;
        this.method = "return";
        this.next = "end";
      } else if (record.type === "normal" && afterLoc) {
        this.next = afterLoc;
      }

      return ContinueSentinel;
    },

    finish: function(finallyLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.finallyLoc === finallyLoc) {
          this.complete(entry.completion, entry.afterLoc);
          resetTryEntry(entry);
          return ContinueSentinel;
        }
      }
    },

    "catch": function(tryLoc) {
      for (var i = this.tryEntries.length - 1; i >= 0; --i) {
        var entry = this.tryEntries[i];
        if (entry.tryLoc === tryLoc) {
          var record = entry.completion;
          if (record.type === "throw") {
            var thrown = record.arg;
            resetTryEntry(entry);
          }
          return thrown;
        }
      }

      // The context.catch method must only be called with a location
      // argument that corresponds to a known catch block.
      throw new Error("illegal catch attempt");
    },

    delegateYield: function(iterable, resultName, nextLoc) {
      this.delegate = {
        iterator: values(iterable),
        resultName: resultName,
        nextLoc: nextLoc
      };

      if (this.method === "next") {
        // Deliberately forget the last sent value so that we don't
        // accidentally pass it on to the delegate.
        this.arg = undefined;
      }

      return ContinueSentinel;
    }
  };

  // Regardless of whether this script is executing as a CommonJS module
  // or not, return the runtime object so that we can declare the variable
  // regeneratorRuntime in the outer scope, which allows this module to be
  // injected easily by `bin/regenerator --include-runtime script.js`.
  return exports;

}(
  // If this script is executing as a CommonJS module, use module.exports
  // as the regeneratorRuntime namespace. Otherwise create a new empty
  // object. Either way, the resulting object will be used to initialize
  // the regeneratorRuntime variable at the top of this file.
   true ? module.exports : undefined
));

try {
  regeneratorRuntime = runtime;
} catch (accidentalStrictMode) {
  // This module should not be running in strict mode, so the above
  // assignment should always work unless something is misconfigured. Just
  // in case runtime.js accidentally runs in strict mode, we can escape
  // strict mode using a global Function call. This could conceivably fail
  // if a Content Security Policy forbids using Function, but in that case
  // the proper solution is to fix the accidental strict mode problem. If
  // you've misconfigured your bundler to force strict mode and applied a
  // CSP to forbid Function, and you're not willing to fix either of those
  // problems, please detail your unique predicament in a GitHub issue.
  Function("r", "regeneratorRuntime = r")(runtime);
}


/***/ }),

/***/ "./node_modules/webpack/buildin/amd-options.js":
/*!****************************************!*\
  !*** (webpack)/buildin/amd-options.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports) {

/* WEBPACK VAR INJECTION */(function(__webpack_amd_options__) {/* globals __webpack_amd_options__ */
module.exports = __webpack_amd_options__;

/* WEBPACK VAR INJECTION */}.call(this, {}))

/***/ }),

/***/ "./node_modules/webpack/buildin/harmony-module.js":
/*!*******************************************!*\
  !*** (webpack)/buildin/harmony-module.js ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = function(originalModule) {
	if (!originalModule.webpackPolyfill) {
		var module = Object.create(originalModule);
		// module.parent = undefined by default
		if (!module.children) module.children = [];
		Object.defineProperty(module, "loaded", {
			enumerable: true,
			get: function() {
				return module.l;
			}
		});
		Object.defineProperty(module, "id", {
			enumerable: true,
			get: function() {
				return module.i;
			}
		});
		Object.defineProperty(module, "exports", {
			enumerable: true
		});
		module.webpackPolyfill = 1;
	}
	return module;
};


/***/ }),

/***/ "./resources/js/ckeditor.js":
/*!**********************************!*\
  !*** ./resources/js/ckeditor.js ***!
  \**********************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(module) {/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/regenerator */ "./node_modules/@babel/runtime/regenerator/index.js");
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);
function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _get(target,property,receiver){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get;}else{_get=function _get(target,property,receiver){var base=_superPropBase(target,property);if(!base)return;var desc=Object.getOwnPropertyDescriptor(base,property);if(desc.get){return desc.get.call(receiver);}return desc.value;};}return _get(target,property,receiver||target);}function _superPropBase(object,property){while(!Object.prototype.hasOwnProperty.call(object,property)){object=_getPrototypeOf(object);if(object===null)break;}return object;}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread();}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance");}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter);}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest();}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance");}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}return _arr;}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call;}return _assertThisInitialized(self);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return self;}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _wrapNativeSuper(Class){var _cache=typeof Map==="function"?new Map():undefined;_wrapNativeSuper=function _wrapNativeSuper(Class){if(Class===null||!_isNativeFunction(Class))return Class;if(typeof Class!=="function"){throw new TypeError("Super expression must either be null or a function");}if(typeof _cache!=="undefined"){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper);}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor);}Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:false,writable:true,configurable:true}});return _setPrototypeOf(Wrapper,Class);};return _wrapNativeSuper(Class);}function isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}function _construct(Parent,args,Class){if(isNativeReflectConstruct()){_construct=Reflect.construct;}else{_construct=function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a);var instance=new Constructor();if(Class)_setPrototypeOf(instance,Class.prototype);return instance;};}return _construct.apply(null,arguments);}function _isNativeFunction(fn){return Function.toString.call(fn).indexOf("[native code]")!==-1;}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}/*!
 * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.
 * For licensing, see LICENSE.md.
 */(function(e){e["en"]=Object.assign(e["en"]||{},{a:"Image toolbar",b:"Media toolbar",c:"Table toolbar",d:"Saving changes",e:"Words: %0",f:"Characters: %0",g:"Align left",h:"Align right",i:"Align center",j:"Justify",k:"Text alignment",l:"Text alignment toolbar",m:"Block quote",n:"Choose heading",o:"Heading",p:"Yellow marker",q:"Green marker",r:"Pink marker",s:"Blue marker",t:"Red pen",u:"Green pen",v:"Remove highlight",w:"Highlight",x:"Text highlight toolbar",y:"media widget",z:"Bold",aa:"Italic",ab:"Strikethrough",ac:"Underline",ad:"Code",ae:"Subscript",af:"Superscript",ag:"Font Family",ah:"Default",ai:"Font Size",aj:"Tiny",ak:"Small",al:"Big",am:"Huge",an:"Font Background Color",ao:"Font Color",ap:"image widget",aq:"Enter image caption",ar:"Full size image",as:"Side image",at:"Left aligned image",au:"Centered image",av:"Right aligned image",aw:"Insert image",ax:"Upload failed",ay:"Widget toolbar",az:"Table properties",ba:"Cell properties",bb:"Horizontal line",bc:"Insert code block",bd:"Insert table",be:"Header column",bf:"Insert column left",bg:"Insert column right",bh:"Delete column",bi:"Column",bj:"Header row",bk:"Insert row below",bl:"Insert row above",bm:"Delete row",bn:"Row",bo:"Merge cell up",bp:"Merge cell right",bq:"Merge cell down",br:"Merge cell left",bs:"Split cell vertically",bt:"Split cell horizontally",bu:"Merge cells",bv:"Change image text alternative",bw:"Remove color",bx:"Document colors",by:"Upload in progress",bz:"Plain text",ca:"Dropdown toolbar",cb:"%0 of %1",cc:"Previous",cd:"Next",ce:"Black",cf:"Dim grey",cg:"Grey",ch:"Light grey",ci:"White",cj:"Red",ck:"Orange",cl:"Yellow",cm:"Light green",cn:"Green",co:"Aquamarine",cp:"Turquoise",cq:"Light blue",cr:"Blue",cs:"Purple",ct:"Undo",cu:"Redo",cv:"None",cw:"Solid",cx:"Dotted",cy:"Dashed",cz:"Double",da:"Groove",db:"Ridge",dc:"Inset",dd:"Outset",de:'The color is invalid. Try "#FF0000" or "rgb(255,0,0)" or "red".',df:'The value is invalid. Try "10px" or "2em" or simply "2".',dg:"Save",dh:"Cancel",di:"Text alternative",dj:"Border",dk:"Style",dl:"Width",dm:"Color",dn:"Background","do":"Dimensions",dp:"Height",dq:"Padding",dr:"Table cell text alignment",ds:"Horizontal text alignment toolbar",dt:"Vertical text alignment toolbar",du:"Align cell text to the left",dv:"Align cell text to the center",dw:"Align cell text to the right",dx:"Justify cell text",dy:"Align cell text to the top",dz:"Align cell text to the middle",ea:"Align cell text to the bottom",eb:"Editor toolbar",ec:"Show more items",ed:"Alignment",ee:"Table alignment toolbar",ef:"Align table to the left",eg:"Center table",eh:"Align table to the right",ei:"Paragraph",ej:"Heading 1",ek:"Heading 2",el:"Heading 3",em:"Heading 4",en:"Heading 5",eo:"Heading 6",ep:"Rich Text Editor, %0",eq:"Insert media",er:"The URL must not be empty.",es:"This media URL is not supported.",et:"Numbered List",eu:"Bulleted List",ev:"Link",ew:"Increase indent",ex:"Decrease indent",ey:"Open in a new tab",ez:"Downloadable",fa:"Unlink",fb:"Edit link",fc:"Open link in new tab",fd:"This link has no URL",fe:"Link URL",ff:"Paste the media URL in the input.",fg:"Tip: Paste the URL into the content to embed faster.",fh:"Media URL"});})(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={}));(function e(t,i){if((typeof exports==="undefined"?"undefined":_typeof(exports))==="object"&&( false?undefined:_typeof(module))==="object")module.exports=i();else if(typeof define==="function"&&__webpack_require__(/*! !webpack amd options */ "./node_modules/webpack/buildin/amd-options.js"))define([],i);else if((typeof exports==="undefined"?"undefined":_typeof(exports))==="object")exports["DecoupledDocumentEditor"]=i();else t["DecoupledDocumentEditor"]=i();})(window,function(){return function(e){var t={};function i(n){if(t[n]){return t[n].exports;}var o=t[n]={i:n,l:false,exports:{}};e[n].call(o.exports,o,o.exports,i);o.l=true;return o.exports;}i.m=e;i.c=t;i.d=function(e,t,n){if(!i.o(e,t)){Object.defineProperty(e,t,{enumerable:true,get:n});}};i.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});}Object.defineProperty(e,"__esModule",{value:true});};i.t=function(e,t){if(t&1)e=i(e);if(t&8)return e;if(t&4&&_typeof(e)==="object"&&e&&e.__esModule)return e;var n=Object.create(null);i.r(n);Object.defineProperty(n,"default",{enumerable:true,value:e});if(t&2&&typeof e!="string")for(var o in e){i.d(n,o,function(t){return e[t];}.bind(null,o));}return n;};i.n=function(e){var t=e&&e.__esModule?function t(){return e["default"];}:function t(){return e;};i.d(t,"a",t);return t;};i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t);};i.p="";return i(i.s=132);}([function(e,t,i){"use strict";i.d(t,"b",function(){return o;});i.d(t,"a",function(){return s;});var n="https://ckeditor.com/docs/ckeditor5/latest/framework/guides/support/error-codes.html";var o=/*#__PURE__*/function(_Error){_inherits(o,_Error);function o(e,t,i){var _this;_classCallCheck(this,o);e=s(e);if(i){e+=" "+JSON.stringify(i);}_this=_possibleConstructorReturn(this,_getPrototypeOf(o).call(this,e));_this.name="CKEditorError";_this.context=t;_this.data=i;return _this;}_createClass(o,[{key:"is",value:function is(e){return e==="CKEditorError";}}],[{key:"rethrowUnexpectedError",value:function rethrowUnexpectedError(e,t){if(e.is&&e.is("CKEditorError")){throw e;}var i=new o(e.message,t);i.stack=e.stack;throw i;}}]);return o;}(_wrapNativeSuper(Error));function s(e){var t=e.match(/^([^:]+):/);if(!t){return e;}return e+" Read more: ".concat(n,"#error-").concat(t[1],"\n");}},function(e,t,i){"use strict";var n=function e(){var t;return function e(){if(typeof t==="undefined"){t=Boolean(window&&document&&document.all&&!window.atob);}return t;};}();var o=function e(){var t={};return function e(i){if(typeof t[i]==="undefined"){var n=document.querySelector(i);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement){try{n=n.contentDocument.head;}catch(e){n=null;}}t[i]=n;}return t[i];};}();var s=[];function r(e){var t=-1;for(var i=0;i<s.length;i++){if(s[i].identifier===e){t=i;break;}}return t;}function a(e,t){var i={};var n=[];for(var o=0;o<e.length;o++){var a=e[o];var c=t.base?a[0]+t.base:a[0];var l=i[c]||0;var d="".concat(c," ").concat(l);i[c]=l+1;var u=r(d);var h={css:a[1],media:a[2],sourceMap:a[3]};if(u!==-1){s[u].references++;s[u].updater(h);}else{s.push({identifier:d,updater:g(h,t),references:1});}n.push(d);}return n;}function c(e){var t=document.createElement("style");var n=e.attributes||{};if(typeof n.nonce==="undefined"){var s=true?i.nc:undefined;if(s){n.nonce=s;}}Object.keys(n).forEach(function(e){t.setAttribute(e,n[e]);});if(typeof e.insert==="function"){e.insert(t);}else{var r=o(e.insert||"head");if(!r){throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");}r.appendChild(t);}return t;}function l(e){if(e.parentNode===null){return false;}e.parentNode.removeChild(e);}var d=function e(){var t=[];return function e(i,n){t[i]=n;return t.filter(Boolean).join("\n");};}();function u(e,t,i,n){var o=i?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet){e.styleSheet.cssText=d(t,o);}else{var s=document.createTextNode(o);var r=e.childNodes;if(r[t]){e.removeChild(r[t]);}if(r.length){e.insertBefore(s,r[t]);}else{e.appendChild(s);}}}function h(e,t,i){var n=i.css;var o=i.media;var s=i.sourceMap;if(o){e.setAttribute("media",o);}else{e.removeAttribute("media");}if(s&&btoa){n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */");}if(e.styleSheet){e.styleSheet.cssText=n;}else{while(e.firstChild){e.removeChild(e.firstChild);}e.appendChild(document.createTextNode(n));}}var f=null;var m=0;function g(e,t){var i;var n;var o;if(t.singleton){var s=m++;i=f||(f=c(t));n=u.bind(null,i,s,false);o=u.bind(null,i,s,true);}else{i=c(t);n=h.bind(null,i,t);o=function e(){l(i);};}n(e);return function t(i){if(i){if(i.css===e.css&&i.media===e.media&&i.sourceMap===e.sourceMap){return;}n(e=i);}else{o();}};}e.exports=function(e,t){t=t||{};if(!t.singleton&&typeof t.singleton!=="boolean"){t.singleton=n();}e=e||[];var i=a(e,t);return function e(n){n=n||[];if(Object.prototype.toString.call(n)!=="[object Array]"){return;}for(var o=0;o<i.length;o++){var c=i[o];var l=r(c);s[l].references--;}var d=a(n,t);for(var u=0;u<i.length;u++){var h=i[u];var f=r(h);if(s[f].references===0){s[f].updater();s.splice(f,1);}}i=d;};};},,function(e,t,i){"use strict";var n=i(7);var o=(typeof self==="undefined"?"undefined":_typeof(self))=="object"&&self&&self.Object===Object&&self;var s=n["a"]||o||Function("return this")();t["a"]=s;},function(e,t,i){"use strict";(function(e){var n=i(3);var o=i(15);var s=(typeof exports==="undefined"?"undefined":_typeof(exports))=="object"&&exports&&!exports.nodeType&&exports;var r=s&&_typeof(e)=="object"&&e&&!e.nodeType&&e;var a=r&&r.exports===s;var c=a?n["a"].Buffer:undefined;var l=c?c.isBuffer:undefined;var d=l||o["a"];t["a"]=d;}).call(this,i(9)(e));},function(e,t,i){"use strict";(function(e){var n=i(7);var o=(typeof exports==="undefined"?"undefined":_typeof(exports))=="object"&&exports&&!exports.nodeType&&exports;var s=o&&_typeof(e)=="object"&&e&&!e.nodeType&&e;var r=s&&s.exports===o;var a=r&&n["a"].process;var c=function(){try{var e=s&&s.require&&s.require("util").types;if(e){return e;}return a&&a.binding&&a.binding("util");}catch(e){}}();t["a"]=c;}).call(this,i(9)(e));},function(e,t,i){"use strict";(function(e){var t=i(0);var n="18.0.0";var o=(typeof window==="undefined"?"undefined":_typeof(window))==="object"?window:e;if(o.CKEDITOR_VERSION){throw new t["b"]("ckeditor-duplicated-modules: Some CKEditor 5 modules are duplicated.",null);}else{o.CKEDITOR_VERSION=n;}}).call(this,i(10));},function(e,t,i){"use strict";(function(e){var i=_typeof(e)=="object"&&e&&e.Object===Object&&e;t["a"]=i;}).call(this,i(10));},function(e,t,i){"use strict";(function(e){var n=i(3);var o=(typeof exports==="undefined"?"undefined":_typeof(exports))=="object"&&exports&&!exports.nodeType&&exports;var s=o&&_typeof(e)=="object"&&e&&!e.nodeType&&e;var r=s&&s.exports===o;var a=r?n["a"].Buffer:undefined,c=a?a.allocUnsafe:undefined;function l(e,t){if(t){return e.slice();}var i=e.length,n=c?c(i):new e.constructor(i);e.copy(n);return n;}t["a"]=l;}).call(this,i(9)(e));},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);if(!t.children)t.children=[];Object.defineProperty(t,"loaded",{enumerable:true,get:function get(){return t.l;}});Object.defineProperty(t,"id",{enumerable:true,get:function get(){return t.i;}});Object.defineProperty(t,"exports",{enumerable:true});t.webpackPolyfill=1;}return t;};},function(e,t){var i;i=function(){return this;}();try{i=i||new Function("return this")();}catch(e){if((typeof window==="undefined"?"undefined":_typeof(window))==="object")i=window;}e.exports=i;},function(e,t,i){var n=i(1);var o=i(51);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t,i){var n=i(1);var o=i(102);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t,i){var n=i(1);var o=i(123);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t,i){var n=i(1);var o=i(124);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t,i){"use strict";function n(){return false;}t["a"]=n;},function(e){e.exports=JSON.parse('{"ar":{"latex":"LaTeX","cancel":"إلغاء","accept":"موا�?ق","manual":"الدليل","insert_math":"إدراج صيغة رياضية - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"ca":{"latex":"LaTeX","cancel":"Cancel·lar","accept":"Acceptar","manual":"Manual","insert_math":"Inserir fórmula matemàtica - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"cs":{"latex":"LaTeX","cancel":"Storno","accept":"OK","manual":"Příru�?ka","insert_math":"Vložit matematický vzorec - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"da":{"latex":"LaTeX","cancel":"Annuller","accept":"OK","manual":"Brugervejledning","insert_math":"Indsæt matematisk formel - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"de":{"latex":"LaTeX","cancel":"Abbrechen","accept":"OK","manual":"Handbuch","insert_math":"Mathematische Formel einfügen - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"en":{"latex":"LaTeX","cancel":"Cancel","accept":"OK","manual":"Manual","insert_math":"Insert a math equation - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"es":{"latex":"LaTeX","cancel":"Cancelar","accept":"Aceptar","manual":"Manual","insert_math":"Insertar fórmula matemática - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"et":{"latex":"LaTeX","cancel":"Loobu","accept":"OK","manual":"Käsiraamat","insert_math":"Lisa matemaatiline valem – WIRIS","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"eu":{"latex":"LaTeX","cancel":"Ezeztatu","accept":"Onartu","manual":"Gida","insert_math":"Txertatu matematikako formula - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"fi":{"latex":"LaTeX","cancel":"Peruuta","accept":"OK","manual":"Manual","insert_math":"Liitä matemaattinen kaava - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"fr":{"latex":"LaTeX","cancel":"Annuler","accept":"OK","manual":"Manuel","insert_math":"Insérer une formule mathématique - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"gl":{"latex":"LaTeX","cancel":"Cancelar","accept":"Aceptar","manual":"Manual","insert_math":"Inserir fórmula matemática - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"he":{"latex":"LaTeX","cancel":"ביטול","accept":"�?ישור","manual":"מדריך","insert_math":"הוסף נוסחה מתמטית - MathType","insert_chem":"הוספת כתיבה כימית - ChemType","minimize":"מזערי","maximize":"מרבי","fullscreen":"מסך מל�?","exit_fullscreen":"יצי�?ה ממצב מסך מל�?","close":"סגירה","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"ה�?�? לצ�?ת? שינויי�? �?שר בוצעו ימחקו.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" �?יננה פונקציה","exception_invalid_date_format":"תסדיר ת�?ריך �?ינו תקין : ","exception_casting":"ל�? ניתן להמיר ","exception_casting_to":" ל "},"hr":{"latex":"LaTeX","cancel":"Poništi","accept":"U redu","manual":"Priru�?nik","insert_math":"Umetnite matemati�?ku formulu - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"hu":{"latex":"LaTeX","cancel":"Mégsem","accept":"OK","manual":"Kézikönyv","insert_math":"Matematikai képlet beszúrása - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"it":{"latex":"LaTeX","cancel":"Annulla","accept":"Accetta","manual":"Manuale","insert_math":"Inserisci una formula matematica - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"ja":{"latex":"LaTeX","cancel":"キャンセル","accept":"OK","manual":"マニュアル","insert_math":"数�?を挿入 - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"ko":{"latex":"LaTeX","cancel":"취소","accept":"승�?�","manual":"설명서","insert_math":"수학 공�? 삽입 - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"nl":{"latex":"LaTeX","cancel":"Annuleren","accept":"OK","manual":"Handleiding","insert_math":"Wiskundige formule invoegen - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"no":{"latex":"LaTeX","cancel":"Avbryt","accept":"OK","manual":"Håndbok","insert_math":"Sett inn matematikkformel - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"pl":{"latex":"LaTeX","cancel":"Anuluj","accept":"OK","manual":"Instrukcja","insert_math":"Wstaw formułę matematyczną - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"pt":{"latex":"LaTeX","cancel":"Cancelar","accept":"OK","manual":"Manual","insert_math":"Inserir fórmula matemática - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"pt_br":{"latex":"LaTeX","cancel":"Cancelar","accept":"OK","manual":"Manual","insert_math":"Inserir fórmula matemática - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"ru":{"latex":"LaTeX","cancel":"отмена","accept":"OK","manual":"вручную","insert_math":"В�?тавить математиче�?кую формулу: WIRIS","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"sv":{"latex":"LaTeX","cancel":"Avbryt","accept":"OK","manual":"Bruksanvisning","insert_math":"Infoga matematisk formel - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"tr":{"latex":"LaTeX","cancel":"Vazgeç","accept":"Tamam","manual":"Kılavuz","insert_math":"Matematik formülü ekle - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"zh":{"latex":"LaTeX","cancel":"�?�消","accept":"确定","manual":"手册","insert_math":"�?�入数学公�? - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"el":{"latex":"LaTeX","cancel":"Άκυ�?ο","accept":"ΟΚ","manual":"Χει�?οκίνητα","insert_math":"Εισαγωγή μαθηματικο�? τ�?που - MathType","insert_chem":"Insert a chemistry formula - ChemType","minimize":"Minimize","maximize":"Maximize","fullscreen":"Full-screen","exit_fullscreen":"Exit full-screen","close":"Close","mathtype":"MathType","title_modalwindow":"MathType modal window","close_modal_warning":"Are you sure you want to leave? The changes you made will be lost.","latex_name_label":"Latex Formula","browser_no_compatible":"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.","error_convert_accessibility":"Error converting from MathML to accessible text.","exception_cross_site":"Cross site scripting is only allowed for HTTP.","exception_high_surrogate":"High surrogate not followed by low surrogate in fixedCharCodeAt()","exception_string_length":"Invalid string. Length must be a multiple of 4","exception_key_nonobject":"Object.keys called on non-object","exception_null_or_undefined":" this is null or not defined","exception_not_function":" is not a function","exception_invalid_date_format":"Invalid date format : ","exception_casting":"Cannot cast ","exception_casting_to":" to "},"":{}}');},function(e,t,i){var n=i(1);var o=i(18);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck.ck-placeholder:before,.ck .ck-placeholder:before{content:attr(data-placeholder);pointer-events:none}.ck.ck-read-only .ck-placeholder:before{display:none}.ck.ck-placeholder:before,.ck .ck-placeholder:before{cursor:text;color:var(--ck-color-engine-placeholder-text)}";},function(e,t,i){var n=i(1);var o=i(20);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck-hidden{display:none!important}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{box-sizing:border-box;width:auto;height:auto;position:static}:root{--ck-z-default:1;--ck-z-modal:calc(var(--ck-z-default) + 999);--ck-color-base-foreground:#fafafa;--ck-color-base-background:#fff;--ck-color-base-border:#c4c4c4;--ck-color-base-action:#61b045;--ck-color-base-focus:#6cb5f9;--ck-color-base-text:#333;--ck-color-base-active:#198cf0;--ck-color-base-active-focus:#0e7fe1;--ck-color-base-error:#db3700;--ck-color-focus-border:#1f89e5;--ck-color-focus-outer-shadow:#bcdefb;--ck-color-focus-disabled-shadow:rgba(119,186,248,0.3);--ck-color-focus-error-shadow:rgba(255,64,31,0.3);--ck-color-text:var(--ck-color-base-text);--ck-color-shadow-drop:rgba(0,0,0,0.15);--ck-color-shadow-drop-active:rgba(0,0,0,0.2);--ck-color-shadow-inner:rgba(0,0,0,0.1);--ck-color-button-default-background:transparent;--ck-color-button-default-hover-background:#e6e6e6;--ck-color-button-default-active-background:#d9d9d9;--ck-color-button-default-active-shadow:#bfbfbf;--ck-color-button-default-disabled-background:transparent;--ck-color-button-on-background:#dedede;--ck-color-button-on-hover-background:#c4c4c4;--ck-color-button-on-active-background:#bababa;--ck-color-button-on-active-shadow:#a1a1a1;--ck-color-button-on-disabled-background:#dedede;--ck-color-button-action-background:var(--ck-color-base-action);--ck-color-button-action-hover-background:#579e3d;--ck-color-button-action-active-background:#53973b;--ck-color-button-action-active-shadow:#498433;--ck-color-button-action-disabled-background:#7ec365;--ck-color-button-action-text:var(--ck-color-base-background);--ck-color-button-save:#008a00;--ck-color-button-cancel:#db3700;--ck-color-switch-button-off-background:#b0b0b0;--ck-color-switch-button-off-hover-background:#a3a3a3;--ck-color-switch-button-on-background:var(--ck-color-button-action-background);--ck-color-switch-button-on-hover-background:#579e3d;--ck-color-switch-button-inner-background:var(--ck-color-base-background);--ck-color-switch-button-inner-shadow:rgba(0,0,0,0.1);--ck-color-dropdown-panel-background:var(--ck-color-base-background);--ck-color-dropdown-panel-border:var(--ck-color-base-border);--ck-color-input-background:var(--ck-color-base-background);--ck-color-input-border:#c7c7c7;--ck-color-input-error-border:var(--ck-color-base-error);--ck-color-input-text:var(--ck-color-base-text);--ck-color-input-disabled-background:#f2f2f2;--ck-color-input-disabled-border:#c7c7c7;--ck-color-input-disabled-text:#5c5c5c;--ck-color-list-background:var(--ck-color-base-background);--ck-color-list-button-hover-background:var(--ck-color-button-default-hover-background);--ck-color-list-button-on-background:var(--ck-color-base-active);--ck-color-list-button-on-background-focus:var(--ck-color-base-active-focus);--ck-color-list-button-on-text:var(--ck-color-base-background);--ck-color-panel-background:var(--ck-color-base-background);--ck-color-panel-border:var(--ck-color-base-border);--ck-color-toolbar-background:var(--ck-color-base-foreground);--ck-color-toolbar-border:var(--ck-color-base-border);--ck-color-tooltip-background:var(--ck-color-base-text);--ck-color-tooltip-text:var(--ck-color-base-background);--ck-color-engine-placeholder-text:#707070;--ck-color-upload-bar-background:#6cb5f9;--ck-color-link-default:#0000f0;--ck-color-link-selected-background:rgba(31,177,255,0.1);--ck-disabled-opacity:.5;--ck-focus-outer-shadow-geometry:0 0 0 3px;--ck-focus-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-outer-shadow);--ck-focus-disabled-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-disabled-shadow);--ck-focus-error-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-error-shadow);--ck-focus-ring:1px solid var(--ck-color-focus-border);--ck-font-size-base:13px;--ck-line-height-base:1.84615;--ck-font-face:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;--ck-font-size-tiny:0.7em;--ck-font-size-small:0.75em;--ck-font-size-normal:1em;--ck-font-size-big:1.4em;--ck-font-size-large:1.8em;--ck-ui-component-min-height:2.3em}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{margin:0;padding:0;border:0;background:transparent;text-decoration:none;vertical-align:middle;transition:none;word-wrap:break-word}.ck.ck-reset_all,.ck.ck-reset_all *{border-collapse:collapse;font:normal normal normal var(--ck-font-size-base)/var(--ck-line-height-base) var(--ck-font-face);color:var(--ck-color-text);text-align:left;white-space:nowrap;cursor:auto;float:none}.ck.ck-reset_all .ck-rtl *{text-align:right}.ck.ck-reset_all iframe{vertical-align:inherit}.ck.ck-reset_all textarea{white-space:pre-wrap}.ck.ck-reset_all input[type=password],.ck.ck-reset_all input[type=text],.ck.ck-reset_all textarea{cursor:text}.ck.ck-reset_all input[type=password][disabled],.ck.ck-reset_all input[type=text][disabled],.ck.ck-reset_all textarea[disabled]{cursor:default}.ck.ck-reset_all fieldset{padding:10px;border:2px groove #dfdee3}.ck.ck-reset_all button::-moz-focus-inner{padding:0;border:0}.ck[dir=rtl],.ck[dir=rtl] .ck{text-align:right}:root{--ck-border-radius:2px;--ck-inner-shadow:2px 2px 3px var(--ck-color-shadow-inner) inset;--ck-drop-shadow:0 1px 2px 1px var(--ck-color-shadow-drop);--ck-drop-shadow-active:0 3px 6px 1px var(--ck-color-shadow-drop-active);--ck-spacing-unit:0.6em;--ck-spacing-large:calc(var(--ck-spacing-unit)*1.5);--ck-spacing-standard:var(--ck-spacing-unit);--ck-spacing-medium:calc(var(--ck-spacing-unit)*0.8);--ck-spacing-small:calc(var(--ck-spacing-unit)*0.5);--ck-spacing-tiny:calc(var(--ck-spacing-unit)*0.3);--ck-spacing-extra-tiny:calc(var(--ck-spacing-unit)*0.16)}";},function(e,t,i){var n=i(1);var o=i(22);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck.ck-editor__editable:not(.ck-editor__nested-editable){border-radius:0}.ck-rounded-corners .ck.ck-editor__editable:not(.ck-editor__nested-editable),.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-focused{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0}.ck.ck-editor__editable_inline{overflow:auto;padding:0 var(--ck-spacing-standard);border:1px solid transparent}.ck.ck-editor__editable_inline[dir=ltr]{text-align:left}.ck.ck-editor__editable_inline[dir=rtl]{text-align:right}.ck.ck-editor__editable_inline>:first-child{margin-top:var(--ck-spacing-large)}.ck.ck-editor__editable_inline>:last-child{margin-bottom:var(--ck-spacing-large)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_n]:after{border-bottom-color:var(--ck-color-base-foreground)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_s]:after{border-top-color:var(--ck-color-base-foreground)}";},function(e,t,i){var n=i(1);var o=i(24);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck.ck-dropdown{display:inline-block;position:relative}.ck.ck-dropdown .ck-dropdown__arrow{pointer-events:none;z-index:var(--ck-z-default)}.ck.ck-dropdown .ck-button.ck-dropdown__button{width:100%}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on .ck-tooltip{display:none}.ck.ck-dropdown .ck-dropdown__panel{-webkit-backface-visibility:hidden;display:none;z-index:var(--ck-z-modal);position:absolute}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel-visible{display:inline-block}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw{bottom:100%}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{top:100%;bottom:auto}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se{left:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{right:0}:root{--ck-dropdown-arrow-size:calc(0.5*var(--ck-icon-size))}.ck.ck-dropdown{font-size:inherit}.ck.ck-dropdown .ck-dropdown__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-dropdown .ck-dropdown__arrow{right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-dropdown .ck-dropdown__arrow{left:var(--ck-spacing-standard);margin-right:var(--ck-spacing-small)}.ck.ck-dropdown.ck-disabled .ck-dropdown__arrow{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label{width:7em;overflow:hidden;text-overflow:ellipsis}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown__panel{border-radius:0}.ck-rounded-corners .ck.ck-dropdown__panel,.ck.ck-dropdown__panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-dropdown__panel{box-shadow:var(--ck-drop-shadow),0 0;background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);bottom:0;min-width:100%}.ck.ck-dropdown__panel.ck-dropdown__panel_se{border-top-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_sw{border-top-right-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_ne{border-bottom-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_nw{border-bottom-right-radius:0}";},function(e,t,i){var n=i(1);var o=i(26);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck.ck-icon{vertical-align:middle}:root{--ck-icon-size:calc(var(--ck-line-height-base)*var(--ck-font-size-normal))}.ck.ck-icon{width:var(--ck-icon-size);height:var(--ck-icon-size);font-size:.8333350694em;will-change:transform}.ck.ck-icon,.ck.ck-icon *{color:inherit;cursor:inherit}.ck.ck-icon :not([fill]){fill:currentColor}";},function(e,t,i){var n=i(1);var o=i(28);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports='.ck.ck-tooltip,.ck.ck-tooltip .ck-tooltip__text:after{position:absolute;pointer-events:none;-webkit-backface-visibility:hidden}.ck.ck-tooltip{visibility:hidden;opacity:0;display:none;z-index:var(--ck-z-modal)}.ck.ck-tooltip .ck-tooltip__text{display:inline-block}.ck.ck-tooltip .ck-tooltip__text:after{content:"";width:0;height:0}:root{--ck-tooltip-arrow-size:5px}.ck.ck-tooltip{left:50%;top:0;transition:opacity .2s ease-in-out .2s}.ck.ck-tooltip .ck-tooltip__text{border-radius:0}.ck-rounded-corners .ck.ck-tooltip .ck-tooltip__text,.ck.ck-tooltip .ck-tooltip__text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-tooltip .ck-tooltip__text{font-size:.9em;line-height:1.5;color:var(--ck-color-tooltip-text);padding:var(--ck-spacing-small) var(--ck-spacing-medium);background:var(--ck-color-tooltip-background);position:relative;left:-50%}.ck.ck-tooltip .ck-tooltip__text:after{transition:opacity .2s ease-in-out .2s;border-style:solid;left:50%}.ck.ck-tooltip.ck-tooltip_s{bottom:calc(-1*var(--ck-tooltip-arrow-size));transform:translateY(100%)}.ck.ck-tooltip.ck-tooltip_s .ck-tooltip__text:after{top:calc(-1*var(--ck-tooltip-arrow-size));transform:translateX(-50%);border-left-color:transparent;border-bottom-color:var(--ck-color-tooltip-background);border-right-color:transparent;border-top-color:transparent;border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:var(--ck-tooltip-arrow-size);border-top-width:0}.ck.ck-tooltip.ck-tooltip_n{top:calc(-1*var(--ck-tooltip-arrow-size));transform:translateY(-100%)}.ck.ck-tooltip.ck-tooltip_n .ck-tooltip__text:after{bottom:calc(-1*var(--ck-tooltip-arrow-size));transform:translateX(-50%);border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent;border-top-color:var(--ck-color-tooltip-background);border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:0;border-right-width:var(--ck-tooltip-arrow-size);border-top-width:var(--ck-tooltip-arrow-size)}';},function(e,t,i){var n=i(1);var o=i(30);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck.ck-button,a.ck.ck-button{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:block}@media (hover:none){.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:none}}.ck.ck-button,a.ck.ck-button{position:relative;display:inline-flex;align-items:center;justify-content:left}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{display:none}.ck.ck-button.ck-button_with-text .ck-button__label,a.ck.ck-button.ck-button_with-text .ck-button__label{display:inline-block}.ck.ck-button:not(.ck-button_with-text),a.ck.ck-button:not(.ck-button_with-text){justify-content:center}.ck.ck-button:hover .ck-tooltip,a.ck.ck-button:hover .ck-tooltip{visibility:visible;opacity:1}.ck.ck-button:focus:not(:hover) .ck-tooltip,a.ck.ck-button:focus:not(:hover) .ck-tooltip{display:none}.ck.ck-button,a.ck.ck-button{background:var(--ck-color-button-default-background)}.ck.ck-button:not(.ck-disabled):hover,a.ck.ck-button:not(.ck-disabled):hover{background:var(--ck-color-button-default-hover-background)}.ck.ck-button:not(.ck-disabled):active,a.ck.ck-button:not(.ck-disabled):active{background:var(--ck-color-button-default-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-default-active-shadow)}.ck.ck-button.ck-disabled,a.ck.ck-button.ck-disabled{background:var(--ck-color-button-default-disabled-background)}.ck.ck-button,a.ck.ck-button{border-radius:0}.ck-rounded-corners .ck.ck-button,.ck-rounded-corners a.ck.ck-button,.ck.ck-button.ck-rounded-corners,a.ck.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-button,a.ck.ck-button{white-space:nowrap;cursor:default;vertical-align:middle;padding:var(--ck-spacing-tiny);text-align:center;min-width:var(--ck-ui-component-min-height);min-height:var(--ck-ui-component-min-height);line-height:1;font-size:inherit;border:1px solid transparent;transition:box-shadow .2s ease-in-out,border .2s ease-in-out;-webkit-appearance:none}.ck.ck-button:active,.ck.ck-button:focus,a.ck.ck-button:active,a.ck.ck-button:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-button .ck-button__icon use,.ck.ck-button .ck-button__icon use *,a.ck.ck-button .ck-button__icon use,a.ck.ck-button .ck-button__icon use *{color:inherit}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{font-size:inherit;font-weight:inherit;color:inherit;cursor:inherit;vertical-align:middle}[dir=ltr] .ck.ck-button .ck-button__label,[dir=ltr] a.ck.ck-button .ck-button__label{text-align:left}[dir=rtl] .ck.ck-button .ck-button__label,[dir=rtl] a.ck.ck-button .ck-button__label{text-align:right}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{color:inherit}[dir=ltr] .ck.ck-button .ck-button__keystroke,[dir=ltr] a.ck.ck-button .ck-button__keystroke{margin-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-button .ck-button__keystroke,[dir=rtl] a.ck.ck-button .ck-button__keystroke{margin-right:var(--ck-spacing-large)}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{font-weight:700;opacity:.7}.ck.ck-button.ck-disabled:active,.ck.ck-button.ck-disabled:focus,a.ck.ck-button.ck-disabled:active,a.ck.ck-button.ck-disabled:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-button.ck-disabled .ck-button__icon,a.ck.ck-button.ck-disabled .ck-button__icon{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__label,a.ck.ck-button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__keystroke,a.ck.ck-button.ck-disabled .ck-button__keystroke{opacity:.3}.ck.ck-button.ck-button_with-text,a.ck.ck-button.ck-button_with-text{padding:var(--ck-spacing-tiny) var(--ck-spacing-standard)}[dir=ltr] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=ltr] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-left:calc(-1*var(--ck-spacing-small));margin-right:var(--ck-spacing-small)}[dir=rtl] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=rtl] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-right:calc(-1*var(--ck-spacing-small));margin-left:var(--ck-spacing-small)}.ck.ck-button.ck-button_with-keystroke .ck-button__label,a.ck.ck-button.ck-button_with-keystroke .ck-button__label{flex-grow:1}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{background:var(--ck-color-button-on-background)}.ck.ck-button.ck-on:not(.ck-disabled):hover,a.ck.ck-button.ck-on:not(.ck-disabled):hover{background:var(--ck-color-button-on-hover-background)}.ck.ck-button.ck-on:not(.ck-disabled):active,a.ck.ck-button.ck-on:not(.ck-disabled):active{background:var(--ck-color-button-on-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-on-active-shadow)}.ck.ck-button.ck-on.ck-disabled,a.ck.ck-button.ck-on.ck-disabled{background:var(--ck-color-button-on-disabled-background)}.ck.ck-button.ck-button-save,a.ck.ck-button.ck-button-save{color:var(--ck-color-button-save)}.ck.ck-button.ck-button-cancel,a.ck.ck-button.ck-button-cancel{color:var(--ck-color-button-cancel)}.ck.ck-button-action,a.ck.ck-button-action{background:var(--ck-color-button-action-background)}.ck.ck-button-action:not(.ck-disabled):hover,a.ck.ck-button-action:not(.ck-disabled):hover{background:var(--ck-color-button-action-hover-background)}.ck.ck-button-action:not(.ck-disabled):active,a.ck.ck-button-action:not(.ck-disabled):active{background:var(--ck-color-button-action-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-action-active-shadow)}.ck.ck-button-action.ck-disabled,a.ck.ck-button-action.ck-disabled{background:var(--ck-color-button-action-disabled-background)}.ck.ck-button-action,a.ck.ck-button-action{color:var(--ck-color-button-action-text)}.ck.ck-button-bold,a.ck.ck-button-bold{font-weight:700}";},function(e,t,i){var n=i(1);var o=i(32);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck.ck-list{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-direction:column}.ck.ck-list .ck-list__item,.ck.ck-list .ck-list__separator{display:block}.ck.ck-list .ck-list__item>:focus{position:relative;z-index:var(--ck-z-default)}.ck.ck-list{border-radius:0}.ck-rounded-corners .ck.ck-list,.ck.ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-list{list-style-type:none;background:var(--ck-color-list-background)}.ck.ck-list__item{cursor:default;min-width:12em}.ck.ck-list__item .ck-button{min-height:unset;width:100%;text-align:left;border-radius:0;padding:calc(0.2*var(--ck-line-height-base)*var(--ck-font-size-base)) calc(0.4*var(--ck-line-height-base)*var(--ck-font-size-base))}.ck.ck-list__item .ck-button .ck-button__label{line-height:calc(1.2*var(--ck-line-height-base)*var(--ck-font-size-base))}.ck.ck-list__item .ck-button:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on{background:var(--ck-color-list-button-on-background);color:var(--ck-color-list-button-on-text)}.ck.ck-list__item .ck-button.ck-on:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-on-background-focus)}.ck.ck-list__item .ck-button.ck-on:focus:not(.ck-disabled){border-color:var(--ck-color-base-background)}.ck.ck-list__item .ck-button:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background)}.ck.ck-list__item .ck-switchbutton.ck-on{background:var(--ck-color-list-background);color:inherit}.ck.ck-list__item .ck-switchbutton.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background);color:inherit}.ck.ck-list__separator{height:1px;width:100%;background:var(--ck-color-base-border)}";},function(e,t,i){var n=i(1);var o=i(34);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{display:block}:root{--ck-switch-button-toggle-width:2.6153846154em;--ck-switch-button-toggle-inner-size:1.0769230769em;--ck-switch-button-toggle-spacing:1px;--ck-switch-button-translation:1.3846153847em}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__label{margin-right:calc(2*var(--ck-spacing-large))}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__label{margin-left:calc(2*var(--ck-spacing-large))}.ck.ck-button.ck-switchbutton .ck-button__toggle{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle.ck-rounded-corners{border-radius:var(--ck-border-radius)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-left:auto}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-right:auto}.ck.ck-button.ck-switchbutton .ck-button__toggle{transition:background .4s ease;width:var(--ck-switch-button-toggle-width);background:var(--ck-color-switch-button-off-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:calc(0.5*var(--ck-border-radius))}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{margin:var(--ck-switch-button-toggle-spacing);width:var(--ck-switch-button-toggle-inner-size);height:var(--ck-switch-button-toggle-inner-size);background:var(--ck-color-switch-button-inner-background);transition:all .3s ease}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover{background:var(--ck-color-switch-button-off-hover-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover .ck-button__toggle__inner{box-shadow:0 0 0 5px var(--ck-color-switch-button-inner-shadow)}.ck.ck-button.ck-switchbutton.ck-disabled .ck-button__toggle{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle{background:var(--ck-color-switch-button-on-background)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle:hover{background:var(--ck-color-switch-button-on-hover-background)}[dir=ltr] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(var(--ck-switch-button-translation))}[dir=rtl] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(calc(-1*var(--ck-switch-button-translation)))}";},function(e,t,i){var n=i(1);var o=i(36);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck.ck-toolbar-dropdown .ck.ck-toolbar .ck.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar-dropdown .ck-dropdown__panel .ck-button:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-toolbar-dropdown .ck-toolbar{border:0}";},function(e,t,i){var n=i(1);var o=i(38);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck.ck-dropdown .ck-dropdown__panel .ck-list{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list,.ck.ck-dropdown .ck-dropdown__panel .ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}";},function(e,t,i){var n=i(1);var o=i(40);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck.ck-toolbar{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-flow:row nowrap;align-items:center}.ck.ck-toolbar>.ck-toolbar__items{display:flex;flex-flow:row wrap;align-items:center;flex-grow:1}.ck.ck-toolbar .ck.ck-toolbar__separator{display:inline-block}.ck.ck-toolbar .ck.ck-toolbar__separator:first-child,.ck.ck-toolbar .ck.ck-toolbar__separator:last-child{display:none}.ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items{flex-direction:column}.ck.ck-toolbar.ck-toolbar_floating>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck-dropdown__button .ck-dropdown__arrow{display:none}.ck.ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-toolbar,.ck.ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-toolbar{background:var(--ck-color-toolbar-background);padding:0 var(--ck-spacing-small);border:1px solid var(--ck-color-toolbar-border)}.ck.ck-toolbar .ck.ck-toolbar__separator{align-self:stretch;width:1px;min-width:1px;margin-top:0;margin-bottom:0;background:var(--ck-color-toolbar-border)}.ck.ck-toolbar>.ck-toolbar__items>*{margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small);margin-right:var(--ck-spacing-small)}.ck.ck-toolbar>.ck-toolbar__items:empty+.ck.ck-toolbar__separator{display:none}.ck.ck-toolbar>.ck-toolbar__items>*,.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown{margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar.ck-toolbar_vertical{padding:0}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items>.ck{width:100%;margin:0;border-radius:0;border:0}.ck.ck-toolbar.ck-toolbar_compact{padding:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>*{margin:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>:not(:first-child):not(:last-child){border-radius:0}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck.ck-button.ck-dropdown__button{padding-left:var(--ck-spacing-tiny)}.ck-toolbar-container .ck.ck-toolbar{border:0}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck{margin-right:0}.ck.ck-toolbar[dir=rtl]:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-left:0}.ck.ck-toolbar[dir=rtl].ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-toolbar[dir=rtl].ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-top-right-radius:0;border-bottom-right-radius:0}.ck.ck-toolbar[dir=rtl]>.ck.ck-toolbar__separator,[dir=rtl] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl].ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=rtl] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child){margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr]>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-right:0}.ck.ck-toolbar[dir=ltr].ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-top-right-radius:0;border-bottom-right-radius:0}.ck.ck-toolbar[dir=ltr].ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-toolbar[dir=ltr]>.ck.ck-toolbar__separator,[dir=ltr] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-right:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr].ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=ltr] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child){margin-right:var(--ck-spacing-small)}";},function(e,t,i){var n=i(1);var o=i(42);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck-content blockquote{overflow:hidden;padding-right:1.5em;padding-left:1.5em;margin-left:0;margin-right:0;font-style:italic;border-left:5px solid #ccc}.ck-content[dir=rtl] blockquote{border-left:0;border-right:5px solid #ccc}";},function(e,t,i){var n=i(1);var o=i(44);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck.ck-color-grid{display:grid}:root{--ck-color-grid-tile-size:24px;--ck-color-color-grid-check-icon:#000}.ck.ck-color-grid{grid-gap:5px;padding:8px}.ck.ck-color-grid__tile{width:var(--ck-color-grid-tile-size);height:var(--ck-color-grid-tile-size);min-width:var(--ck-color-grid-tile-size);min-height:var(--ck-color-grid-tile-size);padding:0;transition:box-shadow .2s ease;border:0}.ck.ck-color-grid__tile.ck-disabled{cursor:unset;transition:unset}.ck.ck-color-grid__tile.ck-color-table__color-tile_bordered{box-shadow:0 0 0 1px var(--ck-color-base-border)}.ck.ck-color-grid__tile .ck.ck-icon{display:none;color:var(--ck-color-color-grid-check-icon)}.ck.ck-color-grid__tile.ck-on{box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-base-text)}.ck.ck-color-grid__tile.ck-on .ck.ck-icon{display:block}.ck.ck-color-grid__tile.ck-on,.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){border:0}.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}.ck.ck-color-grid__label{padding:0 var(--ck-spacing-standard)}";},function(e,t,i){var n=i(1);var o=i(46);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck.ck-label{display:block}.ck.ck-voice-label{display:none}.ck.ck-label{font-weight:700}";},function(e,t,i){var n=i(1);var o=i(48);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck .ck-button.ck-color-table__remove-color{display:flex;align-items:center;width:100%}label.ck.ck-color-grid__label{font-weight:unset}.ck .ck-button.ck-color-table__remove-color{padding:calc(var(--ck-spacing-standard)/2) var(--ck-spacing-standard);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck .ck-button.ck-color-table__remove-color:not(:focus){border-bottom:1px solid var(--ck-color-base-border)}[dir=ltr] .ck .ck-button.ck-color-table__remove-color .ck.ck-icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck .ck-button.ck-color-table__remove-color .ck.ck-icon{margin-left:var(--ck-spacing-standard)}";},function(e,t,i){var n=i(1);var o=i(50);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".text-tiny{font-size:.7em}.text-small{font-size:.85em}.text-big{font-size:1.4em}.text-huge{font-size:1.8em}";},function(e,t){e.exports=".ck.ck-heading_heading1{font-size:20px}.ck.ck-heading_heading2{font-size:17px}.ck.ck-heading_heading3{font-size:14px}.ck[class*=ck-heading_heading]{font-weight:700}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__button .ck-button__label{width:8em}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__panel .ck-list__item{min-width:18em}";},function(e,t,i){var n=i(1);var o=i(53);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck.ck-splitbutton{font-size:inherit}.ck.ck-splitbutton .ck-splitbutton__action:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button .ck-tooltip{display:none}:root{--ck-color-split-button-hover-background:#ebebeb;--ck-color-split-button-hover-border:#b3b3b3}[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__action{border-top-right-radius:unset;border-bottom-right-radius:unset}[dir=rtl] .ck.ck-splitbutton>.ck-splitbutton__action{border-top-left-radius:unset;border-bottom-left-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow{min-width:unset}[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-radius:0}.ck-rounded-corners [dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow,[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:unset;border-bottom-left-radius:unset}[dir=rtl] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-top-right-radius:unset;border-bottom-right-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow svg{width:var(--ck-dropdown-arrow-size)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover),.ck.ck-splitbutton:hover>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover){background:var(--ck-color-split-button-hover-background)}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled),[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled){border-left-color:var(--ck-color-split-button-hover-border)}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled),[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled){border-right-color:var(--ck-color-split-button-hover-border)}.ck.ck-splitbutton.ck-splitbutton_open{border-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__action{border-bottom-left-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__arrow{border-bottom-right-radius:0}";},function(e,t,i){var n=i(1);var o=i(55);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=":root{--ck-highlight-marker-yellow:#fdfd77;--ck-highlight-marker-green:#63f963;--ck-highlight-marker-pink:#fc7999;--ck-highlight-marker-blue:#72cdfd;--ck-highlight-pen-red:#e91313;--ck-highlight-pen-green:#180}.ck-content .marker-yellow{background-color:var(--ck-highlight-marker-yellow)}.ck-content .marker-green{background-color:var(--ck-highlight-marker-green)}.ck-content .marker-pink{background-color:var(--ck-highlight-marker-pink)}.ck-content .marker-blue{background-color:var(--ck-highlight-marker-blue)}.ck-content .pen-red{color:var(--ck-highlight-pen-red);background-color:transparent}.ck-content .pen-green{color:var(--ck-highlight-pen-green);background-color:transparent}";},function(e,t,i){var n=i(1);var o=i(57);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=":root{--ck-color-resizer:var(--ck-color-focus-border);--ck-resizer-size:10px;--ck-resizer-border-width:1px;--ck-resizer-border-radius:2px;--ck-resizer-offset:calc(var(--ck-resizer-size)/-2 - 2px);--ck-resizer-tooltip-offset:10px;--ck-color-resizer-tooltip-background:#262626;--ck-color-resizer-tooltip-text:#f2f2f2}.ck .ck-widget.ck-widget_with-selection-handle{position:relative}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{position:absolute}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{display:block}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected .ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle:hover .ck-widget__selection-handle{visibility:visible}.ck .ck-size-view{background:var(--ck-color-resizer-tooltip-background);color:var(--ck-color-resizer-tooltip-text);border:1px solid var(--ck-color-resizer-tooltip-text);border-radius:var(--ck-resizer-border-radius);font-size:var(--ck-font-size-tiny);display:block;padding:var(--ck-spacing-small)}.ck .ck-size-view.ck-orientation-bottom-left,.ck .ck-size-view.ck-orientation-bottom-right,.ck .ck-size-view.ck-orientation-top-left,.ck .ck-size-view.ck-orientation-top-right{position:absolute}.ck .ck-size-view.ck-orientation-top-left{top:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-top-right{top:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-right{bottom:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-left{bottom:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}:root{--ck-widget-outline-thickness:3px;--ck-widget-handler-icon-size:16px;--ck-widget-handler-animation-duration:200ms;--ck-widget-handler-animation-curve:ease;--ck-color-widget-blurred-border:#dedede;--ck-color-widget-hover-border:#ffc83d;--ck-color-widget-editable-focus-background:var(--ck-color-base-background);--ck-color-widget-drag-handler-icon-color:var(--ck-color-base-background)}.ck .ck-widget{outline-width:var(--ck-widget-outline-thickness);outline-style:solid;outline-color:transparent;transition:outline-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_selected,.ck .ck-widget.ck-widget_selected:hover{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-focus-border)}.ck .ck-widget:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-editor__nested-editable{border:1px solid transparent}.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck .ck-editor__nested-editable:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;background-color:var(--ck-color-widget-editable-focus-background)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{padding:4px;box-sizing:border-box;background-color:transparent;opacity:0;transition:background-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),visibility var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0;transform:translateY(-100%);left:calc(0px - var(--ck-widget-outline-thickness))}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{width:var(--ck-widget-handler-icon-size);height:var(--ck-widget-handler-icon-size);color:var(--ck-color-widget-drag-handler-icon-color)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:0;transition:opacity .3s var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover .ck-icon .ck-icon__selected-indicator{opacity:1}.ck .ck-widget.ck-widget_with-selection-handle:hover .ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected .ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover .ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-focus-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:1}.ck-editor__editable>.ck-widget.ck-widget_with-selection-handle:first-child,.ck-editor__editable blockquote>.ck-widget.ck-widget_with-selection-handle:first-child{margin-top:calc(1em + var(--ck-widget-handler-icon-size))}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{left:auto;right:calc(0px - var(--ck-widget-outline-thickness))}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected,.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover{outline-color:var(--ck-color-widget-blurred-border)}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle .ck-widget__selection-handle:hover,.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover.ck-widget_with-selection-handle .ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck-editor__editable.ck-read-only .ck-widget{--ck-widget-outline-thickness:0}";},function(e,t,i){var n=i(1);var o=i(59);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck.ck-labeled-input .ck-labeled-input__status{font-size:var(--ck-font-size-small);margin-top:var(--ck-spacing-small);white-space:normal}.ck.ck-labeled-input .ck-labeled-input__status_error{color:var(--ck-color-base-error)}";},function(e,t,i){var n=i(1);var o=i(61);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=":root{--ck-input-text-width:18em}.ck.ck-input-text{border-radius:0}.ck-rounded-corners .ck.ck-input-text,.ck.ck-input-text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input-text{box-shadow:var(--ck-inner-shadow),0 0;background:var(--ck-color-input-background);border:1px solid var(--ck-color-input-border);padding:var(--ck-spacing-extra-tiny) var(--ck-spacing-medium);min-width:var(--ck-input-text-width);min-height:var(--ck-ui-component-min-height);transition:box-shadow .2s ease-in-out,border .2s ease-in-out}.ck.ck-input-text:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),var(--ck-inner-shadow)}.ck.ck-input-text[readonly]{border:1px solid var(--ck-color-input-disabled-border);background:var(--ck-color-input-disabled-background);color:var(--ck-color-input-disabled-text)}.ck.ck-input-text[readonly]:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),var(--ck-inner-shadow)}.ck.ck-input-text.ck-error{border-color:var(--ck-color-input-error-border);animation:ck-text-input-shake .3s ease both}.ck.ck-input-text.ck-error:focus{box-shadow:var(--ck-focus-error-outer-shadow),var(--ck-inner-shadow)}@keyframes ck-text-input-shake{20%{transform:translateX(-2px)}40%{transform:translateX(2px)}60%{transform:translateX(-1px)}80%{transform:translateX(1px)}}";},function(e,t,i){var n=i(1);var o=i(63);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck.ck-text-alternative-form{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-text-alternative-form .ck-labeled-input{display:inline-block}.ck.ck-text-alternative-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-text-alternative-form{flex-wrap:wrap}.ck.ck-text-alternative-form .ck-labeled-input{flex-basis:100%}.ck.ck-text-alternative-form .ck-button{flex-basis:50%}}.ck.ck-text-alternative-form{padding:var(--ck-spacing-standard)}.ck.ck-text-alternative-form:focus{outline:none}[dir=ltr] .ck.ck-text-alternative-form>:not(:first-child),[dir=rtl] .ck.ck-text-alternative-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-text-alternative-form{padding:0;width:calc(0.8*var(--ck-input-text-width))}.ck.ck-text-alternative-form .ck-labeled-input{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-text-alternative-form .ck-labeled-input .ck-input-text{min-width:0;width:100%}.ck.ck-text-alternative-form .ck-button{padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-standard);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-text-alternative-form .ck-button{margin-left:0}[dir=ltr] .ck.ck-text-alternative-form .ck-button:first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-text-alternative-form .ck-button{margin-left:0}[dir=rtl] .ck.ck-text-alternative-form .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}}";},function(e,t,i){var n=i(1);var o=i(65);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=':root{--ck-balloon-panel-arrow-z-index:calc(var(--ck-z-default) - 3)}.ck.ck-balloon-panel{display:none;position:absolute;z-index:var(--ck-z-modal)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{content:"";position:absolute}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_n]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_n]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_s]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_s]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel.ck-balloon-panel_visible{display:block}:root{--ck-balloon-arrow-offset:2px;--ck-balloon-arrow-height:10px;--ck-balloon-arrow-half-width:8px}.ck.ck-balloon-panel{border-radius:0}.ck-rounded-corners .ck.ck-balloon-panel,.ck.ck-balloon-panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-balloon-panel{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{width:0;height:0;border-style:solid}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:var(--ck-balloon-arrow-height);border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:0}.ck.ck-balloon-panel[class*=arrow_n]:before{border-bottom-color:var(--ck-color-panel-border)}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-color:transparent;border-right-color:transparent;border-top-color:transparent}.ck.ck-balloon-panel[class*=arrow_n]:after{border-bottom-color:var(--ck-color-panel-background);margin-top:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:0;border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:var(--ck-balloon-arrow-height)}.ck.ck-balloon-panel[class*=arrow_s]:before{border-top-color:var(--ck-color-panel-border)}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent}.ck.ck-balloon-panel[class*=arrow_s]:after{border-top-color:var(--ck-color-panel-background);margin-bottom:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:before{left:50%;margin-left:calc(-1*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:before{left:calc(2*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:before{right:calc(2*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:before{left:50%;margin-left:calc(-1*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:before{left:calc(2*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:before{right:calc(2*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:before{right:25%;margin-right:calc(2*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:before{left:25%;margin-left:calc(2*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:before{right:25%;margin-right:calc(2*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:before{left:25%;margin-left:calc(2*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}';},function(e,t,i){var n=i(1);var o=i(67);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck .ck-balloon-rotator__navigation{display:flex;align-items:center;justify-content:center}.ck .ck-balloon-rotator__content .ck-toolbar{justify-content:center}.ck .ck-balloon-rotator__navigation{background:var(--ck-color-toolbar-background);border-bottom:1px solid var(--ck-color-toolbar-border);padding:0 var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation>*{margin-right:var(--ck-spacing-small);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation .ck-balloon-rotator__counter{margin-right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-small)}.ck .ck-balloon-rotator__content .ck.ck-annotation-wrapper{box-shadow:none}";},function(e,t,i){var n=i(1);var o=i(69);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck .ck-fake-panel{position:absolute;z-index:calc(var(--ck-z-modal) - 1)}.ck .ck-fake-panel div{position:absolute}.ck .ck-fake-panel div:first-child{z-index:2}.ck .ck-fake-panel div:nth-child(2){z-index:1}:root{--ck-balloon-fake-panel-offset-horizontal:6px;--ck-balloon-fake-panel-offset-vertical:6px}.ck .ck-fake-panel div{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border);border-radius:var(--ck-border-radius);width:100%;height:100%}.ck .ck-fake-panel div:first-child{margin-left:var(--ck-balloon-fake-panel-offset-horizontal);margin-top:var(--ck-balloon-fake-panel-offset-vertical)}.ck .ck-fake-panel div:nth-child(2){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*2);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*2)}.ck .ck-fake-panel div:nth-child(3){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*3);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*3)}.ck .ck-balloon-panel_arrow_s+.ck-fake-panel,.ck .ck-balloon-panel_arrow_se+.ck-fake-panel,.ck .ck-balloon-panel_arrow_sw+.ck-fake-panel{--ck-balloon-fake-panel-offset-vertical:-6px}";},function(e,t,i){var n=i(1);var o=i(71);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck-content .image{display:table;clear:both;text-align:center;margin:1em auto}.ck-content .image>img{display:block;margin:0 auto;max-width:100%;min-width:50px}";},function(e,t,i){var n=i(1);var o=i(73);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck-content .image>figcaption{display:table-caption;caption-side:bottom;word-break:break-word;color:#333;background-color:#f7f7f7;padding:.6em;font-size:.75em;outline-offset:-1px}";},function(e,t,i){var n=i(1);var o=i(75);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=":root{--ck-image-style-spacing:1.5em}.ck-content .image-style-align-center,.ck-content .image-style-align-left,.ck-content .image-style-align-right,.ck-content .image-style-side{max-width:50%}.ck-content .image-style-side{float:right;margin-left:var(--ck-image-style-spacing)}.ck-content .image-style-align-left{float:left;margin-right:var(--ck-image-style-spacing)}.ck-content .image-style-align-center{margin-left:auto;margin-right:auto}.ck-content .image-style-align-right{float:right;margin-left:var(--ck-image-style-spacing)}";},function(e,t,i){var n=i(1);var o=i(77);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck.ck-editor__editable .image{position:relative}.ck.ck-editor__editable .image .ck-progress-bar{position:absolute;top:0;left:0}.ck.ck-editor__editable .image.ck-appear{animation:fadeIn .7s}.ck.ck-editor__editable .image .ck-progress-bar{height:2px;width:0;background:var(--ck-color-upload-bar-background);transition:width .1s}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}";},function(e,t,i){var n=i(1);var o=i(79);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports='.ck-image-upload-complete-icon{display:block;position:absolute;top:10px;right:10px;border-radius:50%}.ck-image-upload-complete-icon:after{content:"";position:absolute}:root{--ck-color-image-upload-icon:#fff;--ck-color-image-upload-icon-background:#008a00;--ck-image-upload-icon-size:20px;--ck-image-upload-icon-width:2px}.ck-image-upload-complete-icon{width:var(--ck-image-upload-icon-size);height:var(--ck-image-upload-icon-size);opacity:0;background:var(--ck-color-image-upload-icon-background);animation-name:ck-upload-complete-icon-show,ck-upload-complete-icon-hide;animation-fill-mode:forwards,forwards;animation-duration:.5s,.5s;font-size:var(--ck-image-upload-icon-size);animation-delay:0ms,3s}.ck-image-upload-complete-icon:after{left:25%;top:50%;opacity:0;height:0;width:0;transform:scaleX(-1) rotate(135deg);transform-origin:left top;border-top:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);border-right:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);animation-name:ck-upload-complete-icon-check;animation-duration:.5s;animation-delay:.5s;animation-fill-mode:forwards;box-sizing:border-box}@keyframes ck-upload-complete-icon-show{0%{opacity:0}to{opacity:1}}@keyframes ck-upload-complete-icon-hide{0%{opacity:1}to{opacity:0}}@keyframes ck-upload-complete-icon-check{0%{opacity:1;width:0;height:0}33%{width:.3em;height:0}to{opacity:1;width:.3em;height:.45em}}';},function(e,t,i){var n=i(1);var o=i(81);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports='.ck .ck-upload-placeholder-loader{position:absolute;display:flex;align-items:center;justify-content:center;top:0;left:0}.ck .ck-upload-placeholder-loader:before{content:"";position:relative}:root{--ck-color-upload-placeholder-loader:#b3b3b3;--ck-upload-placeholder-loader-size:32px}.ck .ck-image-upload-placeholder{width:100%;margin:0}.ck .ck-upload-placeholder-loader{width:100%;height:100%}.ck .ck-upload-placeholder-loader:before{width:var(--ck-upload-placeholder-loader-size);height:var(--ck-upload-placeholder-loader-size);border-radius:50%;border-top:3px solid var(--ck-color-upload-placeholder-loader);border-right:2px solid transparent;animation:ck-upload-placeholder-loader 1s linear infinite}@keyframes ck-upload-placeholder-loader{to{transform:rotate(1turn)}}';},function(e,t,i){var n=i(1);var o=i(83);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck .ck-link_selected{background:var(--ck-color-link-selected-background)}";},function(e,t,i){var n=i(1);var o=i(85);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck.ck-link-form{display:flex}.ck.ck-link-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-link-form{flex-wrap:wrap}.ck.ck-link-form .ck-labeled-input{flex-basis:100%}.ck.ck-link-form .ck-button{flex-basis:50%}}.ck.ck-link-form_layout-vertical{display:block}.ck.ck-link-form{padding:var(--ck-spacing-standard)}.ck.ck-link-form:focus{outline:none}[dir=ltr] .ck.ck-link-form>:not(:first-child),[dir=rtl] .ck.ck-link-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-link-form{padding:0;width:calc(0.8*var(--ck-input-text-width))}.ck.ck-link-form .ck-labeled-input{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-link-form .ck-labeled-input .ck-input-text{min-width:0;width:100%}.ck.ck-link-form .ck-button{padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-standard);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-link-form .ck-button{margin-left:0}[dir=ltr] .ck.ck-link-form .ck-button:first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-link-form .ck-button{margin-left:0}[dir=rtl] .ck.ck-link-form .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}}.ck.ck-link-form_layout-vertical{padding:0;min-width:var(--ck-input-text-width)}.ck.ck-link-form_layout-vertical .ck-labeled-input{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) var(--ck-spacing-small)}.ck.ck-link-form_layout-vertical .ck-labeled-input .ck-input-text{min-width:0;width:100%}.ck.ck-link-form_layout-vertical .ck-button{padding:var(--ck-spacing-standard);margin:0;border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border);width:50%}[dir=ltr] .ck.ck-link-form_layout-vertical .ck-button{margin-left:0}[dir=ltr] .ck.ck-link-form_layout-vertical .ck-button:first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-link-form_layout-vertical .ck-button{margin-left:0}[dir=rtl] .ck.ck-link-form_layout-vertical .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}.ck.ck-link-form_layout-vertical .ck.ck-list{margin-left:0}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton{border:0;width:100%}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton:hover{background:none}";},function(e,t,i){var n=i(1);var o=i(87);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck.ck-link-actions{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-link-actions .ck-link-actions__preview{display:inline-block}.ck.ck-link-actions .ck-link-actions__preview .ck-button__label{overflow:hidden}@media screen and (max-width:600px){.ck.ck-link-actions{flex-wrap:wrap}.ck.ck-link-actions .ck-link-actions__preview{flex-basis:100%}.ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){flex-basis:50%}}.ck.ck-link-actions{padding:var(--ck-spacing-standard)}.ck.ck-link-actions .ck-button.ck-link-actions__preview{padding-left:0;padding-right:0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{padding:0 var(--ck-spacing-medium);color:var(--ck-color-link-default);text-overflow:ellipsis;cursor:pointer;max-width:var(--ck-input-text-width);min-width:3em;text-align:center}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label:hover{text-decoration:underline}.ck.ck-link-actions .ck-button.ck-link-actions__preview,.ck.ck-link-actions .ck-button.ck-link-actions__preview:active,.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus,.ck.ck-link-actions .ck-button.ck-link-actions__preview:hover{background:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:active{box-shadow:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus .ck-button__label{text-decoration:underline}.ck.ck-link-actions:focus{outline:none}[dir=ltr] .ck.ck-link-actions .ck-button:not(:first-child),[dir=rtl] .ck.ck-link-actions .ck-button:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-link-actions{padding:0;width:calc(0.8*var(--ck-input-text-width))}.ck.ck-link-actions .ck-button.ck-link-actions__preview{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{min-width:0;max-width:100%}.ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-standard);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){margin-left:0}[dir=ltr] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview):first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){margin-left:0}[dir=rtl] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview):last-of-type{border-right:1px solid var(--ck-color-base-border)}}";},function(e,t,i){var n=i(1);var o=i(89);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports='.ck-media__wrapper .ck-media__placeholder{display:flex;flex-direction:column;align-items:center}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-tooltip{display:block}@media (hover:none){.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-tooltip{display:none}}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url{max-width:100%;position:relative}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url:hover .ck-tooltip{visibility:visible;opacity:1}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-media__placeholder__url__text{overflow:hidden;display:block}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck-media__placeholder__icon *{display:none}.ck-editor__editable:not(.ck-read-only) .ck-media__wrapper>:not(.ck-media__placeholder),.ck-editor__editable:not(.ck-read-only) .ck-widget:not(.ck-widget_selected) .ck-media__placeholder{pointer-events:none}:root{--ck-media-embed-placeholder-icon-size:3em;--ck-color-media-embed-placeholder-url-text:#757575;--ck-color-media-embed-placeholder-url-text-hover:var(--ck-color-base-text)}.ck-media__wrapper{margin:0 auto}.ck-media__wrapper .ck-media__placeholder{padding:calc(3*var(--ck-spacing-standard));background:var(--ck-color-base-foreground)}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon{min-width:var(--ck-media-embed-placeholder-icon-size);height:var(--ck-media-embed-placeholder-icon-size);margin-bottom:var(--ck-spacing-large);background-position:50%;background-size:cover}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon .ck-icon{width:100%;height:100%}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text{color:var(--ck-color-media-embed-placeholder-url-text);white-space:nowrap;text-align:center;font-style:italic;text-overflow:ellipsis}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:var(--ck-color-media-embed-placeholder-url-text-hover);cursor:pointer;text-decoration:underline}.ck-media__wrapper[data-oembed-url*="open.spotify.com"]{max-width:300px;max-height:380px}.ck-media__wrapper[data-oembed-url*="google.com/maps"] .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTAuMzc4IiBoZWlnaHQ9IjI1NC4xNjciIHZpZXdCb3g9IjAgMCA2Ni4yNDYgNjcuMjQ4Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTcyLjUzMSAtMjE4LjQ1NSkgc2NhbGUoLjk4MDEyKSI+PHJlY3Qgcnk9IjUuMjM4IiByeD0iNS4yMzgiIHk9IjIzMS4zOTkiIHg9IjE3Ni4wMzEiIGhlaWdodD0iNjAuMDk5IiB3aWR0aD0iNjAuMDk5IiBmaWxsPSIjMzRhNjY4IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0yMDYuNDc3IDI2MC45bC0yOC45ODcgMjguOTg3YTUuMjE4IDUuMjE4IDAgMDAzLjc4IDEuNjFoNDkuNjIxYzEuNjk0IDAgMy4xOS0uNzk4IDQuMTQ2LTIuMDM3eiIgZmlsbD0iIzVjODhjNSIvPjxwYXRoIGQ9Ik0yMjYuNzQyIDIyMi45ODhjLTkuMjY2IDAtMTYuNzc3IDcuMTctMTYuNzc3IDE2LjAxNC4wMDcgMi43NjIuNjYzIDUuNDc0IDIuMDkzIDcuODc1LjQzLjcwMy44MyAxLjQwOCAxLjE5IDIuMTA3LjMzMy41MDIuNjUgMS4wMDUuOTUgMS41MDguMzQzLjQ3Ny42NzMuOTU3Ljk4OCAxLjQ0IDEuMzEgMS43NjkgMi41IDMuNTAyIDMuNjM3IDUuMTY4Ljc5MyAxLjI3NSAxLjY4MyAyLjY0IDIuNDY2IDMuOTkgMi4zNjMgNC4wOTQgNC4wMDcgOC4wOTIgNC42IDEzLjkxNHYuMDEyYy4xODIuNDEyLjUxNi42NjYuODc5LjY2Ny40MDMtLjAwMS43NjgtLjMxNC45My0uNzk5LjYwMy01Ljc1NiAyLjIzOC05LjcyOSA0LjU4NS0xMy43OTQuNzgyLTEuMzUgMS42NzMtMi43MTUgMi40NjUtMy45OSAxLjEzNy0xLjY2NiAyLjMyOC0zLjQgMy42MzgtNS4xNjkuMzE1LS40ODIuNjQ1LS45NjIuOTg4LTEuNDM5LjMtLjUwMy42MTctMS4wMDYuOTUtMS41MDguMzU5LS43Ljc2LTEuNDA0IDEuMTktMi4xMDcgMS40MjYtMi40MDIgMi01LjExNCAyLjAwNC03Ljg3NSAwLTguODQ0LTcuNTExLTE2LjAxNC0xNi43NzYtMTYuMDE0eiIgZmlsbD0iI2RkNGIzZSIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48ZWxsaXBzZSByeT0iNS41NjQiIHJ4PSI1LjgyOCIgY3k9IjIzOS4wMDIiIGN4PSIyMjYuNzQyIiBmaWxsPSIjODAyZDI3IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0xOTAuMzAxIDIzNy4yODNjLTQuNjcgMC04LjQ1NyAzLjg1My04LjQ1NyA4LjYwNnMzLjc4NiA4LjYwNyA4LjQ1NyA4LjYwN2MzLjA0MyAwIDQuODA2LS45NTggNi4zMzctMi41MTYgMS41My0xLjU1NyAyLjA4Ny0zLjkxMyAyLjA4Ny02LjI5IDAtLjM2Mi0uMDIzLS43MjItLjA2NC0xLjA3OWgtOC4yNTd2My4wNDNoNC44NWMtLjE5Ny43NTktLjUzMSAxLjQ1LTEuMDU4IDEuOTg2LS45NDIuOTU4LTIuMDI4IDEuNTQ4LTMuOTAxIDEuNTQ4LTIuODc2IDAtNS4yMDgtMi4zNzItNS4yMDgtNS4yOTkgMC0yLjkyNiAyLjMzMi01LjI5OSA1LjIwOC01LjI5OSAxLjM5OSAwIDIuNjE4LjQwNyAzLjU4NCAxLjI5M2wyLjM4MS0yLjM4YzAtLjAwMi0uMDAzLS4wMDQtLjAwNC0uMDA1LTEuNTg4LTEuNTI0LTMuNjItMi4yMTUtNS45NTUtMi4yMTV6bTQuNDMgNS42NmwuMDAzLjAwNnYtLjAwM3oiIGZpbGw9IiNmZmYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTIxNS4xODQgMjUxLjkyOWwtNy45OCA3Ljk3OSAyOC40NzcgMjguNDc1YTUuMjMzIDUuMjMzIDAgMDAuNDQ5LTIuMTIzdi0zMS4xNjVjLS40NjkuNjc1LS45MzQgMS4zNDktMS4zODIgMi4wMDUtLjc5MiAxLjI3NS0xLjY4MiAyLjY0LTIuNDY1IDMuOTktMi4zNDcgNC4wNjUtMy45ODIgOC4wMzgtNC41ODUgMTMuNzk0LS4xNjIuNDg1LS41MjcuNzk4LS45My43OTktLjM2My0uMDAxLS42OTctLjI1NS0uODc5LS42Njd2LS4wMTJjLS41OTMtNS44MjItMi4yMzctOS44Mi00LjYtMTMuOTE0LS43ODMtMS4zNS0xLjY3My0yLjcxNS0yLjQ2Ni0zLjk5LTEuMTM3LTEuNjY2LTIuMzI3LTMuNC0zLjYzNy01LjE2OWwtLjAwMi0uMDAzeiIgZmlsbD0iI2MzYzNjMyIvPjxwYXRoIGQ9Ik0yMTIuOTgzIDI0OC40OTVsLTM2Ljk1MiAzNi45NTN2LjgxMmE1LjIyNyA1LjIyNyAwIDAwNS4yMzggNS4yMzhoMS4wMTVsMzUuNjY2LTM1LjY2NmExMzYuMjc1IDEzNi4yNzUgMCAwMC0yLjc2NC0zLjkgMzcuNTc1IDM3LjU3NSAwIDAwLS45ODktMS40NCAzNS4xMjcgMzUuMTI3IDAgMDAtLjk1LTEuNTA4Yy0uMDgzLS4xNjItLjE3Ni0uMzI2LS4yNjQtLjQ4OXoiIGZpbGw9IiNmZGRjNGYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTIxMS45OTggMjYxLjA4M2wtNi4xNTIgNi4xNTEgMjQuMjY0IDI0LjI2NGguNzgxYTUuMjI3IDUuMjI3IDAgMDA1LjIzOS01LjIzOHYtMS4wNDV6IiBmaWxsPSIjZmZmIiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjwvZz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder{background:#4268b3}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik05NjcuNDg0IDBINTYuNTE3QzI1LjMwNCAwIDAgMjUuMzA0IDAgNTYuNTE3djkxMC45NjZDMCA5OTguNjk0IDI1LjI5NyAxMDI0IDU2LjUyMiAxMDI0SDU0N1Y2MjhINDE0VjQ3M2gxMzNWMzU5LjAyOWMwLTEzMi4yNjIgODAuNzczLTIwNC4yODIgMTk4Ljc1Ni0yMDQuMjgyIDU2LjUxMyAwIDEwNS4wODYgNC4yMDggMTE5LjI0NCA2LjA4OVYyOTlsLTgxLjYxNi4wMzdjLTYzLjk5MyAwLTc2LjM4NCAzMC40OTItNzYuMzg0IDc1LjIzNlY0NzNoMTUzLjQ4N2wtMTkuOTg2IDE1NUg3MDd2Mzk2aDI2MC40ODRjMzEuMjEzIDAgNTYuNTE2LTI1LjMwMyA1Ni41MTYtNTYuNTE2VjU2LjUxNUMxMDI0IDI1LjMwMyA5OTguNjk3IDAgOTY3LjQ4NCAwIiBmaWxsPSIjRkZGRkZFIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#cdf}.ck-media__wrapper[data-oembed-url*="facebook.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder{background:linear-gradient(-135deg,#1400c8,#b900b4,#f50000)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTA0IiBoZWlnaHQ9IjUwNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0wIC4xNTloNTAzLjg0MVY1MDMuOTRIMHoiLz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48bWFzayBpZD0iYiIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48cGF0aCBkPSJNMjUxLjkyMS4xNTljLTY4LjQxOCAwLTc2Ljk5Ny4yOS0xMDMuODY3IDEuNTE2LTI2LjgxNCAxLjIyMy00NS4xMjcgNS40ODItNjEuMTUxIDExLjcxLTE2LjU2NiA2LjQzNy0zMC42MTUgMTUuMDUxLTQ0LjYyMSAyOS4wNTYtMTQuMDA1IDE0LjAwNi0yMi42MTkgMjguMDU1LTI5LjA1NiA0NC42MjEtNi4yMjggMTYuMDI0LTEwLjQ4NyAzNC4zMzctMTEuNzEgNjEuMTUxQy4yOSAxNzUuMDgzIDAgMTgzLjY2MiAwIDI1Mi4wOGMwIDY4LjQxNy4yOSA3Ni45OTYgMS41MTYgMTAzLjg2NiAxLjIyMyAyNi44MTQgNS40ODIgNDUuMTI3IDExLjcxIDYxLjE1MSA2LjQzNyAxNi41NjYgMTUuMDUxIDMwLjYxNSAyOS4wNTYgNDQuNjIxIDE0LjAwNiAxNC4wMDUgMjguMDU1IDIyLjYxOSA0NC42MjEgMjkuMDU3IDE2LjAyNCA2LjIyNyAzNC4zMzcgMTAuNDg2IDYxLjE1MSAxMS43MDkgMjYuODcgMS4yMjYgMzUuNDQ5IDEuNTE2IDEwMy44NjcgMS41MTYgNjguNDE3IDAgNzYuOTk2LS4yOSAxMDMuODY2LTEuNTE2IDI2LjgxNC0xLjIyMyA0NS4xMjctNS40ODIgNjEuMTUxLTExLjcwOSAxNi41NjYtNi40MzggMzAuNjE1LTE1LjA1MiA0NC42MjEtMjkuMDU3IDE0LjAwNS0xNC4wMDYgMjIuNjE5LTI4LjA1NSAyOS4wNTctNDQuNjIxIDYuMjI3LTE2LjAyNCAxMC40ODYtMzQuMzM3IDExLjcwOS02MS4xNTEgMS4yMjYtMjYuODcgMS41MTYtMzUuNDQ5IDEuNTE2LTEwMy44NjYgMC02OC40MTgtLjI5LTc2Ljk5Ny0xLjUxNi0xMDMuODY3LTEuMjIzLTI2LjgxNC01LjQ4Mi00NS4xMjctMTEuNzA5LTYxLjE1MS02LjQzOC0xNi41NjYtMTUuMDUyLTMwLjYxNS0yOS4wNTctNDQuNjIxLTE0LjAwNi0xNC4wMDUtMjguMDU1LTIyLjYxOS00NC42MjEtMjkuMDU2LTE2LjAyNC02LjIyOC0zNC4zMzctMTAuNDg3LTYxLjE1MS0xMS43MUMzMjguOTE3LjQ0OSAzMjAuMzM4LjE1OSAyNTEuOTIxLjE1OXptMCA0NS4zOTFjNjcuMjY1IDAgNzUuMjMzLjI1NyAxMDEuNzk3IDEuNDY5IDI0LjU2MiAxLjEyIDM3LjkwMSA1LjIyNCA0Ni43NzggOC42NzQgMTEuNzU5IDQuNTcgMjAuMTUxIDEwLjAyOSAyOC45NjYgMTguODQ1IDguODE2IDguODE1IDE0LjI3NSAxNy4yMDcgMTguODQ1IDI4Ljk2NiAzLjQ1IDguODc3IDcuNTU0IDIyLjIxNiA4LjY3NCA0Ni43NzggMS4yMTIgMjYuNTY0IDEuNDY5IDM0LjUzMiAxLjQ2OSAxMDEuNzk4IDAgNjcuMjY1LS4yNTcgNzUuMjMzLTEuNDY5IDEwMS43OTctMS4xMiAyNC41NjItNS4yMjQgMzcuOTAxLTguNjc0IDQ2Ljc3OC00LjU3IDExLjc1OS0xMC4wMjkgMjAuMTUxLTE4Ljg0NSAyOC45NjYtOC44MTUgOC44MTYtMTcuMjA3IDE0LjI3NS0yOC45NjYgMTguODQ1LTguODc3IDMuNDUtMjIuMjE2IDcuNTU0LTQ2Ljc3OCA4LjY3NC0yNi41NiAxLjIxMi0zNC41MjcgMS40NjktMTAxLjc5NyAxLjQ2OS02Ny4yNzEgMC03NS4yMzctLjI1Ny0xMDEuNzk4LTEuNDY5LTI0LjU2Mi0xLjEyLTM3LjkwMS01LjIyNC00Ni43NzgtOC42NzQtMTEuNzU5LTQuNTctMjAuMTUxLTEwLjAyOS0yOC45NjYtMTguODQ1LTguODE1LTguODE1LTE0LjI3NS0xNy4yMDctMTguODQ1LTI4Ljk2Ni0zLjQ1LTguODc3LTcuNTU0LTIyLjIxNi04LjY3NC00Ni43NzgtMS4yMTItMjYuNTY0LTEuNDY5LTM0LjUzMi0xLjQ2OS0xMDEuNzk3IDAtNjcuMjY2LjI1Ny03NS4yMzQgMS40NjktMTAxLjc5OCAxLjEyLTI0LjU2MiA1LjIyNC0zNy45MDEgOC42NzQtNDYuNzc4IDQuNTctMTEuNzU5IDEwLjAyOS0yMC4xNTEgMTguODQ1LTI4Ljk2NiA4LjgxNS04LjgxNiAxNy4yMDctMTQuMjc1IDI4Ljk2Ni0xOC44NDUgOC44NzctMy40NSAyMi4yMTYtNy41NTQgNDYuNzc4LTguNjc0IDI2LjU2NC0xLjIxMiAzNC41MzItMS40NjkgMTAxLjc5OC0xLjQ2OXoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48cGF0aCBkPSJNMjUxLjkyMSAzMzYuMDUzYy00Ni4zNzggMC04My45NzQtMzcuNTk2LTgzLjk3NC04My45NzMgMC00Ni4zNzggMzcuNTk2LTgzLjk3NCA4My45NzQtODMuOTc0IDQ2LjM3NyAwIDgzLjk3MyAzNy41OTYgODMuOTczIDgzLjk3NCAwIDQ2LjM3Ny0zNy41OTYgODMuOTczLTgzLjk3MyA4My45NzN6bTAtMjEzLjMzOGMtNzEuNDQ3IDAtMTI5LjM2NSA1Ny45MTgtMTI5LjM2NSAxMjkuMzY1IDAgNzEuNDQ2IDU3LjkxOCAxMjkuMzY0IDEyOS4zNjUgMTI5LjM2NCA3MS40NDYgMCAxMjkuMzY0LTU3LjkxOCAxMjkuMzY0LTEyOS4zNjQgMC03MS40NDctNTcuOTE4LTEyOS4zNjUtMTI5LjM2NC0xMjkuMzY1ek00MTYuNjI3IDExNy42MDRjMCAxNi42OTYtMTMuNTM1IDMwLjIzLTMwLjIzMSAzMC4yMy0xNi42OTUgMC0zMC4yMy0xMy41MzQtMzAuMjMtMzAuMjMgMC0xNi42OTYgMTMuNTM1LTMwLjIzMSAzMC4yMy0zMC4yMzEgMTYuNjk2IDAgMzAuMjMxIDEzLjUzNSAzMC4yMzEgMzAuMjMxIiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPg==)}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#ffe0fe}.ck-media__wrapper[data-oembed-url*="instagram.com"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder{background:linear-gradient(90deg,#71c6f4,#0d70a5)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MDAgNDAwIj48cGF0aCBkPSJNNDAwIDIwMGMwIDExMC41LTg5LjUgMjAwLTIwMCAyMDBTMCAzMTAuNSAwIDIwMCA4OS41IDAgMjAwIDBzMjAwIDg5LjUgMjAwIDIwMHpNMTYzLjQgMzA1LjVjODguNyAwIDEzNy4yLTczLjUgMTM3LjItMTM3LjIgMC0yLjEgMC00LjItLjEtNi4yIDkuNC02LjggMTcuNi0xNS4zIDI0LjEtMjUtOC42IDMuOC0xNy45IDYuNC0yNy43IDcuNiAxMC02IDE3LjYtMTUuNCAyMS4yLTI2LjctOS4zIDUuNS0xOS42IDkuNS0zMC42IDExLjctOC44LTkuNC0yMS4zLTE1LjItMzUuMi0xNS4yLTI2LjYgMC00OC4yIDIxLjYtNDguMiA0OC4yIDAgMy44LjQgNy41IDEuMyAxMS00MC4xLTItNzUuNi0yMS4yLTk5LjQtNTAuNC00LjEgNy4xLTYuNSAxNS40LTYuNSAyNC4yIDAgMTYuNyA4LjUgMzEuNSAyMS41IDQwLjEtNy45LS4yLTE1LjMtMi40LTIxLjgtNnYuNmMwIDIzLjQgMTYuNiA0Mi44IDM4LjcgNDcuMy00IDEuMS04LjMgMS43LTEyLjcgMS43LTMuMSAwLTYuMS0uMy05LjEtLjkgNi4xIDE5LjIgMjMuOSAzMy4xIDQ1IDMzLjUtMTYuNSAxMi45LTM3LjMgMjAuNi01OS45IDIwLjYtMy45IDAtNy43LS4yLTExLjUtLjcgMjEuMSAxMy44IDQ2LjUgMjEuOCA3My43IDIxLjgiIGZpbGw9IiNmZmYiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text{color:#b8e6ff}.ck-media__wrapper[data-oembed-url*="twitter.com"] .ck.ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}';},function(e,t,i){var n=i(1);var o=i(91);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck.ck-media-form{display:flex;align-items:flex-start;flex-direction:row;flex-wrap:nowrap}.ck.ck-media-form .ck-labeled-input{display:inline-block}.ck.ck-media-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-media-form{flex-wrap:wrap}.ck.ck-media-form .ck-labeled-input{flex-basis:100%}.ck.ck-media-form .ck-button{flex-basis:50%}}.ck.ck-media-form{padding:var(--ck-spacing-standard)}.ck.ck-media-form:focus{outline:none}[dir=ltr] .ck.ck-media-form>:not(:first-child),[dir=rtl] .ck.ck-media-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-media-form{padding:0;width:calc(0.8*var(--ck-input-text-width))}.ck.ck-media-form .ck-labeled-input{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-media-form .ck-labeled-input .ck-input-text{min-width:0;width:100%}.ck.ck-media-form .ck-labeled-input .ck-labeled-input__error{white-space:normal}.ck.ck-media-form .ck-button{padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-standard);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-media-form .ck-button{margin-left:0}[dir=ltr] .ck.ck-media-form .ck-button:first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-media-form .ck-button{margin-left:0}[dir=rtl] .ck.ck-media-form .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}}";},function(e,t,i){var n=i(1);var o=i(93);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck-content .media{clear:both;margin:1em 0;display:block;min-width:15em}";},function(e,t,i){var n=i(1);var o=i(95);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=":root{--ck-color-table-focused-cell-background:rgba(158,207,250,0.3)}.ck-widget.table td.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table td.ck-editor__nested-editable:focus,.ck-widget.table th.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table th.ck-editor__nested-editable:focus{background:var(--ck-color-table-focused-cell-background);border-style:none;outline:1px solid var(--ck-color-focus-border);outline-offset:-1px}";},function(e,t,i){var n=i(1);var o=i(97);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck .ck-insert-table-dropdown__grid{display:flex;flex-direction:row;flex-wrap:wrap}:root{--ck-insert-table-dropdown-padding:10px;--ck-insert-table-dropdown-box-height:11px;--ck-insert-table-dropdown-box-width:12px;--ck-insert-table-dropdown-box-margin:1px}.ck .ck-insert-table-dropdown__grid{width:calc(var(--ck-insert-table-dropdown-box-width)*10 + var(--ck-insert-table-dropdown-box-margin)*20 + var(--ck-insert-table-dropdown-padding)*2);padding:var(--ck-insert-table-dropdown-padding) var(--ck-insert-table-dropdown-padding) 0}.ck .ck-insert-table-dropdown__label{text-align:center}.ck .ck-insert-table-dropdown-grid-box{width:var(--ck-insert-table-dropdown-box-width);height:var(--ck-insert-table-dropdown-box-height);margin:var(--ck-insert-table-dropdown-box-margin);border:1px solid var(--ck-color-base-border);border-radius:1px}.ck .ck-insert-table-dropdown-grid-box.ck-on{border-color:var(--ck-color-focus-border);background:var(--ck-color-focus-outer-shadow)}";},function(e,t,i){var n=i(1);var o=i(99);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=":root{--ck-table-selected-cell-background:#cee5fd}.ck.ck-editor__editable .table table td.ck-editor__editable_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected{background-color:var(--ck-table-selected-cell-background)!important;caret-color:transparent;outline:unset;box-shadow:unset}.ck.ck-editor__editable .table table td.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table th.ck-editor__editable_selected ::selection{background-color:transparent}.ck.ck-editor__editable .table table td.ck-editor__editable_selected .ck-widget_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected .ck-widget_selected{outline:unset}";},function(e,t,i){var n=i(1);var o=i(101);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck-content .table{margin:1em auto;display:table}.ck-content .table table{border-collapse:collapse;border-spacing:0;width:100%;height:100%;border:1px double #b3b3b3}.ck-content .table table td,.ck-content .table table th{min-width:2em;padding:.4em;border-color:#bfbfbf}.ck-content .table table th{font-weight:700;background:hsla(0,0%,0%,5%)}";},function(e,t){e.exports=".ck-content code{background-color:hsla(0,0%,78%,.3);padding:.15em;border-radius:2px}";},function(e,t,i){var n=i(1);var o=i(104);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck-content pre{padding:1em;color:#353535;background:hsla(0,0%,78%,.3);border:1px solid #c4c4c4;border-radius:2px;text-align:left;direction:ltr;tab-size:4;white-space:pre-wrap;font-style:normal;min-width:200px}.ck-content pre code{background:unset;padding:0;border-radius:0}.ck.ck-editor__editable pre{position:relative}.ck.ck-editor__editable pre[data-language]:after{content:attr(data-language);position:absolute}:root{--ck-color-code-block-label-background:#757575}.ck.ck-editor__editable pre[data-language]:after{top:-1px;right:10px;background:var(--ck-color-code-block-label-background);font-size:10px;font-family:var(--ck-font-face);line-height:16px;padding:var(--ck-spacing-tiny) var(--ck-spacing-medium);color:#fff;white-space:nowrap}.ck.ck-code-block-dropdown .ck-dropdown__panel{max-height:250px;overflow-y:auto;overflow-x:hidden}";},function(e,t,i){var n=i(1);var o=i(106);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck-editor__editable .ck-horizontal-line{overflow:hidden}.ck-content hr{border:solid #5e5e5e;border-width:1px 0 0;margin:0}.ck-editor__editable .ck-horizontal-line{padding:5px 0}";},function(e,t,i){var n=i(1);var o=i(108);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck .ck-widget_with-resizer{position:relative}.ck .ck-widget__resizer{display:none;position:absolute;pointer-events:none;left:0;top:0;outline:1px solid var(--ck-color-resizer)}.ck-focused .ck-widget_with-resizer.ck-widget_selected>.ck-widget__resizer{display:block}.ck .ck-widget__resizer__handle{position:absolute;pointer-events:all;width:var(--ck-resizer-size);height:var(--ck-resizer-size);background:var(--ck-color-focus-border);border:var(--ck-resizer-border-width) solid #fff;border-radius:var(--ck-resizer-border-radius)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left{top:var(--ck-resizer-offset);left:var(--ck-resizer-offset);cursor:nwse-resize}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right{top:var(--ck-resizer-offset);right:var(--ck-resizer-offset);cursor:nesw-resize}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right{bottom:var(--ck-resizer-offset);right:var(--ck-resizer-offset);cursor:nwse-resize}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left{bottom:var(--ck-resizer-offset);left:var(--ck-resizer-offset);cursor:nesw-resize}";},function(e,t,i){var n=i(1);var o=i(110);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck-content .image.image_resized{max-width:100%;display:block;box-sizing:border-box}.ck-content .image.image_resized img{width:100%}.ck-content .image.image_resized>figcaption{display:block}";},function(e,t,i){var n=i(1);var o=i(112);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=":root{--ck-mention-list-max-height:300px}.ck.ck-mentions{max-height:var(--ck-mention-list-max-height);overflow-y:auto;overflow-x:hidden;overscroll-behavior:contain}.ck.ck-mentions>.ck-list__item{overflow:hidden;flex-shrink:0}";},function(e,t,i){var n=i(1);var o=i(114);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=":root{--ck-color-mention-background:rgba(153,0,48,0.1);--ck-color-mention-text:#990030}.ck-content .mention{background:var(--ck-color-mention-background);color:var(--ck-color-mention-text)}";},function(e,t,i){var n=i(1);var o=i(116);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck.ck-labeled-view .ck-labeled-view__status{font-size:var(--ck-font-size-small);margin-top:var(--ck-spacing-small);white-space:normal}.ck.ck-labeled-view .ck-labeled-view__status_error{color:var(--ck-color-base-error)}.ck.ck-labeled-view>.ck.ck-label{width:100%;text-overflow:ellipsis;overflow:hidden}";},function(e,t,i){var n=i(1);var o=i(118);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck.ck-input-color{width:100%;display:flex}.ck.ck-input-color>input.ck.ck-input-text{min-width:auto;flex-grow:1}.ck.ck-input-color>input.ck.ck-input-text:active,.ck.ck-input-color>input.ck.ck-input-text:focus{z-index:var(--ck-z-default)}.ck.ck-input-color>div.ck.ck-dropdown{min-width:auto}.ck.ck-input-color>div.ck.ck-dropdown>.ck-input-color__button .ck-dropdown__arrow{display:none}.ck.ck-input-color .ck.ck-input-color__button .ck.ck-input-color__button__preview{position:relative;overflow:hidden}.ck.ck-input-color .ck.ck-input-color__button .ck.ck-input-color__button__preview>.ck.ck-input-color__button__preview__no-color-indicator{position:absolute;display:block}[dir=ltr] .ck.ck-input-color>.ck.ck-input-text{border-top-right-radius:0;border-bottom-right-radius:0}[dir=rtl] .ck.ck-input-color>.ck.ck-input-text{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-input-color__button{padding:0}[dir=ltr] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-input-color__button{border-top-left-radius:0;border-bottom-left-radius:0;margin-left:-1px}[dir=rtl] .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-input-color__button{border-top-right-radius:0;border-bottom-right-radius:0;margin-right:-1px}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-input-color__button.ck-disabled{background:var(--ck-color-input-disabled-background)}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-input-color__button>.ck.ck-input-color__button__preview{border-radius:0}.ck-rounded-corners .ck.ck-input-color>.ck.ck-dropdown>.ck.ck-input-color__button>.ck.ck-input-color__button__preview,.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-input-color__button>.ck.ck-input-color__button__preview.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-input-color__button>.ck.ck-input-color__button__preview{width:20px;height:20px;border:1px solid var(--ck-color-input-border)}.ck.ck-input-color>.ck.ck-dropdown>.ck.ck-input-color__button>.ck.ck-input-color__button__preview>.ck.ck-input-color__button__preview__no-color-indicator{top:-30%;left:50%;height:150%;width:8%;background:red;border-radius:2px;transform:rotate(45deg);transform-origin:50%}.ck.ck-input-color .ck.ck-input-color__remove-color{width:100%;border-bottom:1px solid var(--ck-color-input-border);padding:calc(var(--ck-spacing-standard)/2) var(--ck-spacing-standard);border-bottom-left-radius:0;border-bottom-right-radius:0}[dir=ltr] .ck.ck-input-color .ck.ck-input-color__remove-color{border-top-right-radius:0}[dir=rtl] .ck.ck-input-color .ck.ck-input-color__remove-color{border-top-left-radius:0}.ck.ck-input-color .ck.ck-input-color__remove-color .ck.ck-icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-input-color .ck.ck-input-color__remove-color .ck.ck-icon{margin-right:0;margin-left:var(--ck-spacing-standard)}";},function(e,t,i){var n=i(1);var o=i(120);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck.ck-form__row{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between}.ck.ck-form__row>:not(.ck-label){flex-grow:1}.ck.ck-form__row.ck-table-form__action-row .ck-button-cancel,.ck.ck-form__row.ck-table-form__action-row .ck-button-save{justify-content:center}.ck.ck-form__row{padding:var(--ck-spacing-standard) var(--ck-spacing-large) 0}[dir=ltr] .ck.ck-form__row>:not(.ck-label)+*{margin-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-form__row>:not(.ck-label)+*{margin-right:var(--ck-spacing-large)}.ck.ck-form__row>.ck-label{width:100%;min-width:100%}.ck.ck-form__row.ck-table-form__action-row{margin-top:var(--ck-spacing-large)}.ck.ck-form__row.ck-table-form__action-row .ck-button .ck-button__label{color:var(--ck-color-text)}";},function(e,t,i){var n=i(1);var o=i(122);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=":root{--ck-table-form-header-height:38px}.ck.ck-form__header{padding:0 var(--ck-spacing-large);height:var(--ck-table-form-header-height);line-height:var(--ck-table-form-header-height);border-bottom:1px solid var(--ck-color-base-border)}.ck.ck-form__header .ck-form__header__label{font-weight:700}";},function(e,t){e.exports=".ck.ck-form{padding:0 0 var(--ck-spacing-large)}.ck.ck-form:focus{outline:none}.ck.ck-form .ck.ck-input-text{min-width:100%;width:0}.ck.ck-form .ck.ck-dropdown{min-width:100%}.ck.ck-form .ck.ck-dropdown .ck-dropdown__button:not(:focus){border:1px solid var(--ck-color-base-border)}.ck.ck-form .ck.ck-dropdown .ck-dropdown__button .ck-button__label{width:100%}";},function(e,t){e.exports='.ck.ck-table-form .ck-form__row.ck-table-form__border-row{flex-wrap:wrap}.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-labeled-view{display:flex;flex-direction:column-reverse}.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-labeled-view .ck.ck-dropdown,.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-table-form__border-style,.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-table-form__border-width{flex-grow:0}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row{flex-wrap:wrap;align-items:center}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-labeled-view{display:flex;flex-direction:column-reverse;align-items:center}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-labeled-view .ck.ck-dropdown,.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimension-operator{flex-grow:0}.ck.ck-table-form .ck.ck-labeled-view{position:relative}.ck.ck-table-form .ck.ck-labeled-view .ck.ck-labeled-view__status{position:absolute;left:50%;bottom:calc(-1*var(--ck-table-properties-error-arrow-size));transform:translate(-50%,100%);z-index:1}.ck.ck-table-form .ck.ck-labeled-view .ck.ck-labeled-view__status:after{content:"";position:absolute;top:calc(-1*var(--ck-table-properties-error-arrow-size));left:50%;transform:translateX(-50%)}:root{--ck-table-properties-error-arrow-size:6px;--ck-table-properties-min-error-width:150px}.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-labeled-view>.ck-label{font-size:var(--ck-font-size-tiny);text-align:center}.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-table-form__border-style{width:80px;min-width:80px}.ck.ck-table-form .ck-form__row.ck-table-form__border-row .ck-table-form__border-width{width:50px;min-width:50px}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row{padding:0}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-labeled-view>.ck-label{font-size:10px;text-align:center}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimensions-row__height,.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimensions-row__width{margin:0}.ck.ck-table-form .ck-form__row.ck-table-form__dimensions-row .ck-table-form__dimension-operator{align-self:start;display:inline-block;height:var(--ck-ui-component-min-height);line-height:var(--ck-ui-component-min-height);margin:0 var(--ck-spacing-small)}.ck.ck-table-form .ck.ck-labeled-view .ck.ck-labeled-view__status{border-radius:0}.ck-rounded-corners .ck.ck-table-form .ck.ck-labeled-view .ck.ck-labeled-view__status,.ck.ck-table-form .ck.ck-labeled-view .ck.ck-labeled-view__status.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-table-form .ck.ck-labeled-view .ck.ck-labeled-view__status{background:var(--ck-color-base-error);color:var(--ck-color-base-background);padding:var(--ck-spacing-small) var(--ck-spacing-medium);min-width:var(--ck-table-properties-min-error-width);text-align:center}.ck.ck-table-form .ck.ck-labeled-view .ck.ck-labeled-view__status:after{border-left:var(--ck-table-properties-error-arrow-size) solid transparent;border-bottom:var(--ck-table-properties-error-arrow-size) solid var(--ck-color-base-error);border-right:var(--ck-table-properties-error-arrow-size) solid transparent;border-top:0 solid transparent}.ck.ck-table-form .ck.ck-labeled-view .ck.ck-labeled-view__status{animation:ck-table-form-labeled-view-status-appear .15s ease both}.ck.ck-table-form .ck.ck-labeled-view .ck-input.ck-error:not(:focus)+.ck.ck-labeled-view__status{display:none}@keyframes ck-table-form-labeled-view-status-appear{0%{opacity:0}to{opacity:1}}';},function(e,t,i){var n=i(1);var o=i(126);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row{flex-wrap:wrap}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar{flex-grow:0}.ck.ck-table-cell-properties-form{width:320px}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__padding-row{padding:0;width:35%}.ck.ck-table-cell-properties-form .ck-form__row.ck-table-cell-properties-form__alignment-row .ck.ck-toolbar{background:none}";},function(e,t,i){var n=i(1);var o=i(128);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row{flex-wrap:wrap;flex-basis:0;align-content:baseline}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar .ck-toolbar__items{flex-wrap:nowrap}.ck.ck-table-properties-form{width:320px}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row{padding:0}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar{background:none}.ck.ck-table-properties-form .ck-form__row.ck-table-properties-form__alignment-row .ck.ck-toolbar .ck-toolbar__items>*{width:40px}";},function(module,__webpack_exports__,__webpack_require__){"use strict";var md5;var _unused_webpack_default_export=md5;(function(){var HxOverrides=function HxOverrides(){};HxOverrides.__name__=true;HxOverrides.dateStr=function(e){var t=e.getMonth()+1;var i=e.getDate();var n=e.getHours();var o=e.getMinutes();var s=e.getSeconds();return e.getFullYear()+"-"+(t<10?"0"+t:""+t)+"-"+(i<10?"0"+i:""+i)+" "+(n<10?"0"+n:""+n)+":"+(o<10?"0"+o:""+o)+":"+(s<10?"0"+s:""+s);};HxOverrides.strDate=function(e){switch(e.length){case 8:var t=e.split(":");var i=new Date();i.setTime(0);i.setUTCHours(t[0]);i.setUTCMinutes(t[1]);i.setUTCSeconds(t[2]);return i;case 10:var t=e.split("-");return new Date(t[0],t[1]-1,t[2],0,0,0);case 19:var t=e.split(" ");var n=t[0].split("-");var o=t[1].split(":");return new Date(n[0],n[1]-1,n[2],o[0],o[1],o[2]);default:throw"Invalid date format : "+e;}};HxOverrides.cca=function(e,t){var i=e.charCodeAt(t);if(i!=i)return undefined;return i;};HxOverrides.substr=function(e,t,i){if(t!=null&&t!=0&&i!=null&&i<0)return"";if(i==null)i=e.length;if(t<0){t=e.length+t;if(t<0)t=0;}else if(i<0)i=e.length+i-t;return e.substr(t,i);};HxOverrides.remove=function(e,t){var i=0;var n=e.length;while(i<n){if(e[i]==t){e.splice(i,1);return true;}i++;}return false;};HxOverrides.iter=function(e){return{cur:0,arr:e,hasNext:function hasNext(){return this.cur<this.arr.length;},next:function next(){return this.arr[this.cur++];}};};var IntIter=function IntIter(e,t){this.min=e;this.max=t;};IntIter.__name__=true;IntIter.prototype={next:function next(){return this.min++;},hasNext:function hasNext(){return this.min<this.max;},__class__:IntIter};var Std=function Std(){};Std.__name__=true;Std["is"]=function(e,t){return js.Boot.__instanceof(e,t);};Std.string=function(e){return js.Boot.__string_rec(e,"");};Std["int"]=function(e){return e|0;};Std.parseInt=function(e){var t=parseInt(e,10);if(t==0&&(HxOverrides.cca(e,1)==120||HxOverrides.cca(e,1)==88))t=parseInt(e);if(isNaN(t))return null;return t;};Std.parseFloat=function(e){return parseFloat(e);};Std.random=function(e){return Math.floor(Math.random()*e);};var com=com||{};if(!com.wiris)com.wiris={};if(!com.wiris.js)com.wiris.js={};com.wiris.js.JsPluginTools=function(){this.tryReady();};com.wiris.js.JsPluginTools.__name__=true;com.wiris.js.JsPluginTools.main=function(){var e;e=com.wiris.js.JsPluginTools.getInstance();haxe.Timer.delay($bind(e,e.tryReady),100);};com.wiris.js.JsPluginTools.getInstance=function(){if(com.wiris.js.JsPluginTools.instance==null)com.wiris.js.JsPluginTools.instance=new com.wiris.js.JsPluginTools();return com.wiris.js.JsPluginTools.instance;};com.wiris.js.JsPluginTools.bypassEncapsulation=function(){if(window.com==null)window.com={};if(window.com.wiris==null)window.com.wiris={};if(window.com.wiris.js==null)window.com.wiris.js={};if(window.com.wiris.js.JsPluginTools==null)window.com.wiris.js.JsPluginTools=com.wiris.js.JsPluginTools.getInstance();};com.wiris.js.JsPluginTools.prototype={md5encode:function md5encode(e){return haxe.Md5.encode(e);},doLoad:function doLoad(){this.ready=true;com.wiris.js.JsPluginTools.instance=this;com.wiris.js.JsPluginTools.bypassEncapsulation();},tryReady:function tryReady(){this.ready=false;if(js.Lib.document.readyState){this.doLoad();this.ready=true;}if(!this.ready)haxe.Timer.delay($bind(this,this.tryReady),100);},__class__:com.wiris.js.JsPluginTools};var haxe=haxe||{};haxe.Log=function(){};haxe.Log.__name__=true;haxe.Log.trace=function(e,t){js.Boot.__trace(e,t);};haxe.Log.clear=function(){js.Boot.__clear_trace();};haxe.Md5=function(){};haxe.Md5.__name__=true;haxe.Md5.encode=function(e){return new haxe.Md5().doEncode(e);};haxe.Md5.prototype={doEncode:function doEncode(e){var t=this.str2blks(e);var i=1732584193;var n=-271733879;var o=-1732584194;var s=271733878;var r;var a=0;while(a<t.length){var c=i;var l=n;var d=o;var u=s;r=0;i=this.ff(i,n,o,s,t[a],7,-680876936);s=this.ff(s,i,n,o,t[a+1],12,-389564586);o=this.ff(o,s,i,n,t[a+2],17,606105819);n=this.ff(n,o,s,i,t[a+3],22,-1044525330);i=this.ff(i,n,o,s,t[a+4],7,-176418897);s=this.ff(s,i,n,o,t[a+5],12,1200080426);o=this.ff(o,s,i,n,t[a+6],17,-1473231341);n=this.ff(n,o,s,i,t[a+7],22,-45705983);i=this.ff(i,n,o,s,t[a+8],7,1770035416);s=this.ff(s,i,n,o,t[a+9],12,-1958414417);o=this.ff(o,s,i,n,t[a+10],17,-42063);n=this.ff(n,o,s,i,t[a+11],22,-1990404162);i=this.ff(i,n,o,s,t[a+12],7,1804603682);s=this.ff(s,i,n,o,t[a+13],12,-40341101);o=this.ff(o,s,i,n,t[a+14],17,-1502002290);n=this.ff(n,o,s,i,t[a+15],22,1236535329);i=this.gg(i,n,o,s,t[a+1],5,-165796510);s=this.gg(s,i,n,o,t[a+6],9,-1069501632);o=this.gg(o,s,i,n,t[a+11],14,643717713);n=this.gg(n,o,s,i,t[a],20,-373897302);i=this.gg(i,n,o,s,t[a+5],5,-701558691);s=this.gg(s,i,n,o,t[a+10],9,38016083);o=this.gg(o,s,i,n,t[a+15],14,-660478335);n=this.gg(n,o,s,i,t[a+4],20,-405537848);i=this.gg(i,n,o,s,t[a+9],5,568446438);s=this.gg(s,i,n,o,t[a+14],9,-1019803690);o=this.gg(o,s,i,n,t[a+3],14,-187363961);n=this.gg(n,o,s,i,t[a+8],20,1163531501);i=this.gg(i,n,o,s,t[a+13],5,-1444681467);s=this.gg(s,i,n,o,t[a+2],9,-51403784);o=this.gg(o,s,i,n,t[a+7],14,1735328473);n=this.gg(n,o,s,i,t[a+12],20,-1926607734);i=this.hh(i,n,o,s,t[a+5],4,-378558);s=this.hh(s,i,n,o,t[a+8],11,-2022574463);o=this.hh(o,s,i,n,t[a+11],16,1839030562);n=this.hh(n,o,s,i,t[a+14],23,-35309556);i=this.hh(i,n,o,s,t[a+1],4,-1530992060);s=this.hh(s,i,n,o,t[a+4],11,1272893353);o=this.hh(o,s,i,n,t[a+7],16,-155497632);n=this.hh(n,o,s,i,t[a+10],23,-1094730640);i=this.hh(i,n,o,s,t[a+13],4,681279174);s=this.hh(s,i,n,o,t[a],11,-358537222);o=this.hh(o,s,i,n,t[a+3],16,-722521979);n=this.hh(n,o,s,i,t[a+6],23,76029189);i=this.hh(i,n,o,s,t[a+9],4,-640364487);s=this.hh(s,i,n,o,t[a+12],11,-421815835);o=this.hh(o,s,i,n,t[a+15],16,530742520);n=this.hh(n,o,s,i,t[a+2],23,-995338651);i=this.ii(i,n,o,s,t[a],6,-198630844);s=this.ii(s,i,n,o,t[a+7],10,1126891415);o=this.ii(o,s,i,n,t[a+14],15,-1416354905);n=this.ii(n,o,s,i,t[a+5],21,-57434055);i=this.ii(i,n,o,s,t[a+12],6,1700485571);s=this.ii(s,i,n,o,t[a+3],10,-1894986606);o=this.ii(o,s,i,n,t[a+10],15,-1051523);n=this.ii(n,o,s,i,t[a+1],21,-2054922799);i=this.ii(i,n,o,s,t[a+8],6,1873313359);s=this.ii(s,i,n,o,t[a+15],10,-30611744);o=this.ii(o,s,i,n,t[a+6],15,-1560198380);n=this.ii(n,o,s,i,t[a+13],21,1309151649);i=this.ii(i,n,o,s,t[a+4],6,-145523070);s=this.ii(s,i,n,o,t[a+11],10,-1120210379);o=this.ii(o,s,i,n,t[a+2],15,718787259);n=this.ii(n,o,s,i,t[a+9],21,-343485551);i=this.addme(i,c);n=this.addme(n,l);o=this.addme(o,d);s=this.addme(s,u);a+=16;}return this.rhex(i)+this.rhex(n)+this.rhex(o)+this.rhex(s);},ii:function ii(e,t,i,n,o,s,r){return this.cmn(this.bitXOR(i,this.bitOR(t,~n)),e,t,o,s,r);},hh:function hh(e,t,i,n,o,s,r){return this.cmn(this.bitXOR(this.bitXOR(t,i),n),e,t,o,s,r);},gg:function gg(e,t,i,n,o,s,r){return this.cmn(this.bitOR(this.bitAND(t,n),this.bitAND(i,~n)),e,t,o,s,r);},ff:function ff(e,t,i,n,o,s,r){return this.cmn(this.bitOR(this.bitAND(t,i),this.bitAND(~t,n)),e,t,o,s,r);},cmn:function cmn(e,t,i,n,o,s){return this.addme(this.rol(this.addme(this.addme(t,e),this.addme(n,s)),o),i);},rol:function rol(e,t){return e<<t|e>>>32-t;},str2blks:function str2blks(e){var t=(e.length+8>>6)+1;var i=new Array();var n=0,o=t*16;while(n<o){var s=n++;i[s]=0;}var s=0;while(s<e.length){i[s>>2]|=HxOverrides.cca(e,s)<<(e.length*8+s)%4*8;s++;}i[s>>2]|=128<<(e.length*8+s)%4*8;var r=e.length*8;var a=t*16-2;i[a]=r&255;i[a]|=(r>>>8&255)<<8;i[a]|=(r>>>16&255)<<16;i[a]|=(r>>>24&255)<<24;return i;},rhex:function rhex(e){var t="";var i="0123456789abcdef";var n=0;while(n<4){var o=n++;t+=i.charAt(e>>o*8+4&15)+i.charAt(e>>o*8&15);}return t;},addme:function addme(e,t){var i=(e&65535)+(t&65535);var n=(e>>16)+(t>>16)+(i>>16);return n<<16|i&65535;},bitAND:function bitAND(e,t){var i=e&1&(t&1);var n=e>>>1&t>>>1;return n<<1|i;},bitXOR:function bitXOR(e,t){var i=e&1^t&1;var n=e>>>1^t>>>1;return n<<1|i;},bitOR:function bitOR(e,t){var i=e&1|t&1;var n=e>>>1|t>>>1;return n<<1|i;},__class__:haxe.Md5};haxe.Timer=function(e){var t=this;this.id=window.setInterval(function(){t.run();},e);};haxe.Timer.__name__=true;haxe.Timer.delay=function(e,t){var i=new haxe.Timer(t);i.run=function(){i.stop();e();};return i;};haxe.Timer.measure=function(e,t){var i=haxe.Timer.stamp();var n=e();haxe.Log.trace(haxe.Timer.stamp()-i+"s",t);return n;};haxe.Timer.stamp=function(){return new Date().getTime()/1e3;};haxe.Timer.prototype={run:function run(){},stop:function stop(){if(this.id==null)return;window.clearInterval(this.id);this.id=null;},__class__:haxe.Timer};var js=js||{};js.Boot=function(){};js.Boot.__name__=true;js.Boot.__unhtml=function(e){return e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;");};js.Boot.__trace=function(e,t){var i=t!=null?t.fileName+":"+t.lineNumber+": ":"";i+=js.Boot.__string_rec(e,"");var n;if(typeof document!="undefined"&&(n=document.getElementById("haxe:trace"))!=null)n.innerHTML+=js.Boot.__unhtml(i)+"<br/>";else if(typeof console!="undefined"&&console.log!=null)console.log(i);};js.Boot.__clear_trace=function(){var e=document.getElementById("haxe:trace");if(e!=null)e.innerHTML="";};js.Boot.isClass=function(e){return e.__name__;};js.Boot.isEnum=function(e){return e.__ename__;};js.Boot.getClass=function(e){return e.__class__;};js.Boot.__string_rec=function(e,t){if(e==null)return"null";if(t.length>=5)return"<...>";var i=_typeof(e);if(i=="function"&&(e.__name__||e.__ename__))i="object";switch(i){case"object":if(e instanceof Array){if(e.__enum__){if(e.length==2)return e[0];var n=e[0]+"(";t+="\t";var o=2,s=e.length;while(o<s){var r=o++;if(r!=2)n+=","+js.Boot.__string_rec(e[r],t);else n+=js.Boot.__string_rec(e[r],t);}return n+")";}var a=e.length;var r;var n="[";t+="\t";var s=0;while(s<a){var c=s++;n+=(c>0?",":"")+js.Boot.__string_rec(e[c],t);}n+="]";return n;}var l;try{l=e.toString;}catch(e){return"???";}if(l!=null&&l!=Object.toString){var d=e.toString();if(d!="[object Object]")return d;}var u=null;var n="{\n";t+="\t";var h=e.hasOwnProperty!=null;for(var u in e){if(h&&!e.hasOwnProperty(u)){continue;}if(u=="prototype"||u=="__class__"||u=="__super__"||u=="__interfaces__"||u=="__properties__"){continue;}if(n.length!=2)n+=", \n";n+=t+u+" : "+js.Boot.__string_rec(e[u],t);}t=t.substring(1);n+="\n"+t+"}";return n;case"function":return"<function>";case"string":return e;default:return String(e);}};js.Boot.__interfLoop=function(e,t){if(e==null)return false;if(e==t)return true;var i=e.__interfaces__;if(i!=null){var n=0,o=i.length;while(n<o){var s=n++;var r=i[s];if(r==t||js.Boot.__interfLoop(r,t))return true;}}return js.Boot.__interfLoop(e.__super__,t);};js.Boot.__instanceof=function(e,t){try{if(e instanceof t){if(t==Array)return e.__enum__==null;return true;}if(js.Boot.__interfLoop(e.__class__,t))return true;}catch(e){if(t==null)return false;}switch(t){case Int:return Math.ceil(e%2147483648)===e;case Float:return typeof e=="number";case Bool:return e===true||e===false;case String:return typeof e=="string";case Dynamic:return true;default:if(e==null)return false;if(t==Class&&e.__name__!=null)return true;else null;if(t==Enum&&e.__ename__!=null)return true;else null;return e.__enum__==t;}};js.Boot.__cast=function(e,t){if(js.Boot.__instanceof(e,t))return e;else throw"Cannot cast "+Std.string(e)+" to "+Std.string(t);};js.Lib=function(){};js.Lib.__name__=true;js.Lib.debug=function(){debugger;};js.Lib.alert=function(e){alert(js.Boot.__string_rec(e,""));};js.Lib.eval=function(code){return eval(code);};js.Lib.setErrorHandler=function(e){js.Lib.onerror=e;};var $_;function $bind(e,t){var i=function i(){return i.method.apply(i.scope,arguments);};i.scope=e;i.method=t;return i;}if(Array.prototype.indexOf)HxOverrides.remove=function(e,t){var i=e.indexOf(t);if(i==-1)return false;e.splice(i,1);return true;};else null;Math.__name__=["Math"];Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;Math.isFinite=function(e){return isFinite(e);};Math.isNaN=function(e){return isNaN(e);};String.prototype.__class__=String;String.__name__=true;Array.prototype.__class__=Array;Array.__name__=true;Date.prototype.__class__=Date;Date.__name__=["Date"];var Int={__name__:["Int"]};var Dynamic={__name__:["Dynamic"]};var Float=Number;Float.__name__=["Float"];var Bool=Boolean;Bool.__ename__=["Bool"];var Class={__name__:["Class"]};var Enum={};var Void={__ename__:["Void"]};if(typeof document!="undefined")js.Lib.document=document;if(typeof window!="undefined"){js.Lib.window=window;js.Lib.window.onerror=function(e,t,i){var n=js.Lib.onerror;if(n==null)return false;return n(e,[t+":"+i]);};}com.wiris.js.JsPluginTools.main();delete Array.prototype.__class__;})();(function(){var HxOverrides=function HxOverrides(){};HxOverrides.__name__=true;HxOverrides.dateStr=function(e){var t=e.getMonth()+1;var i=e.getDate();var n=e.getHours();var o=e.getMinutes();var s=e.getSeconds();return e.getFullYear()+"-"+(t<10?"0"+t:""+t)+"-"+(i<10?"0"+i:""+i)+" "+(n<10?"0"+n:""+n)+":"+(o<10?"0"+o:""+o)+":"+(s<10?"0"+s:""+s);};HxOverrides.strDate=function(e){switch(e.length){case 8:var t=e.split(":");var i=new Date();i.setTime(0);i.setUTCHours(t[0]);i.setUTCMinutes(t[1]);i.setUTCSeconds(t[2]);return i;case 10:var t=e.split("-");return new Date(t[0],t[1]-1,t[2],0,0,0);case 19:var t=e.split(" ");var n=t[0].split("-");var o=t[1].split(":");return new Date(n[0],n[1]-1,n[2],o[0],o[1],o[2]);default:throw"Invalid date format : "+e;}};HxOverrides.cca=function(e,t){var i=e.charCodeAt(t);if(i!=i)return undefined;return i;};HxOverrides.substr=function(e,t,i){if(t!=null&&t!=0&&i!=null&&i<0)return"";if(i==null)i=e.length;if(t<0){t=e.length+t;if(t<0)t=0;}else if(i<0)i=e.length+i-t;return e.substr(t,i);};HxOverrides.remove=function(e,t){var i=0;var n=e.length;while(i<n){if(e[i]==t){e.splice(i,1);return true;}i++;}return false;};HxOverrides.iter=function(e){return{cur:0,arr:e,hasNext:function hasNext(){return this.cur<this.arr.length;},next:function next(){return this.arr[this.cur++];}};};var IntIter=function IntIter(e,t){this.min=e;this.max=t;};IntIter.__name__=true;IntIter.prototype={next:function next(){return this.min++;},hasNext:function hasNext(){return this.min<this.max;},__class__:IntIter};var Std=function Std(){};Std.__name__=true;Std["is"]=function(e,t){return js.Boot.__instanceof(e,t);};Std.string=function(e){return js.Boot.__string_rec(e,"");};Std["int"]=function(e){return e|0;};Std.parseInt=function(e){var t=parseInt(e,10);if(t==0&&(HxOverrides.cca(e,1)==120||HxOverrides.cca(e,1)==88))t=parseInt(e);if(isNaN(t))return null;return t;};Std.parseFloat=function(e){return parseFloat(e);};Std.random=function(e){return Math.floor(Math.random()*e);};var com=com||{};if(!com.wiris)com.wiris={};if(!com.wiris.js)com.wiris.js={};com.wiris.js.JsPluginTools=function(){this.tryReady();};com.wiris.js.JsPluginTools.__name__=true;com.wiris.js.JsPluginTools.main=function(){var e;e=com.wiris.js.JsPluginTools.getInstance();haxe.Timer.delay($bind(e,e.tryReady),100);};com.wiris.js.JsPluginTools.getInstance=function(){if(com.wiris.js.JsPluginTools.instance==null)com.wiris.js.JsPluginTools.instance=new com.wiris.js.JsPluginTools();return com.wiris.js.JsPluginTools.instance;};com.wiris.js.JsPluginTools.bypassEncapsulation=function(){if(window.com==null)window.com={};if(window.com.wiris==null)window.com.wiris={};if(window.com.wiris.js==null)window.com.wiris.js={};if(window.com.wiris.js.JsPluginTools==null)window.com.wiris.js.JsPluginTools=com.wiris.js.JsPluginTools.getInstance();};com.wiris.js.JsPluginTools.prototype={md5encode:function md5encode(e){return haxe.Md5.encode(e);},doLoad:function doLoad(){this.ready=true;com.wiris.js.JsPluginTools.instance=this;com.wiris.js.JsPluginTools.bypassEncapsulation();},tryReady:function tryReady(){this.ready=false;if(js.Lib.document.readyState){this.doLoad();this.ready=true;}if(!this.ready)haxe.Timer.delay($bind(this,this.tryReady),100);},__class__:com.wiris.js.JsPluginTools};var haxe=haxe||{};haxe.Log=function(){};haxe.Log.__name__=true;haxe.Log.trace=function(e,t){js.Boot.__trace(e,t);};haxe.Log.clear=function(){js.Boot.__clear_trace();};haxe.Md5=function(){};haxe.Md5.__name__=true;haxe.Md5.encode=function(e){return new haxe.Md5().doEncode(e);};haxe.Md5.prototype={doEncode:function doEncode(e){var t=this.str2blks(e);var i=1732584193;var n=-271733879;var o=-1732584194;var s=271733878;var r;var a=0;while(a<t.length){var c=i;var l=n;var d=o;var u=s;r=0;i=this.ff(i,n,o,s,t[a],7,-680876936);s=this.ff(s,i,n,o,t[a+1],12,-389564586);o=this.ff(o,s,i,n,t[a+2],17,606105819);n=this.ff(n,o,s,i,t[a+3],22,-1044525330);i=this.ff(i,n,o,s,t[a+4],7,-176418897);s=this.ff(s,i,n,o,t[a+5],12,1200080426);o=this.ff(o,s,i,n,t[a+6],17,-1473231341);n=this.ff(n,o,s,i,t[a+7],22,-45705983);i=this.ff(i,n,o,s,t[a+8],7,1770035416);s=this.ff(s,i,n,o,t[a+9],12,-1958414417);o=this.ff(o,s,i,n,t[a+10],17,-42063);n=this.ff(n,o,s,i,t[a+11],22,-1990404162);i=this.ff(i,n,o,s,t[a+12],7,1804603682);s=this.ff(s,i,n,o,t[a+13],12,-40341101);o=this.ff(o,s,i,n,t[a+14],17,-1502002290);n=this.ff(n,o,s,i,t[a+15],22,1236535329);i=this.gg(i,n,o,s,t[a+1],5,-165796510);s=this.gg(s,i,n,o,t[a+6],9,-1069501632);o=this.gg(o,s,i,n,t[a+11],14,643717713);n=this.gg(n,o,s,i,t[a],20,-373897302);i=this.gg(i,n,o,s,t[a+5],5,-701558691);s=this.gg(s,i,n,o,t[a+10],9,38016083);o=this.gg(o,s,i,n,t[a+15],14,-660478335);n=this.gg(n,o,s,i,t[a+4],20,-405537848);i=this.gg(i,n,o,s,t[a+9],5,568446438);s=this.gg(s,i,n,o,t[a+14],9,-1019803690);o=this.gg(o,s,i,n,t[a+3],14,-187363961);n=this.gg(n,o,s,i,t[a+8],20,1163531501);i=this.gg(i,n,o,s,t[a+13],5,-1444681467);s=this.gg(s,i,n,o,t[a+2],9,-51403784);o=this.gg(o,s,i,n,t[a+7],14,1735328473);n=this.gg(n,o,s,i,t[a+12],20,-1926607734);i=this.hh(i,n,o,s,t[a+5],4,-378558);s=this.hh(s,i,n,o,t[a+8],11,-2022574463);o=this.hh(o,s,i,n,t[a+11],16,1839030562);n=this.hh(n,o,s,i,t[a+14],23,-35309556);i=this.hh(i,n,o,s,t[a+1],4,-1530992060);s=this.hh(s,i,n,o,t[a+4],11,1272893353);o=this.hh(o,s,i,n,t[a+7],16,-155497632);n=this.hh(n,o,s,i,t[a+10],23,-1094730640);i=this.hh(i,n,o,s,t[a+13],4,681279174);s=this.hh(s,i,n,o,t[a],11,-358537222);o=this.hh(o,s,i,n,t[a+3],16,-722521979);n=this.hh(n,o,s,i,t[a+6],23,76029189);i=this.hh(i,n,o,s,t[a+9],4,-640364487);s=this.hh(s,i,n,o,t[a+12],11,-421815835);o=this.hh(o,s,i,n,t[a+15],16,530742520);n=this.hh(n,o,s,i,t[a+2],23,-995338651);i=this.ii(i,n,o,s,t[a],6,-198630844);s=this.ii(s,i,n,o,t[a+7],10,1126891415);o=this.ii(o,s,i,n,t[a+14],15,-1416354905);n=this.ii(n,o,s,i,t[a+5],21,-57434055);i=this.ii(i,n,o,s,t[a+12],6,1700485571);s=this.ii(s,i,n,o,t[a+3],10,-1894986606);o=this.ii(o,s,i,n,t[a+10],15,-1051523);n=this.ii(n,o,s,i,t[a+1],21,-2054922799);i=this.ii(i,n,o,s,t[a+8],6,1873313359);s=this.ii(s,i,n,o,t[a+15],10,-30611744);o=this.ii(o,s,i,n,t[a+6],15,-1560198380);n=this.ii(n,o,s,i,t[a+13],21,1309151649);i=this.ii(i,n,o,s,t[a+4],6,-145523070);s=this.ii(s,i,n,o,t[a+11],10,-1120210379);o=this.ii(o,s,i,n,t[a+2],15,718787259);n=this.ii(n,o,s,i,t[a+9],21,-343485551);i=this.addme(i,c);n=this.addme(n,l);o=this.addme(o,d);s=this.addme(s,u);a+=16;}return this.rhex(i)+this.rhex(n)+this.rhex(o)+this.rhex(s);},ii:function ii(e,t,i,n,o,s,r){return this.cmn(this.bitXOR(i,this.bitOR(t,~n)),e,t,o,s,r);},hh:function hh(e,t,i,n,o,s,r){return this.cmn(this.bitXOR(this.bitXOR(t,i),n),e,t,o,s,r);},gg:function gg(e,t,i,n,o,s,r){return this.cmn(this.bitOR(this.bitAND(t,n),this.bitAND(i,~n)),e,t,o,s,r);},ff:function ff(e,t,i,n,o,s,r){return this.cmn(this.bitOR(this.bitAND(t,i),this.bitAND(~t,n)),e,t,o,s,r);},cmn:function cmn(e,t,i,n,o,s){return this.addme(this.rol(this.addme(this.addme(t,e),this.addme(n,s)),o),i);},rol:function rol(e,t){return e<<t|e>>>32-t;},str2blks:function str2blks(e){var t=(e.length+8>>6)+1;var i=new Array();var n=0,o=t*16;while(n<o){var s=n++;i[s]=0;}var s=0;while(s<e.length){i[s>>2]|=HxOverrides.cca(e,s)<<(e.length*8+s)%4*8;s++;}i[s>>2]|=128<<(e.length*8+s)%4*8;var r=e.length*8;var a=t*16-2;i[a]=r&255;i[a]|=(r>>>8&255)<<8;i[a]|=(r>>>16&255)<<16;i[a]|=(r>>>24&255)<<24;return i;},rhex:function rhex(e){var t="";var i="0123456789abcdef";var n=0;while(n<4){var o=n++;t+=i.charAt(e>>o*8+4&15)+i.charAt(e>>o*8&15);}return t;},addme:function addme(e,t){var i=(e&65535)+(t&65535);var n=(e>>16)+(t>>16)+(i>>16);return n<<16|i&65535;},bitAND:function bitAND(e,t){var i=e&1&(t&1);var n=e>>>1&t>>>1;return n<<1|i;},bitXOR:function bitXOR(e,t){var i=e&1^t&1;var n=e>>>1^t>>>1;return n<<1|i;},bitOR:function bitOR(e,t){var i=e&1|t&1;var n=e>>>1|t>>>1;return n<<1|i;},__class__:haxe.Md5};haxe.Timer=function(e){var t=this;this.id=window.setInterval(function(){t.run();},e);};haxe.Timer.__name__=true;haxe.Timer.delay=function(e,t){var i=new haxe.Timer(t);i.run=function(){i.stop();e();};return i;};haxe.Timer.measure=function(e,t){var i=haxe.Timer.stamp();var n=e();haxe.Log.trace(haxe.Timer.stamp()-i+"s",t);return n;};haxe.Timer.stamp=function(){return new Date().getTime()/1e3;};haxe.Timer.prototype={run:function run(){},stop:function stop(){if(this.id==null)return;window.clearInterval(this.id);this.id=null;},__class__:haxe.Timer};var js=js||{};js.Boot=function(){};js.Boot.__name__=true;js.Boot.__unhtml=function(e){return e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;");};js.Boot.__trace=function(e,t){var i=t!=null?t.fileName+":"+t.lineNumber+": ":"";i+=js.Boot.__string_rec(e,"");var n;if(typeof document!="undefined"&&(n=document.getElementById("haxe:trace"))!=null)n.innerHTML+=js.Boot.__unhtml(i)+"<br/>";else if(typeof console!="undefined"&&console.log!=null)console.log(i);};js.Boot.__clear_trace=function(){var e=document.getElementById("haxe:trace");if(e!=null)e.innerHTML="";};js.Boot.isClass=function(e){return e.__name__;};js.Boot.isEnum=function(e){return e.__ename__;};js.Boot.getClass=function(e){return e.__class__;};js.Boot.__string_rec=function(e,t){if(e==null)return"null";if(t.length>=5)return"<...>";var i=_typeof(e);if(i=="function"&&(e.__name__||e.__ename__))i="object";switch(i){case"object":if(e instanceof Array){if(e.__enum__){if(e.length==2)return e[0];var n=e[0]+"(";t+="\t";var o=2,s=e.length;while(o<s){var r=o++;if(r!=2)n+=","+js.Boot.__string_rec(e[r],t);else n+=js.Boot.__string_rec(e[r],t);}return n+")";}var a=e.length;var r;var n="[";t+="\t";var s=0;while(s<a){var c=s++;n+=(c>0?",":"")+js.Boot.__string_rec(e[c],t);}n+="]";return n;}var l;try{l=e.toString;}catch(e){return"???";}if(l!=null&&l!=Object.toString){var d=e.toString();if(d!="[object Object]")return d;}var u=null;var n="{\n";t+="\t";var h=e.hasOwnProperty!=null;for(var u in e){if(h&&!e.hasOwnProperty(u)){continue;}if(u=="prototype"||u=="__class__"||u=="__super__"||u=="__interfaces__"||u=="__properties__"){continue;}if(n.length!=2)n+=", \n";n+=t+u+" : "+js.Boot.__string_rec(e[u],t);}t=t.substring(1);n+="\n"+t+"}";return n;case"function":return"<function>";case"string":return e;default:return String(e);}};js.Boot.__interfLoop=function(e,t){if(e==null)return false;if(e==t)return true;var i=e.__interfaces__;if(i!=null){var n=0,o=i.length;while(n<o){var s=n++;var r=i[s];if(r==t||js.Boot.__interfLoop(r,t))return true;}}return js.Boot.__interfLoop(e.__super__,t);};js.Boot.__instanceof=function(e,t){try{if(e instanceof t){if(t==Array)return e.__enum__==null;return true;}if(js.Boot.__interfLoop(e.__class__,t))return true;}catch(e){if(t==null)return false;}switch(t){case Int:return Math.ceil(e%2147483648)===e;case Float:return typeof e=="number";case Bool:return e===true||e===false;case String:return typeof e=="string";case Dynamic:return true;default:if(e==null)return false;if(t==Class&&e.__name__!=null)return true;else null;if(t==Enum&&e.__ename__!=null)return true;else null;return e.__enum__==t;}};js.Boot.__cast=function(e,t){if(js.Boot.__instanceof(e,t))return e;else throw"Cannot cast "+Std.string(e)+" to "+Std.string(t);};js.Lib=function(){};js.Lib.__name__=true;js.Lib.debug=function(){debugger;};js.Lib.alert=function(e){alert(js.Boot.__string_rec(e,""));};js.Lib.eval=function(code){return eval(code);};js.Lib.setErrorHandler=function(e){js.Lib.onerror=e;};var $_;function $bind(e,t){var i=function i(){return i.method.apply(i.scope,arguments);};i.scope=e;i.method=t;return i;}if(Array.prototype.indexOf)HxOverrides.remove=function(e,t){var i=e.indexOf(t);if(i==-1)return false;e.splice(i,1);return true;};else null;Math.__name__=["Math"];Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=Number.POSITIVE_INFINITY;Math.isFinite=function(e){return isFinite(e);};Math.isNaN=function(e){return isNaN(e);};String.prototype.__class__=String;String.__name__=true;Array.prototype.__class__=Array;Array.__name__=true;Date.prototype.__class__=Date;Date.__name__=["Date"];var Int={__name__:["Int"]};var Dynamic={__name__:["Dynamic"]};var Float=Number;Float.__name__=["Float"];var Bool=Boolean;Bool.__ename__=["Bool"];var Class={__name__:["Class"]};var Enum={};var Void={__ename__:["Void"]};if(typeof document!="undefined")js.Lib.document=document;if(typeof window!="undefined"){js.Lib.window=window;js.Lib.window.onerror=function(e,t,i){var n=js.Lib.onerror;if(n==null)return false;return n(e,[t+":"+i]);};}com.wiris.js.JsPluginTools.main();})();delete Array.prototype.__class__;},function(e,t,i){var n=i(1);var o=i(131);o=o.__esModule?o["default"]:o;if(typeof o==="string"){o=[[e.i,o,""]];}var s={injectType:"singletonStyleTag"};s.insert="head";s.singleton=true;var r=n(o,s);var a=o.locals?o.locals:{};e.exports=a;},function(e,t){e.exports=".wrs_modal_overlay{position:fixed;font-family:arial,sans-serif;top:0;right:0;left:0;bottom:0;background:rgba(0,0,0,.8);z-index:999998;opacity:.65;pointer-events:auto}.wrs_modal_overlay.wrs_modal_android,.wrs_modal_overlay.wrs_modal_ios{visibility:hidden;display:none}.wrs_modal_overlay.wrs_modal_ios.moodle{position:fixed}.wrs_modal_overlay.wrs_modal_desktop.wrs_stack{background:transparent;display:none}.wrs_modal_overlay.wrs_modal_desktop.wrs_maximized{background:rgba(0,0,0,.8)}.wrs_modal_overlay.wrs_modal_desktop.wrs_closed,.wrs_modal_overlay.wrs_modal_desktop.wrs_minimized{background:transparent;display:none}.wrs_modal_title{color:#fff;padding:5px 0 5px 10px;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;text-align:left}.wrs_modal_close_button{background-repeat:no-repeat}.wrs_modal_close_button,.wrs_modal_minimize_button{float:right;cursor:pointer;color:#fff;padding:5px 10px 5px 0;margin:10px 7px 0 0}.wrs_modal_minimize_button{top:inherit}.wrs_modal_stack_button{float:right;cursor:pointer;color:#fff;margin:10px 7px 0 0;padding:5px 10px 5px 0;top:inherit}.wrs_modal_stack_button.wrs_minimized,.wrs_modal_stack_button.wrs_stack{visibility:hidden;margin:0;padding:0}.wrs_modal_maximize_button{float:right;cursor:pointer;color:#fff;margin:10px 7px 0 0;padding:5px 10px 5px 0;top:inherit}.wrs_modal_maximize_button.wrs_maximized{visibility:hidden;margin:0;padding:0}.wrs_modal_wrapper{display:block}.wrs_modal_title_bar{display:block;background-color:#778e9a}.wrs_modal_dialogContainer{border:none;background:#fafafa;z-index:999999}.wrs_modal_dialogContainer.wrs_modal_desktop{font-size:14px}.wrs_modal_dialogContainer.wrs_modal_desktop.wrs_maximized{position:fixed}.wrs_modal_dialogContainer.wrs_modal_desktop.wrs_minimized{position:fixed;top:inherit;margin:0 10px 0 0}.wrs_modal_dialogContainer.wrs_closed{visibility:hidden;display:none;opacity:0}.wrs_modal_dialogContainer.wrs_modal_desktop.wrs_stack{position:fixed;bottom:0;right:0;box-shadow:0 2px 8px rgba(0,0,0,.5)}.wrs_modal_dialogContainer.wrs_drag,.wrs_modal_dialogContainer.wrs_modal_desktop.wrs_drag{box-shadow:0 2px 8px rgba(0,0,0,.5)}.wrs_modal_dialogContainer.wrs_modal_android{width:99%;height:99%}.wrs_modal_dialogContainer.wrs_modal_android,.wrs_modal_dialogContainer.wrs_modal_ios{margin:auto;overflow:hidden;transform:translate(50%,-50%);top:50%;right:50%!important;position:fixed}.wrs_modal_dialogContainer.wrs_modal_ios{width:100%;height:100%}.wrs_content_container.wrs_minimized{display:none}.wrs_content_container.wrs_modal_android{width:100%;flex-grow:1;display:flex;flex-direction:column}.wrs_content_container.wrs_modal_android>div:first-child,.wrs_content_container.wrs_modal_desktop>div:first-child,.wrs_content_container.wrs_modal_ios>div:first-child{flex-grow:1}.wrs_modal_wrapper.wrs_modal_android{margin:auto;display:flex;flex-direction:column;height:100%;width:100%}.wrs_content_container.wrs_modal_desktop,.wrs_content_container.wrs_modal_ios{width:100%;flex-grow:1;display:flex;flex-direction:column}.wrs_modal_wrapper.wrs_modal_ios{margin:auto;display:flex;flex-direction:column;height:100%;width:100%}.wrs_virtual_keyboard{height:100%;width:100%;top:0;left:50%;transform:translate(-50%)}@media (orientation:portrait){.wrs_modal_dialogContainer.wrs_modal_mobile{width:100vmin;height:100vmin;margin:auto;border-width:0}.wrs_modal_wrapper.wrs_modal_mobile{width:100vmin;height:100vmin;margin:auto}}@media (orientation:landscape){.wrs_modal_dialogContainer.wrs_modal_mobile{width:100vmin;height:100vmin;margin:auto;border-width:0}.wrs_modal_wrapper.wrs_modal_mobile{width:100vmin;height:100vmin;margin:auto}}.wrs_modal_dialogContainer.wrs_modal_badStock,.wrs_modal_wrapper.wrs_modal_badStock{width:100%;height:280px;margin:0 auto;border-width:0}.wrs_noselect{-khtml-user-select:none}.wrs_bottom_right_resizer,.wrs_noselect{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.wrs_bottom_right_resizer{width:10px;height:10px;color:#778e9a;position:absolute;right:4px;bottom:8px;cursor:se-resize}.wrs_bottom_left_resizer{width:15px;height:15px;color:#778e9a;position:absolute;left:0;top:0;cursor:se-resize}.wrs_modal_controls{height:42px;margin:3px 0;overflow:hidden;line-height:normal}.wrs_modal_links{margin:10px auto 0;font-family:arial,sans-serif;padding:6px;display:inline;float:right;text-align:right}.wrs_modal_links>a{text-decoration:none;color:#778e9a;font-size:16px}.wrs_modal_button_cancel,.wrs_modal_button_cancel:active,.wrs_modal_button_cancel:focus,.wrs_modal_button_cancel:hover,.wrs_modal_button_cancel:visited{min-width:80px;font-size:14px;border-radius:3px;border:1px solid #778e9a;padding:6px 8px;margin:10px auto 0 5px;cursor:pointer;font-family:arial,sans-serif;background-color:#ddd;height:32px}.wrs_modal_button_accept,.wrs_modal_button_accept:active,.wrs_modal_button_accept:focus,.wrs_modal_button_accept:hover,.wrs_modal_button_accept:visited{min-width:80px;font-size:14px;border-radius:3px;border:1px solid #778e9a;padding:6px 8px;margin:10px 5px 0 auto;color:#fff;background:#778e9a;cursor:pointer;font-family:arial,sans-serif;height:32px}.wrs_editor_vertical_bar{height:20px;float:right;background:none;width:20px;cursor:pointer}.wrs_modal_buttons_container{display:inline;float:left}.wrs_modal_buttons_container.wrs_modalAndroid{padding-left:6px}.wrs_modal_buttons_container.wrs_modalDesktop{padding-left:0}.wrs_modal_buttons_container>button{line-height:normal;background-image:none}.wrs_modal_wrapper{margin:6px;display:flex;flex-direction:column}.wrs_modal_wrapper.wrs_modal_desktop.wrs_minimized{display:none}@media only screen and (max-device-width:480px) and (orientation:portrait){#wrs_modal_wrapper{width:140%}}.wrs_popupmessage_overlay_envolture{display:none;width:100%}.wrs_popupmessage_overlay{position:absolute;width:100%;height:100%;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.5);z-index:4;cursor:pointer}.wrs_popupmessage_panel{top:50%;left:50%;transform:translate(-50%,-50%);position:absolute;background:#fff;max-width:500px;width:75%;border-radius:2px;padding:20px;font-family:sans-serif;font-size:15px;text-align:left;color:#2e2e2e;z-index:5;max-height:75%;overflow:auto}.wrs_popupmessage_button_area{margin:10px 0 0}.wrs_panelContainer *{border:0}.wrs_button_cancel,.wrs_button_cancel:active,.wrs_button_cancel:focus,.wrs_button_cancel:hover,.wrs_button_cancel:visited{min-width:80px;font-size:14px;border-radius:3px;border:1px solid #778e9a;padding:6px 8px;margin:10px auto 0 5px;cursor:pointer;font-family:arial,sans-serif;background-color:#ddd;background-image:none;height:32px}.wrs_button_accept,.wrs_button_accept:active,.wrs_button_accept:focus,.wrs_button_accept:hover,.wrs_button_accept:visited{min-width:80px;font-size:14px;border-radius:3px;border:1px solid #778e9a;padding:6px 8px;margin:10px 5px 0 auto;color:#fff;background:#778e9a;cursor:pointer;font-family:arial,sans-serif;height:32px}.wrs_editor button{box-shadow:none}.wrs_editor .wrs_header button{border-bottom:none;border-bottom-left-radius:0;border-bottom-right-radius:0}.wrs_modal_overlay.wrs_modal_desktop.wrs_stack.wrs_overlay_active{display:block}.wrs_toolbar tr:focus,.wrs_toolbar tr:hover{background:none}.wrs_modal_rtl .wrs_modal_button_cancel{margin-right:5px;margin-left:0}.wrs_modal_rtl .wrs_modal_button_accept{margin-right:0;margin-left:5px}.wrs_modal_rtl .wrs_button_cancel{margin-right:5px;margin-left:0}.wrs_modal_rtl .wrs_button_accept{margin-right:0;margin-left:5px}";},function(e,t,i){"use strict";var _marked=/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(Tm),_marked2=/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(Mm),_marked3=/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(Lm),_marked4=/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(zm),_marked6=/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(cS);i.r(t);i.d(t,"default",function(){return ML;});var n=i(3);var o=n["a"].Symbol;var s=o;var r=Object.prototype;var a=r.hasOwnProperty;var c=r.toString;var l=s?s.toStringTag:undefined;function d(e){var t=a.call(e,l),i=e[l];try{e[l]=undefined;var n=true;}catch(e){}var o=c.call(e);if(n){if(t){e[l]=i;}else{delete e[l];}}return o;}var u=d;var h=Object.prototype;var f=h.toString;function m(e){return f.call(e);}var g=m;var p="[object Null]",b="[object Undefined]";var w=s?s.toStringTag:undefined;function _(e){if(e==null){return e===undefined?b:p;}return w&&w in Object(e)?u(e):g(e);}var v=_;function k(e,t){return function(i){return e(t(i));};}var y=k;var x=y(Object.getPrototypeOf,Object);var A=x;function C(e){return e!=null&&_typeof(e)=="object";}var T=C;var M="[object Object]";var E=Function.prototype,P=Object.prototype;var S=E.toString;var I=P.hasOwnProperty;var N=S.call(Object);function O(e){if(!T(e)||v(e)!=M){return false;}var t=A(e);if(t===null){return true;}var i=I.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&S.call(i)==N;}var R=O;function L(){this.__data__=[];this.size=0;}var z=L;function D(e,t){return e===t||e!==e&&t!==t;}var j=D;function B(e,t){var i=e.length;while(i--){if(j(e[i][0],t)){return i;}}return-1;}var V=B;var F=Array.prototype;var H=F.splice;function W(e){var t=this.__data__,i=V(t,e);if(i<0){return false;}var n=t.length-1;if(i==n){t.pop();}else{H.call(t,i,1);}--this.size;return true;}var U=W;function $(e){var t=this.__data__,i=V(t,e);return i<0?undefined:t[i][1];}var q=$;function Y(e){return V(this.__data__,e)>-1;}var G=Y;function J(e,t){var i=this.__data__,n=V(i,e);if(n<0){++this.size;i.push([e,t]);}else{i[n][1]=t;}return this;}var X=J;function K(e){var t=-1,i=e==null?0:e.length;this.clear();while(++t<i){var n=e[t];this.set(n[0],n[1]);}}K.prototype.clear=z;K.prototype["delete"]=U;K.prototype.get=q;K.prototype.has=G;K.prototype.set=X;var Q=K;function Z(){this.__data__=new Q();this.size=0;}var ee=Z;function te(e){var t=this.__data__,i=t["delete"](e);this.size=t.size;return i;}var ie=te;function ne(e){return this.__data__.get(e);}var oe=ne;function se(e){return this.__data__.has(e);}var re=se;function ae(e){var t=_typeof(e);return e!=null&&(t=="object"||t=="function");}var ce=ae;var le="[object AsyncFunction]",de="[object Function]",ue="[object GeneratorFunction]",he="[object Proxy]";function fe(e){if(!ce(e)){return false;}var t=v(e);return t==de||t==ue||t==le||t==he;}var me=fe;var ge=n["a"]["__core-js_shared__"];var pe=ge;var be=function(){var e=/[^.]+$/.exec(pe&&pe.keys&&pe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:"";}();function we(e){return!!be&&be in e;}var _e=we;var ve=Function.prototype;var ke=ve.toString;function ye(e){if(e!=null){try{return ke.call(e);}catch(e){}try{return e+"";}catch(e){}}return"";}var xe=ye;var Ae=/[\\^$.*+?()[\]{}|]/g;var Ce=/^\[object .+?Constructor\]$/;var Te=Function.prototype,Me=Object.prototype;var Ee=Te.toString;var Pe=Me.hasOwnProperty;var Se=RegExp("^"+Ee.call(Pe).replace(Ae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ie(e){if(!ce(e)||_e(e)){return false;}var t=me(e)?Se:Ce;return t.test(xe(e));}var Ne=Ie;function Oe(e,t){return e==null?undefined:e[t];}var Re=Oe;function Le(e,t){var i=Re(e,t);return Ne(i)?i:undefined;}var ze=Le;var De=ze(n["a"],"Map");var je=De;var Be=ze(Object,"create");var Ve=Be;function Fe(){this.__data__=Ve?Ve(null):{};this.size=0;}var He=Fe;function We(e){var t=this.has(e)&&delete this.__data__[e];this.size-=t?1:0;return t;}var Ue=We;var $e="__lodash_hash_undefined__";var qe=Object.prototype;var Ye=qe.hasOwnProperty;function Ge(e){var t=this.__data__;if(Ve){var i=t[e];return i===$e?undefined:i;}return Ye.call(t,e)?t[e]:undefined;}var Je=Ge;var Xe=Object.prototype;var Ke=Xe.hasOwnProperty;function Qe(e){var t=this.__data__;return Ve?t[e]!==undefined:Ke.call(t,e);}var Ze=Qe;var et="__lodash_hash_undefined__";function tt(e,t){var i=this.__data__;this.size+=this.has(e)?0:1;i[e]=Ve&&t===undefined?et:t;return this;}var it=tt;function nt(e){var t=-1,i=e==null?0:e.length;this.clear();while(++t<i){var n=e[t];this.set(n[0],n[1]);}}nt.prototype.clear=He;nt.prototype["delete"]=Ue;nt.prototype.get=Je;nt.prototype.has=Ze;nt.prototype.set=it;var ot=nt;function st(){this.size=0;this.__data__={hash:new ot(),map:new(je||Q)(),string:new ot()};}var rt=st;function at(e){var t=_typeof(e);return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null;}var ct=at;function lt(e,t){var i=e.__data__;return ct(t)?i[typeof t=="string"?"string":"hash"]:i.map;}var dt=lt;function ut(e){var t=dt(this,e)["delete"](e);this.size-=t?1:0;return t;}var ht=ut;function ft(e){return dt(this,e).get(e);}var mt=ft;function gt(e){return dt(this,e).has(e);}var pt=gt;function bt(e,t){var i=dt(this,e),n=i.size;i.set(e,t);this.size+=i.size==n?0:1;return this;}var wt=bt;function _t(e){var t=-1,i=e==null?0:e.length;this.clear();while(++t<i){var n=e[t];this.set(n[0],n[1]);}}_t.prototype.clear=rt;_t.prototype["delete"]=ht;_t.prototype.get=mt;_t.prototype.has=pt;_t.prototype.set=wt;var vt=_t;var kt=200;function yt(e,t){var i=this.__data__;if(i instanceof Q){var n=i.__data__;if(!je||n.length<kt-1){n.push([e,t]);this.size=++i.size;return this;}i=this.__data__=new vt(n);}i.set(e,t);this.size=i.size;return this;}var xt=yt;function At(e){var t=this.__data__=new Q(e);this.size=t.size;}At.prototype.clear=ee;At.prototype["delete"]=ie;At.prototype.get=oe;At.prototype.has=re;At.prototype.set=xt;var Ct=At;function Tt(e,t){var i=-1,n=e==null?0:e.length;while(++i<n){if(t(e[i],i,e)===false){break;}}return e;}var Mt=Tt;var Et=function(){try{var e=ze(Object,"defineProperty");e({},"",{});return e;}catch(e){}}();var Pt=Et;function St(e,t,i){if(t=="__proto__"&&Pt){Pt(e,t,{configurable:true,enumerable:true,value:i,writable:true});}else{e[t]=i;}}var It=St;var Nt=Object.prototype;var Ot=Nt.hasOwnProperty;function Rt(e,t,i){var n=e[t];if(!(Ot.call(e,t)&&j(n,i))||i===undefined&&!(t in e)){It(e,t,i);}}var Lt=Rt;function zt(e,t,i,n){var o=!i;i||(i={});var s=-1,r=t.length;while(++s<r){var a=t[s];var c=n?n(i[a],e[a],a,i,e):undefined;if(c===undefined){c=e[a];}if(o){It(i,a,c);}else{Lt(i,a,c);}}return i;}var Dt=zt;function jt(e,t){var i=-1,n=Array(e);while(++i<e){n[i]=t(i);}return n;}var Bt=jt;var Vt="[object Arguments]";function Ft(e){return T(e)&&v(e)==Vt;}var Ht=Ft;var Wt=Object.prototype;var Ut=Wt.hasOwnProperty;var $t=Wt.propertyIsEnumerable;var qt=Ht(function(){return arguments;}())?Ht:function(e){return T(e)&&Ut.call(e,"callee")&&!$t.call(e,"callee");};var Yt=qt;var Gt=Array.isArray;var Jt=Gt;var Xt=i(4);var Kt=9007199254740991;var Qt=/^(?:0|[1-9]\d*)$/;function Zt(e,t){var i=_typeof(e);t=t==null?Kt:t;return!!t&&(i=="number"||i!="symbol"&&Qt.test(e))&&e>-1&&e%1==0&&e<t;}var ei=Zt;var ti=9007199254740991;function ii(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ti;}var ni=ii;var oi="[object Arguments]",si="[object Array]",ri="[object Boolean]",ai="[object Date]",ci="[object Error]",li="[object Function]",di="[object Map]",ui="[object Number]",hi="[object Object]",fi="[object RegExp]",mi="[object Set]",gi="[object String]",pi="[object WeakMap]";var bi="[object ArrayBuffer]",wi="[object DataView]",_i="[object Float32Array]",vi="[object Float64Array]",ki="[object Int8Array]",yi="[object Int16Array]",xi="[object Int32Array]",Ai="[object Uint8Array]",Ci="[object Uint8ClampedArray]",Ti="[object Uint16Array]",Mi="[object Uint32Array]";var Ei={};Ei[_i]=Ei[vi]=Ei[ki]=Ei[yi]=Ei[xi]=Ei[Ai]=Ei[Ci]=Ei[Ti]=Ei[Mi]=true;Ei[oi]=Ei[si]=Ei[bi]=Ei[ri]=Ei[wi]=Ei[ai]=Ei[ci]=Ei[li]=Ei[di]=Ei[ui]=Ei[hi]=Ei[fi]=Ei[mi]=Ei[gi]=Ei[pi]=false;function Pi(e){return T(e)&&ni(e.length)&&!!Ei[v(e)];}var Si=Pi;function Ii(e){return function(t){return e(t);};}var Ni=Ii;var Oi=i(5);var Ri=Oi["a"]&&Oi["a"].isTypedArray;var Li=Ri?Ni(Ri):Si;var zi=Li;var Di=Object.prototype;var ji=Di.hasOwnProperty;function Bi(e,t){var i=Jt(e),n=!i&&Yt(e),o=!i&&!n&&Object(Xt["a"])(e),s=!i&&!n&&!o&&zi(e),r=i||n||o||s,a=r?Bt(e.length,String):[],c=a.length;for(var l in e){if((t||ji.call(e,l))&&!(r&&(l=="length"||o&&(l=="offset"||l=="parent")||s&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||ei(l,c)))){a.push(l);}}return a;}var Vi=Bi;var Fi=Object.prototype;function Hi(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||Fi;return e===i;}var Wi=Hi;var Ui=y(Object.keys,Object);var $i=Ui;var qi=Object.prototype;var Yi=qi.hasOwnProperty;function Gi(e){if(!Wi(e)){return $i(e);}var t=[];for(var i in Object(e)){if(Yi.call(e,i)&&i!="constructor"){t.push(i);}}return t;}var Ji=Gi;function Xi(e){return e!=null&&ni(e.length)&&!me(e);}var Ki=Xi;function Qi(e){return Ki(e)?Vi(e):Ji(e);}var Zi=Qi;function en(e,t){return e&&Dt(t,Zi(t),e);}var tn=en;function nn(e){var t=[];if(e!=null){for(var i in Object(e)){t.push(i);}}return t;}var on=nn;var sn=Object.prototype;var rn=sn.hasOwnProperty;function an(e){if(!ce(e)){return on(e);}var t=Wi(e),i=[];for(var n in e){if(!(n=="constructor"&&(t||!rn.call(e,n)))){i.push(n);}}return i;}var cn=an;function ln(e){return Ki(e)?Vi(e,true):cn(e);}var dn=ln;function un(e,t){return e&&Dt(t,dn(t),e);}var hn=un;var fn=i(8);function mn(e,t){var i=-1,n=e.length;t||(t=Array(n));while(++i<n){t[i]=e[i];}return t;}var gn=mn;function pn(e,t){var i=-1,n=e==null?0:e.length,o=0,s=[];while(++i<n){var r=e[i];if(t(r,i,e)){s[o++]=r;}}return s;}var bn=pn;function wn(){return[];}var _n=wn;var vn=Object.prototype;var kn=vn.propertyIsEnumerable;var yn=Object.getOwnPropertySymbols;var xn=!yn?_n:function(e){if(e==null){return[];}e=Object(e);return bn(yn(e),function(t){return kn.call(e,t);});};var An=xn;function Cn(e,t){return Dt(e,An(e),t);}var Tn=Cn;function Mn(e,t){var i=-1,n=t.length,o=e.length;while(++i<n){e[o+i]=t[i];}return e;}var En=Mn;var Pn=Object.getOwnPropertySymbols;var Sn=!Pn?_n:function(e){var t=[];while(e){En(t,An(e));e=A(e);}return t;};var In=Sn;function Nn(e,t){return Dt(e,In(e),t);}var On=Nn;function Rn(e,t,i){var n=t(e);return Jt(e)?n:En(n,i(e));}var Ln=Rn;function zn(e){return Ln(e,Zi,An);}var Dn=zn;function jn(e){return Ln(e,dn,In);}var Bn=jn;var Vn=ze(n["a"],"DataView");var Fn=Vn;var Hn=ze(n["a"],"Promise");var Wn=Hn;var Un=ze(n["a"],"Set");var $n=Un;var qn=ze(n["a"],"WeakMap");var Yn=qn;var Gn="[object Map]",Jn="[object Object]",Xn="[object Promise]",Kn="[object Set]",Qn="[object WeakMap]";var Zn="[object DataView]";var eo=xe(Fn),to=xe(je),io=xe(Wn),no=xe($n),oo=xe(Yn);var so=v;if(Fn&&so(new Fn(new ArrayBuffer(1)))!=Zn||je&&so(new je())!=Gn||Wn&&so(Wn.resolve())!=Xn||$n&&so(new $n())!=Kn||Yn&&so(new Yn())!=Qn){so=function so(e){var t=v(e),i=t==Jn?e.constructor:undefined,n=i?xe(i):"";if(n){switch(n){case eo:return Zn;case to:return Gn;case io:return Xn;case no:return Kn;case oo:return Qn;}}return t;};}var ro=so;var ao=Object.prototype;var co=ao.hasOwnProperty;function lo(e){var t=e.length,i=new e.constructor(t);if(t&&typeof e[0]=="string"&&co.call(e,"index")){i.index=e.index;i.input=e.input;}return i;}var uo=lo;var ho=n["a"].Uint8Array;var fo=ho;function mo(e){var t=new e.constructor(e.byteLength);new fo(t).set(new fo(e));return t;}var go=mo;function po(e,t){var i=t?go(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength);}var bo=po;var wo=/\w*$/;function _o(e){var t=new e.constructor(e.source,wo.exec(e));t.lastIndex=e.lastIndex;return t;}var vo=_o;var ko=s?s.prototype:undefined,yo=ko?ko.valueOf:undefined;function xo(e){return yo?Object(yo.call(e)):{};}var Ao=xo;function Co(e,t){var i=t?go(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length);}var To=Co;var Mo="[object Boolean]",Eo="[object Date]",Po="[object Map]",So="[object Number]",Io="[object RegExp]",No="[object Set]",Oo="[object String]",Ro="[object Symbol]";var Lo="[object ArrayBuffer]",zo="[object DataView]",Do="[object Float32Array]",jo="[object Float64Array]",Bo="[object Int8Array]",Vo="[object Int16Array]",Fo="[object Int32Array]",Ho="[object Uint8Array]",Wo="[object Uint8ClampedArray]",Uo="[object Uint16Array]",$o="[object Uint32Array]";function qo(e,t,i){var n=e.constructor;switch(t){case Lo:return go(e);case Mo:case Eo:return new n(+e);case zo:return bo(e,i);case Do:case jo:case Bo:case Vo:case Fo:case Ho:case Wo:case Uo:case $o:return To(e,i);case Po:return new n();case So:case Oo:return new n(e);case Io:return vo(e);case No:return new n();case Ro:return Ao(e);}}var Yo=qo;var Go=Object.create;var Jo=function(){function e(){}return function(t){if(!ce(t)){return{};}if(Go){return Go(t);}e.prototype=t;var i=new e();e.prototype=undefined;return i;};}();var Xo=Jo;function Ko(e){return typeof e.constructor=="function"&&!Wi(e)?Xo(A(e)):{};}var Qo=Ko;var Zo="[object Map]";function es(e){return T(e)&&ro(e)==Zo;}var ts=es;var is=Oi["a"]&&Oi["a"].isMap;var ns=is?Ni(is):ts;var os=ns;var ss="[object Set]";function rs(e){return T(e)&&ro(e)==ss;}var as=rs;var cs=Oi["a"]&&Oi["a"].isSet;var ls=cs?Ni(cs):as;var ds=ls;var us=1,hs=2,fs=4;var ms="[object Arguments]",gs="[object Array]",ps="[object Boolean]",bs="[object Date]",ws="[object Error]",_s="[object Function]",vs="[object GeneratorFunction]",ks="[object Map]",ys="[object Number]",xs="[object Object]",As="[object RegExp]",Cs="[object Set]",Ts="[object String]",Ms="[object Symbol]",Es="[object WeakMap]";var Ps="[object ArrayBuffer]",Ss="[object DataView]",Is="[object Float32Array]",Ns="[object Float64Array]",Os="[object Int8Array]",Rs="[object Int16Array]",Ls="[object Int32Array]",zs="[object Uint8Array]",Ds="[object Uint8ClampedArray]",js="[object Uint16Array]",Bs="[object Uint32Array]";var Vs={};Vs[ms]=Vs[gs]=Vs[Ps]=Vs[Ss]=Vs[ps]=Vs[bs]=Vs[Is]=Vs[Ns]=Vs[Os]=Vs[Rs]=Vs[Ls]=Vs[ks]=Vs[ys]=Vs[xs]=Vs[As]=Vs[Cs]=Vs[Ts]=Vs[Ms]=Vs[zs]=Vs[Ds]=Vs[js]=Vs[Bs]=true;Vs[ws]=Vs[_s]=Vs[Es]=false;function Fs(e,t,i,n,o,s){var r,a=t&us,c=t&hs,l=t&fs;if(i){r=o?i(e,n,o,s):i(e);}if(r!==undefined){return r;}if(!ce(e)){return e;}var d=Jt(e);if(d){r=uo(e);if(!a){return gn(e,r);}}else{var u=ro(e),h=u==_s||u==vs;if(Object(Xt["a"])(e)){return Object(fn["a"])(e,a);}if(u==xs||u==ms||h&&!o){r=c||h?{}:Qo(e);if(!a){return c?On(e,hn(r,e)):Tn(e,tn(r,e));}}else{if(!Vs[u]){return o?e:{};}r=Yo(e,u,a);}}s||(s=new Ct());var f=s.get(e);if(f){return f;}s.set(e,r);if(ds(e)){e.forEach(function(n){r.add(Fs(n,t,i,n,e,s));});}else if(os(e)){e.forEach(function(n,o){r.set(o,Fs(n,t,i,o,e,s));});}var m=l?c?Bn:Dn:c?keysIn:Zi;var g=d?undefined:m(e);Mt(g||e,function(n,o){if(g){o=n;n=e[o];}Lt(r,o,Fs(n,t,i,o,e,s));});return r;}var Hs=Fs;var Ws=1,Us=4;function $s(e,t){t=typeof t=="function"?t:undefined;return Hs(e,Ws|Us,t);}var qs=$s;function Ys(e){return T(e)&&e.nodeType===1&&!R(e);}var Gs=Ys;var Js=/*#__PURE__*/function(){function Js(e,t){_classCallCheck(this,Js);this._config={};if(t){this.define(Xs(t));}if(e){this._setObjectToTarget(this._config,e);}}_createClass(Js,[{key:"set",value:function set(e,t){this._setToTarget(this._config,e,t);}},{key:"define",value:function define(e,t){var i=true;this._setToTarget(this._config,e,t,i);}},{key:"get",value:function get(e){return this._getFromSource(this._config,e);}},{key:"names",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function names(){var _i2,_Object$keys,_e2;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function names$(_context){while(1){switch(_context.prev=_context.next){case 0:_i2=0,_Object$keys=Object.keys(this._config);case 1:if(!(_i2<_Object$keys.length)){_context.next=8;break;}_e2=_Object$keys[_i2];_context.next=5;return _e2;case 5:_i2++;_context.next=1;break;case 8:case"end":return _context.stop();}}},names,this);})},{key:"_setToTarget",value:function _setToTarget(e,t,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(R(t)){this._setObjectToTarget(e,t,n);return;}var o=t.split(".");t=o.pop();var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=o[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _t2=_step.value;if(!R(e[_t2])){e[_t2]={};}e=e[_t2];}}catch(err){_didIteratorError=true;_iteratorError=err;}finally{try{if(!_iteratorNormalCompletion&&_iterator["return"]!=null){_iterator["return"]();}}finally{if(_didIteratorError){throw _iteratorError;}}}if(R(i)){if(!R(e[t])){e[t]={};}e=e[t];this._setObjectToTarget(e,i,n);return;}if(n&&typeof e[t]!="undefined"){return;}e[t]=i;}},{key:"_getFromSource",value:function _getFromSource(e,t){var i=t.split(".");t=i.pop();var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=i[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var _t3=_step2.value;if(!R(e[_t3])){e=null;break;}e=e[_t3];}}catch(err){_didIteratorError2=true;_iteratorError2=err;}finally{try{if(!_iteratorNormalCompletion2&&_iterator2["return"]!=null){_iterator2["return"]();}}finally{if(_didIteratorError2){throw _iteratorError2;}}}return e?Xs(e[t]):undefined;}},{key:"_setObjectToTarget",value:function _setObjectToTarget(e,t,i){var _this2=this;Object.keys(t).forEach(function(n){_this2._setToTarget(e,n,t[n],i);});}}]);return Js;}();function Xs(e){return qs(e,Ks);}function Ks(e){return Gs(e)?e:undefined;}function Qs(){return function e(){e.called=true;};}var Zs=Qs;var er=function er(e,t){_classCallCheck(this,er);this.source=e;this.name=t;this.path=[];this.stop=Zs();this.off=Zs();};var tr=new Array(256).fill().map(function(e,t){return("0"+t.toString(16)).slice(-2);});function ir(){var e=Math.random()*4294967296>>>0;var t=Math.random()*4294967296>>>0;var i=Math.random()*4294967296>>>0;var n=Math.random()*4294967296>>>0;return"e"+tr[e>>0&255]+tr[e>>8&255]+tr[e>>16&255]+tr[e>>24&255]+tr[t>>0&255]+tr[t>>8&255]+tr[t>>16&255]+tr[t>>24&255]+tr[i>>0&255]+tr[i>>8&255]+tr[i>>16&255]+tr[i>>24&255]+tr[n>>0&255]+tr[n>>8&255]+tr[n>>16&255]+tr[n>>24&255];}var nr={get:function get(e){if(typeof e!="number"){return this[e]||this.normal;}else{return e;}},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};var or=nr;var sr=i(6);var rr=i(0);var ar=Symbol("listeningTo");var cr=Symbol("emitterId");var lr={on:function on(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};this.listenTo(this,e,t,i);},once:function once(e,t,i){var n=false;var o=function o(e){if(!n){n=true;e.off();for(var _len=arguments.length,i=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){i[_key-1]=arguments[_key];}t.call.apply(t,[this,e].concat(i));}};this.listenTo(this,e,o,i);},off:function off(e,t){this.stopListening(this,e,t);},listenTo:function listenTo(e,t,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var o,s;if(!this[ar]){this[ar]={};}var r=this[ar];if(!fr(e)){hr(e);}var a=fr(e);if(!(o=r[a])){o=r[a]={emitter:e,callbacks:{}};}if(!(s=o.callbacks[t])){s=o.callbacks[t]=[];}s.push(i);pr(e,t);var c=br(e,t);var l=or.get(n.priority);var d={callback:i,priority:l};var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=c[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var _e3=_step3.value;var _t4=false;for(var _i3=0;_i3<_e3.length;_i3++){if(_e3[_i3].priority<l){_e3.splice(_i3,0,d);_t4=true;break;}}if(!_t4){_e3.push(d);}}}catch(err){_didIteratorError3=true;_iteratorError3=err;}finally{try{if(!_iteratorNormalCompletion3&&_iterator3["return"]!=null){_iterator3["return"]();}}finally{if(_didIteratorError3){throw _iteratorError3;}}}},stopListening:function stopListening(e,t,i){var n=this[ar];var o=e&&fr(e);var s=n&&o&&n[o];var r=s&&t&&s.callbacks[t];if(!n||e&&!s||t&&!r){return;}if(i){vr(e,t,i);}else if(r){while(i=r.pop()){vr(e,t,i);}delete s.callbacks[t];}else if(s){for(t in s.callbacks){this.stopListening(e,t);}delete n[o];}else{for(o in n){this.stopListening(n[o].emitter);}delete this[ar];}},fire:function fire(e){try{var _i4=e instanceof er?e:new er(this,e);var _n2=_i4.name;var _o2=wr(this,_n2);_i4.path.push(this);for(var _len2=arguments.length,t=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){t[_key2-1]=arguments[_key2];}if(_o2){var _e4=[_i4].concat(t);_o2=Array.from(_o2);for(var _t5=0;_t5<_o2.length;_t5++){_o2[_t5].callback.apply(this,_e4);if(_i4.off.called){delete _i4.off.called;vr(this,_n2,_o2[_t5].callback);}if(_i4.stop.called){break;}}}if(this._delegations){var _e5=this._delegations.get(_n2);var _o3=this._delegations.get("*");if(_e5){_r(_e5,_i4,t);}if(_o3){_r(_o3,_i4,t);}}return _i4["return"];}catch(e){rr["b"].rethrowUnexpectedError(e,this);}},delegate:function delegate(){var _this3=this;for(var _len3=arguments.length,e=new Array(_len3),_key3=0;_key3<_len3;_key3++){e[_key3]=arguments[_key3];}return{to:function to(t,i){if(!_this3._delegations){_this3._delegations=new Map();}e.forEach(function(e){var n=_this3._delegations.get(e);if(!n){_this3._delegations.set(e,new Map([[t,i]]));}else{n.set(t,i);}});}};},stopDelegating:function stopDelegating(e,t){if(!this._delegations){return;}if(!e){this._delegations.clear();}else if(!t){this._delegations["delete"](e);}else{var _i5=this._delegations.get(e);if(_i5){_i5["delete"](t);}}}};var dr=lr;function ur(e,t){if(e[ar]&&e[ar][t]){return e[ar][t].emitter;}return null;}function hr(e,t){if(!e[cr]){e[cr]=t||ir();}}function fr(e){return e[cr];}function mr(e){if(!e._events){Object.defineProperty(e,"_events",{value:{}});}return e._events;}function gr(){return{callbacks:[],childEvents:[]};}function pr(e,t){var i=mr(e);if(i[t]){return;}var n=t;var o=null;var s=[];while(n!==""){if(i[n]){break;}i[n]=gr();s.push(i[n]);if(o){i[n].childEvents.push(o);}o=n;n=n.substr(0,n.lastIndexOf(":"));}if(n!==""){for(var _i6=0,_s2=s;_i6<_s2.length;_i6++){var _e6=_s2[_i6];_e6.callbacks=i[n].callbacks.slice();}i[n].childEvents.push(o);}}function br(e,t){var i=mr(e)[t];if(!i){return[];}var n=[i.callbacks];for(var _t6=0;_t6<i.childEvents.length;_t6++){var _o4=br(e,i.childEvents[_t6]);n=n.concat(_o4);}return n;}function wr(e,t){var i;if(!e._events||!(i=e._events[t])||!i.callbacks.length){if(t.indexOf(":")>-1){return wr(e,t.substr(0,t.lastIndexOf(":")));}else{return null;}}return i.callbacks;}function _r(e,t,i){var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=e[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var _step4$value=_slicedToArray(_step4.value,2),_n3=_step4$value[0],_o5=_step4$value[1];if(!_o5){_o5=t.name;}else if(typeof _o5=="function"){_o5=_o5(t.name);}var _e7=new er(t.source,_o5);_e7.path=_toConsumableArray(t.path);_n3.fire.apply(_n3,[_e7].concat(_toConsumableArray(i)));}}catch(err){_didIteratorError4=true;_iteratorError4=err;}finally{try{if(!_iteratorNormalCompletion4&&_iterator4["return"]!=null){_iterator4["return"]();}}finally{if(_didIteratorError4){throw _iteratorError4;}}}}function vr(e,t,i){var n=br(e,t);var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=n[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var _e8=_step5.value;for(var _t7=0;_t7<_e8.length;_t7++){if(_e8[_t7].callback==i){_e8.splice(_t7,1);_t7--;}}}}catch(err){_didIteratorError5=true;_iteratorError5=err;}finally{try{if(!_iteratorNormalCompletion5&&_iterator5["return"]!=null){_iterator5["return"]();}}finally{if(_didIteratorError5){throw _iteratorError5;}}}}function kr(e){for(var _len4=arguments.length,t=new Array(_len4>1?_len4-1:0),_key4=1;_key4<_len4;_key4++){t[_key4-1]=arguments[_key4];}t.forEach(function(t){Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t)).forEach(function(i){if(i in e.prototype){return;}var n=Object.getOwnPropertyDescriptor(t,i);n.enumerable=false;Object.defineProperty(e.prototype,i,n);});});}var yr=/*#__PURE__*/function(){function yr(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,yr);this._items=[];this._itemMap=new Map();this._idProperty=e.idProperty||"id";this._bindToExternalToInternalMap=new WeakMap();this._bindToInternalToExternalMap=new WeakMap();this._skippedIndexesFromExternal=[];}_createClass(yr,[{key:"add",value:function add(e,t){var i;var n=this._idProperty;if(n in e){i=e[n];if(typeof i!="string"){throw new rr["b"]("collection-add-invalid-id",this);}if(this.get(i)){throw new rr["b"]("collection-add-item-already-exists",this);}}else{e[n]=i=ir();}if(t===undefined){t=this._items.length;}else if(t>this._items.length||t<0){throw new rr["b"]("collection-add-item-invalid-index",this);}this._items.splice(t,0,e);this._itemMap.set(i,e);this.fire("add",e,t);return this;}},{key:"get",value:function get(e){var t;if(typeof e=="string"){t=this._itemMap.get(e);}else if(typeof e=="number"){t=this._items[e];}else{throw new rr["b"]("collection-get-invalid-arg: Index or id must be given.",this);}return t||null;}},{key:"has",value:function has(e){if(typeof e=="string"){return this._itemMap.has(e);}else{var _t8=this._idProperty;var _i7=e[_t8];return this._itemMap.has(_i7);}}},{key:"getIndex",value:function getIndex(e){var t;if(typeof e=="string"){t=this._itemMap.get(e);}else{t=e;}return this._items.indexOf(t);}},{key:"remove",value:function remove(e){var t,i,n;var o=false;var s=this._idProperty;if(typeof e=="string"){i=e;n=this._itemMap.get(i);o=!n;if(n){t=this._items.indexOf(n);}}else if(typeof e=="number"){t=e;n=this._items[t];o=!n;if(n){i=n[s];}}else{n=e;i=n[s];t=this._items.indexOf(n);o=t==-1||!this._itemMap.get(i);}if(o){throw new rr["b"]("collection-remove-404: Item not found.",this);}this._items.splice(t,1);this._itemMap["delete"](i);var r=this._bindToInternalToExternalMap.get(n);this._bindToInternalToExternalMap["delete"](n);this._bindToExternalToInternalMap["delete"](r);this.fire("remove",n,t);return n;}},{key:"map",value:function map(e,t){return this._items.map(e,t);}},{key:"find",value:function find(e,t){return this._items.find(e,t);}},{key:"filter",value:function filter(e,t){return this._items.filter(e,t);}},{key:"clear",value:function clear(){if(this._bindToCollection){this.stopListening(this._bindToCollection);this._bindToCollection=null;}while(this.length){this.remove(0);}}},{key:"bindTo",value:function bindTo(e){var _this4=this;if(this._bindToCollection){throw new rr["b"]("collection-bind-to-rebind: The collection cannot be bound more than once.",this);}this._bindToCollection=e;return{as:function as(e){_this4._setUpBindToBinding(function(t){return new e(t);});},using:function using(e){if(typeof e=="function"){_this4._setUpBindToBinding(function(t){return e(t);});}else{_this4._setUpBindToBinding(function(t){return t[e];});}}};}},{key:"_setUpBindToBinding",value:function _setUpBindToBinding(e){var _this5=this;var t=this._bindToCollection;var i=function i(_i9,n,o){var s=t._bindToCollection==_this5;var r=t._bindToInternalToExternalMap.get(n);if(s&&r){_this5._bindToExternalToInternalMap.set(n,r);_this5._bindToInternalToExternalMap.set(r,n);}else{var _i8=e(n);if(!_i8){_this5._skippedIndexesFromExternal.push(o);return;}var _s3=o;var _iteratorNormalCompletion6=true;var _didIteratorError6=false;var _iteratorError6=undefined;try{for(var _iterator6=_this5._skippedIndexesFromExternal[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=true){var _e10=_step6.value;if(o>_e10){_s3--;}}}catch(err){_didIteratorError6=true;_iteratorError6=err;}finally{try{if(!_iteratorNormalCompletion6&&_iterator6["return"]!=null){_iterator6["return"]();}}finally{if(_didIteratorError6){throw _iteratorError6;}}}var _iteratorNormalCompletion7=true;var _didIteratorError7=false;var _iteratorError7=undefined;try{for(var _iterator7=t._skippedIndexesFromExternal[Symbol.iterator](),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=true){var _e11=_step7.value;if(_s3>=_e11){_s3++;}}}catch(err){_didIteratorError7=true;_iteratorError7=err;}finally{try{if(!_iteratorNormalCompletion7&&_iterator7["return"]!=null){_iterator7["return"]();}}finally{if(_didIteratorError7){throw _iteratorError7;}}}_this5._bindToExternalToInternalMap.set(n,_i8);_this5._bindToInternalToExternalMap.set(_i8,n);_this5.add(_i8,_s3);for(var _e9=0;_e9<t._skippedIndexesFromExternal.length;_e9++){if(_s3<=t._skippedIndexesFromExternal[_e9]){t._skippedIndexesFromExternal[_e9]++;}}}};var _iteratorNormalCompletion8=true;var _didIteratorError8=false;var _iteratorError8=undefined;try{for(var _iterator8=t[Symbol.iterator](),_step8;!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=true){var _e12=_step8.value;i(null,_e12,t.getIndex(_e12));}}catch(err){_didIteratorError8=true;_iteratorError8=err;}finally{try{if(!_iteratorNormalCompletion8&&_iterator8["return"]!=null){_iterator8["return"]();}}finally{if(_didIteratorError8){throw _iteratorError8;}}}this.listenTo(t,"add",i);this.listenTo(t,"remove",function(e,t,i){var n=_this5._bindToExternalToInternalMap.get(t);if(n){_this5.remove(n);}_this5._skippedIndexesFromExternal=_this5._skippedIndexesFromExternal.reduce(function(e,t){if(i<t){e.push(t-1);}if(i>t){e.push(t);}return e;},[]);});}},{key:Symbol.iterator,value:function value(){return this._items[Symbol.iterator]();}},{key:"length",get:function get(){return this._items.length;}},{key:"first",get:function get(){return this._items[0]||null;}},{key:"last",get:function get(){return this._items[this.length-1]||null;}}]);return yr;}();kr(yr,dr);var xr=/*#__PURE__*/function(){function xr(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];_classCallCheck(this,xr);this._context=e;this._plugins=new Map();this._availablePlugins=new Map();var _iteratorNormalCompletion9=true;var _didIteratorError9=false;var _iteratorError9=undefined;try{for(var _iterator9=t[Symbol.iterator](),_step9;!(_iteratorNormalCompletion9=(_step9=_iterator9.next()).done);_iteratorNormalCompletion9=true){var _e13=_step9.value;if(_e13.pluginName){this._availablePlugins.set(_e13.pluginName,_e13);}}}catch(err){_didIteratorError9=true;_iteratorError9=err;}finally{try{if(!_iteratorNormalCompletion9&&_iterator9["return"]!=null){_iterator9["return"]();}}finally{if(_didIteratorError9){throw _iteratorError9;}}}this._contextPlugins=new Map();var _iteratorNormalCompletion10=true;var _didIteratorError10=false;var _iteratorError10=undefined;try{for(var _iterator10=i[Symbol.iterator](),_step10;!(_iteratorNormalCompletion10=(_step10=_iterator10.next()).done);_iteratorNormalCompletion10=true){var _step10$value=_slicedToArray(_step10.value,2),_e14=_step10$value[0],_t9=_step10$value[1];this._contextPlugins.set(_e14,_t9);this._contextPlugins.set(_t9,_e14);if(_e14.pluginName){this._availablePlugins.set(_e14.pluginName,_e14);}}}catch(err){_didIteratorError10=true;_iteratorError10=err;}finally{try{if(!_iteratorNormalCompletion10&&_iterator10["return"]!=null){_iterator10["return"]();}}finally{if(_didIteratorError10){throw _iteratorError10;}}}}_createClass(xr,[{key:Symbol.iterator,value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function value(){var _iteratorNormalCompletion11,_didIteratorError11,_iteratorError11,_iterator11,_step11,_e15;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function value$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_iteratorNormalCompletion11=true;_didIteratorError11=false;_iteratorError11=undefined;_context2.prev=3;_iterator11=this._plugins[Symbol.iterator]();case 5:if(_iteratorNormalCompletion11=(_step11=_iterator11.next()).done){_context2.next=13;break;}_e15=_step11.value;if(!(typeof _e15[0]=="function")){_context2.next=10;break;}_context2.next=10;return _e15;case 10:_iteratorNormalCompletion11=true;_context2.next=5;break;case 13:_context2.next=19;break;case 15:_context2.prev=15;_context2.t0=_context2["catch"](3);_didIteratorError11=true;_iteratorError11=_context2.t0;case 19:_context2.prev=19;_context2.prev=20;if(!_iteratorNormalCompletion11&&_iterator11["return"]!=null){_iterator11["return"]();}case 22:_context2.prev=22;if(!_didIteratorError11){_context2.next=25;break;}throw _iteratorError11;case 25:return _context2.finish(22);case 26:return _context2.finish(19);case 27:case"end":return _context2.stop();}}},value,this,[[3,15,19,27],[20,,22,26]]);})},{key:"get",value:function get(e){var t=this._plugins.get(e);if(!t){var _t10="plugincollection-plugin-not-loaded: The requested plugin is not loaded.";var _i10=e;if(typeof e=="function"){_i10=e.pluginName||e.name;}throw new rr["b"](_t10,this._context,{plugin:_i10});}return t;}},{key:"has",value:function has(e){return this._plugins.has(e);}},{key:"init",value:function init(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];var i=this;var n=this._context;var o=new Set();var s=[];var r=m(e);var a=m(t);var c=f(e);if(c){var _e16="plugincollection-plugin-not-found: Some plugins are not available and could not be loaded.";console.error(Object(rr["a"])(_e16),{plugins:c});return Promise.reject(new rr["b"](_e16,n,{plugins:c}));}return Promise.all(r.map(l)).then(function(){return d(s,"init");}).then(function(){return d(s,"afterInit");}).then(function(){return s;});function l(e){if(a.includes(e)){return;}if(i._plugins.has(e)||o.has(e)){return;}return u(e)["catch"](function(t){console.error(Object(rr["a"])("plugincollection-load: It was not possible to load the plugin."),{plugin:e});throw t;});}function d(e,t){return e.reduce(function(e,n){if(!n[t]){return e;}if(i._contextPlugins.has(n)){return e;}return e.then(n[t].bind(n));},Promise.resolve());}function u(e){return new Promise(function(r){o.add(e);if(e.requires){e.requires.forEach(function(i){var o=h(i);if(e.isContextPlugin&&!o.isContextPlugin){throw new rr["b"]("plugincollection-context-required: Context plugin can not require plugin which is not a context plugin",null,{plugin:o.name,requiredBy:e.name});}if(t.includes(o)){throw new rr["b"]("plugincollection-required: Cannot load a plugin because one of its dependencies is listed in"+"the `removePlugins` option.",n,{plugin:o.name,requiredBy:e.name});}l(o);});}var a=i._contextPlugins.get(e)||new e(n);i._add(e,a);s.push(a);r();});}function h(e){if(typeof e=="function"){return e;}return i._availablePlugins.get(e);}function f(e){var t=[];var _iteratorNormalCompletion12=true;var _didIteratorError12=false;var _iteratorError12=undefined;try{for(var _iterator12=e[Symbol.iterator](),_step12;!(_iteratorNormalCompletion12=(_step12=_iterator12.next()).done);_iteratorNormalCompletion12=true){var _i11=_step12.value;if(!h(_i11)){t.push(_i11);}}}catch(err){_didIteratorError12=true;_iteratorError12=err;}finally{try{if(!_iteratorNormalCompletion12&&_iterator12["return"]!=null){_iterator12["return"]();}}finally{if(_didIteratorError12){throw _iteratorError12;}}}return t.length?t:null;}function m(e){return e.map(function(e){return h(e);}).filter(function(e){return!!e;});}}},{key:"destroy",value:function destroy(){var e=[];var _iteratorNormalCompletion13=true;var _didIteratorError13=false;var _iteratorError13=undefined;try{for(var _iterator13=this[Symbol.iterator](),_step13;!(_iteratorNormalCompletion13=(_step13=_iterator13.next()).done);_iteratorNormalCompletion13=true){var _step13$value=_slicedToArray(_step13.value,2),_t11=_step13$value[1];if(typeof _t11.destroy=="function"&&!this._contextPlugins.has(_t11)){e.push(_t11.destroy());}}}catch(err){_didIteratorError13=true;_iteratorError13=err;}finally{try{if(!_iteratorNormalCompletion13&&_iterator13["return"]!=null){_iterator13["return"]();}}finally{if(_didIteratorError13){throw _iteratorError13;}}}return Promise.all(e);}},{key:"_add",value:function _add(e,t){this._plugins.set(e,t);var i=e.pluginName;if(!i){return;}if(this._plugins.has(i)){throw new rr["b"]("plugincollection-plugin-name-conflict: Two plugins with the same name were loaded.",null,{pluginName:i,plugin1:this._plugins.get(i).constructor,plugin2:e});}this._plugins.set(i,t);}}]);return xr;}();kr(xr,dr);if(!window.CKEDITOR_TRANSLATIONS){window.CKEDITOR_TRANSLATIONS={};}function Ar(e,t){var i=window.CKEDITOR_TRANSLATIONS[e]||(window.CKEDITOR_TRANSLATIONS[e]={});Object.assign(i,t);}function Cr(e,t){var i=Er();if(i===1){e=Object.keys(window.CKEDITOR_TRANSLATIONS)[0];}if(i===0||!Mr(e,t)){return t.replace(/ \[context: [^\]]+\]$/,"");}var n=window.CKEDITOR_TRANSLATIONS[e];return n[t].replace(/ \[context: [^\]]+\]$/,"");}function Tr(){window.CKEDITOR_TRANSLATIONS={};}function Mr(e,t){return e in window.CKEDITOR_TRANSLATIONS&&t in window.CKEDITOR_TRANSLATIONS[e];}function Er(){return Object.keys(window.CKEDITOR_TRANSLATIONS).length;}var Pr=["ar","fa","he","ku","ug"];var Sr=/*#__PURE__*/function(){function Sr(){var _this6=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,Sr);this.uiLanguage=e.uiLanguage||"en";this.contentLanguage=e.contentLanguage||this.uiLanguage;this.uiLanguageDirection=Ir(this.uiLanguage);this.contentLanguageDirection=Ir(this.contentLanguage);this.t=function(){return _this6._t.apply(_this6,arguments);};}_createClass(Sr,[{key:"_t",value:function _t(e,t){var i=Cr(this.uiLanguage,e);if(t){i=i.replace(/%(\d+)/g,function(e,i){return i<t.length?t[i]:e;});}return i;}},{key:"language",get:function get(){console.warn("locale-deprecated-language-property: "+"The Locale#language property has been deprecated and will be removed in the near future. "+"Please use #uiLanguage and #contentLanguage properties instead.");return this.uiLanguage;}}]);return Sr;}();function Ir(e){return Pr.includes(e)?"rtl":"ltr";}var Nr=/*#__PURE__*/function(){function Nr(e){_classCallCheck(this,Nr);this.config=new Js(e,this.constructor.defaultConfig);var t=this.constructor.builtinPlugins;this.config.define("plugins",t);this.plugins=new xr(this,t);var i=this.config.get("language")||{};this.locale=new Sr({uiLanguage:typeof i==="string"?i:i.ui,contentLanguage:this.config.get("language.content")});this.t=this.locale.t;this.editors=new yr();this._contextOwner=null;}_createClass(Nr,[{key:"initPlugins",value:function initPlugins(){var e=this.config.get("plugins")||[];var _iteratorNormalCompletion14=true;var _didIteratorError14=false;var _iteratorError14=undefined;try{for(var _iterator14=e[Symbol.iterator](),_step14;!(_iteratorNormalCompletion14=(_step14=_iterator14.next()).done);_iteratorNormalCompletion14=true){var _t12=_step14.value;if(typeof _t12!="function"){throw new rr["b"]("context-initplugins-constructor-only: Only a constructor function is allowed as a context plugin.",null,{Plugin:_t12});}if(_t12.isContextPlugin!==true){throw new rr["b"]("context-initplugins-invalid-plugin: Only a plugin marked as a context plugin is allowed to be used with a context.",null,{Plugin:_t12});}}}catch(err){_didIteratorError14=true;_iteratorError14=err;}finally{try{if(!_iteratorNormalCompletion14&&_iterator14["return"]!=null){_iterator14["return"]();}}finally{if(_didIteratorError14){throw _iteratorError14;}}}return this.plugins.init(e);}},{key:"destroy",value:function destroy(){var _this7=this;return Promise.all(Array.from(this.editors,function(e){return e.destroy();})).then(function(){return _this7.plugins.destroy();});}},{key:"_addEditor",value:function _addEditor(e,t){if(this._contextOwner){throw new rr["b"]("context-addEditor-private-context: Cannot add multiple editors to the context which is created by the editor.");}this.editors.add(e);if(t){this._contextOwner=e;}}},{key:"_removeEditor",value:function _removeEditor(e){if(this.editors.has(e)){this.editors.remove(e);}if(this._contextOwner===e){return this.destroy();}return Promise.resolve();}},{key:"_getEditorConfig",value:function _getEditorConfig(){var e={};var _iteratorNormalCompletion15=true;var _didIteratorError15=false;var _iteratorError15=undefined;try{for(var _iterator15=this.config.names()[Symbol.iterator](),_step15;!(_iteratorNormalCompletion15=(_step15=_iterator15.next()).done);_iteratorNormalCompletion15=true){var _t13=_step15.value;if(!["plugins","removePlugins","extraPlugins"].includes(_t13)){e[_t13]=this.config.get(_t13);}}}catch(err){_didIteratorError15=true;_iteratorError15=err;}finally{try{if(!_iteratorNormalCompletion15&&_iterator15["return"]!=null){_iterator15["return"]();}}finally{if(_didIteratorError15){throw _iteratorError15;}}}return e;}}],[{key:"create",value:function create(e){var _this8=this;return new Promise(function(t){var i=new _this8(e);t(i.initPlugins().then(function(){return i;}));});}}]);return Nr;}();function Or(e,t){var i=Math.min(e.length,t.length);for(var _n4=0;_n4<i;_n4++){if(e[_n4]!=t[_n4]){return _n4;}}if(e.length==t.length){return"same";}else if(e.length<t.length){return"prefix";}else{return"extension";}}var Rr=4;function Lr(e){return Hs(e,Rr);}var zr=Lr;var Dr=/*#__PURE__*/function(){function Dr(e){_classCallCheck(this,Dr);this.document=e;this.parent=null;}_createClass(Dr,[{key:"isAttached",value:function isAttached(){return this.root.is("rootElement");}},{key:"getPath",value:function getPath(){var e=[];var t=this;while(t.parent){e.unshift(t.index);t=t.parent;}return e;}},{key:"getAncestors",value:function getAncestors(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{includeSelf:false,parentFirst:false};var t=[];var i=e.includeSelf?this:this.parent;while(i){t[e.parentFirst?"push":"unshift"](i);i=i.parent;}return t;}},{key:"getCommonAncestor",value:function getCommonAncestor(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=this.getAncestors(t);var n=e.getAncestors(t);var o=0;while(i[o]==n[o]&&i[o]){o++;}return o===0?null:i[o-1];}},{key:"isBefore",value:function isBefore(e){if(this==e){return false;}if(this.root!==e.root){return false;}var t=this.getPath();var i=e.getPath();var n=Or(t,i);switch(n){case"prefix":return true;case"extension":return false;default:return t[n]<i[n];}}},{key:"isAfter",value:function isAfter(e){if(this==e){return false;}if(this.root!==e.root){return false;}return!this.isBefore(e);}},{key:"_remove",value:function _remove(){this.parent._removeChildren(this.index);}},{key:"_fireChange",value:function _fireChange(e,t){this.fire("change:"+e,t);if(this.parent){this.parent._fireChange(e,t);}}},{key:"toJSON",value:function toJSON(){var e=zr(this);delete e.parent;return e;}},{key:"is",value:function is(e){return e=="node"||e=="view:node";}},{key:"index",get:function get(){var e;if(!this.parent){return null;}if((e=this.parent.getChildIndex(this))==-1){throw new rr["b"]("view-node-not-found-in-parent: The node's parent does not contain this node.",this);}return e;}},{key:"nextSibling",get:function get(){var e=this.index;return e!==null&&this.parent.getChild(e+1)||null;}},{key:"previousSibling",get:function get(){var e=this.index;return e!==null&&this.parent.getChild(e-1)||null;}},{key:"root",get:function get(){var e=this;while(e.parent){e=e.parent;}return e;}}]);return Dr;}();kr(Dr,dr);var jr=/*#__PURE__*/function(_Dr){_inherits(jr,_Dr);function jr(e,t){var _this9;_classCallCheck(this,jr);_this9=_possibleConstructorReturn(this,_getPrototypeOf(jr).call(this,e));_this9._textData=t;return _this9;}_createClass(jr,[{key:"is",value:function is(e){return e=="text"||e=="view:text"||_get(_getPrototypeOf(jr.prototype),"is",this).call(this,e);}},{key:"isSimilar",value:function isSimilar(e){if(!(e instanceof jr)){return false;}return this===e||this.data===e.data;}},{key:"_clone",value:function _clone(){return new jr(this.document,this.data);}},{key:"data",get:function get(){return this._textData;}},{key:"_data",get:function get(){return this.data;},set:function set(e){this._fireChange("text",this);this._textData=e;}}]);return jr;}(Dr);var Br=/*#__PURE__*/function(){function Br(e,t,i){_classCallCheck(this,Br);this.textNode=e;if(t<0||t>e.data.length){throw new rr["b"]("view-textproxy-wrong-offsetintext: Given offsetInText value is incorrect.",this);}if(i<0||t+i>e.data.length){throw new rr["b"]("view-textproxy-wrong-length: Given length value is incorrect.",this);}this.data=e.data.substring(t,t+i);this.offsetInText=t;}_createClass(Br,[{key:"is",value:function is(e){return e=="textProxy"||e=="view:textProxy";}},{key:"getAncestors",value:function getAncestors(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{includeSelf:false,parentFirst:false};var t=[];var i=e.includeSelf?this.textNode:this.parent;while(i!==null){t[e.parentFirst?"push":"unshift"](i);i=i.parent;}return t;}},{key:"offsetSize",get:function get(){return this.data.length;}},{key:"isPartial",get:function get(){return this.data.length!==this.textNode.data.length;}},{key:"parent",get:function get(){return this.textNode.parent;}},{key:"root",get:function get(){return this.textNode.root;}},{key:"document",get:function get(){return this.textNode.document;}}]);return Br;}();function Vr(e){var t=new Map();for(var _i12 in e){t.set(_i12,e[_i12]);}return t;}function Fr(e){return!!(e&&e[Symbol.iterator]);}function Hr(e){if(Fr(e)){return new Map(e);}else{return Vr(e);}}var Wr=/*#__PURE__*/function(){function Wr(){_classCallCheck(this,Wr);this._patterns=[];this.add.apply(this,arguments);}_createClass(Wr,[{key:"add",value:function add(){for(var _len5=arguments.length,e=new Array(_len5),_key5=0;_key5<_len5;_key5++){e[_key5]=arguments[_key5];}for(var _i13=0,_e17=e;_i13<_e17.length;_i13++){var _t14=_e17[_i13];if(typeof _t14=="string"||_t14 instanceof RegExp){_t14={name:_t14};}if(_t14.classes&&(typeof _t14.classes=="string"||_t14.classes instanceof RegExp)){_t14.classes=[_t14.classes];}this._patterns.push(_t14);}}},{key:"match",value:function match(){for(var _len6=arguments.length,e=new Array(_len6),_key6=0;_key6<_len6;_key6++){e[_key6]=arguments[_key6];}for(var _i14=0,_e18=e;_i14<_e18.length;_i14++){var _t15=_e18[_i14];var _iteratorNormalCompletion16=true;var _didIteratorError16=false;var _iteratorError16=undefined;try{for(var _iterator16=this._patterns[Symbol.iterator](),_step16;!(_iteratorNormalCompletion16=(_step16=_iterator16.next()).done);_iteratorNormalCompletion16=true){var _e19=_step16.value;var _i15=Ur(_t15,_e19);if(_i15){return{element:_t15,pattern:_e19,match:_i15};}}}catch(err){_didIteratorError16=true;_iteratorError16=err;}finally{try{if(!_iteratorNormalCompletion16&&_iterator16["return"]!=null){_iterator16["return"]();}}finally{if(_didIteratorError16){throw _iteratorError16;}}}}return null;}},{key:"matchAll",value:function matchAll(){var t=[];for(var _len7=arguments.length,e=new Array(_len7),_key7=0;_key7<_len7;_key7++){e[_key7]=arguments[_key7];}for(var _i16=0,_e20=e;_i16<_e20.length;_i16++){var _i17=_e20[_i16];var _iteratorNormalCompletion17=true;var _didIteratorError17=false;var _iteratorError17=undefined;try{for(var _iterator17=this._patterns[Symbol.iterator](),_step17;!(_iteratorNormalCompletion17=(_step17=_iterator17.next()).done);_iteratorNormalCompletion17=true){var _e21=_step17.value;var _n5=Ur(_i17,_e21);if(_n5){t.push({element:_i17,pattern:_e21,match:_n5});}}}catch(err){_didIteratorError17=true;_iteratorError17=err;}finally{try{if(!_iteratorNormalCompletion17&&_iterator17["return"]!=null){_iterator17["return"]();}}finally{if(_didIteratorError17){throw _iteratorError17;}}}}return t.length>0?t:null;}},{key:"getElementName",value:function getElementName(){if(this._patterns.length!==1){return null;}var e=this._patterns[0];var t=e.name;return typeof e!="function"&&t&&!(t instanceof RegExp)?t:null;}}]);return Wr;}();function Ur(e,t){if(typeof t=="function"){return t(e);}var i={};if(t.name){i.name=$r(t.name,e.name);if(!i.name){return null;}}if(t.attributes){i.attributes=qr(t.attributes,e);if(!i.attributes){return null;}}if(t.classes){i.classes=Yr(t.classes,e);if(!i.classes){return false;}}if(t.styles){i.styles=Gr(t.styles,e);if(!i.styles){return false;}}return i;}function $r(e,t){if(e instanceof RegExp){return e.test(t);}return e===t;}function qr(e,t){var i=[];for(var _n6 in e){var _o6=e[_n6];if(t.hasAttribute(_n6)){var _e22=t.getAttribute(_n6);if(_o6===true){i.push(_n6);}else if(_o6 instanceof RegExp){if(_o6.test(_e22)){i.push(_n6);}else{return null;}}else if(_e22===_o6){i.push(_n6);}else{return null;}}else{return null;}}return i;}function Yr(e,t){var i=[];var _iteratorNormalCompletion18=true;var _didIteratorError18=false;var _iteratorError18=undefined;try{for(var _iterator18=e[Symbol.iterator](),_step18;!(_iteratorNormalCompletion18=(_step18=_iterator18.next()).done);_iteratorNormalCompletion18=true){var _n7=_step18.value;if(_n7 instanceof RegExp){var _e23=t.getClassNames();var _iteratorNormalCompletion19=true;var _didIteratorError19=false;var _iteratorError19=undefined;try{for(var _iterator19=_e23[Symbol.iterator](),_step19;!(_iteratorNormalCompletion19=(_step19=_iterator19.next()).done);_iteratorNormalCompletion19=true){var _t16=_step19.value;if(_n7.test(_t16)){i.push(_t16);}}}catch(err){_didIteratorError19=true;_iteratorError19=err;}finally{try{if(!_iteratorNormalCompletion19&&_iterator19["return"]!=null){_iterator19["return"]();}}finally{if(_didIteratorError19){throw _iteratorError19;}}}if(i.length===0){return null;}}else if(t.hasClass(_n7)){i.push(_n7);}else{return null;}}}catch(err){_didIteratorError18=true;_iteratorError18=err;}finally{try{if(!_iteratorNormalCompletion18&&_iterator18["return"]!=null){_iterator18["return"]();}}finally{if(_didIteratorError18){throw _iteratorError18;}}}return i;}function Gr(e,t){var i=[];for(var _n8 in e){var _o7=e[_n8];if(t.hasStyle(_n8)){var _e24=t.getStyle(_n8);if(_o7 instanceof RegExp){if(_o7.test(_e24)){i.push(_n8);}else{return null;}}else if(_e24===_o7){i.push(_n8);}else{return null;}}else{return null;}}return i;}var Jr="[object Symbol]";function Xr(e){return _typeof(e)=="symbol"||T(e)&&v(e)==Jr;}var Kr=Xr;var Qr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zr=/^\w*$/;function ea(e,t){if(Jt(e)){return false;}var i=_typeof(e);if(i=="number"||i=="symbol"||i=="boolean"||e==null||Kr(e)){return true;}return Zr.test(e)||!Qr.test(e)||t!=null&&e in Object(t);}var ta=ea;var ia="Expected a function";function na(e,t){if(typeof e!="function"||t!=null&&typeof t!="function"){throw new TypeError(ia);}var i=function i(){var n=arguments,o=t?t.apply(this,n):n[0],s=i.cache;if(s.has(o)){return s.get(o);}var r=e.apply(this,n);i.cache=s.set(o,r)||s;return r;};i.cache=new(na.Cache||vt)();return i;}na.Cache=vt;var oa=na;var sa=500;function ra(e){var t=oa(e,function(e){if(i.size===sa){i.clear();}return e;});var i=t.cache;return t;}var aa=ra;var ca=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var la=/\\(\\)?/g;var da=aa(function(e){var t=[];if(e.charCodeAt(0)===46){t.push("");}e.replace(ca,function(e,i,n,o){t.push(n?o.replace(la,"$1"):i||e);});return t;});var ua=da;function ha(e,t){var i=-1,n=e==null?0:e.length,o=Array(n);while(++i<n){o[i]=t(e[i],i,e);}return o;}var fa=ha;var ma=1/0;var ga=s?s.prototype:undefined,pa=ga?ga.toString:undefined;function ba(e){if(typeof e=="string"){return e;}if(Jt(e)){return fa(e,ba)+"";}if(Kr(e)){return pa?pa.call(e):"";}var t=e+"";return t=="0"&&1/e==-ma?"-0":t;}var wa=ba;function _a(e){return e==null?"":wa(e);}var va=_a;function ka(e,t){if(Jt(e)){return e;}return ta(e,t)?[e]:ua(va(e));}var ya=ka;function xa(e){var t=e==null?0:e.length;return t?e[t-1]:undefined;}var Aa=xa;var Ca=1/0;function Ta(e){if(typeof e=="string"||Kr(e)){return e;}var t=e+"";return t=="0"&&1/e==-Ca?"-0":t;}var Ma=Ta;function Ea(e,t){t=ya(t,e);var i=0,n=t.length;while(e!=null&&i<n){e=e[Ma(t[i++])];}return i&&i==n?e:undefined;}var Pa=Ea;function Sa(e,t,i){var n=-1,o=e.length;if(t<0){t=-t>o?0:o+t;}i=i>o?o:i;if(i<0){i+=o;}o=t>i?0:i-t>>>0;t>>>=0;var s=Array(o);while(++n<o){s[n]=e[n+t];}return s;}var Ia=Sa;function Na(e,t){return t.length<2?e:Pa(e,Ia(t,0,-1));}var Oa=Na;function Ra(e,t){t=ya(t,e);e=Oa(e,t);return e==null||delete e[Ma(Aa(t))];}var La=Ra;function za(e,t){return e==null?true:La(e,t);}var Da=za;function ja(e,t,i){var n=e==null?undefined:Pa(e,t);return n===undefined?i:n;}var Ba=ja;function Va(e,t,i){if(i!==undefined&&!j(e[t],i)||i===undefined&&!(t in e)){It(e,t,i);}}var Fa=Va;function Ha(e){return function(t,i,n){var o=-1,s=Object(t),r=n(t),a=r.length;while(a--){var c=r[e?a:++o];if(i(s[c],c,s)===false){break;}}return t;};}var Wa=Ha;var Ua=Wa();var $a=Ua;function qa(e){return T(e)&&Ki(e);}var Ya=qa;function Ga(e,t){if(t==="constructor"&&typeof e[t]==="function"){return;}if(t=="__proto__"){return;}return e[t];}var Ja=Ga;function Xa(e){return Dt(e,dn(e));}var Ka=Xa;function Qa(e,t,i,n,o,s,r){var a=Ja(e,i),c=Ja(t,i),l=r.get(c);if(l){Fa(e,i,l);return;}var d=s?s(a,c,i+"",e,t,r):undefined;var u=d===undefined;if(u){var h=Jt(c),f=!h&&Object(Xt["a"])(c),m=!h&&!f&&zi(c);d=c;if(h||f||m){if(Jt(a)){d=a;}else if(Ya(a)){d=gn(a);}else if(f){u=false;d=Object(fn["a"])(c,true);}else if(m){u=false;d=To(c,true);}else{d=[];}}else if(R(c)||Yt(c)){d=a;if(Yt(a)){d=Ka(a);}else if(!ce(a)||me(a)){d=Qo(c);}}else{u=false;}}if(u){r.set(c,d);o(d,c,n,s,r);r["delete"](c);}Fa(e,i,d);}var Za=Qa;function ec(e,t,i,n,o){if(e===t){return;}$a(t,function(s,r){o||(o=new Ct());if(ce(s)){Za(e,t,r,i,ec,n,o);}else{var a=n?n(Ja(e,r),s,r+"",e,t,o):undefined;if(a===undefined){a=s;}Fa(e,r,a);}},dn);}var tc=ec;function ic(e){return e;}var nc=ic;function oc(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2]);}return e.apply(t,i);}var sc=oc;var rc=Math.max;function ac(e,t,i){t=rc(t===undefined?e.length-1:t,0);return function(){var n=arguments,o=-1,s=rc(n.length-t,0),r=Array(s);while(++o<s){r[o]=n[t+o];}o=-1;var a=Array(t+1);while(++o<t){a[o]=n[o];}a[t]=i(r);return sc(e,this,a);};}var cc=ac;function lc(e){return function(){return e;};}var dc=lc;var uc=!Pt?nc:function(e,t){return Pt(e,"toString",{configurable:true,enumerable:false,value:dc(t),writable:true});};var hc=uc;var fc=800,mc=16;var gc=Date.now;function pc(e){var t=0,i=0;return function(){var n=gc(),o=mc-(n-i);i=n;if(o>0){if(++t>=fc){return arguments[0];}}else{t=0;}return e.apply(undefined,arguments);};}var bc=pc;var wc=bc(hc);var _c=wc;function vc(e,t){return _c(cc(e,t,nc),e+"");}var kc=vc;function yc(e,t,i){if(!ce(i)){return false;}var n=_typeof(t);if(n=="number"?Ki(i)&&ei(t,i.length):n=="string"&&t in i){return j(i[t],e);}return false;}var xc=yc;function Ac(e){return kc(function(t,i){var n=-1,o=i.length,s=o>1?i[o-1]:undefined,r=o>2?i[2]:undefined;s=e.length>3&&typeof s=="function"?(o--,s):undefined;if(r&&xc(i[0],i[1],r)){s=o<3?undefined:s;o=1;}t=Object(t);while(++n<o){var a=i[n];if(a){e(t,a,n,s);}}return t;});}var Cc=Ac;var Tc=Cc(function(e,t,i){tc(e,t,i);});var Mc=Tc;function Ec(e,t,i,n){if(!ce(e)){return e;}t=ya(t,e);var o=-1,s=t.length,r=s-1,a=e;while(a!=null&&++o<s){var c=Ma(t[o]),l=i;if(o!=r){var d=a[c];l=n?n(d,c,a):undefined;if(l===undefined){l=ce(d)?d:ei(t[o+1])?[]:{};}}Lt(a,c,l);a=a[c];}return e;}var Pc=Ec;function Sc(e,t,i){return e==null?e:Pc(e,t,i);}var Ic=Sc;var Nc=/*#__PURE__*/function(){function Nc(e){_classCallCheck(this,Nc);this._styles={};this._styleProcessor=e;}_createClass(Nc,[{key:"setTo",value:function setTo(e){this.clear();var t=Array.from(Rc(e).entries());for(var _i18=0,_t17=t;_i18<_t17.length;_i18++){var _t17$_i=_slicedToArray(_t17[_i18],2),_e25=_t17$_i[0],_i19=_t17$_i[1];this._styleProcessor.toNormalizedForm(_e25,_i19,this._styles);}}},{key:"has",value:function has(e){if(this.isEmpty){return false;}var t=this._styleProcessor.getReducedForm(e,this._styles);var i=t.find(function(_ref){var _ref2=_slicedToArray(_ref,1),t=_ref2[0];return t===e;});return Array.isArray(i);}},{key:"set",value:function set(e,t){if(ce(e)){for(var _i20=0,_Object$entries=Object.entries(e);_i20<_Object$entries.length;_i20++){var _Object$entries$_i=_slicedToArray(_Object$entries[_i20],2),_t18=_Object$entries$_i[0],_i21=_Object$entries$_i[1];this._styleProcessor.toNormalizedForm(_t18,_i21,this._styles);}}else{this._styleProcessor.toNormalizedForm(e,t,this._styles);}}},{key:"remove",value:function remove(e){var t=Lc(e);Da(this._styles,t);delete this._styles[e];this._cleanEmptyObjectsOnPath(t);}},{key:"getNormalized",value:function getNormalized(e){return this._styleProcessor.getNormalized(e,this._styles);}},{key:"toString",value:function toString(){if(this.isEmpty){return"";}return this._getStylesEntries().map(function(e){return e.join(":");}).sort().join(";")+";";}},{key:"getAsString",value:function getAsString(e){if(this.isEmpty){return;}if(this._styles[e]&&!ce(this._styles[e])){return this._styles[e];}var t=this._styleProcessor.getReducedForm(e,this._styles);var i=t.find(function(_ref3){var _ref4=_slicedToArray(_ref3,1),t=_ref4[0];return t===e;});if(Array.isArray(i)){return i[1];}}},{key:"getStyleNames",value:function getStyleNames(){if(this.isEmpty){return[];}var e=this._getStylesEntries();return e.map(function(_ref5){var _ref6=_slicedToArray(_ref5,1),e=_ref6[0];return e;});}},{key:"clear",value:function clear(){this._styles={};}},{key:"_getStylesEntries",value:function _getStylesEntries(){var e=[];var t=Object.keys(this._styles);for(var _i22=0,_t19=t;_i22<_t19.length;_i22++){var _i23=_t19[_i22];e.push.apply(e,_toConsumableArray(this._styleProcessor.getReducedForm(_i23,this._styles)));}return e;}},{key:"_cleanEmptyObjectsOnPath",value:function _cleanEmptyObjectsOnPath(e){var t=e.split(".");var i=t.length>1;if(!i){return;}var n=t.splice(0,t.length-1).join(".");var o=Ba(this._styles,n);if(!o){return;}var s=!Array.from(Object.keys(o)).length;if(s){this.remove(n);}}},{key:"isEmpty",get:function get(){var e=Object.entries(this._styles);var t=Array.from(e);return!t.length;}},{key:"size",get:function get(){if(this.isEmpty){return 0;}return this.getStyleNames().length;}}]);return Nc;}();var Oc=/*#__PURE__*/function(){function Oc(){_classCallCheck(this,Oc);this._normalizers=new Map();this._extractors=new Map();this._reducers=new Map();this._consumables=new Map();}_createClass(Oc,[{key:"toNormalizedForm",value:function toNormalizedForm(e,t,i){if(ce(t)){zc(i,Lc(e),t);return;}if(this._normalizers.has(e)){var _n9=this._normalizers.get(e);var _n10=_n9(t),_o8=_n10.path,_s4=_n10.value;zc(i,_o8,_s4);}else{zc(i,e,t);}}},{key:"getNormalized",value:function getNormalized(e,t){if(!e){return Mc({},t);}if(t[e]!==undefined){return t[e];}if(this._extractors.has(e)){var _i24=this._extractors.get(e);if(typeof _i24==="string"){return Ba(t,_i24);}var _n11=_i24(e,t);if(_n11){return _n11;}}return Ba(t,Lc(e));}},{key:"getReducedForm",value:function getReducedForm(e,t){var i=this.getNormalized(e,t);if(i===undefined){return[];}if(this._reducers.has(e)){var _t20=this._reducers.get(e);return _t20(i);}return[[e,i]];}},{key:"getRelatedStyles",value:function getRelatedStyles(e){return this._consumables.get(e)||[];}},{key:"setNormalizer",value:function setNormalizer(e,t){this._normalizers.set(e,t);}},{key:"setExtractor",value:function setExtractor(e,t){this._extractors.set(e,t);}},{key:"setReducer",value:function setReducer(e,t){this._reducers.set(e,t);}},{key:"setStyleRelation",value:function setStyleRelation(e,t){this._mapStyleNames(e,t);var _iteratorNormalCompletion20=true;var _didIteratorError20=false;var _iteratorError20=undefined;try{for(var _iterator20=t[Symbol.iterator](),_step20;!(_iteratorNormalCompletion20=(_step20=_iterator20.next()).done);_iteratorNormalCompletion20=true){var _i25=_step20.value;this._mapStyleNames(_i25,[e]);}}catch(err){_didIteratorError20=true;_iteratorError20=err;}finally{try{if(!_iteratorNormalCompletion20&&_iterator20["return"]!=null){_iterator20["return"]();}}finally{if(_didIteratorError20){throw _iteratorError20;}}}}},{key:"_mapStyleNames",value:function _mapStyleNames(e,t){var _this$_consumables$ge;if(!this._consumables.has(e)){this._consumables.set(e,[]);}(_this$_consumables$ge=this._consumables.get(e)).push.apply(_this$_consumables$ge,_toConsumableArray(t));}}]);return Oc;}();function Rc(e){var t=null;var i=0;var n=0;var o=null;var s=new Map();if(e===""){return s;}if(e.charAt(e.length-1)!=";"){e=e+";";}for(var _r2=0;_r2<e.length;_r2++){var _a2=e.charAt(_r2);if(t===null){switch(_a2){case":":if(!o){o=e.substr(i,_r2-i);n=_r2+1;}break;case'"':case"'":t=_a2;break;case";":{var _t21=e.substr(n,_r2-n);if(o){s.set(o.trim(),_t21.trim());}o=null;i=_r2+1;break;}}}else if(_a2===t){t=null;}}return s;}function Lc(e){return e.replace("-",".");}function zc(e,t,i){var n=i;if(ce(i)){n=Mc({},Ba(e,t),i);}Ic(e,t,n);}var Dc=/*#__PURE__*/function(_Dr2){_inherits(Dc,_Dr2);function Dc(e,t,i,n){var _this10;_classCallCheck(this,Dc);_this10=_possibleConstructorReturn(this,_getPrototypeOf(Dc).call(this,e));_this10.name=t;_this10._attrs=jc(i);_this10._children=[];if(n){_this10._insertChild(0,n);}_this10._classes=new Set();if(_this10._attrs.has("class")){var _e26=_this10._attrs.get("class");Bc(_this10._classes,_e26);_this10._attrs["delete"]("class");}_this10._styles=new Nc(_this10.document.stylesProcessor);if(_this10._attrs.has("style")){_this10._styles.setTo(_this10._attrs.get("style"));_this10._attrs["delete"]("style");}_this10._customProperties=new Map();return _this10;}_createClass(Dc,[{key:"is",value:function is(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=e.replace(/^view:/,"");if(!t){return i=="element"||i==this.name||_get(_getPrototypeOf(Dc.prototype),"is",this).call(this,e);}else{return i=="element"&&t==this.name;}}},{key:"getChild",value:function getChild(e){return this._children[e];}},{key:"getChildIndex",value:function getChildIndex(e){return this._children.indexOf(e);}},{key:"getChildren",value:function getChildren(){return this._children[Symbol.iterator]();}},{key:"getAttributeKeys",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getAttributeKeys(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getAttributeKeys$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(this._classes.size>0)){_context3.next=3;break;}_context3.next=3;return"class";case 3:if(this._styles.isEmpty){_context3.next=6;break;}_context3.next=6;return"style";case 6:return _context3.delegateYield(this._attrs.keys(),"t0",7);case 7:case"end":return _context3.stop();}}},getAttributeKeys,this);})},{key:"getAttributes",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getAttributes(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getAttributes$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:return _context4.delegateYield(this._attrs.entries(),"t0",1);case 1:if(!(this._classes.size>0)){_context4.next=4;break;}_context4.next=4;return["class",this.getAttribute("class")];case 4:if(this._styles.isEmpty){_context4.next=7;break;}_context4.next=7;return["style",this.getAttribute("style")];case 7:case"end":return _context4.stop();}}},getAttributes,this);})},{key:"getAttribute",value:function getAttribute(e){if(e=="class"){if(this._classes.size>0){return _toConsumableArray(this._classes).join(" ");}return undefined;}if(e=="style"){var _e27=this._styles.toString();return _e27==""?undefined:_e27;}return this._attrs.get(e);}},{key:"hasAttribute",value:function hasAttribute(e){if(e=="class"){return this._classes.size>0;}if(e=="style"){return!this._styles.isEmpty;}return this._attrs.has(e);}},{key:"isSimilar",value:function isSimilar(e){if(!(e instanceof Dc)){return false;}if(this===e){return true;}if(this.name!=e.name){return false;}if(this._attrs.size!==e._attrs.size||this._classes.size!==e._classes.size||this._styles.size!==e._styles.size){return false;}var _iteratorNormalCompletion21=true;var _didIteratorError21=false;var _iteratorError21=undefined;try{for(var _iterator21=this._attrs[Symbol.iterator](),_step21;!(_iteratorNormalCompletion21=(_step21=_iterator21.next()).done);_iteratorNormalCompletion21=true){var _step21$value=_slicedToArray(_step21.value,2),_t22=_step21$value[0],_i26=_step21$value[1];if(!e._attrs.has(_t22)||e._attrs.get(_t22)!==_i26){return false;}}}catch(err){_didIteratorError21=true;_iteratorError21=err;}finally{try{if(!_iteratorNormalCompletion21&&_iterator21["return"]!=null){_iterator21["return"]();}}finally{if(_didIteratorError21){throw _iteratorError21;}}}var _iteratorNormalCompletion22=true;var _didIteratorError22=false;var _iteratorError22=undefined;try{for(var _iterator22=this._classes[Symbol.iterator](),_step22;!(_iteratorNormalCompletion22=(_step22=_iterator22.next()).done);_iteratorNormalCompletion22=true){var _t23=_step22.value;if(!e._classes.has(_t23)){return false;}}}catch(err){_didIteratorError22=true;_iteratorError22=err;}finally{try{if(!_iteratorNormalCompletion22&&_iterator22["return"]!=null){_iterator22["return"]();}}finally{if(_didIteratorError22){throw _iteratorError22;}}}var _iteratorNormalCompletion23=true;var _didIteratorError23=false;var _iteratorError23=undefined;try{for(var _iterator23=this._styles.getStyleNames()[Symbol.iterator](),_step23;!(_iteratorNormalCompletion23=(_step23=_iterator23.next()).done);_iteratorNormalCompletion23=true){var _t24=_step23.value;if(!e._styles.has(_t24)||e._styles.getAsString(_t24)!==this._styles.getAsString(_t24)){return false;}}}catch(err){_didIteratorError23=true;_iteratorError23=err;}finally{try{if(!_iteratorNormalCompletion23&&_iterator23["return"]!=null){_iterator23["return"]();}}finally{if(_didIteratorError23){throw _iteratorError23;}}}return true;}},{key:"hasClass",value:function hasClass(){for(var _len8=arguments.length,e=new Array(_len8),_key8=0;_key8<_len8;_key8++){e[_key8]=arguments[_key8];}for(var _i27=0,_e28=e;_i27<_e28.length;_i27++){var _t25=_e28[_i27];if(!this._classes.has(_t25)){return false;}}return true;}},{key:"getClassNames",value:function getClassNames(){return this._classes.keys();}},{key:"getStyle",value:function getStyle(e){return this._styles.getAsString(e);}},{key:"getNormalizedStyle",value:function getNormalizedStyle(e){return this._styles.getNormalized(e);}},{key:"getStyleNames",value:function getStyleNames(){return this._styles.getStyleNames();}},{key:"hasStyle",value:function hasStyle(){for(var _len9=arguments.length,e=new Array(_len9),_key9=0;_key9<_len9;_key9++){e[_key9]=arguments[_key9];}for(var _i28=0,_e29=e;_i28<_e29.length;_i28++){var _t26=_e29[_i28];if(!this._styles.has(_t26)){return false;}}return true;}},{key:"findAncestor",value:function findAncestor(){for(var _len10=arguments.length,e=new Array(_len10),_key10=0;_key10<_len10;_key10++){e[_key10]=arguments[_key10];}var t=_construct(Wr,e);var i=this.parent;while(i){if(t.match(i)){return i;}i=i.parent;}return null;}},{key:"getCustomProperty",value:function getCustomProperty(e){return this._customProperties.get(e);}},{key:"getCustomProperties",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getCustomProperties(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getCustomProperties$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:return _context5.delegateYield(this._customProperties.entries(),"t0",1);case 1:case"end":return _context5.stop();}}},getCustomProperties,this);})},{key:"getIdentity",value:function getIdentity(){var e=Array.from(this._classes).sort().join(",");var t=this._styles.toString();var i=Array.from(this._attrs).map(function(e){return"".concat(e[0],"=\"").concat(e[1],"\"");}).sort().join(" ");return this.name+(e==""?"":" class=\"".concat(e,"\""))+(!t?"":" style=\"".concat(t,"\""))+(i==""?"":" ".concat(i));}},{key:"_clone",value:function _clone(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var t=[];if(e){var _iteratorNormalCompletion24=true;var _didIteratorError24=false;var _iteratorError24=undefined;try{for(var _iterator24=this.getChildren()[Symbol.iterator](),_step24;!(_iteratorNormalCompletion24=(_step24=_iterator24.next()).done);_iteratorNormalCompletion24=true){var _i29=_step24.value;t.push(_i29._clone(e));}}catch(err){_didIteratorError24=true;_iteratorError24=err;}finally{try{if(!_iteratorNormalCompletion24&&_iterator24["return"]!=null){_iterator24["return"]();}}finally{if(_didIteratorError24){throw _iteratorError24;}}}}var i=new this.constructor(this.document,this.name,this._attrs,t);i._classes=new Set(this._classes);i._styles.set(this._styles.getNormalized());i._customProperties=new Map(this._customProperties);i.getFillerOffset=this.getFillerOffset;return i;}},{key:"_appendChild",value:function _appendChild(e){return this._insertChild(this.childCount,e);}},{key:"_insertChild",value:function _insertChild(e,t){this._fireChange("children",this);var i=0;var n=Vc(this.document,t);var _iteratorNormalCompletion25=true;var _didIteratorError25=false;var _iteratorError25=undefined;try{for(var _iterator25=n[Symbol.iterator](),_step25;!(_iteratorNormalCompletion25=(_step25=_iterator25.next()).done);_iteratorNormalCompletion25=true){var _t27=_step25.value;if(_t27.parent!==null){_t27._remove();}_t27.parent=this;_t27.document=this.document;this._children.splice(e,0,_t27);e++;i++;}}catch(err){_didIteratorError25=true;_iteratorError25=err;}finally{try{if(!_iteratorNormalCompletion25&&_iterator25["return"]!=null){_iterator25["return"]();}}finally{if(_didIteratorError25){throw _iteratorError25;}}}return i;}},{key:"_removeChildren",value:function _removeChildren(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;this._fireChange("children",this);for(var _i30=e;_i30<e+t;_i30++){this._children[_i30].parent=null;}return this._children.splice(e,t);}},{key:"_setAttribute",value:function _setAttribute(e,t){t=String(t);this._fireChange("attributes",this);if(e=="class"){Bc(this._classes,t);}else if(e=="style"){this._styles.setTo(t);}else{this._attrs.set(e,t);}}},{key:"_removeAttribute",value:function _removeAttribute(e){this._fireChange("attributes",this);if(e=="class"){if(this._classes.size>0){this._classes.clear();return true;}return false;}if(e=="style"){if(!this._styles.isEmpty){this._styles.clear();return true;}return false;}return this._attrs["delete"](e);}},{key:"_addClass",value:function _addClass(e){var _this11=this;this._fireChange("attributes",this);e=Array.isArray(e)?e:[e];e.forEach(function(e){return _this11._classes.add(e);});}},{key:"_removeClass",value:function _removeClass(e){var _this12=this;this._fireChange("attributes",this);e=Array.isArray(e)?e:[e];e.forEach(function(e){return _this12._classes["delete"](e);});}},{key:"_setStyle",value:function _setStyle(e,t){this._fireChange("attributes",this);this._styles.set(e,t);}},{key:"_removeStyle",value:function _removeStyle(e){var _this13=this;this._fireChange("attributes",this);e=Array.isArray(e)?e:[e];e.forEach(function(e){return _this13._styles.remove(e);});}},{key:"_setCustomProperty",value:function _setCustomProperty(e,t){this._customProperties.set(e,t);}},{key:"_removeCustomProperty",value:function _removeCustomProperty(e){return this._customProperties["delete"](e);}},{key:"childCount",get:function get(){return this._children.length;}},{key:"isEmpty",get:function get(){return this._children.length===0;}}]);return Dc;}(Dr);function jc(e){e=Hr(e);var _iteratorNormalCompletion26=true;var _didIteratorError26=false;var _iteratorError26=undefined;try{for(var _iterator26=e[Symbol.iterator](),_step26;!(_iteratorNormalCompletion26=(_step26=_iterator26.next()).done);_iteratorNormalCompletion26=true){var _step26$value=_slicedToArray(_step26.value,2),_t28=_step26$value[0],_i31=_step26$value[1];if(_i31===null){e["delete"](_t28);}else if(typeof _i31!="string"){e.set(_t28,String(_i31));}}}catch(err){_didIteratorError26=true;_iteratorError26=err;}finally{try{if(!_iteratorNormalCompletion26&&_iterator26["return"]!=null){_iterator26["return"]();}}finally{if(_didIteratorError26){throw _iteratorError26;}}}return e;}function Bc(e,t){var i=t.split(/\s+/);e.clear();i.forEach(function(t){return e.add(t);});}function Vc(e,t){if(typeof t=="string"){return[new jr(e,t)];}if(!Fr(t)){t=[t];}return Array.from(t).map(function(t){if(typeof t=="string"){return new jr(e,t);}if(t instanceof Br){return new jr(e,t.data);}return t;});}var Fc=/*#__PURE__*/function(_Dc){_inherits(Fc,_Dc);function Fc(e,t,i,n){var _this14;_classCallCheck(this,Fc);_this14=_possibleConstructorReturn(this,_getPrototypeOf(Fc).call(this,e,t,i,n));_this14.getFillerOffset=Hc;return _this14;}_createClass(Fc,[{key:"is",value:function is(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=e&&e.replace(/^view:/,"");if(!t){return i=="containerElement"||_get(_getPrototypeOf(Fc.prototype),"is",this).call(this,e);}else{return i=="containerElement"&&t==this.name||_get(_getPrototypeOf(Fc.prototype),"is",this).call(this,e,t);}}}]);return Fc;}(Dc);function Hc(){var e=_toConsumableArray(this.getChildren());var t=e[this.childCount-1];if(t&&t.is("element","br")){return this.childCount;}var _iteratorNormalCompletion27=true;var _didIteratorError27=false;var _iteratorError27=undefined;try{for(var _iterator27=e[Symbol.iterator](),_step27;!(_iteratorNormalCompletion27=(_step27=_iterator27.next()).done);_iteratorNormalCompletion27=true){var _t29=_step27.value;if(!_t29.is("uiElement")){return null;}}}catch(err){_didIteratorError27=true;_iteratorError27=err;}finally{try{if(!_iteratorNormalCompletion27&&_iterator27["return"]!=null){_iterator27["return"]();}}finally{if(_didIteratorError27){throw _iteratorError27;}}}return this.childCount;}var Wc=Cc(function(e,t){Dt(t,dn(t),e);});var Uc=Wc;var $c=Symbol("observableProperties");var qc=Symbol("boundObservables");var Yc=Symbol("boundProperties");var Gc={set:function set(e,t){var _this15=this;if(ce(e)){Object.keys(e).forEach(function(t){_this15.set(t,e[t]);},this);return;}Xc(this);var i=this[$c];if(e in this&&!i.has(e)){throw new rr["b"]("observable-set-cannot-override: Cannot override an existing property.",this);}Object.defineProperty(this,e,{enumerable:true,configurable:true,get:function get(){return i.get(e);},set:function set(t){var n=i.get(e);var o=this.fire("set:"+e,e,t,n);if(o===undefined){o=t;}if(n!==o||!i.has(e)){i.set(e,o);this.fire("change:"+e,e,o,n);}}});this[e]=t;},bind:function bind(){var _this16=this;for(var _len11=arguments.length,e=new Array(_len11),_key11=0;_key11<_len11;_key11++){e[_key11]=arguments[_key11];}if(!e.length||!el(e)){throw new rr["b"]("observable-bind-wrong-properties: All properties must be strings.",this);}if(new Set(e).size!==e.length){throw new rr["b"]("observable-bind-duplicate-properties: Properties must be unique.",this);}Xc(this);var t=this[Yc];e.forEach(function(e){if(t.has(e)){throw new rr["b"]("observable-bind-rebind: Cannot bind the same property more than once.",_this16);}});var i=new Map();e.forEach(function(e){var n={property:e,to:[]};t.set(e,n);i.set(e,n);});return{to:Kc,toMany:Qc,_observable:this,_bindProperties:e,_to:[],_bindings:i};},unbind:function unbind(){var _this17=this;if(!($c in this)){return;}var t=this[Yc];var i=this[qc];for(var _len12=arguments.length,e=new Array(_len12),_key12=0;_key12<_len12;_key12++){e[_key12]=arguments[_key12];}if(e.length){if(!el(e)){throw new rr["b"]("observable-unbind-wrong-properties: Properties must be strings.",this);}e.forEach(function(e){var n=t.get(e);if(!n){return;}var o,s,r,a;n.to.forEach(function(e){o=e[0];s=e[1];r=i.get(o);a=r[s];a["delete"](n);if(!a.size){delete r[s];}if(!Object.keys(r).length){i["delete"](o);_this17.stopListening(o,"change");}});t["delete"](e);});}else{i.forEach(function(e,t){_this17.stopListening(t,"change");});i.clear();t.clear();}},decorate:function decorate(e){var _this18=this;var t=this[e];if(!t){throw new rr["b"]("observablemixin-cannot-decorate-undefined: Cannot decorate an undefined method.",this,{object:this,methodName:e});}this.on(e,function(e,i){e["return"]=t.apply(_this18,i);});this[e]=function(){for(var _len13=arguments.length,t=new Array(_len13),_key13=0;_key13<_len13;_key13++){t[_key13]=arguments[_key13];}return this.fire(e,t);};}};Uc(Gc,dr);var Jc=Gc;function Xc(e){if($c in e){return;}Object.defineProperty(e,$c,{value:new Map()});Object.defineProperty(e,qc,{value:new Map()});Object.defineProperty(e,Yc,{value:new Map()});}function Kc(){var _this19=this;var t=tl.apply(void 0,arguments);var i=Array.from(this._bindings.keys());var n=i.length;if(!t.callback&&t.to.length>1){throw new rr["b"]("observable-bind-to-no-callback: Binding multiple observables only possible with callback.",this);}if(n>1&&t.callback){throw new rr["b"]("observable-bind-to-extra-callback: Cannot bind multiple properties and use a callback in one binding.",this);}t.to.forEach(function(e){if(e.properties.length&&e.properties.length!==n){throw new rr["b"]("observable-bind-to-properties-length: The number of properties must match.",_this19);}if(!e.properties.length){e.properties=_this19._bindProperties;}});this._to=t.to;if(t.callback){this._bindings.get(i[0]).callback=t.callback;}sl(this._observable,this._to);nl(this);this._bindProperties.forEach(function(e){ol(_this19._observable,e);});}function Qc(e,t,i){if(this._bindings.size>1){throw new rr["b"]("observable-bind-to-many-not-one-binding: Cannot bind multiple properties with toMany().",this);}this.to.apply(this,_toConsumableArray(Zc(e,t)).concat([i]));}function Zc(e,t){var i=e.map(function(e){return[e,t];});return Array.prototype.concat.apply([],i);}function el(e){return e.every(function(e){return typeof e=="string";});}function tl(){for(var _len14=arguments.length,e=new Array(_len14),_key14=0;_key14<_len14;_key14++){e[_key14]=arguments[_key14];}if(!e.length){throw new rr["b"]("observable-bind-to-parse-error: Invalid argument syntax in `to()`.",null);}var t={to:[]};var i;if(typeof e[e.length-1]=="function"){t.callback=e.pop();}e.forEach(function(e){if(typeof e=="string"){i.properties.push(e);}else if(_typeof(e)=="object"){i={observable:e,properties:[]};t.to.push(i);}else{throw new rr["b"]("observable-bind-to-parse-error: Invalid argument syntax in `to()`.",null);}});return t;}function il(e,t,i,n){var o=e[qc];var s=o.get(i);var r=s||{};if(!r[n]){r[n]=new Set();}r[n].add(t);if(!s){o.set(i,r);}}function nl(e){var t;e._bindings.forEach(function(i,n){e._to.forEach(function(o){t=o.properties[i.callback?0:e._bindProperties.indexOf(n)];i.to.push([o.observable,t]);il(e._observable,i,o.observable,t);});});}function ol(e,t){var i=e[Yc];var n=i.get(t);var o;if(n.callback){o=n.callback.apply(e,n.to.map(function(e){return e[0][e[1]];}));}else{o=n.to[0];o=o[0][o[1]];}if(e.hasOwnProperty(t)){e[t]=o;}else{e.set(t,o);}}function sl(e,t){t.forEach(function(t){var i=e[qc];var n;if(!i.get(t.observable)){e.listenTo(t.observable,"change",function(o,s){n=i.get(t.observable)[s];if(n){n.forEach(function(t){ol(e,t.property);});}});}});}var rl=/*#__PURE__*/function(_Fc){_inherits(rl,_Fc);function rl(e,t,i,n){var _this20;_classCallCheck(this,rl);_this20=_possibleConstructorReturn(this,_getPrototypeOf(rl).call(this,e,t,i,n));_this20.set("isReadOnly",false);_this20.set("isFocused",false);_this20.bind("isReadOnly").to(e);_this20.bind("isFocused").to(e,"isFocused",function(t){return t&&e.selection.editableElement==_assertThisInitialized(_this20);});_this20.listenTo(e.selection,"change",function(){_this20.isFocused=e.isFocused&&e.selection.editableElement==_assertThisInitialized(_this20);});return _this20;}_createClass(rl,[{key:"is",value:function is(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=e&&e.replace(/^view:/,"");if(!t){return i=="editableElement"||_get(_getPrototypeOf(rl.prototype),"is",this).call(this,e);}else{return i=="editableElement"&&t==this.name||_get(_getPrototypeOf(rl.prototype),"is",this).call(this,e,t);}}},{key:"destroy",value:function destroy(){this.stopListening();}}]);return rl;}(Fc);kr(rl,Jc);var al=Symbol("rootName");var cl=/*#__PURE__*/function(_rl){_inherits(cl,_rl);function cl(e,t){var _this21;_classCallCheck(this,cl);_this21=_possibleConstructorReturn(this,_getPrototypeOf(cl).call(this,e,t));_this21.rootName="main";return _this21;}_createClass(cl,[{key:"is",value:function is(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=e.replace(/^view:/,"");if(!t){return i=="rootElement"||_get(_getPrototypeOf(cl.prototype),"is",this).call(this,e);}else{return i=="rootElement"&&t==this.name||_get(_getPrototypeOf(cl.prototype),"is",this).call(this,e,t);}}},{key:"rootName",get:function get(){return this.getCustomProperty(al);},set:function set(e){this._setCustomProperty(al,e);}},{key:"_name",set:function set(e){this.name=e;}}]);return cl;}(rl);var ll=/*#__PURE__*/function(){function ll(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,ll);if(!e.boundaries&&!e.startPosition){throw new rr["b"]("view-tree-walker-no-start-position: Neither boundaries nor starting position have been defined.",null);}if(e.direction&&e.direction!="forward"&&e.direction!="backward"){throw new rr["b"]("view-tree-walker-unknown-direction: Only `backward` and `forward` direction allowed.",e.startPosition,{direction:e.direction});}this.boundaries=e.boundaries||null;if(e.startPosition){this.position=dl._createAt(e.startPosition);}else{this.position=dl._createAt(e.boundaries[e.direction=="backward"?"end":"start"]);}this.direction=e.direction||"forward";this.singleCharacters=!!e.singleCharacters;this.shallow=!!e.shallow;this.ignoreElementEnd=!!e.ignoreElementEnd;this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null;this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null;}_createClass(ll,[{key:Symbol.iterator,value:function value(){return this;}},{key:"skip",value:function skip(e){var t,i,n;do{n=this.position;var _this$next=this.next();t=_this$next.done;i=_this$next.value;}while(!t&&e(i));if(!t){this.position=n;}}},{key:"next",value:function next(){if(this.direction=="forward"){return this._next();}else{return this._previous();}}},{key:"_next",value:function _next(){var e=this.position.clone();var t=this.position;var i=e.parent;if(i.parent===null&&e.offset===i.childCount){return{done:true};}if(i===this._boundaryEndParent&&e.offset==this.boundaries.end.offset){return{done:true};}var n;if(i instanceof jr){if(e.isAtEnd){this.position=dl._createAfter(i);return this._next();}n=i.data[e.offset];}else{n=i.getChild(e.offset);}if(n instanceof Dc){if(!this.shallow){e=new dl(n,0);}else{e.offset++;}this.position=e;return this._formatReturnValue("elementStart",n,t,e,1);}else if(n instanceof jr){if(this.singleCharacters){e=new dl(n,0);this.position=e;return this._next();}else{var _i32=n.data.length;var _o9;if(n==this._boundaryEndParent){_i32=this.boundaries.end.offset;_o9=new Br(n,0,_i32);e=dl._createAfter(_o9);}else{_o9=new Br(n,0,n.data.length);e.offset++;}this.position=e;return this._formatReturnValue("text",_o9,t,e,_i32);}}else if(typeof n=="string"){var _n12;if(this.singleCharacters){_n12=1;}else{var _t30=i===this._boundaryEndParent?this.boundaries.end.offset:i.data.length;_n12=_t30-e.offset;}var _o10=new Br(i,e.offset,_n12);e.offset+=_n12;this.position=e;return this._formatReturnValue("text",_o10,t,e,_n12);}else{e=dl._createAfter(i);this.position=e;if(this.ignoreElementEnd){return this._next();}else{return this._formatReturnValue("elementEnd",i,t,e);}}}},{key:"_previous",value:function _previous(){var e=this.position.clone();var t=this.position;var i=e.parent;if(i.parent===null&&e.offset===0){return{done:true};}if(i==this._boundaryStartParent&&e.offset==this.boundaries.start.offset){return{done:true};}var n;if(i instanceof jr){if(e.isAtStart){this.position=dl._createBefore(i);return this._previous();}n=i.data[e.offset-1];}else{n=i.getChild(e.offset-1);}if(n instanceof Dc){if(!this.shallow){e=new dl(n,n.childCount);this.position=e;if(this.ignoreElementEnd){return this._previous();}else{return this._formatReturnValue("elementEnd",n,t,e);}}else{e.offset--;this.position=e;return this._formatReturnValue("elementStart",n,t,e,1);}}else if(n instanceof jr){if(this.singleCharacters){e=new dl(n,n.data.length);this.position=e;return this._previous();}else{var _i33=n.data.length;var _o11;if(n==this._boundaryStartParent){var _t31=this.boundaries.start.offset;_o11=new Br(n,_t31,n.data.length-_t31);_i33=_o11.data.length;e=dl._createBefore(_o11);}else{_o11=new Br(n,0,n.data.length);e.offset--;}this.position=e;return this._formatReturnValue("text",_o11,t,e,_i33);}}else if(typeof n=="string"){var _n13;if(!this.singleCharacters){var _t32=i===this._boundaryStartParent?this.boundaries.start.offset:0;_n13=e.offset-_t32;}else{_n13=1;}e.offset-=_n13;var _o12=new Br(i,e.offset,_n13);this.position=e;return this._formatReturnValue("text",_o12,t,e,_n13);}else{e=dl._createBefore(i);this.position=e;return this._formatReturnValue("elementStart",i,t,e,1);}}},{key:"_formatReturnValue",value:function _formatReturnValue(e,t,i,n,o){if(t instanceof Br){if(t.offsetInText+t.data.length==t.textNode.data.length){if(this.direction=="forward"&&!(this.boundaries&&this.boundaries.end.isEqual(this.position))){n=dl._createAfter(t.textNode);this.position=n;}else{i=dl._createAfter(t.textNode);}}if(t.offsetInText===0){if(this.direction=="backward"&&!(this.boundaries&&this.boundaries.start.isEqual(this.position))){n=dl._createBefore(t.textNode);this.position=n;}else{i=dl._createBefore(t.textNode);}}}return{done:false,value:{type:e,item:t,previousPosition:i,nextPosition:n,length:o}};}}]);return ll;}();var dl=/*#__PURE__*/function(){function dl(e,t){_classCallCheck(this,dl);this.parent=e;this.offset=t;}_createClass(dl,[{key:"getShiftedBy",value:function getShiftedBy(e){var t=dl._createAt(this);var i=t.offset+e;t.offset=i<0?0:i;return t;}},{key:"getLastMatchingPosition",value:function getLastMatchingPosition(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};t.startPosition=this;var i=new ll(t);i.skip(e);return i.position;}},{key:"getAncestors",value:function getAncestors(){if(this.parent.is("documentFragment")){return[this.parent];}else{return this.parent.getAncestors({includeSelf:true});}}},{key:"getCommonAncestor",value:function getCommonAncestor(e){var t=this.getAncestors();var i=e.getAncestors();var n=0;while(t[n]==i[n]&&t[n]){n++;}return n===0?null:t[n-1];}},{key:"is",value:function is(e){return e=="position"||e=="view:position";}},{key:"isEqual",value:function isEqual(e){return this.parent==e.parent&&this.offset==e.offset;}},{key:"isBefore",value:function isBefore(e){return this.compareWith(e)=="before";}},{key:"isAfter",value:function isAfter(e){return this.compareWith(e)=="after";}},{key:"compareWith",value:function compareWith(e){if(this.root!==e.root){return"different";}if(this.isEqual(e)){return"same";}var t=this.parent.is("node")?this.parent.getPath():[];var i=e.parent.is("node")?e.parent.getPath():[];t.push(this.offset);i.push(e.offset);var n=Or(t,i);switch(n){case"prefix":return"before";case"extension":return"after";default:return t[n]<i[n]?"before":"after";}}},{key:"getWalker",value:function getWalker(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};e.startPosition=this;return new ll(e);}},{key:"clone",value:function clone(){return new dl(this.parent,this.offset);}},{key:"nodeAfter",get:function get(){if(this.parent.is("text")){return null;}return this.parent.getChild(this.offset)||null;}},{key:"nodeBefore",get:function get(){if(this.parent.is("text")){return null;}return this.parent.getChild(this.offset-1)||null;}},{key:"isAtStart",get:function get(){return this.offset===0;}},{key:"isAtEnd",get:function get(){var e=this.parent.is("text")?this.parent.data.length:this.parent.childCount;return this.offset===e;}},{key:"root",get:function get(){return this.parent.root;}},{key:"editableElement",get:function get(){var e=this.parent;while(!(e instanceof rl)){if(e.parent){e=e.parent;}else{return null;}}return e;}}],[{key:"_createAt",value:function _createAt(e,t){if(e instanceof dl){return new this(e.parent,e.offset);}else{var _i34=e;if(t=="end"){t=_i34.is("text")?_i34.data.length:_i34.childCount;}else if(t=="before"){return this._createBefore(_i34);}else if(t=="after"){return this._createAfter(_i34);}else if(t!==0&&!t){throw new rr["b"]("view-createPositionAt-offset-required: "+"View#createPositionAt() requires the offset when the first parameter is a view item.",_i34);}return new dl(_i34,t);}}},{key:"_createAfter",value:function _createAfter(e){if(e.is("textProxy")){return new dl(e.textNode,e.offsetInText+e.data.length);}if(!e.parent){throw new rr["b"]("view-position-after-root: You can not make position after root.",e,{root:e});}return new dl(e.parent,e.index+1);}},{key:"_createBefore",value:function _createBefore(e){if(e.is("textProxy")){return new dl(e.textNode,e.offsetInText);}if(!e.parent){throw new rr["b"]("view-position-before-root: You can not make position before root.",e,{root:e});}return new dl(e.parent,e.index);}}]);return dl;}();var ul=/*#__PURE__*/function(){function ul(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;_classCallCheck(this,ul);this.start=e.clone();this.end=t?t.clone():e.clone();}_createClass(ul,[{key:Symbol.iterator,value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function value(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function value$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:return _context6.delegateYield(new ll({boundaries:this,ignoreElementEnd:true}),"t0",1);case 1:case"end":return _context6.stop();}}},value,this);})},{key:"getEnlarged",value:function getEnlarged(){var e=this.start.getLastMatchingPosition(hl,{direction:"backward"});var t=this.end.getLastMatchingPosition(hl);if(e.parent.is("text")&&e.isAtStart){e=dl._createBefore(e.parent);}if(t.parent.is("text")&&t.isAtEnd){t=dl._createAfter(t.parent);}return new ul(e,t);}},{key:"getTrimmed",value:function getTrimmed(){var e=this.start.getLastMatchingPosition(hl);if(e.isAfter(this.end)||e.isEqual(this.end)){return new ul(e,e);}var t=this.end.getLastMatchingPosition(hl,{direction:"backward"});var i=e.nodeAfter;var n=t.nodeBefore;if(i&&i.is("text")){e=new dl(i,0);}if(n&&n.is("text")){t=new dl(n,n.data.length);}return new ul(e,t);}},{key:"isEqual",value:function isEqual(e){return this==e||this.start.isEqual(e.start)&&this.end.isEqual(e.end);}},{key:"containsPosition",value:function containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end);}},{key:"containsRange",value:function containsRange(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(e.isCollapsed){t=false;}var i=this.containsPosition(e.start)||t&&this.start.isEqual(e.start);var n=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return i&&n;}},{key:"getDifference",value:function getDifference(e){var t=[];if(this.isIntersecting(e)){if(this.containsPosition(e.start)){t.push(new ul(this.start,e.start));}if(this.containsPosition(e.end)){t.push(new ul(e.end,this.end));}}else{t.push(this.clone());}return t;}},{key:"getIntersection",value:function getIntersection(e){if(this.isIntersecting(e)){var _t33=this.start;var _i35=this.end;if(this.containsPosition(e.start)){_t33=e.start;}if(this.containsPosition(e.end)){_i35=e.end;}return new ul(_t33,_i35);}return null;}},{key:"getWalker",value:function getWalker(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};e.boundaries=this;return new ll(e);}},{key:"getCommonAncestor",value:function getCommonAncestor(){return this.start.getCommonAncestor(this.end);}},{key:"getContainedElement",value:function getContainedElement(){if(this.isCollapsed){return null;}var e=this.start.nodeAfter;var t=this.end.nodeBefore;if(this.start.parent.is("text")&&this.start.isAtEnd&&this.start.parent.nextSibling){e=this.start.parent.nextSibling;}if(this.end.parent.is("text")&&this.end.isAtStart&&this.end.parent.previousSibling){t=this.end.parent.previousSibling;}if(e&&e.is("element")&&e===t){return e;}return null;}},{key:"clone",value:function clone(){return new ul(this.start,this.end);}},{key:"getItems",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getItems(){var e,t,_iteratorNormalCompletion28,_didIteratorError28,_iteratorError28,_iterator28,_step28,_e30,_args7=arguments;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getItems$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:e=_args7.length>0&&_args7[0]!==undefined?_args7[0]:{};e.boundaries=this;e.ignoreElementEnd=true;t=new ll(e);_iteratorNormalCompletion28=true;_didIteratorError28=false;_iteratorError28=undefined;_context7.prev=7;_iterator28=t[Symbol.iterator]();case 9:if(_iteratorNormalCompletion28=(_step28=_iterator28.next()).done){_context7.next=16;break;}_e30=_step28.value;_context7.next=13;return _e30.item;case 13:_iteratorNormalCompletion28=true;_context7.next=9;break;case 16:_context7.next=22;break;case 18:_context7.prev=18;_context7.t0=_context7["catch"](7);_didIteratorError28=true;_iteratorError28=_context7.t0;case 22:_context7.prev=22;_context7.prev=23;if(!_iteratorNormalCompletion28&&_iterator28["return"]!=null){_iterator28["return"]();}case 25:_context7.prev=25;if(!_didIteratorError28){_context7.next=28;break;}throw _iteratorError28;case 28:return _context7.finish(25);case 29:return _context7.finish(22);case 30:case"end":return _context7.stop();}}},getItems,this,[[7,18,22,30],[23,,25,29]]);})},{key:"getPositions",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getPositions(){var e,t,_iteratorNormalCompletion29,_didIteratorError29,_iteratorError29,_iterator29,_step29,_e31,_args8=arguments;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getPositions$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:e=_args8.length>0&&_args8[0]!==undefined?_args8[0]:{};e.boundaries=this;t=new ll(e);_context8.next=5;return t.position;case 5:_iteratorNormalCompletion29=true;_didIteratorError29=false;_iteratorError29=undefined;_context8.prev=8;_iterator29=t[Symbol.iterator]();case 10:if(_iteratorNormalCompletion29=(_step29=_iterator29.next()).done){_context8.next=17;break;}_e31=_step29.value;_context8.next=14;return _e31.nextPosition;case 14:_iteratorNormalCompletion29=true;_context8.next=10;break;case 17:_context8.next=23;break;case 19:_context8.prev=19;_context8.t0=_context8["catch"](8);_didIteratorError29=true;_iteratorError29=_context8.t0;case 23:_context8.prev=23;_context8.prev=24;if(!_iteratorNormalCompletion29&&_iterator29["return"]!=null){_iterator29["return"]();}case 26:_context8.prev=26;if(!_didIteratorError29){_context8.next=29;break;}throw _iteratorError29;case 29:return _context8.finish(26);case 30:return _context8.finish(23);case 31:case"end":return _context8.stop();}}},getPositions,this,[[8,19,23,31],[24,,26,30]]);})},{key:"is",value:function is(e){return e=="range"||e=="view:range";}},{key:"isIntersecting",value:function isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start);}},{key:"isCollapsed",get:function get(){return this.start.isEqual(this.end);}},{key:"isFlat",get:function get(){return this.start.parent===this.end.parent;}},{key:"root",get:function get(){return this.start.root;}}],[{key:"_createFromParentsAndOffsets",value:function _createFromParentsAndOffsets(e,t,i,n){return new this(new dl(e,t),new dl(i,n));}},{key:"_createFromPositionAndShift",value:function _createFromPositionAndShift(e,t){var i=e;var n=e.getShiftedBy(t);return t>0?new this(i,n):new this(n,i);}},{key:"_createIn",value:function _createIn(e){return this._createFromParentsAndOffsets(e,0,e,e.childCount);}},{key:"_createOn",value:function _createOn(e){var t=e.is("textProxy")?e.offsetSize:1;return this._createFromPositionAndShift(dl._createBefore(e),t);}}]);return ul;}();function hl(e){if(e.item.is("attributeElement")||e.item.is("uiElement")){return true;}return false;}function fl(e){var t=0;var _iteratorNormalCompletion30=true;var _didIteratorError30=false;var _iteratorError30=undefined;try{for(var _iterator30=e[Symbol.iterator](),_step30;!(_iteratorNormalCompletion30=(_step30=_iterator30.next()).done);_iteratorNormalCompletion30=true){var _i36=_step30.value;t++;}}catch(err){_didIteratorError30=true;_iteratorError30=err;}finally{try{if(!_iteratorNormalCompletion30&&_iterator30["return"]!=null){_iterator30["return"]();}}finally{if(_didIteratorError30){throw _iteratorError30;}}}return t;}var ml=/*#__PURE__*/function(){function ml(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var t=arguments.length>1?arguments[1]:undefined;var i=arguments.length>2?arguments[2]:undefined;_classCallCheck(this,ml);this._ranges=[];this._lastRangeBackward=false;this._isFake=false;this._fakeSelectionLabel="";this.setTo(e,t,i);}_createClass(ml,[{key:"getRanges",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getRanges(){var _iteratorNormalCompletion31,_didIteratorError31,_iteratorError31,_iterator31,_step31,_e32;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getRanges$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_iteratorNormalCompletion31=true;_didIteratorError31=false;_iteratorError31=undefined;_context9.prev=3;_iterator31=this._ranges[Symbol.iterator]();case 5:if(_iteratorNormalCompletion31=(_step31=_iterator31.next()).done){_context9.next=12;break;}_e32=_step31.value;_context9.next=9;return _e32.clone();case 9:_iteratorNormalCompletion31=true;_context9.next=5;break;case 12:_context9.next=18;break;case 14:_context9.prev=14;_context9.t0=_context9["catch"](3);_didIteratorError31=true;_iteratorError31=_context9.t0;case 18:_context9.prev=18;_context9.prev=19;if(!_iteratorNormalCompletion31&&_iterator31["return"]!=null){_iterator31["return"]();}case 21:_context9.prev=21;if(!_didIteratorError31){_context9.next=24;break;}throw _iteratorError31;case 24:return _context9.finish(21);case 25:return _context9.finish(18);case 26:case"end":return _context9.stop();}}},getRanges,this,[[3,14,18,26],[19,,21,25]]);})},{key:"getFirstRange",value:function getFirstRange(){var e=null;var _iteratorNormalCompletion32=true;var _didIteratorError32=false;var _iteratorError32=undefined;try{for(var _iterator32=this._ranges[Symbol.iterator](),_step32;!(_iteratorNormalCompletion32=(_step32=_iterator32.next()).done);_iteratorNormalCompletion32=true){var _t34=_step32.value;if(!e||_t34.start.isBefore(e.start)){e=_t34;}}}catch(err){_didIteratorError32=true;_iteratorError32=err;}finally{try{if(!_iteratorNormalCompletion32&&_iterator32["return"]!=null){_iterator32["return"]();}}finally{if(_didIteratorError32){throw _iteratorError32;}}}return e?e.clone():null;}},{key:"getLastRange",value:function getLastRange(){var e=null;var _iteratorNormalCompletion33=true;var _didIteratorError33=false;var _iteratorError33=undefined;try{for(var _iterator33=this._ranges[Symbol.iterator](),_step33;!(_iteratorNormalCompletion33=(_step33=_iterator33.next()).done);_iteratorNormalCompletion33=true){var _t35=_step33.value;if(!e||_t35.end.isAfter(e.end)){e=_t35;}}}catch(err){_didIteratorError33=true;_iteratorError33=err;}finally{try{if(!_iteratorNormalCompletion33&&_iterator33["return"]!=null){_iterator33["return"]();}}finally{if(_didIteratorError33){throw _iteratorError33;}}}return e?e.clone():null;}},{key:"getFirstPosition",value:function getFirstPosition(){var e=this.getFirstRange();return e?e.start.clone():null;}},{key:"getLastPosition",value:function getLastPosition(){var e=this.getLastRange();return e?e.end.clone():null;}},{key:"isEqual",value:function isEqual(e){if(this.isFake!=e.isFake){return false;}if(this.isFake&&this.fakeSelectionLabel!=e.fakeSelectionLabel){return false;}if(this.rangeCount!=e.rangeCount){return false;}else if(this.rangeCount===0){return true;}if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus)){return false;}var _iteratorNormalCompletion34=true;var _didIteratorError34=false;var _iteratorError34=undefined;try{for(var _iterator34=this._ranges[Symbol.iterator](),_step34;!(_iteratorNormalCompletion34=(_step34=_iterator34.next()).done);_iteratorNormalCompletion34=true){var _t36=_step34.value;var _i37=false;var _iteratorNormalCompletion35=true;var _didIteratorError35=false;var _iteratorError35=undefined;try{for(var _iterator35=e._ranges[Symbol.iterator](),_step35;!(_iteratorNormalCompletion35=(_step35=_iterator35.next()).done);_iteratorNormalCompletion35=true){var _n14=_step35.value;if(_t36.isEqual(_n14)){_i37=true;break;}}}catch(err){_didIteratorError35=true;_iteratorError35=err;}finally{try{if(!_iteratorNormalCompletion35&&_iterator35["return"]!=null){_iterator35["return"]();}}finally{if(_didIteratorError35){throw _iteratorError35;}}}if(!_i37){return false;}}}catch(err){_didIteratorError34=true;_iteratorError34=err;}finally{try{if(!_iteratorNormalCompletion34&&_iterator34["return"]!=null){_iterator34["return"]();}}finally{if(_didIteratorError34){throw _iteratorError34;}}}return true;}},{key:"isSimilar",value:function isSimilar(e){if(this.isBackward!=e.isBackward){return false;}var t=fl(this.getRanges());var i=fl(e.getRanges());if(t!=i){return false;}if(t==0){return true;}var _iteratorNormalCompletion36=true;var _didIteratorError36=false;var _iteratorError36=undefined;try{for(var _iterator36=this.getRanges()[Symbol.iterator](),_step36;!(_iteratorNormalCompletion36=(_step36=_iterator36.next()).done);_iteratorNormalCompletion36=true){var _t37=_step36.value;_t37=_t37.getTrimmed();var _i38=false;var _iteratorNormalCompletion37=true;var _didIteratorError37=false;var _iteratorError37=undefined;try{for(var _iterator37=e.getRanges()[Symbol.iterator](),_step37;!(_iteratorNormalCompletion37=(_step37=_iterator37.next()).done);_iteratorNormalCompletion37=true){var _n15=_step37.value;_n15=_n15.getTrimmed();if(_t37.start.isEqual(_n15.start)&&_t37.end.isEqual(_n15.end)){_i38=true;break;}}}catch(err){_didIteratorError37=true;_iteratorError37=err;}finally{try{if(!_iteratorNormalCompletion37&&_iterator37["return"]!=null){_iterator37["return"]();}}finally{if(_didIteratorError37){throw _iteratorError37;}}}if(!_i38){return false;}}}catch(err){_didIteratorError36=true;_iteratorError36=err;}finally{try{if(!_iteratorNormalCompletion36&&_iterator36["return"]!=null){_iterator36["return"]();}}finally{if(_didIteratorError36){throw _iteratorError36;}}}return true;}},{key:"getSelectedElement",value:function getSelectedElement(){if(this.rangeCount!==1){return null;}return this.getFirstRange().getContainedElement();}},{key:"setTo",value:function setTo(e,t,i){if(e===null){this._setRanges([]);this._setFakeOptions(t);}else if(e instanceof ml||e instanceof gl){this._setRanges(e.getRanges(),e.isBackward);this._setFakeOptions({fake:e.isFake,label:e.fakeSelectionLabel});}else if(e instanceof ul){this._setRanges([e],t&&t.backward);this._setFakeOptions(t);}else if(e instanceof dl){this._setRanges([new ul(e)]);this._setFakeOptions(t);}else if(e instanceof Dr){var _n16=!!i&&!!i.backward;var _o13;if(t===undefined){throw new rr["b"]("view-selection-setTo-required-second-parameter: "+"selection.setTo requires the second parameter when the first parameter is a node.",this);}else if(t=="in"){_o13=ul._createIn(e);}else if(t=="on"){_o13=ul._createOn(e);}else{_o13=new ul(dl._createAt(e,t));}this._setRanges([_o13],_n16);this._setFakeOptions(i);}else if(Fr(e)){this._setRanges(e,t&&t.backward);this._setFakeOptions(t);}else{throw new rr["b"]("view-selection-setTo-not-selectable: Cannot set selection to given place.",this);}this.fire("change");}},{key:"setFocus",value:function setFocus(e,t){if(this.anchor===null){throw new rr["b"]("view-selection-setFocus-no-ranges: Cannot set selection focus if there are no ranges in selection.",this);}var i=dl._createAt(e,t);if(i.compareWith(this.focus)=="same"){return;}var n=this.anchor;this._ranges.pop();if(i.compareWith(n)=="before"){this._addRange(new ul(i,n),true);}else{this._addRange(new ul(n,i));}this.fire("change");}},{key:"is",value:function is(e){return e=="selection"||e=="view:selection";}},{key:"_setRanges",value:function _setRanges(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;e=Array.from(e);this._ranges=[];var _iteratorNormalCompletion38=true;var _didIteratorError38=false;var _iteratorError38=undefined;try{for(var _iterator38=e[Symbol.iterator](),_step38;!(_iteratorNormalCompletion38=(_step38=_iterator38.next()).done);_iteratorNormalCompletion38=true){var _t38=_step38.value;this._addRange(_t38);}}catch(err){_didIteratorError38=true;_iteratorError38=err;}finally{try{if(!_iteratorNormalCompletion38&&_iterator38["return"]!=null){_iterator38["return"]();}}finally{if(_didIteratorError38){throw _iteratorError38;}}}this._lastRangeBackward=!!t;}},{key:"_setFakeOptions",value:function _setFakeOptions(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this._isFake=!!e.fake;this._fakeSelectionLabel=e.fake?e.label||"":"";}},{key:"_addRange",value:function _addRange(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!(e instanceof ul)){throw new rr["b"]("view-selection-add-range-not-range: "+"Selection range set to an object that is not an instance of view.Range",this);}this._pushRange(e);this._lastRangeBackward=!!t;}},{key:"_pushRange",value:function _pushRange(e){var _iteratorNormalCompletion39=true;var _didIteratorError39=false;var _iteratorError39=undefined;try{for(var _iterator39=this._ranges[Symbol.iterator](),_step39;!(_iteratorNormalCompletion39=(_step39=_iterator39.next()).done);_iteratorNormalCompletion39=true){var _t39=_step39.value;if(e.isIntersecting(_t39)){throw new rr["b"]("view-selection-range-intersects: Trying to add a range that intersects with another range from selection.",this,{addedRange:e,intersectingRange:_t39});}}}catch(err){_didIteratorError39=true;_iteratorError39=err;}finally{try{if(!_iteratorNormalCompletion39&&_iterator39["return"]!=null){_iterator39["return"]();}}finally{if(_didIteratorError39){throw _iteratorError39;}}}this._ranges.push(new ul(e.start,e.end));}},{key:"isFake",get:function get(){return this._isFake;}},{key:"fakeSelectionLabel",get:function get(){return this._fakeSelectionLabel;}},{key:"anchor",get:function get(){if(!this._ranges.length){return null;}var e=this._ranges[this._ranges.length-1];var t=this._lastRangeBackward?e.end:e.start;return t.clone();}},{key:"focus",get:function get(){if(!this._ranges.length){return null;}var e=this._ranges[this._ranges.length-1];var t=this._lastRangeBackward?e.start:e.end;return t.clone();}},{key:"isCollapsed",get:function get(){return this.rangeCount===1&&this._ranges[0].isCollapsed;}},{key:"rangeCount",get:function get(){return this._ranges.length;}},{key:"isBackward",get:function get(){return!this.isCollapsed&&this._lastRangeBackward;}},{key:"editableElement",get:function get(){if(this.anchor){return this.anchor.editableElement;}return null;}}]);return ml;}();kr(ml,dr);var gl=/*#__PURE__*/function(){function gl(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var t=arguments.length>1?arguments[1]:undefined;var i=arguments.length>2?arguments[2]:undefined;_classCallCheck(this,gl);this._selection=new ml();this._selection.delegate("change").to(this);this._selection.setTo(e,t,i);}_createClass(gl,[{key:"getRanges",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getRanges(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getRanges$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:return _context10.delegateYield(this._selection.getRanges(),"t0",1);case 1:case"end":return _context10.stop();}}},getRanges,this);})},{key:"getFirstRange",value:function getFirstRange(){return this._selection.getFirstRange();}},{key:"getLastRange",value:function getLastRange(){return this._selection.getLastRange();}},{key:"getFirstPosition",value:function getFirstPosition(){return this._selection.getFirstPosition();}},{key:"getLastPosition",value:function getLastPosition(){return this._selection.getLastPosition();}},{key:"getSelectedElement",value:function getSelectedElement(){return this._selection.getSelectedElement();}},{key:"isEqual",value:function isEqual(e){return this._selection.isEqual(e);}},{key:"isSimilar",value:function isSimilar(e){return this._selection.isSimilar(e);}},{key:"is",value:function is(e){return e=="selection"||e=="documentSelection"||e=="view:selection"||e=="view:documentSelection";}},{key:"_setTo",value:function _setTo(e,t,i){this._selection.setTo(e,t,i);}},{key:"_setFocus",value:function _setFocus(e,t){this._selection.setFocus(e,t);}},{key:"isFake",get:function get(){return this._selection.isFake;}},{key:"fakeSelectionLabel",get:function get(){return this._selection.fakeSelectionLabel;}},{key:"anchor",get:function get(){return this._selection.anchor;}},{key:"focus",get:function get(){return this._selection.focus;}},{key:"isCollapsed",get:function get(){return this._selection.isCollapsed;}},{key:"rangeCount",get:function get(){return this._selection.rangeCount;}},{key:"isBackward",get:function get(){return this._selection.isBackward;}},{key:"editableElement",get:function get(){return this._selection.editableElement;}},{key:"_ranges",get:function get(){return this._selection._ranges;}}]);return gl;}();kr(gl,dr);var pl=/*#__PURE__*/function(){function pl(e){_classCallCheck(this,pl);this.selection=new gl();this.roots=new yr({idProperty:"rootName"});this.stylesProcessor=e;this.set("isReadOnly",false);this.set("isFocused",false);this.set("isComposing",false);this._postFixers=new Set();}_createClass(pl,[{key:"getRoot",value:function getRoot(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"main";return this.roots.get(e);}},{key:"registerPostFixer",value:function registerPostFixer(e){this._postFixers.add(e);}},{key:"destroy",value:function destroy(){this.roots.map(function(e){return e.destroy();});this.stopListening();}},{key:"_callPostFixers",value:function _callPostFixers(e){var t=false;do{var _iteratorNormalCompletion40=true;var _didIteratorError40=false;var _iteratorError40=undefined;try{for(var _iterator40=this._postFixers[Symbol.iterator](),_step40;!(_iteratorNormalCompletion40=(_step40=_iterator40.next()).done);_iteratorNormalCompletion40=true){var _i39=_step40.value;t=_i39(e);if(t){break;}}}catch(err){_didIteratorError40=true;_iteratorError40=err;}finally{try{if(!_iteratorNormalCompletion40&&_iterator40["return"]!=null){_iterator40["return"]();}}finally{if(_didIteratorError40){throw _iteratorError40;}}}}while(t);}}]);return pl;}();kr(pl,Jc);var bl=10;var wl=/*#__PURE__*/function(_Dc2){_inherits(wl,_Dc2);function wl(e,t,i,n){var _this22;_classCallCheck(this,wl);_this22=_possibleConstructorReturn(this,_getPrototypeOf(wl).call(this,e,t,i,n));_this22.getFillerOffset=_l;_this22._priority=bl;_this22._id=null;_this22._clonesGroup=null;return _this22;}_createClass(wl,[{key:"getElementsWithSameId",value:function getElementsWithSameId(){if(this.id===null){throw new rr["b"]("attribute-element-get-elements-with-same-id-no-id: "+"Cannot get elements with the same id for an attribute element without id.",this);}return new Set(this._clonesGroup);}},{key:"is",value:function is(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=e&&e.replace(/^view:/,"");if(!t){return i=="attributeElement"||_get(_getPrototypeOf(wl.prototype),"is",this).call(this,e);}else{return i=="attributeElement"&&t==this.name||_get(_getPrototypeOf(wl.prototype),"is",this).call(this,e,t);}}},{key:"isSimilar",value:function isSimilar(e){if(this.id!==null||e.id!==null){return this.id===e.id;}return _get(_getPrototypeOf(wl.prototype),"isSimilar",this).call(this,e)&&this.priority==e.priority;}},{key:"_clone",value:function _clone(e){var t=_get(_getPrototypeOf(wl.prototype),"_clone",this).call(this,e);t._priority=this._priority;t._id=this._id;return t;}},{key:"priority",get:function get(){return this._priority;}},{key:"id",get:function get(){return this._id;}}]);return wl;}(Dc);wl.DEFAULT_PRIORITY=bl;function _l(){if(vl(this)){return null;}var e=this.parent;while(e&&e.is("attributeElement")){if(vl(e)>1){return null;}e=e.parent;}if(!e||vl(e)>1){return null;}return this.childCount;}function vl(e){return Array.from(e.getChildren()).filter(function(e){return!e.is("uiElement");}).length;}var kl=/*#__PURE__*/function(_Dc3){_inherits(kl,_Dc3);function kl(e,t,i,n){var _this23;_classCallCheck(this,kl);_this23=_possibleConstructorReturn(this,_getPrototypeOf(kl).call(this,e,t,i,n));_this23.getFillerOffset=yl;return _this23;}_createClass(kl,[{key:"is",value:function is(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=e.replace(/^view:/,"");if(!t){return i=="emptyElement"||_get(_getPrototypeOf(kl.prototype),"is",this).call(this,e);}else{return i=="emptyElement"&&t==this.name||_get(_getPrototypeOf(kl.prototype),"is",this).call(this,e,t);}}},{key:"_insertChild",value:function _insertChild(e,t){if(t&&(t instanceof Dr||Array.from(t).length>0)){throw new rr["b"]("view-emptyelement-cannot-add: Cannot add child nodes to EmptyElement instance.",[this,t]);}}}]);return kl;}(Dc);function yl(){return null;}var xl=navigator.userAgent.toLowerCase();var Al={isMac:Tl(xl),isEdge:Ml(xl),isGecko:El(xl),isSafari:Pl(xl),isAndroid:Sl(xl),features:{isRegExpUnicodePropertySupported:Il()}};var Cl=Al;function Tl(e){return e.indexOf("macintosh")>-1;}function Ml(e){return!!e.match(/edge\/(\d+.?\d*)/);}function El(e){return!!e.match(/gecko\/\d+/);}function Pl(e){return e.indexOf(" applewebkit/")>-1&&e.indexOf("chrome")===-1;}function Sl(e){return e.indexOf("android")>-1;}function Il(){var e=false;try{e="ć".search(new RegExp("[\\p{L}]","u"))===0;}catch(e){}return e;}var Nl={"⌘":"ctrl","⇧":"shift","⌥":"alt"};var Ol={ctrl:"⌘",shift:"⇧",alt:"⌥"};var Rl=jl();function Ll(e){var t;if(typeof e=="string"){t=Rl[e.toLowerCase()];if(!t){throw new rr["b"]("keyboard-unknown-key: Unknown key name.",null,{key:e});}}else{t=e.keyCode+(e.altKey?Rl.alt:0)+(e.ctrlKey?Rl.ctrl:0)+(e.shiftKey?Rl.shift:0);}return t;}function zl(e){if(typeof e=="string"){e=Bl(e);}return e.map(function(e){return typeof e=="string"?Ll(e):e;}).reduce(function(e,t){return t+e;},0);}function Dl(e){if(!Cl.isMac){return e;}return Bl(e).map(function(e){return Ol[e.toLowerCase()]||e;}).reduce(function(e,t){if(e.slice(-1)in Nl){return e+t;}else{return e+"+"+t;}});}function jl(){var e={arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,"delete":46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,cmd:1114112,shift:2228224,alt:4456448};for(var _t40=65;_t40<=90;_t40++){var _i40=String.fromCharCode(_t40);e[_i40.toLowerCase()]=_t40;}for(var _t41=48;_t41<=57;_t41++){e[_t41-48]=_t41;}for(var _t42=112;_t42<=123;_t42++){e["f"+(_t42-111)]=_t42;}return e;}function Bl(e){return e.split(/\s*\+\s*/);}var Vl=/*#__PURE__*/function(_Dc4){_inherits(Vl,_Dc4);function Vl(e,t,i,n){var _this24;_classCallCheck(this,Vl);_this24=_possibleConstructorReturn(this,_getPrototypeOf(Vl).call(this,e,t,i,n));_this24.getFillerOffset=Hl;return _this24;}_createClass(Vl,[{key:"is",value:function is(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=e.replace(/^view:/,"");if(!t){return i=="uiElement"||_get(_getPrototypeOf(Vl.prototype),"is",this).call(this,e);}else{return i=="uiElement"&&t==this.name||_get(_getPrototypeOf(Vl.prototype),"is",this).call(this,e,t);}}},{key:"_insertChild",value:function _insertChild(e,t){if(t&&(t instanceof Dr||Array.from(t).length>0)){throw new rr["b"]("view-uielement-cannot-add: Cannot add child nodes to UIElement instance.",this);}}},{key:"render",value:function render(e){return this.toDomElement(e);}},{key:"toDomElement",value:function toDomElement(e){var t=e.createElement(this.name);var _iteratorNormalCompletion41=true;var _didIteratorError41=false;var _iteratorError41=undefined;try{for(var _iterator41=this.getAttributeKeys()[Symbol.iterator](),_step41;!(_iteratorNormalCompletion41=(_step41=_iterator41.next()).done);_iteratorNormalCompletion41=true){var _e33=_step41.value;t.setAttribute(_e33,this.getAttribute(_e33));}}catch(err){_didIteratorError41=true;_iteratorError41=err;}finally{try{if(!_iteratorNormalCompletion41&&_iterator41["return"]!=null){_iterator41["return"]();}}finally{if(_didIteratorError41){throw _iteratorError41;}}}return t;}}]);return Vl;}(Dc);function Fl(e){e.document.on("keydown",function(t,i){return Wl(t,i,e.domConverter);});}function Hl(){return null;}function Wl(e,t,i){if(t.keyCode==Rl.arrowright){var _e34=t.domTarget.ownerDocument.defaultView.getSelection();var _n17=_e34.rangeCount==1&&_e34.getRangeAt(0).collapsed;if(_n17||t.shiftKey){var _t43=_e34.focusNode;var _o14=_e34.focusOffset;var _s5=i.domPositionToView(_t43,_o14);if(_s5===null){return;}var _r3=false;var _a3=_s5.getLastMatchingPosition(function(e){if(e.item.is("uiElement")){_r3=true;}if(e.item.is("uiElement")||e.item.is("attributeElement")){return true;}return false;});if(_r3){var _t44=i.viewPositionToDom(_a3);if(_n17){_e34.collapse(_t44.parent,_t44.offset);}else{_e34.extend(_t44.parent,_t44.offset);}}}}}var Ul=/*#__PURE__*/function(){function Ul(e,t){_classCallCheck(this,Ul);this.document=e;this._children=[];if(t){this._insertChild(0,t);}}_createClass(Ul,[{key:Symbol.iterator,value:function value(){return this._children[Symbol.iterator]();}},{key:"is",value:function is(e){return e=="documentFragment"||e=="view:documentFragment";}},{key:"_appendChild",value:function _appendChild(e){return this._insertChild(this.childCount,e);}},{key:"getChild",value:function getChild(e){return this._children[e];}},{key:"getChildIndex",value:function getChildIndex(e){return this._children.indexOf(e);}},{key:"getChildren",value:function getChildren(){return this._children[Symbol.iterator]();}},{key:"_insertChild",value:function _insertChild(e,t){this._fireChange("children",this);var i=0;var n=$l(this.document,t);var _iteratorNormalCompletion42=true;var _didIteratorError42=false;var _iteratorError42=undefined;try{for(var _iterator42=n[Symbol.iterator](),_step42;!(_iteratorNormalCompletion42=(_step42=_iterator42.next()).done);_iteratorNormalCompletion42=true){var _t45=_step42.value;if(_t45.parent!==null){_t45._remove();}_t45.parent=this;this._children.splice(e,0,_t45);e++;i++;}}catch(err){_didIteratorError42=true;_iteratorError42=err;}finally{try{if(!_iteratorNormalCompletion42&&_iterator42["return"]!=null){_iterator42["return"]();}}finally{if(_didIteratorError42){throw _iteratorError42;}}}return i;}},{key:"_removeChildren",value:function _removeChildren(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;this._fireChange("children",this);for(var _i41=e;_i41<e+t;_i41++){this._children[_i41].parent=null;}return this._children.splice(e,t);}},{key:"_fireChange",value:function _fireChange(e,t){this.fire("change:"+e,t);}},{key:"childCount",get:function get(){return this._children.length;}},{key:"isEmpty",get:function get(){return this.childCount===0;}},{key:"root",get:function get(){return this;}},{key:"parent",get:function get(){return null;}}]);return Ul;}();kr(Ul,dr);function $l(e,t){if(typeof t=="string"){return[new jr(e,t)];}if(!Fr(t)){t=[t];}return Array.from(t).map(function(t){if(typeof t=="string"){return new jr(e,t);}if(t instanceof Br){return new jr(e,t.data);}return t;});}var ql=/*#__PURE__*/function(){function ql(e){_classCallCheck(this,ql);this.document=e;this._cloneGroups=new Map();}_createClass(ql,[{key:"setSelection",value:function setSelection(e,t,i){this.document.selection._setTo(e,t,i);}},{key:"setSelectionFocus",value:function setSelectionFocus(e,t){this.document.selection._setFocus(e,t);}},{key:"createText",value:function createText(e){return new jr(this.document,e);}},{key:"createAttributeElement",value:function createAttributeElement(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=new wl(this.document,e,t);if(i.priority){n._priority=i.priority;}if(i.id){n._id=i.id;}return n;}},{key:"createContainerElement",value:function createContainerElement(e,t){return new Fc(this.document,e,t);}},{key:"createEditableElement",value:function createEditableElement(e,t){var i=new rl(this.document,e,t);i._document=this.document;return i;}},{key:"createEmptyElement",value:function createEmptyElement(e,t){return new kl(this.document,e,t);}},{key:"createUIElement",value:function createUIElement(e,t,i){var n=new Vl(this.document,e,t);if(i){n.render=i;}return n;}},{key:"setAttribute",value:function setAttribute(e,t,i){i._setAttribute(e,t);}},{key:"removeAttribute",value:function removeAttribute(e,t){t._removeAttribute(e);}},{key:"addClass",value:function addClass(e,t){t._addClass(e);}},{key:"removeClass",value:function removeClass(e,t){t._removeClass(e);}},{key:"setStyle",value:function setStyle(e,t,i){if(R(e)&&i===undefined){i=t;}i._setStyle(e,t);}},{key:"removeStyle",value:function removeStyle(e,t){t._removeStyle(e);}},{key:"setCustomProperty",value:function setCustomProperty(e,t,i){i._setCustomProperty(e,t);}},{key:"removeCustomProperty",value:function removeCustomProperty(e,t){return t._removeCustomProperty(e);}},{key:"breakAttributes",value:function breakAttributes(e){if(e instanceof dl){return this._breakAttributes(e);}else{return this._breakAttributesRange(e);}}},{key:"breakContainer",value:function breakContainer(e){var t=e.parent;if(!t.is("containerElement")){throw new rr["b"]("view-writer-break-non-container-element: Trying to break an element which is not a container element.",this.document);}if(!t.parent){throw new rr["b"]("view-writer-break-root: Trying to break root element.",this.document);}if(e.isAtStart){return dl._createBefore(t);}else if(!e.isAtEnd){var _i42=t._clone(false);this.insert(dl._createAfter(t),_i42);var _n18=new ul(e,dl._createAt(t,"end"));var _o15=new dl(_i42,0);this.move(_n18,_o15);}return dl._createAfter(t);}},{key:"mergeAttributes",value:function mergeAttributes(e){var t=e.offset;var i=e.parent;if(i.is("text")){return e;}if(i.is("attributeElement")&&i.childCount===0){var _e35=i.parent;var _t46=i.index;i._remove();this._removeFromClonedElementsGroup(i);return this.mergeAttributes(new dl(_e35,_t46));}var n=i.getChild(t-1);var o=i.getChild(t);if(!n||!o){return e;}if(n.is("text")&&o.is("text")){return Ql(n,o);}else if(n.is("attributeElement")&&o.is("attributeElement")&&n.isSimilar(o)){var _e36=n.childCount;n._appendChild(o.getChildren());o._remove();this._removeFromClonedElementsGroup(o);return this.mergeAttributes(new dl(n,_e36));}return e;}},{key:"mergeContainers",value:function mergeContainers(e){var t=e.nodeBefore;var i=e.nodeAfter;if(!t||!i||!t.is("containerElement")||!i.is("containerElement")){throw new rr["b"]("view-writer-merge-containers-invalid-position: "+"Element before and after given position cannot be merged.",this.document);}var n=t.getChild(t.childCount-1);var o=n instanceof jr?dl._createAt(n,"end"):dl._createAt(t,"end");this.move(ul._createIn(i),dl._createAt(t,"end"));this.remove(ul._createOn(i));return o;}},{key:"insert",value:function insert(e,t){t=Fr(t)?_toConsumableArray(t):[t];Zl(t,this.document);var i=Gl(e);if(!i){throw new rr["b"]("view-writer-invalid-position-container",this.document);}var n=this._breakAttributes(e,true);var o=i._insertChild(n.offset,t);var _iteratorNormalCompletion43=true;var _didIteratorError43=false;var _iteratorError43=undefined;try{for(var _iterator43=t[Symbol.iterator](),_step43;!(_iteratorNormalCompletion43=(_step43=_iterator43.next()).done);_iteratorNormalCompletion43=true){var _e38=_step43.value;this._addToClonedElementsGroup(_e38);}}catch(err){_didIteratorError43=true;_iteratorError43=err;}finally{try{if(!_iteratorNormalCompletion43&&_iterator43["return"]!=null){_iterator43["return"]();}}finally{if(_didIteratorError43){throw _iteratorError43;}}}var s=n.getShiftedBy(o);var r=this.mergeAttributes(n);if(o===0){return new ul(r,r);}else{if(!r.isEqual(n)){s.offset--;}var _e37=this.mergeAttributes(s);return new ul(r,_e37);}}},{key:"remove",value:function remove(e){var t=e instanceof ul?e:ul._createOn(e);id(t,this.document);if(t.isCollapsed){return new Ul(this.document);}var _this$_breakAttribute=this._breakAttributesRange(t,true),i=_this$_breakAttribute.start,n=_this$_breakAttribute.end;var o=i.parent;var s=n.offset-i.offset;var r=o._removeChildren(i.offset,s);var _iteratorNormalCompletion44=true;var _didIteratorError44=false;var _iteratorError44=undefined;try{for(var _iterator44=r[Symbol.iterator](),_step44;!(_iteratorNormalCompletion44=(_step44=_iterator44.next()).done);_iteratorNormalCompletion44=true){var _e39=_step44.value;this._removeFromClonedElementsGroup(_e39);}}catch(err){_didIteratorError44=true;_iteratorError44=err;}finally{try{if(!_iteratorNormalCompletion44&&_iterator44["return"]!=null){_iterator44["return"]();}}finally{if(_didIteratorError44){throw _iteratorError44;}}}var a=this.mergeAttributes(i);t.start=a;t.end=a.clone();return new Ul(this.document,r);}},{key:"clear",value:function clear(e,t){id(e,this.document);var i=e.getWalker({direction:"backward",ignoreElementEnd:true});var _iteratorNormalCompletion45=true;var _didIteratorError45=false;var _iteratorError45=undefined;try{for(var _iterator45=i[Symbol.iterator](),_step45;!(_iteratorNormalCompletion45=(_step45=_iterator45.next()).done);_iteratorNormalCompletion45=true){var _n19=_step45.value;var _i43=_n19.item;var _o16=void 0;if(_i43.is("element")&&t.isSimilar(_i43)){_o16=ul._createOn(_i43);}else if(!_n19.nextPosition.isAfter(e.start)&&_i43.is("textProxy")){var _e40=_i43.getAncestors().find(function(e){return e.is("element")&&t.isSimilar(e);});if(_e40){_o16=ul._createIn(_e40);}}if(_o16){if(_o16.end.isAfter(e.end)){_o16.end=e.end;}if(_o16.start.isBefore(e.start)){_o16.start=e.start;}this.remove(_o16);}}}catch(err){_didIteratorError45=true;_iteratorError45=err;}finally{try{if(!_iteratorNormalCompletion45&&_iterator45["return"]!=null){_iterator45["return"]();}}finally{if(_didIteratorError45){throw _iteratorError45;}}}}},{key:"move",value:function move(e,t){var i;if(t.isAfter(e.end)){t=this._breakAttributes(t,true);var _n20=t.parent;var _o17=_n20.childCount;e=this._breakAttributesRange(e,true);i=this.remove(e);t.offset+=_n20.childCount-_o17;}else{i=this.remove(e);}return this.insert(t,i);}},{key:"wrap",value:function wrap(e,t){if(!(t instanceof wl)){throw new rr["b"]("view-writer-wrap-invalid-attribute",this.document);}id(e,this.document);if(!e.isCollapsed){return this._wrapRange(e,t);}else{var _i44=e.start;if(_i44.parent.is("element")&&!Yl(_i44.parent)){_i44=_i44.getLastMatchingPosition(function(e){return e.item.is("uiElement");});}_i44=this._wrapPosition(_i44,t);var _n21=this.document.selection;if(_n21.isCollapsed&&_n21.getFirstPosition().isEqual(e.start)){this.setSelection(_i44);}return new ul(_i44);}}},{key:"unwrap",value:function unwrap(e,t){if(!(t instanceof wl)){throw new rr["b"]("view-writer-unwrap-invalid-attribute",this.document);}id(e,this.document);if(e.isCollapsed){return e;}var _this$_breakAttribute2=this._breakAttributesRange(e,true),i=_this$_breakAttribute2.start,n=_this$_breakAttribute2.end;var o=i.parent;var s=this._unwrapChildren(o,i.offset,n.offset,t);var r=this.mergeAttributes(s.start);if(!r.isEqual(s.start)){s.end.offset--;}var a=this.mergeAttributes(s.end);return new ul(r,a);}},{key:"rename",value:function rename(e,t){var i=new Fc(this.document,e,t.getAttributes());this.insert(dl._createAfter(t),i);this.move(ul._createIn(t),dl._createAt(i,0));this.remove(ul._createOn(t));return i;}},{key:"clearClonedElementsGroup",value:function clearClonedElementsGroup(e){this._cloneGroups["delete"](e);}},{key:"createPositionAt",value:function createPositionAt(e,t){return dl._createAt(e,t);}},{key:"createPositionAfter",value:function createPositionAfter(e){return dl._createAfter(e);}},{key:"createPositionBefore",value:function createPositionBefore(e){return dl._createBefore(e);}},{key:"createRange",value:function createRange(e,t){return new ul(e,t);}},{key:"createRangeOn",value:function createRangeOn(e){return ul._createOn(e);}},{key:"createRangeIn",value:function createRangeIn(e){return ul._createIn(e);}},{key:"createSelection",value:function createSelection(e,t,i){return new ml(e,t,i);}},{key:"_wrapChildren",value:function _wrapChildren(e,t,i,n){var o=t;var s=[];while(o<i){var _t47=e.getChild(o);var _i45=_t47.is("text");var _r4=_t47.is("attributeElement");var _a4=_t47.is("emptyElement");var _c2=_t47.is("uiElement");if(_r4&&this._wrapAttributeElement(n,_t47)){s.push(new dl(e,o));}else if(_i45||_a4||_c2||_r4&&Jl(n,_t47)){var _i46=n._clone();_t47._remove();_i46._appendChild(_t47);e._insertChild(o,_i46);this._addToClonedElementsGroup(_i46);s.push(new dl(e,o));}else if(_r4){this._wrapChildren(_t47,0,_t47.childCount,n);}o++;}var r=0;for(var _i47=0,_s6=s;_i47<_s6.length;_i47++){var _e41=_s6[_i47];_e41.offset-=r;if(_e41.offset==t){continue;}var _n22=this.mergeAttributes(_e41);if(!_n22.isEqual(_e41)){r++;i--;}}return ul._createFromParentsAndOffsets(e,t,e,i);}},{key:"_unwrapChildren",value:function _unwrapChildren(e,t,i,n){var o=t;var s=[];while(o<i){var _t48=e.getChild(o);if(!_t48.is("attributeElement")){o++;continue;}if(_t48.isSimilar(n)){var _n23=_t48.getChildren();var _r5=_t48.childCount;_t48._remove();e._insertChild(o,_n23);this._removeFromClonedElementsGroup(_t48);s.push(new dl(e,o),new dl(e,o+_r5));o+=_r5;i+=_r5-1;continue;}if(this._unwrapAttributeElement(n,_t48)){s.push(new dl(e,o),new dl(e,o+1));o++;continue;}this._unwrapChildren(_t48,0,_t48.childCount,n);o++;}var r=0;for(var _i48=0,_s7=s;_i48<_s7.length;_i48++){var _e42=_s7[_i48];_e42.offset-=r;if(_e42.offset==t||_e42.offset==i){continue;}var _n24=this.mergeAttributes(_e42);if(!_n24.isEqual(_e42)){r++;i--;}}return ul._createFromParentsAndOffsets(e,t,e,i);}},{key:"_wrapRange",value:function _wrapRange(e,t){var _this$_breakAttribute3=this._breakAttributesRange(e,true),i=_this$_breakAttribute3.start,n=_this$_breakAttribute3.end;var o=i.parent;var s=this._wrapChildren(o,i.offset,n.offset,t);var r=this.mergeAttributes(s.start);if(!r.isEqual(s.start)){s.end.offset--;}var a=this.mergeAttributes(s.end);return new ul(r,a);}},{key:"_wrapPosition",value:function _wrapPosition(e,t){if(t.isSimilar(e.parent)){return Xl(e.clone());}if(e.parent.is("text")){e=Kl(e);}var i=this.createAttributeElement();i._priority=Number.POSITIVE_INFINITY;i.isSimilar=function(){return false;};e.parent._insertChild(e.offset,i);var n=new ul(e,e.getShiftedBy(1));this.wrap(n,t);var o=new dl(i.parent,i.index);i._remove();var s=o.nodeBefore;var r=o.nodeAfter;if(s instanceof jr&&r instanceof jr){return Ql(s,r);}return Xl(o);}},{key:"_wrapAttributeElement",value:function _wrapAttributeElement(e,t){if(!nd(e,t)){return false;}if(e.name!==t.name||e.priority!==t.priority){return false;}var _iteratorNormalCompletion46=true;var _didIteratorError46=false;var _iteratorError46=undefined;try{for(var _iterator46=e.getAttributeKeys()[Symbol.iterator](),_step46;!(_iteratorNormalCompletion46=(_step46=_iterator46.next()).done);_iteratorNormalCompletion46=true){var _i49=_step46.value;if(_i49==="class"||_i49==="style"){continue;}if(t.hasAttribute(_i49)&&t.getAttribute(_i49)!==e.getAttribute(_i49)){return false;}}}catch(err){_didIteratorError46=true;_iteratorError46=err;}finally{try{if(!_iteratorNormalCompletion46&&_iterator46["return"]!=null){_iterator46["return"]();}}finally{if(_didIteratorError46){throw _iteratorError46;}}}var _iteratorNormalCompletion47=true;var _didIteratorError47=false;var _iteratorError47=undefined;try{for(var _iterator47=e.getStyleNames()[Symbol.iterator](),_step47;!(_iteratorNormalCompletion47=(_step47=_iterator47.next()).done);_iteratorNormalCompletion47=true){var _i50=_step47.value;if(t.hasStyle(_i50)&&t.getStyle(_i50)!==e.getStyle(_i50)){return false;}}}catch(err){_didIteratorError47=true;_iteratorError47=err;}finally{try{if(!_iteratorNormalCompletion47&&_iterator47["return"]!=null){_iterator47["return"]();}}finally{if(_didIteratorError47){throw _iteratorError47;}}}var _iteratorNormalCompletion48=true;var _didIteratorError48=false;var _iteratorError48=undefined;try{for(var _iterator48=e.getAttributeKeys()[Symbol.iterator](),_step48;!(_iteratorNormalCompletion48=(_step48=_iterator48.next()).done);_iteratorNormalCompletion48=true){var _i51=_step48.value;if(_i51==="class"||_i51==="style"){continue;}if(!t.hasAttribute(_i51)){this.setAttribute(_i51,e.getAttribute(_i51),t);}}}catch(err){_didIteratorError48=true;_iteratorError48=err;}finally{try{if(!_iteratorNormalCompletion48&&_iterator48["return"]!=null){_iterator48["return"]();}}finally{if(_didIteratorError48){throw _iteratorError48;}}}var _iteratorNormalCompletion49=true;var _didIteratorError49=false;var _iteratorError49=undefined;try{for(var _iterator49=e.getStyleNames()[Symbol.iterator](),_step49;!(_iteratorNormalCompletion49=(_step49=_iterator49.next()).done);_iteratorNormalCompletion49=true){var _i52=_step49.value;if(!t.hasStyle(_i52)){this.setStyle(_i52,e.getStyle(_i52),t);}}}catch(err){_didIteratorError49=true;_iteratorError49=err;}finally{try{if(!_iteratorNormalCompletion49&&_iterator49["return"]!=null){_iterator49["return"]();}}finally{if(_didIteratorError49){throw _iteratorError49;}}}var _iteratorNormalCompletion50=true;var _didIteratorError50=false;var _iteratorError50=undefined;try{for(var _iterator50=e.getClassNames()[Symbol.iterator](),_step50;!(_iteratorNormalCompletion50=(_step50=_iterator50.next()).done);_iteratorNormalCompletion50=true){var _i53=_step50.value;if(!t.hasClass(_i53)){this.addClass(_i53,t);}}}catch(err){_didIteratorError50=true;_iteratorError50=err;}finally{try{if(!_iteratorNormalCompletion50&&_iterator50["return"]!=null){_iterator50["return"]();}}finally{if(_didIteratorError50){throw _iteratorError50;}}}return true;}},{key:"_unwrapAttributeElement",value:function _unwrapAttributeElement(e,t){if(!nd(e,t)){return false;}if(e.name!==t.name||e.priority!==t.priority){return false;}var _iteratorNormalCompletion51=true;var _didIteratorError51=false;var _iteratorError51=undefined;try{for(var _iterator51=e.getAttributeKeys()[Symbol.iterator](),_step51;!(_iteratorNormalCompletion51=(_step51=_iterator51.next()).done);_iteratorNormalCompletion51=true){var _i54=_step51.value;if(_i54==="class"||_i54==="style"){continue;}if(!t.hasAttribute(_i54)||t.getAttribute(_i54)!==e.getAttribute(_i54)){return false;}}}catch(err){_didIteratorError51=true;_iteratorError51=err;}finally{try{if(!_iteratorNormalCompletion51&&_iterator51["return"]!=null){_iterator51["return"]();}}finally{if(_didIteratorError51){throw _iteratorError51;}}}if(!t.hasClass.apply(t,_toConsumableArray(e.getClassNames()))){return false;}var _iteratorNormalCompletion52=true;var _didIteratorError52=false;var _iteratorError52=undefined;try{for(var _iterator52=e.getStyleNames()[Symbol.iterator](),_step52;!(_iteratorNormalCompletion52=(_step52=_iterator52.next()).done);_iteratorNormalCompletion52=true){var _i55=_step52.value;if(!t.hasStyle(_i55)||t.getStyle(_i55)!==e.getStyle(_i55)){return false;}}}catch(err){_didIteratorError52=true;_iteratorError52=err;}finally{try{if(!_iteratorNormalCompletion52&&_iterator52["return"]!=null){_iterator52["return"]();}}finally{if(_didIteratorError52){throw _iteratorError52;}}}var _iteratorNormalCompletion53=true;var _didIteratorError53=false;var _iteratorError53=undefined;try{for(var _iterator53=e.getAttributeKeys()[Symbol.iterator](),_step53;!(_iteratorNormalCompletion53=(_step53=_iterator53.next()).done);_iteratorNormalCompletion53=true){var _i56=_step53.value;if(_i56==="class"||_i56==="style"){continue;}this.removeAttribute(_i56,t);}}catch(err){_didIteratorError53=true;_iteratorError53=err;}finally{try{if(!_iteratorNormalCompletion53&&_iterator53["return"]!=null){_iterator53["return"]();}}finally{if(_didIteratorError53){throw _iteratorError53;}}}this.removeClass(Array.from(e.getClassNames()),t);this.removeStyle(Array.from(e.getStyleNames()),t);return true;}},{key:"_breakAttributesRange",value:function _breakAttributesRange(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var i=e.start;var n=e.end;id(e,this.document);if(e.isCollapsed){var _i57=this._breakAttributes(e.start,t);return new ul(_i57,_i57);}var o=this._breakAttributes(n,t);var s=o.parent.childCount;var r=this._breakAttributes(i,t);o.offset+=o.parent.childCount-s;return new ul(r,o);}},{key:"_breakAttributes",value:function _breakAttributes(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var i=e.offset;var n=e.parent;if(e.parent.is("emptyElement")){throw new rr["b"]("view-writer-cannot-break-empty-element",this.document);}if(e.parent.is("uiElement")){throw new rr["b"]("view-writer-cannot-break-ui-element",this.document);}if(!t&&n.is("text")&&td(n.parent)){return e.clone();}if(td(n)){return e.clone();}if(n.is("text")){return this._breakAttributes(Kl(e),t);}var o=n.childCount;if(i==o){var _e43=new dl(n.parent,n.index+1);return this._breakAttributes(_e43,t);}else{if(i===0){var _e44=new dl(n.parent,n.index);return this._breakAttributes(_e44,t);}else{var _e45=n.index+1;var _o18=n._clone();n.parent._insertChild(_e45,_o18);this._addToClonedElementsGroup(_o18);var _s8=n.childCount-i;var _r6=n._removeChildren(i,_s8);_o18._appendChild(_r6);var _a5=new dl(n.parent,_e45);return this._breakAttributes(_a5,t);}}}},{key:"_addToClonedElementsGroup",value:function _addToClonedElementsGroup(e){if(!e.root.is("rootElement")){return;}if(e.is("element")){var _iteratorNormalCompletion54=true;var _didIteratorError54=false;var _iteratorError54=undefined;try{for(var _iterator54=e.getChildren()[Symbol.iterator](),_step54;!(_iteratorNormalCompletion54=(_step54=_iterator54.next()).done);_iteratorNormalCompletion54=true){var _t49=_step54.value;this._addToClonedElementsGroup(_t49);}}catch(err){_didIteratorError54=true;_iteratorError54=err;}finally{try{if(!_iteratorNormalCompletion54&&_iterator54["return"]!=null){_iterator54["return"]();}}finally{if(_didIteratorError54){throw _iteratorError54;}}}}var t=e.id;if(!t){return;}var i=this._cloneGroups.get(t);if(!i){i=new Set();this._cloneGroups.set(t,i);}i.add(e);e._clonesGroup=i;}},{key:"_removeFromClonedElementsGroup",value:function _removeFromClonedElementsGroup(e){if(e.is("element")){var _iteratorNormalCompletion55=true;var _didIteratorError55=false;var _iteratorError55=undefined;try{for(var _iterator55=e.getChildren()[Symbol.iterator](),_step55;!(_iteratorNormalCompletion55=(_step55=_iterator55.next()).done);_iteratorNormalCompletion55=true){var _t50=_step55.value;this._removeFromClonedElementsGroup(_t50);}}catch(err){_didIteratorError55=true;_iteratorError55=err;}finally{try{if(!_iteratorNormalCompletion55&&_iterator55["return"]!=null){_iterator55["return"]();}}finally{if(_didIteratorError55){throw _iteratorError55;}}}}var t=e.id;if(!t){return;}var i=this._cloneGroups.get(t);if(!i){return;}i["delete"](e);}}]);return ql;}();function Yl(e){return Array.from(e.getChildren()).some(function(e){return!e.is("uiElement");});}function Gl(e){var t=e.parent;while(!td(t)){if(!t){return undefined;}t=t.parent;}return t;}function Jl(e,t){if(e.priority<t.priority){return true;}else if(e.priority>t.priority){return false;}return e.getIdentity()<t.getIdentity();}function Xl(e){var t=e.nodeBefore;if(t&&t.is("text")){return new dl(t,t.data.length);}var i=e.nodeAfter;if(i&&i.is("text")){return new dl(i,0);}return e;}function Kl(e){if(e.offset==e.parent.data.length){return new dl(e.parent.parent,e.parent.index+1);}if(e.offset===0){return new dl(e.parent.parent,e.parent.index);}var t=e.parent.data.slice(e.offset);e.parent._data=e.parent.data.slice(0,e.offset);e.parent.parent._insertChild(e.parent.index+1,new jr(e.root.document,t));return new dl(e.parent.parent,e.parent.index+1);}function Ql(e,t){var i=e.data.length;e._data+=t.data;t._remove();return new dl(e,i);}function Zl(e,t){var _iteratorNormalCompletion56=true;var _didIteratorError56=false;var _iteratorError56=undefined;try{var _loop=function _loop(){var i=_step56.value;if(!ed.some(function(e){return i instanceof e;})){throw new rr["b"]("view-writer-insert-invalid-node",t);}if(!i.is("text")){Zl(i.getChildren(),t);}};for(var _iterator56=e[Symbol.iterator](),_step56;!(_iteratorNormalCompletion56=(_step56=_iterator56.next()).done);_iteratorNormalCompletion56=true){_loop();}}catch(err){_didIteratorError56=true;_iteratorError56=err;}finally{try{if(!_iteratorNormalCompletion56&&_iterator56["return"]!=null){_iterator56["return"]();}}finally{if(_didIteratorError56){throw _iteratorError56;}}}}var ed=[jr,wl,Fc,kl,Vl];function td(e){return e&&(e.is("containerElement")||e.is("documentFragment"));}function id(e,t){var i=Gl(e.start);var n=Gl(e.end);if(!i||!n||i!==n){throw new rr["b"]("view-writer-invalid-range-container",t);}}function nd(e,t){return e.id===null&&t.id===null;}function od(e){return Object.prototype.toString.call(e)=="[object Text]";}var sd=function sd(e){return e.createTextNode(" ");};var rd=function rd(e){var t=e.createElement("br");t.dataset.ckeFiller=true;return t;};var ad=7;var cd=function(){var e="";for(var _t51=0;_t51<ad;_t51++){e+="​";}return e;}();function ld(e){return od(e)&&e.data.substr(0,ad)===cd;}function dd(e){return e.data.length==ad&&ld(e);}function ud(e){if(ld(e)){return e.data.slice(ad);}else{return e.data;}}function hd(e){e.document.on("keydown",fd);}function fd(e,t){if(t.keyCode==Rl.arrowleft){var _e46=t.domTarget.ownerDocument.defaultView.getSelection();if(_e46.rangeCount==1&&_e46.getRangeAt(0).collapsed){var _t52=_e46.getRangeAt(0).startContainer;var _i58=_e46.getRangeAt(0).startOffset;if(ld(_t52)&&_i58<=ad){_e46.collapse(_t52,0);}}}}function md(e,t,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;i=i||function(e,t){return e===t;};if(!Array.isArray(e)){e=Array.from(e);}if(!Array.isArray(t)){t=Array.from(t);}var o=gd(e,t,i);return n?_d(o,t.length):wd(t,o);}function gd(e,t,i){var n=pd(e,t,i);if(n===-1){return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};}var o=bd(e,n);var s=bd(t,n);var r=pd(o,s,i);var a=e.length-r;var c=t.length-r;return{firstIndex:n,lastIndexOld:a,lastIndexNew:c};}function pd(e,t,i){for(var _n25=0;_n25<Math.max(e.length,t.length);_n25++){if(e[_n25]===undefined||t[_n25]===undefined||!i(e[_n25],t[_n25])){return _n25;}}return-1;}function bd(e,t){return e.slice(t).reverse();}function wd(e,t){var i=[];var n=t.firstIndex,o=t.lastIndexOld,s=t.lastIndexNew;if(s-n>0){i.push({index:n,type:"insert",values:e.slice(n,s)});}if(o-n>0){i.push({index:n+(s-n),type:"delete",howMany:o-n});}return i;}function _d(e,t){var i=e.firstIndex,n=e.lastIndexOld,o=e.lastIndexNew;if(i===-1){return Array(t).fill("equal");}var s=[];if(i>0){s=s.concat(Array(i).fill("equal"));}if(o-i>0){s=s.concat(Array(o-i).fill("insert"));}if(n-i>0){s=s.concat(Array(n-i).fill("delete"));}if(o<t){s=s.concat(Array(t-o).fill("equal"));}return s;}function vd(e,t,i){i=i||function(e,t){return e===t;};var n=e.length;var o=t.length;if(n>200||o>200||n+o>300){return vd.fastDiff(e,t,i,true);}var s,r;if(o<n){var _i59=e;e=t;t=_i59;s="delete";r="insert";}else{s="insert";r="delete";}var a=e.length;var c=t.length;var l=c-a;var d={};var u={};function h(n){var o=(u[n-1]!==undefined?u[n-1]:-1)+1;var l=u[n+1]!==undefined?u[n+1]:-1;var h=o>l?-1:1;if(d[n+h]){d[n]=d[n+h].slice(0);}if(!d[n]){d[n]=[];}d[n].push(o>l?s:r);var f=Math.max(o,l);var m=f-n;while(m<a&&f<c&&i(e[m],t[f])){m++;f++;d[n].push("equal");}return f;}var f=0;var m;do{for(m=-f;m<l;m++){u[m]=h(m);}for(m=l+f;m>l;m--){u[m]=h(m);}u[l]=h(l);f++;}while(u[l]!==c);return d[l].slice(1);}vd.fastDiff=md;function kd(e,t,i){e.insertBefore(i,e.childNodes[t]||null);}function yd(e){var t=e.parentNode;if(t){t.removeChild(e);}}function xd(e){if(e){if(e.defaultView){return e instanceof e.defaultView.Document;}else if(e.ownerDocument&&e.ownerDocument.defaultView){return e instanceof e.ownerDocument.defaultView.Node;}}return false;}var Ad=/*#__PURE__*/function(){function Ad(e,t){_classCallCheck(this,Ad);this.domDocuments=new Set();this.domConverter=e;this.markedAttributes=new Set();this.markedChildren=new Set();this.markedTexts=new Set();this.selection=t;this.isFocused=false;this._inlineFiller=null;this._fakeSelectionContainer=null;}_createClass(Ad,[{key:"markToSync",value:function markToSync(e,t){if(e==="text"){if(this.domConverter.mapViewToDom(t.parent)){this.markedTexts.add(t);}}else{if(!this.domConverter.mapViewToDom(t)){return;}if(e==="attributes"){this.markedAttributes.add(t);}else if(e==="children"){this.markedChildren.add(t);}else{throw new rr["b"]("view-renderer-unknown-type: Unknown type passed to Renderer.markToSync.",this);}}}},{key:"render",value:function render(){var e;var _iteratorNormalCompletion57=true;var _didIteratorError57=false;var _iteratorError57=undefined;try{for(var _iterator57=this.markedChildren[Symbol.iterator](),_step57;!(_iteratorNormalCompletion57=(_step57=_iterator57.next()).done);_iteratorNormalCompletion57=true){var _e47=_step57.value;this._updateChildrenMappings(_e47);}}catch(err){_didIteratorError57=true;_iteratorError57=err;}finally{try{if(!_iteratorNormalCompletion57&&_iterator57["return"]!=null){_iterator57["return"]();}}finally{if(_didIteratorError57){throw _iteratorError57;}}}if(this._inlineFiller&&!this._isSelectionInInlineFiller()){this._removeInlineFiller();}if(this._inlineFiller){e=this._getInlineFillerPosition();}else if(this._needsInlineFillerAtSelection()){e=this.selection.getFirstPosition();this.markedChildren.add(e.parent);}var _iteratorNormalCompletion58=true;var _didIteratorError58=false;var _iteratorError58=undefined;try{for(var _iterator58=this.markedAttributes[Symbol.iterator](),_step58;!(_iteratorNormalCompletion58=(_step58=_iterator58.next()).done);_iteratorNormalCompletion58=true){var _e48=_step58.value;this._updateAttrs(_e48);}}catch(err){_didIteratorError58=true;_iteratorError58=err;}finally{try{if(!_iteratorNormalCompletion58&&_iterator58["return"]!=null){_iterator58["return"]();}}finally{if(_didIteratorError58){throw _iteratorError58;}}}var _iteratorNormalCompletion59=true;var _didIteratorError59=false;var _iteratorError59=undefined;try{for(var _iterator59=this.markedChildren[Symbol.iterator](),_step59;!(_iteratorNormalCompletion59=(_step59=_iterator59.next()).done);_iteratorNormalCompletion59=true){var _t54=_step59.value;this._updateChildren(_t54,{inlineFillerPosition:e});}}catch(err){_didIteratorError59=true;_iteratorError59=err;}finally{try{if(!_iteratorNormalCompletion59&&_iterator59["return"]!=null){_iterator59["return"]();}}finally{if(_didIteratorError59){throw _iteratorError59;}}}var _iteratorNormalCompletion60=true;var _didIteratorError60=false;var _iteratorError60=undefined;try{for(var _iterator60=this.markedTexts[Symbol.iterator](),_step60;!(_iteratorNormalCompletion60=(_step60=_iterator60.next()).done);_iteratorNormalCompletion60=true){var _t55=_step60.value;if(!this.markedChildren.has(_t55.parent)&&this.domConverter.mapViewToDom(_t55.parent)){this._updateText(_t55,{inlineFillerPosition:e});}}}catch(err){_didIteratorError60=true;_iteratorError60=err;}finally{try{if(!_iteratorNormalCompletion60&&_iterator60["return"]!=null){_iterator60["return"]();}}finally{if(_didIteratorError60){throw _iteratorError60;}}}if(e){var _t53=this.domConverter.viewPositionToDom(e);var _i60=_t53.parent.ownerDocument;if(!ld(_t53.parent)){this._inlineFiller=Td(_i60,_t53.parent,_t53.offset);}else{this._inlineFiller=_t53.parent;}}else{this._inlineFiller=null;}this._updateSelection();this._updateFocus();this.markedTexts.clear();this.markedAttributes.clear();this.markedChildren.clear();}},{key:"_updateChildrenMappings",value:function _updateChildrenMappings(e){var t=this.domConverter.mapViewToDom(e);if(!t){return;}var i=this.domConverter.mapViewToDom(e).childNodes;var n=Array.from(this.domConverter.viewChildrenToDom(e,t.ownerDocument,{withChildren:false}));var o=this._diffNodeLists(i,n);var s=this._findReplaceActions(o,i,n);if(s.indexOf("replace")!==-1){var _t56={equal:0,insert:0,"delete":0};var _iteratorNormalCompletion61=true;var _didIteratorError61=false;var _iteratorError61=undefined;try{for(var _iterator61=s[Symbol.iterator](),_step61;!(_iteratorNormalCompletion61=(_step61=_iterator61.next()).done);_iteratorNormalCompletion61=true){var _o19=_step61.value;if(_o19==="replace"){var _o20=_t56.equal+_t56.insert;var _s9=_t56.equal+_t56["delete"];var _r7=e.getChild(_o20);if(_r7&&!_r7.is("uiElement")){this._updateElementMappings(_r7,i[_s9]);}yd(n[_o20]);_t56.equal++;}else{_t56[_o19]++;}}}catch(err){_didIteratorError61=true;_iteratorError61=err;}finally{try{if(!_iteratorNormalCompletion61&&_iterator61["return"]!=null){_iterator61["return"]();}}finally{if(_didIteratorError61){throw _iteratorError61;}}}}}},{key:"_updateElementMappings",value:function _updateElementMappings(e,t){this.domConverter.unbindDomElement(t);this.domConverter.bindElements(t,e);this.markedChildren.add(e);this.markedAttributes.add(e);}},{key:"_getInlineFillerPosition",value:function _getInlineFillerPosition(){var e=this.selection.getFirstPosition();if(e.parent.is("text")){return dl._createBefore(this.selection.getFirstPosition().parent);}else{return e;}}},{key:"_isSelectionInInlineFiller",value:function _isSelectionInInlineFiller(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed){return false;}var e=this.selection.getFirstPosition();var t=this.domConverter.viewPositionToDom(e);if(t&&od(t.parent)&&ld(t.parent)){return true;}return false;}},{key:"_removeInlineFiller",value:function _removeInlineFiller(){var e=this._inlineFiller;if(!ld(e)){throw new rr["b"]("view-renderer-filler-was-lost: The inline filler node was lost.",this);}if(dd(e)){e.parentNode.removeChild(e);}else{e.data=e.data.substr(ad);}this._inlineFiller=null;}},{key:"_needsInlineFillerAtSelection",value:function _needsInlineFillerAtSelection(){if(this.selection.rangeCount!=1||!this.selection.isCollapsed){return false;}var e=this.selection.getFirstPosition();var t=e.parent;var i=e.offset;if(!this.domConverter.mapViewToDom(t.root)){return false;}if(!t.is("element")){return false;}if(!Cd(t)){return false;}if(i===t.getFillerOffset()){return false;}var n=e.nodeBefore;var o=e.nodeAfter;if(n instanceof jr||o instanceof jr){return false;}return true;}},{key:"_updateText",value:function _updateText(e,t){var i=this.domConverter.findCorrespondingDomText(e);var n=this.domConverter.viewToDom(e,i.ownerDocument);var o=i.data;var s=n.data;var r=t.inlineFillerPosition;if(r&&r.parent==e.parent&&r.offset==e.index){s=cd+s;}if(o!=s){var _e49=md(o,s);var _iteratorNormalCompletion62=true;var _didIteratorError62=false;var _iteratorError62=undefined;try{for(var _iterator62=_e49[Symbol.iterator](),_step62;!(_iteratorNormalCompletion62=(_step62=_iterator62.next()).done);_iteratorNormalCompletion62=true){var _t57=_step62.value;if(_t57.type==="insert"){i.insertData(_t57.index,_t57.values.join(""));}else{i.deleteData(_t57.index,_t57.howMany);}}}catch(err){_didIteratorError62=true;_iteratorError62=err;}finally{try{if(!_iteratorNormalCompletion62&&_iterator62["return"]!=null){_iterator62["return"]();}}finally{if(_didIteratorError62){throw _iteratorError62;}}}}}},{key:"_updateAttrs",value:function _updateAttrs(e){var t=this.domConverter.mapViewToDom(e);if(!t){return;}var i=Array.from(t.attributes).map(function(e){return e.name;});var n=e.getAttributeKeys();var _iteratorNormalCompletion63=true;var _didIteratorError63=false;var _iteratorError63=undefined;try{for(var _iterator63=n[Symbol.iterator](),_step63;!(_iteratorNormalCompletion63=(_step63=_iterator63.next()).done);_iteratorNormalCompletion63=true){var _i61=_step63.value;t.setAttribute(_i61,e.getAttribute(_i61));}}catch(err){_didIteratorError63=true;_iteratorError63=err;}finally{try{if(!_iteratorNormalCompletion63&&_iterator63["return"]!=null){_iterator63["return"]();}}finally{if(_didIteratorError63){throw _iteratorError63;}}}var _iteratorNormalCompletion64=true;var _didIteratorError64=false;var _iteratorError64=undefined;try{for(var _iterator64=i[Symbol.iterator](),_step64;!(_iteratorNormalCompletion64=(_step64=_iterator64.next()).done);_iteratorNormalCompletion64=true){var _n26=_step64.value;if(!e.hasAttribute(_n26)){t.removeAttribute(_n26);}}}catch(err){_didIteratorError64=true;_iteratorError64=err;}finally{try{if(!_iteratorNormalCompletion64&&_iterator64["return"]!=null){_iterator64["return"]();}}finally{if(_didIteratorError64){throw _iteratorError64;}}}}},{key:"_updateChildren",value:function _updateChildren(e,t){var i=this.domConverter.mapViewToDom(e);if(!i){return;}var n=t.inlineFillerPosition;var o=this.domConverter.mapViewToDom(e).childNodes;var s=Array.from(this.domConverter.viewChildrenToDom(e,i.ownerDocument,{bind:true,inlineFillerPosition:n}));if(n&&n.parent===e){Td(i.ownerDocument,s,n.offset);}var r=this._diffNodeLists(o,s);var a=0;var c=new Set();var _iteratorNormalCompletion65=true;var _didIteratorError65=false;var _iteratorError65=undefined;try{for(var _iterator65=r[Symbol.iterator](),_step65;!(_iteratorNormalCompletion65=(_step65=_iterator65.next()).done);_iteratorNormalCompletion65=true){var _e50=_step65.value;if(_e50==="delete"){c.add(o[a]);yd(o[a]);}else if(_e50==="equal"){a++;}}}catch(err){_didIteratorError65=true;_iteratorError65=err;}finally{try{if(!_iteratorNormalCompletion65&&_iterator65["return"]!=null){_iterator65["return"]();}}finally{if(_didIteratorError65){throw _iteratorError65;}}}a=0;var _iteratorNormalCompletion66=true;var _didIteratorError66=false;var _iteratorError66=undefined;try{for(var _iterator66=r[Symbol.iterator](),_step66;!(_iteratorNormalCompletion66=(_step66=_iterator66.next()).done);_iteratorNormalCompletion66=true){var _e51=_step66.value;if(_e51==="insert"){kd(i,a,s[a]);a++;}else if(_e51==="equal"){this._markDescendantTextToSync(this.domConverter.domToView(s[a]));a++;}}}catch(err){_didIteratorError66=true;_iteratorError66=err;}finally{try{if(!_iteratorNormalCompletion66&&_iterator66["return"]!=null){_iterator66["return"]();}}finally{if(_didIteratorError66){throw _iteratorError66;}}}var _iteratorNormalCompletion67=true;var _didIteratorError67=false;var _iteratorError67=undefined;try{for(var _iterator67=c[Symbol.iterator](),_step67;!(_iteratorNormalCompletion67=(_step67=_iterator67.next()).done);_iteratorNormalCompletion67=true){var _e52=_step67.value;if(!_e52.parentNode){this.domConverter.unbindDomElement(_e52);}}}catch(err){_didIteratorError67=true;_iteratorError67=err;}finally{try{if(!_iteratorNormalCompletion67&&_iterator67["return"]!=null){_iterator67["return"]();}}finally{if(_didIteratorError67){throw _iteratorError67;}}}}},{key:"_diffNodeLists",value:function _diffNodeLists(e,t){e=Sd(e,this._fakeSelectionContainer);return vd(e,t,Ed.bind(null,this.domConverter));}},{key:"_findReplaceActions",value:function _findReplaceActions(e,t,i){if(e.indexOf("insert")===-1||e.indexOf("delete")===-1){return e;}var n=[];var o=[];var s=[];var r={equal:0,insert:0,"delete":0};var _iteratorNormalCompletion68=true;var _didIteratorError68=false;var _iteratorError68=undefined;try{for(var _iterator68=e[Symbol.iterator](),_step68;!(_iteratorNormalCompletion68=(_step68=_iterator68.next()).done);_iteratorNormalCompletion68=true){var _a6=_step68.value;if(_a6==="insert"){s.push(i[r.equal+r.insert]);}else if(_a6==="delete"){o.push(t[r.equal+r["delete"]]);}else{n=n.concat(vd(o,s,Md).map(function(e){return e==="equal"?"replace":e;}));n.push("equal");o=[];s=[];}r[_a6]++;}}catch(err){_didIteratorError68=true;_iteratorError68=err;}finally{try{if(!_iteratorNormalCompletion68&&_iterator68["return"]!=null){_iterator68["return"]();}}finally{if(_didIteratorError68){throw _iteratorError68;}}}return n.concat(vd(o,s,Md).map(function(e){return e==="equal"?"replace":e;}));}},{key:"_markDescendantTextToSync",value:function _markDescendantTextToSync(e){if(!e){return;}if(e.is("text")){this.markedTexts.add(e);}else if(e.is("element")){var _iteratorNormalCompletion69=true;var _didIteratorError69=false;var _iteratorError69=undefined;try{for(var _iterator69=e.getChildren()[Symbol.iterator](),_step69;!(_iteratorNormalCompletion69=(_step69=_iterator69.next()).done);_iteratorNormalCompletion69=true){var _t58=_step69.value;this._markDescendantTextToSync(_t58);}}catch(err){_didIteratorError69=true;_iteratorError69=err;}finally{try{if(!_iteratorNormalCompletion69&&_iterator69["return"]!=null){_iterator69["return"]();}}finally{if(_didIteratorError69){throw _iteratorError69;}}}}}},{key:"_updateSelection",value:function _updateSelection(){if(this.selection.rangeCount===0){this._removeDomSelection();this._removeFakeSelection();return;}var e=this.domConverter.mapViewToDom(this.selection.editableElement);if(!this.isFocused||!e){return;}if(this.selection.isFake){this._updateFakeSelection(e);}else{this._removeFakeSelection();this._updateDomSelection(e);}}},{key:"_updateFakeSelection",value:function _updateFakeSelection(e){var t=e.ownerDocument;if(!this._fakeSelectionContainer){this._fakeSelectionContainer=Id(t);}var i=this._fakeSelectionContainer;this.domConverter.bindFakeSelection(i,this.selection);if(!this._fakeSelectionNeedsUpdate(e)){return;}if(!i.parentElement||i.parentElement!=e){e.appendChild(i);}i.textContent=this.selection.fakeSelectionLabel||" ";var n=t.getSelection();var o=t.createRange();n.removeAllRanges();o.selectNodeContents(i);n.addRange(o);}},{key:"_updateDomSelection",value:function _updateDomSelection(e){var t=e.ownerDocument.defaultView.getSelection();if(!this._domSelectionNeedsUpdate(t)){return;}var i=this.domConverter.viewPositionToDom(this.selection.anchor);var n=this.domConverter.viewPositionToDom(this.selection.focus);e.focus();t.collapse(i.parent,i.offset);t.extend(n.parent,n.offset);if(Cl.isGecko){Pd(n,t);}}},{key:"_domSelectionNeedsUpdate",value:function _domSelectionNeedsUpdate(e){if(!this.domConverter.isDomSelectionCorrect(e)){return true;}var t=e&&this.domConverter.domSelectionToView(e);if(t&&this.selection.isEqual(t)){return false;}if(!this.selection.isCollapsed&&this.selection.isSimilar(t)){return false;}return true;}},{key:"_fakeSelectionNeedsUpdate",value:function _fakeSelectionNeedsUpdate(e){var t=this._fakeSelectionContainer;var i=e.ownerDocument.getSelection();if(!t||t.parentElement!==e){return true;}if(i.anchorNode!==t&&!t.contains(i.anchorNode)){return true;}return t.textContent!==this.selection.fakeSelectionLabel;}},{key:"_removeDomSelection",value:function _removeDomSelection(){var _iteratorNormalCompletion70=true;var _didIteratorError70=false;var _iteratorError70=undefined;try{for(var _iterator70=this.domDocuments[Symbol.iterator](),_step70;!(_iteratorNormalCompletion70=(_step70=_iterator70.next()).done);_iteratorNormalCompletion70=true){var _e53=_step70.value;var _t59=_e53.getSelection();if(_t59.rangeCount){var _t60=_e53.activeElement;var _i62=this.domConverter.mapDomToView(_t60);if(_t60&&_i62){_e53.getSelection().removeAllRanges();}}}}catch(err){_didIteratorError70=true;_iteratorError70=err;}finally{try{if(!_iteratorNormalCompletion70&&_iterator70["return"]!=null){_iterator70["return"]();}}finally{if(_didIteratorError70){throw _iteratorError70;}}}}},{key:"_removeFakeSelection",value:function _removeFakeSelection(){var e=this._fakeSelectionContainer;if(e){e.remove();}}},{key:"_updateFocus",value:function _updateFocus(){if(this.isFocused){var _e54=this.selection.editableElement;if(_e54){this.domConverter.focus(_e54);}}}}]);return Ad;}();kr(Ad,Jc);function Cd(e){if(e.getAttribute("contenteditable")=="false"){return false;}var t=e.findAncestor(function(e){return e.hasAttribute("contenteditable");});return!t||t.getAttribute("contenteditable")=="true";}function Td(e,t,i){var n=t instanceof Array?t:t.childNodes;var o=n[i];if(od(o)){o.data=cd+o.data;return o;}else{var _o21=e.createTextNode(cd);if(Array.isArray(t)){n.splice(i,0,_o21);}else{kd(t,i,_o21);}return _o21;}}function Md(e,t){return xd(e)&&xd(t)&&!od(e)&&!od(t)&&e.tagName.toLowerCase()===t.tagName.toLowerCase();}function Ed(e,t,i){if(t===i){return true;}else if(od(t)&&od(i)){return t.data===i.data;}else if(e.isBlockFiller(t)&&e.isBlockFiller(i)){return true;}return false;}function Pd(e,t){var i=e.parent;if(i.nodeType!=Node.ELEMENT_NODE||e.offset!=i.childNodes.length-1){return;}var n=i.childNodes[e.offset];if(n&&n.tagName=="BR"){t.addRange(t.getRangeAt(0));}}function Sd(e,t){var i=Array.from(e);if(i.length==0||!t){return i;}var n=i[i.length-1];if(n==t){i.pop();}return i;}function Id(e){var t=e.createElement("div");Object.assign(t.style,{position:"fixed",top:0,left:"-9999px",width:"42px"});t.textContent=" ";return t;}var Nd={window:window,document:document};function Od(e){var t=0;while(e.previousSibling){e=e.previousSibling;t++;}return t;}function Rd(e){var t=[];while(e&&e.nodeType!=Node.DOCUMENT_NODE){t.unshift(e);e=e.parentNode;}return t;}function Ld(e,t){var i=Rd(e);var n=Rd(t);var o=0;while(i[o]==n[o]&&i[o]){o++;}return o===0?null:i[o-1];}var zd=rd(document);var Dd=/*#__PURE__*/function(){function Dd(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,Dd);this.document=e;this.blockFillerMode=t.blockFillerMode||"br";this.preElements=["pre"];this.blockElements=["p","div","h1","h2","h3","h4","h5","h6","li","dd","dt","figcaption"];this._blockFiller=this.blockFillerMode=="br"?rd:sd;this._domToViewMapping=new WeakMap();this._viewToDomMapping=new WeakMap();this._fakeSelectionMapping=new WeakMap();}_createClass(Dd,[{key:"bindFakeSelection",value:function bindFakeSelection(e,t){this._fakeSelectionMapping.set(e,new ml(t));}},{key:"fakeSelectionToView",value:function fakeSelectionToView(e){return this._fakeSelectionMapping.get(e);}},{key:"bindElements",value:function bindElements(e,t){this._domToViewMapping.set(e,t);this._viewToDomMapping.set(t,e);}},{key:"unbindDomElement",value:function unbindDomElement(e){var t=this._domToViewMapping.get(e);if(t){this._domToViewMapping["delete"](e);this._viewToDomMapping["delete"](t);for(var _i63=0,_Array$from=Array.from(e.childNodes);_i63<_Array$from.length;_i63++){var _t61=_Array$from[_i63];this.unbindDomElement(_t61);}}}},{key:"bindDocumentFragments",value:function bindDocumentFragments(e,t){this._domToViewMapping.set(e,t);this._viewToDomMapping.set(t,e);}},{key:"viewToDom",value:function viewToDom(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(e.is("text")){var _i64=this._processDataFromViewText(e);return t.createTextNode(_i64);}else{if(this.mapViewToDom(e)){return this.mapViewToDom(e);}var _n27;if(e.is("documentFragment")){_n27=t.createDocumentFragment();if(i.bind){this.bindDocumentFragments(_n27,e);}}else if(e.is("uiElement")){_n27=e.render(t);if(i.bind){this.bindElements(_n27,e);}return _n27;}else{if(e.hasAttribute("xmlns")){_n27=t.createElementNS(e.getAttribute("xmlns"),e.name);}else{_n27=t.createElement(e.name);}if(i.bind){this.bindElements(_n27,e);}var _iteratorNormalCompletion71=true;var _didIteratorError71=false;var _iteratorError71=undefined;try{for(var _iterator71=e.getAttributeKeys()[Symbol.iterator](),_step71;!(_iteratorNormalCompletion71=(_step71=_iterator71.next()).done);_iteratorNormalCompletion71=true){var _t62=_step71.value;_n27.setAttribute(_t62,e.getAttribute(_t62));}}catch(err){_didIteratorError71=true;_iteratorError71=err;}finally{try{if(!_iteratorNormalCompletion71&&_iterator71["return"]!=null){_iterator71["return"]();}}finally{if(_didIteratorError71){throw _iteratorError71;}}}}if(i.withChildren||i.withChildren===undefined){var _iteratorNormalCompletion72=true;var _didIteratorError72=false;var _iteratorError72=undefined;try{for(var _iterator72=this.viewChildrenToDom(e,t,i)[Symbol.iterator](),_step72;!(_iteratorNormalCompletion72=(_step72=_iterator72.next()).done);_iteratorNormalCompletion72=true){var _o22=_step72.value;_n27.appendChild(_o22);}}catch(err){_didIteratorError72=true;_iteratorError72=err;}finally{try{if(!_iteratorNormalCompletion72&&_iterator72["return"]!=null){_iterator72["return"]();}}finally{if(_didIteratorError72){throw _iteratorError72;}}}}return _n27;}}},{key:"viewChildrenToDom",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function viewChildrenToDom(e,t){var i,n,o,_iteratorNormalCompletion73,_didIteratorError73,_iteratorError73,_iterator73,_step73,_s10,_args11=arguments;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function viewChildrenToDom$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:i=_args11.length>2&&_args11[2]!==undefined?_args11[2]:{};n=e.getFillerOffset&&e.getFillerOffset();o=0;_iteratorNormalCompletion73=true;_didIteratorError73=false;_iteratorError73=undefined;_context11.prev=6;_iterator73=e.getChildren()[Symbol.iterator]();case 8:if(_iteratorNormalCompletion73=(_step73=_iterator73.next()).done){_context11.next=19;break;}_s10=_step73.value;if(!(n===o)){_context11.next=13;break;}_context11.next=13;return this._blockFiller(t);case 13:_context11.next=15;return this.viewToDom(_s10,t,i);case 15:o++;case 16:_iteratorNormalCompletion73=true;_context11.next=8;break;case 19:_context11.next=25;break;case 21:_context11.prev=21;_context11.t0=_context11["catch"](6);_didIteratorError73=true;_iteratorError73=_context11.t0;case 25:_context11.prev=25;_context11.prev=26;if(!_iteratorNormalCompletion73&&_iterator73["return"]!=null){_iterator73["return"]();}case 28:_context11.prev=28;if(!_didIteratorError73){_context11.next=31;break;}throw _iteratorError73;case 31:return _context11.finish(28);case 32:return _context11.finish(25);case 33:if(!(n===o)){_context11.next=36;break;}_context11.next=36;return this._blockFiller(t);case 36:case"end":return _context11.stop();}}},viewChildrenToDom,this,[[6,21,25,33],[26,,28,32]]);})},{key:"viewRangeToDom",value:function viewRangeToDom(e){var t=this.viewPositionToDom(e.start);var i=this.viewPositionToDom(e.end);var n=document.createRange();n.setStart(t.parent,t.offset);n.setEnd(i.parent,i.offset);return n;}},{key:"viewPositionToDom",value:function viewPositionToDom(e){var t=e.parent;if(t.is("text")){var _i65=this.findCorrespondingDomText(t);if(!_i65){return null;}var _n28=e.offset;if(ld(_i65)){_n28+=ad;}return{parent:_i65,offset:_n28};}else{var _i66,_n29,_o23;if(e.offset===0){_i66=this.mapViewToDom(t);if(!_i66){return null;}_o23=_i66.childNodes[0];}else{var _t63=e.nodeBefore;_n29=_t63.is("text")?this.findCorrespondingDomText(_t63):this.mapViewToDom(e.nodeBefore);if(!_n29){return null;}_i66=_n29.parentNode;_o23=_n29.nextSibling;}if(od(_o23)&&ld(_o23)){return{parent:_o23,offset:ad};}var _s11=_n29?Od(_n29)+1:0;return{parent:_i66,offset:_s11};}}},{key:"domToView",value:function domToView(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(this.isBlockFiller(e,this.blockFillerMode)){return null;}var i=this.getParentUIElement(e,this._domToViewMapping);if(i){return i;}if(od(e)){if(dd(e)){return null;}else{var _t64=this._processDataFromDomText(e);return _t64===""?null:new jr(this.document,_t64);}}else if(this.isComment(e)){return null;}else{if(this.mapDomToView(e)){return this.mapDomToView(e);}var _i67;if(this.isDocumentFragment(e)){_i67=new Ul(this.document);if(t.bind){this.bindDocumentFragments(e,_i67);}}else{var _n30=t.keepOriginalCase?e.tagName:e.tagName.toLowerCase();_i67=new Dc(this.document,_n30);if(t.bind){this.bindElements(e,_i67);}var _o24=e.attributes;for(var _e55=_o24.length-1;_e55>=0;_e55--){_i67._setAttribute(_o24[_e55].name,_o24[_e55].value);}}if(t.withChildren||t.withChildren===undefined){var _iteratorNormalCompletion74=true;var _didIteratorError74=false;var _iteratorError74=undefined;try{for(var _iterator74=this.domChildrenToView(e,t)[Symbol.iterator](),_step74;!(_iteratorNormalCompletion74=(_step74=_iterator74.next()).done);_iteratorNormalCompletion74=true){var _n31=_step74.value;_i67._appendChild(_n31);}}catch(err){_didIteratorError74=true;_iteratorError74=err;}finally{try{if(!_iteratorNormalCompletion74&&_iterator74["return"]!=null){_iterator74["return"]();}}finally{if(_didIteratorError74){throw _iteratorError74;}}}}return _i67;}}},{key:"domChildrenToView",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function domChildrenToView(e){var t,_i68,_n32,_o25,_args12=arguments;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function domChildrenToView$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:t=_args12.length>1&&_args12[1]!==undefined?_args12[1]:{};_i68=0;case 2:if(!(_i68<e.childNodes.length)){_context12.next=11;break;}_n32=e.childNodes[_i68];_o25=this.domToView(_n32,t);if(!(_o25!==null)){_context12.next=8;break;}_context12.next=8;return _o25;case 8:_i68++;_context12.next=2;break;case 11:case"end":return _context12.stop();}}},domChildrenToView,this);})},{key:"domSelectionToView",value:function domSelectionToView(e){if(e.rangeCount===1){var _t65=e.getRangeAt(0).startContainer;if(od(_t65)){_t65=_t65.parentNode;}var _i69=this.fakeSelectionToView(_t65);if(_i69){return _i69;}}var t=this.isDomSelectionBackward(e);var i=[];for(var _t66=0;_t66<e.rangeCount;_t66++){var _n33=e.getRangeAt(_t66);var _o26=this.domRangeToView(_n33);if(_o26){i.push(_o26);}}return new ml(i,{backward:t});}},{key:"domRangeToView",value:function domRangeToView(e){var t=this.domPositionToView(e.startContainer,e.startOffset);var i=this.domPositionToView(e.endContainer,e.endOffset);if(t&&i){return new ul(t,i);}return null;}},{key:"domPositionToView",value:function domPositionToView(e,t){if(this.isBlockFiller(e,this.blockFillerMode)){return this.domPositionToView(e.parentNode,Od(e));}var i=this.mapDomToView(e);if(i&&i.is("uiElement")){return dl._createBefore(i);}if(od(e)){if(dd(e)){return this.domPositionToView(e.parentNode,Od(e));}var _i70=this.findCorrespondingViewText(e);var _n34=t;if(!_i70){return null;}if(ld(e)){_n34-=ad;_n34=_n34<0?0:_n34;}return new dl(_i70,_n34);}else{if(t===0){var _t67=this.mapDomToView(e);if(_t67){return new dl(_t67,0);}}else{var _i71=e.childNodes[t-1];var _n35=od(_i71)?this.findCorrespondingViewText(_i71):this.mapDomToView(_i71);if(_n35&&_n35.parent){return new dl(_n35.parent,_n35.index+1);}}return null;}}},{key:"mapDomToView",value:function mapDomToView(e){return this.getParentUIElement(e)||this._domToViewMapping.get(e);}},{key:"findCorrespondingViewText",value:function findCorrespondingViewText(e){if(dd(e)){return null;}var t=this.getParentUIElement(e);if(t){return t;}var i=e.previousSibling;if(i){if(!this.isElement(i)){return null;}var _e56=this.mapDomToView(i);if(_e56){var _t68=_e56.nextSibling;if(_t68 instanceof jr){return _e56.nextSibling;}else{return null;}}}else{var _t69=this.mapDomToView(e.parentNode);if(_t69){var _e57=_t69.getChild(0);if(_e57 instanceof jr){return _e57;}else{return null;}}}return null;}},{key:"mapViewToDom",value:function mapViewToDom(e){return this._viewToDomMapping.get(e);}},{key:"findCorrespondingDomText",value:function findCorrespondingDomText(e){var t=e.previousSibling;if(t&&this.mapViewToDom(t)){return this.mapViewToDom(t).nextSibling;}if(!t&&e.parent&&this.mapViewToDom(e.parent)){return this.mapViewToDom(e.parent).childNodes[0];}return null;}},{key:"focus",value:function focus(e){var t=this.mapViewToDom(e);if(t&&t.ownerDocument.activeElement!==t){var _Nd$window=Nd.window,_e58=_Nd$window.scrollX,_i72=_Nd$window.scrollY;var _n36=[];Bd(t,function(e){var t=e.scrollLeft,i=e.scrollTop;_n36.push([t,i]);});t.focus();Bd(t,function(e){var _n36$shift=_n36.shift(),_n36$shift2=_slicedToArray(_n36$shift,2),t=_n36$shift2[0],i=_n36$shift2[1];e.scrollLeft=t;e.scrollTop=i;});Nd.window.scrollTo(_e58,_i72);}}},{key:"isElement",value:function isElement(e){return e&&e.nodeType==Node.ELEMENT_NODE;}},{key:"isDocumentFragment",value:function isDocumentFragment(e){return e&&e.nodeType==Node.DOCUMENT_FRAGMENT_NODE;}},{key:"isComment",value:function isComment(e){return e&&e.nodeType==Node.COMMENT_NODE;}},{key:"isBlockFiller",value:function isBlockFiller(e){if(this.blockFillerMode=="br"){return e.isEqualNode(zd);}if(e.tagName==="BR"&&Fd(e,this.blockElements)&&e.parentNode.childNodes.length===1){return true;}return Vd(e,this.blockElements);}},{key:"isDomSelectionBackward",value:function isDomSelectionBackward(e){if(e.isCollapsed){return false;}var t=document.createRange();t.setStart(e.anchorNode,e.anchorOffset);t.setEnd(e.focusNode,e.focusOffset);var i=t.collapsed;t.detach();return i;}},{key:"getParentUIElement",value:function getParentUIElement(e){var t=Rd(e);t.pop();while(t.length){var _e59=t.pop();var _i73=this._domToViewMapping.get(_e59);if(_i73&&_i73.is("uiElement")){return _i73;}}return null;}},{key:"isDomSelectionCorrect",value:function isDomSelectionCorrect(e){return this._isDomSelectionPositionCorrect(e.anchorNode,e.anchorOffset)&&this._isDomSelectionPositionCorrect(e.focusNode,e.focusOffset);}},{key:"_isDomSelectionPositionCorrect",value:function _isDomSelectionPositionCorrect(e,t){if(od(e)&&ld(e)&&t<ad){return false;}if(this.isElement(e)&&ld(e.childNodes[t])){return false;}var i=this.mapDomToView(e);if(i&&i.is("uiElement")){return false;}return true;}},{key:"_processDataFromViewText",value:function _processDataFromViewText(e){var _this25=this;var t=e.data;if(e.getAncestors().some(function(e){return _this25.preElements.includes(e.name);})){return t;}if(t.charAt(0)==" "){var _i74=this._getTouchingViewTextNode(e,false);var _n37=_i74&&this._nodeEndsWithSpace(_i74);if(_n37||!_i74){t=" "+t.substr(1);}}if(t.charAt(t.length-1)==" "){var _i75=this._getTouchingViewTextNode(e,true);if(t.charAt(t.length-2)==" "||!_i75||_i75.data.charAt(0)==" "){t=t.substr(0,t.length-1)+" ";}}return t.replace(/ {2}/g,"  ");}},{key:"_nodeEndsWithSpace",value:function _nodeEndsWithSpace(e){var _this26=this;if(e.getAncestors().some(function(e){return _this26.preElements.includes(e.name);})){return false;}var t=this._processDataFromViewText(e);return t.charAt(t.length-1)==" ";}},{key:"_processDataFromDomText",value:function _processDataFromDomText(e){var t=e.data;if(jd(e,this.preElements)){return ud(e);}t=t.replace(/[ \n\t\r]{1,}/g," ");var i=this._getTouchingInlineDomNode(e,false);var n=this._getTouchingInlineDomNode(e,true);var o=this._checkShouldLeftTrimDomText(i);var s=this._checkShouldRightTrimDomText(e,n);if(o){t=t.replace(/^ /,"");}if(s){t=t.replace(/ $/,"");}t=ud(new Text(t));t=t.replace(/ \u00A0/g,"  ");if(/( |\u00A0)\u00A0$/.test(t)||!n||n.data&&n.data.charAt(0)==" "){t=t.replace(/\u00A0$/," ");}if(o){t=t.replace(/^\u00A0/," ");}return t;}},{key:"_checkShouldLeftTrimDomText",value:function _checkShouldLeftTrimDomText(e){if(!e){return true;}if(Gs(e)){return true;}return /[^\S\u00A0]/.test(e.data.charAt(e.data.length-1));}},{key:"_checkShouldRightTrimDomText",value:function _checkShouldRightTrimDomText(e,t){if(t){return false;}return!ld(e);}},{key:"_getTouchingViewTextNode",value:function _getTouchingViewTextNode(e,t){var i=new ll({startPosition:t?dl._createAfter(e):dl._createBefore(e),direction:t?"forward":"backward"});var _iteratorNormalCompletion75=true;var _didIteratorError75=false;var _iteratorError75=undefined;try{for(var _iterator75=i[Symbol.iterator](),_step75;!(_iteratorNormalCompletion75=(_step75=_iterator75.next()).done);_iteratorNormalCompletion75=true){var _e60=_step75.value;if(_e60.item.is("containerElement")){return null;}else if(_e60.item.is("br")){return null;}else if(_e60.item.is("textProxy")){return _e60.item;}}}catch(err){_didIteratorError75=true;_iteratorError75=err;}finally{try{if(!_iteratorNormalCompletion75&&_iterator75["return"]!=null){_iterator75["return"]();}}finally{if(_didIteratorError75){throw _iteratorError75;}}}return null;}},{key:"_getTouchingInlineDomNode",value:function _getTouchingInlineDomNode(e,t){if(!e.parentNode){return null;}var i=t?"nextNode":"previousNode";var n=e.ownerDocument;var o=Rd(e)[0];var s=n.createTreeWalker(o,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,{acceptNode:function acceptNode(e){if(od(e)){return NodeFilter.FILTER_ACCEPT;}if(e.tagName=="BR"){return NodeFilter.FILTER_ACCEPT;}return NodeFilter.FILTER_SKIP;}});s.currentNode=e;var r=s[i]();if(r!==null){var _t70=Ld(e,r);if(_t70&&!jd(e,this.blockElements,_t70)&&!jd(r,this.blockElements,_t70)){return r;}}return null;}}]);return Dd;}();function jd(e,t,i){var n=Rd(e);if(i){n=n.slice(n.indexOf(i)+1);}return n.some(function(e){return e.tagName&&t.includes(e.tagName.toLowerCase());});}function Bd(e,t){while(e&&e!=Nd.document){t(e);e=e.parentNode;}}function Vd(e,t){var i=od(e)&&e.data==" ";return i&&Fd(e,t)&&e.parentNode.childNodes.length===1;}function Fd(e,t){var i=e.parentNode;return i&&i.tagName&&t.includes(i.tagName.toLowerCase());}function Hd(e){var t=Object.prototype.toString.apply(e);if(t=="[object Window]"){return true;}if(t=="[object global]"){return true;}return false;}var Wd=Uc({},dr,{listenTo:function listenTo(e){var _dr$listenTo;for(var _len15=arguments.length,t=new Array(_len15>1?_len15-1:0),_key15=1;_key15<_len15;_key15++){t[_key15-1]=arguments[_key15];}if(xd(e)||Hd(e)){var _i76=this._getProxyEmitter(e)||new $d(e);_i76.attach.apply(_i76,t);e=_i76;}(_dr$listenTo=dr.listenTo).call.apply(_dr$listenTo,[this,e].concat(t));},stopListening:function stopListening(e,t,i){if(xd(e)||Hd(e)){var _t71=this._getProxyEmitter(e);if(!_t71){return;}e=_t71;}dr.stopListening.call(this,e,t,i);if(e instanceof $d){e.detach(t);}},_getProxyEmitter:function _getProxyEmitter(e){return ur(this,qd(e));}});var Ud=Wd;var $d=function $d(e){_classCallCheck(this,$d);hr(this,qd(e));this._domNode=e;};Uc($d.prototype,dr,{attach:function attach(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(this._domListeners&&this._domListeners[e]){return;}var n=this._createDomListener(e,!!i.useCapture);this._domNode.addEventListener(e,n,!!i.useCapture);if(!this._domListeners){this._domListeners={};}this._domListeners[e]=n;},detach:function detach(e){var t;if(this._domListeners[e]&&(!(t=this._events[e])||!t.callbacks.length)){this._domListeners[e].removeListener();}},_createDomListener:function _createDomListener(e,t){var _this27=this;var i=function i(t){_this27.fire(e,t);};i.removeListener=function(){_this27._domNode.removeEventListener(e,i,t);delete _this27._domListeners[e];};return i;}});function qd(e){return e["data-ck-expando"]||(e["data-ck-expando"]=ir());}var Yd=/*#__PURE__*/function(){function Yd(e){_classCallCheck(this,Yd);this.view=e;this.document=e.document;this.isEnabled=false;}_createClass(Yd,[{key:"enable",value:function enable(){this.isEnabled=true;}},{key:"disable",value:function disable(){this.isEnabled=false;}},{key:"destroy",value:function destroy(){this.disable();this.stopListening();}}]);return Yd;}();kr(Yd,Ud);var Gd="__lodash_hash_undefined__";function Jd(e){this.__data__.set(e,Gd);return this;}var Xd=Jd;function Kd(e){return this.__data__.has(e);}var Qd=Kd;function Zd(e){var t=-1,i=e==null?0:e.length;this.__data__=new vt();while(++t<i){this.add(e[t]);}}Zd.prototype.add=Zd.prototype.push=Xd;Zd.prototype.has=Qd;var eu=Zd;function tu(e,t){var i=-1,n=e==null?0:e.length;while(++i<n){if(t(e[i],i,e)){return true;}}return false;}var iu=tu;function nu(e,t){return e.has(t);}var ou=nu;var su=1,ru=2;function au(e,t,i,n,o,s){var r=i&su,a=e.length,c=t.length;if(a!=c&&!(r&&c>a)){return false;}var l=s.get(e);if(l&&s.get(t)){return l==t;}var d=-1,u=true,h=i&ru?new eu():undefined;s.set(e,t);s.set(t,e);while(++d<a){var f=e[d],m=t[d];if(n){var g=r?n(m,f,d,t,e,s):n(f,m,d,e,t,s);}if(g!==undefined){if(g){continue;}u=false;break;}if(h){if(!iu(t,function(e,t){if(!ou(h,t)&&(f===e||o(f,e,i,n,s))){return h.push(t);}})){u=false;break;}}else if(!(f===m||o(f,m,i,n,s))){u=false;break;}}s["delete"](e);s["delete"](t);return u;}var cu=au;function lu(e){var t=-1,i=Array(e.size);e.forEach(function(e,n){i[++t]=[n,e];});return i;}var du=lu;function uu(e){var t=-1,i=Array(e.size);e.forEach(function(e){i[++t]=e;});return i;}var hu=uu;var fu=1,mu=2;var gu="[object Boolean]",pu="[object Date]",bu="[object Error]",wu="[object Map]",_u="[object Number]",vu="[object RegExp]",ku="[object Set]",yu="[object String]",xu="[object Symbol]";var Au="[object ArrayBuffer]",Cu="[object DataView]";var Tu=s?s.prototype:undefined,Mu=Tu?Tu.valueOf:undefined;function Eu(e,t,i,n,o,s,r){switch(i){case Cu:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset){return false;}e=e.buffer;t=t.buffer;case Au:if(e.byteLength!=t.byteLength||!s(new fo(e),new fo(t))){return false;}return true;case gu:case pu:case _u:return j(+e,+t);case bu:return e.name==t.name&&e.message==t.message;case vu:case yu:return e==t+"";case wu:var a=du;case ku:var c=n&fu;a||(a=hu);if(e.size!=t.size&&!c){return false;}var l=r.get(e);if(l){return l==t;}n|=mu;r.set(e,t);var d=cu(a(e),a(t),n,o,s,r);r["delete"](e);return d;case xu:if(Mu){return Mu.call(e)==Mu.call(t);}}return false;}var Pu=Eu;var Su=1;var Iu=Object.prototype;var Nu=Iu.hasOwnProperty;function Ou(e,t,i,n,o,s){var r=i&Su,a=Dn(e),c=a.length,l=Dn(t),d=l.length;if(c!=d&&!r){return false;}var u=c;while(u--){var h=a[u];if(!(r?h in t:Nu.call(t,h))){return false;}}var f=s.get(e);if(f&&s.get(t)){return f==t;}var m=true;s.set(e,t);s.set(t,e);var g=r;while(++u<c){h=a[u];var p=e[h],b=t[h];if(n){var w=r?n(b,p,h,t,e,s):n(p,b,h,e,t,s);}if(!(w===undefined?p===b||o(p,b,i,n,s):w)){m=false;break;}g||(g=h=="constructor");}if(m&&!g){var _=e.constructor,v=t.constructor;if(_!=v&&"constructor"in e&&"constructor"in t&&!(typeof _=="function"&&_ instanceof _&&typeof v=="function"&&v instanceof v)){m=false;}}s["delete"](e);s["delete"](t);return m;}var Ru=Ou;var Lu=1;var zu="[object Arguments]",Du="[object Array]",ju="[object Object]";var Bu=Object.prototype;var Vu=Bu.hasOwnProperty;function Fu(e,t,i,n,o,s){var r=Jt(e),a=Jt(t),c=r?Du:ro(e),l=a?Du:ro(t);c=c==zu?ju:c;l=l==zu?ju:l;var d=c==ju,u=l==ju,h=c==l;if(h&&Object(Xt["a"])(e)){if(!Object(Xt["a"])(t)){return false;}r=true;d=false;}if(h&&!d){s||(s=new Ct());return r||zi(e)?cu(e,t,i,n,o,s):Pu(e,t,c,i,n,o,s);}if(!(i&Lu)){var f=d&&Vu.call(e,"__wrapped__"),m=u&&Vu.call(t,"__wrapped__");if(f||m){var g=f?e.value():e,p=m?t.value():t;s||(s=new Ct());return o(g,p,i,n,s);}}if(!h){return false;}s||(s=new Ct());return Ru(e,t,i,n,o,s);}var Hu=Fu;function Wu(e,t,i,n,o){if(e===t){return true;}if(e==null||t==null||!T(e)&&!T(t)){return e!==e&&t!==t;}return Hu(e,t,i,n,Wu,o);}var Uu=Wu;function $u(e,t,i){i=typeof i=="function"?i:undefined;var n=i?i(e,t):undefined;return n===undefined?Uu(e,t,undefined,i):!!n;}var qu=$u;var Yu=/*#__PURE__*/function(_Yd){_inherits(Yu,_Yd);function Yu(e){var _this28;_classCallCheck(this,Yu);_this28=_possibleConstructorReturn(this,_getPrototypeOf(Yu).call(this,e));_this28._config={childList:true,characterData:true,characterDataOldValue:true,subtree:true};_this28.domConverter=e.domConverter;_this28.renderer=e._renderer;_this28._domElements=[];_this28._mutationObserver=new window.MutationObserver(_this28._onMutations.bind(_assertThisInitialized(_this28)));return _this28;}_createClass(Yu,[{key:"flush",value:function flush(){this._onMutations(this._mutationObserver.takeRecords());}},{key:"observe",value:function observe(e){this._domElements.push(e);if(this.isEnabled){this._mutationObserver.observe(e,this._config);}}},{key:"enable",value:function enable(){_get(_getPrototypeOf(Yu.prototype),"enable",this).call(this);var _iteratorNormalCompletion76=true;var _didIteratorError76=false;var _iteratorError76=undefined;try{for(var _iterator76=this._domElements[Symbol.iterator](),_step76;!(_iteratorNormalCompletion76=(_step76=_iterator76.next()).done);_iteratorNormalCompletion76=true){var _e61=_step76.value;this._mutationObserver.observe(_e61,this._config);}}catch(err){_didIteratorError76=true;_iteratorError76=err;}finally{try{if(!_iteratorNormalCompletion76&&_iterator76["return"]!=null){_iterator76["return"]();}}finally{if(_didIteratorError76){throw _iteratorError76;}}}}},{key:"disable",value:function disable(){_get(_getPrototypeOf(Yu.prototype),"disable",this).call(this);this._mutationObserver.disconnect();}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Yu.prototype),"destroy",this).call(this);this._mutationObserver.disconnect();}},{key:"_onMutations",value:function _onMutations(e){if(e.length===0){return;}var t=this.domConverter;var i=new Map();var n=new Set();var _iteratorNormalCompletion77=true;var _didIteratorError77=false;var _iteratorError77=undefined;try{for(var _iterator77=e[Symbol.iterator](),_step77;!(_iteratorNormalCompletion77=(_step77=_iterator77.next()).done);_iteratorNormalCompletion77=true){var _i78=_step77.value;if(_i78.type==="childList"){var _e63=t.mapDomToView(_i78.target);if(_e63&&_e63.is("uiElement")){continue;}if(_e63&&!this._isBogusBrMutation(_i78)){n.add(_e63);}}}}catch(err){_didIteratorError77=true;_iteratorError77=err;}finally{try{if(!_iteratorNormalCompletion77&&_iterator77["return"]!=null){_iterator77["return"]();}}finally{if(_didIteratorError77){throw _iteratorError77;}}}var _iteratorNormalCompletion78=true;var _didIteratorError78=false;var _iteratorError78=undefined;try{for(var _iterator78=e[Symbol.iterator](),_step78;!(_iteratorNormalCompletion78=(_step78=_iterator78.next()).done);_iteratorNormalCompletion78=true){var _o27=_step78.value;var _e64=t.mapDomToView(_o27.target);if(_e64&&_e64.is("uiElement")){continue;}if(_o27.type==="characterData"){var _e65=t.findCorrespondingViewText(_o27.target);if(_e65&&!n.has(_e65.parent)){i.set(_e65,{type:"text",oldText:_e65.data,newText:ud(_o27.target),node:_e65});}else if(!_e65&&ld(_o27.target)){n.add(t.mapDomToView(_o27.target.parentNode));}}}}catch(err){_didIteratorError78=true;_iteratorError78=err;}finally{try{if(!_iteratorNormalCompletion78&&_iterator78["return"]!=null){_iterator78["return"]();}}finally{if(_didIteratorError78){throw _iteratorError78;}}}var o=[];var _iteratorNormalCompletion79=true;var _didIteratorError79=false;var _iteratorError79=undefined;try{for(var _iterator79=i.values()[Symbol.iterator](),_step79;!(_iteratorNormalCompletion79=(_step79=_iterator79.next()).done);_iteratorNormalCompletion79=true){var _e66=_step79.value;this.renderer.markToSync("text",_e66.node);o.push(_e66);}}catch(err){_didIteratorError79=true;_iteratorError79=err;}finally{try{if(!_iteratorNormalCompletion79&&_iterator79["return"]!=null){_iterator79["return"]();}}finally{if(_didIteratorError79){throw _iteratorError79;}}}var _iteratorNormalCompletion80=true;var _didIteratorError80=false;var _iteratorError80=undefined;try{for(var _iterator80=n[Symbol.iterator](),_step80;!(_iteratorNormalCompletion80=(_step80=_iterator80.next()).done);_iteratorNormalCompletion80=true){var _e67=_step80.value;var _i79=t.mapViewToDom(_e67);var _n38=Array.from(_e67.getChildren());var _s12=Array.from(t.domChildrenToView(_i79,{withChildren:false}));if(!qu(_n38,_s12,a)){this.renderer.markToSync("children",_e67);o.push({type:"children",oldChildren:_n38,newChildren:_s12,node:_e67});}}}catch(err){_didIteratorError80=true;_iteratorError80=err;}finally{try{if(!_iteratorNormalCompletion80&&_iterator80["return"]!=null){_iterator80["return"]();}}finally{if(_didIteratorError80){throw _iteratorError80;}}}var s=e[0].target.ownerDocument.getSelection();var r=null;if(s&&s.anchorNode){var _e62=t.domPositionToView(s.anchorNode,s.anchorOffset);var _i77=t.domPositionToView(s.focusNode,s.focusOffset);if(_e62&&_i77){r=new ml(_e62);r.setFocus(_i77);}}if(o.length){this.document.fire("mutations",o,r);this.view.forceRender();}function a(e,t){if(Array.isArray(e)){return;}if(e===t){return true;}else if(e.is("text")&&t.is("text")){return e.data===t.data;}return false;}}},{key:"_isBogusBrMutation",value:function _isBogusBrMutation(e){var t=null;if(e.nextSibling===null&&e.removedNodes.length===0&&e.addedNodes.length==1){t=this.domConverter.domToView(e.addedNodes[0],{withChildren:false});}return t&&t.is("element","br");}}]);return Yu;}(Yd);var Gu=/*#__PURE__*/function(){function Gu(e,t,i){_classCallCheck(this,Gu);this.view=e;this.document=e.document;this.domEvent=t;this.domTarget=t.target;Uc(this,i);}_createClass(Gu,[{key:"preventDefault",value:function preventDefault(){this.domEvent.preventDefault();}},{key:"stopPropagation",value:function stopPropagation(){this.domEvent.stopPropagation();}},{key:"target",get:function get(){return this.view.domConverter.mapDomToView(this.domTarget);}}]);return Gu;}();var Ju=/*#__PURE__*/function(_Yd2){_inherits(Ju,_Yd2);function Ju(e){var _this29;_classCallCheck(this,Ju);_this29=_possibleConstructorReturn(this,_getPrototypeOf(Ju).call(this,e));_this29.useCapture=false;return _this29;}_createClass(Ju,[{key:"observe",value:function observe(e){var _this30=this;var t=typeof this.domEventType=="string"?[this.domEventType]:this.domEventType;t.forEach(function(t){_this30.listenTo(e,t,function(e,t){if(_this30.isEnabled){_this30.onDomEvent(t);}},{useCapture:_this30.useCapture});});}},{key:"fire",value:function fire(e,t,i){if(this.isEnabled){this.document.fire(e,new Gu(this.view,t,i));}}}]);return Ju;}(Yd);var Xu=/*#__PURE__*/function(_Ju){_inherits(Xu,_Ju);function Xu(e){var _this31;_classCallCheck(this,Xu);_this31=_possibleConstructorReturn(this,_getPrototypeOf(Xu).call(this,e));_this31.domEventType=["keydown","keyup"];return _this31;}_createClass(Xu,[{key:"onDomEvent",value:function onDomEvent(e){this.fire(e.type,e,{keyCode:e.keyCode,altKey:e.altKey,ctrlKey:e.ctrlKey||e.metaKey,shiftKey:e.shiftKey,get keystroke(){return Ll(this);}});}}]);return Xu;}(Ju);var Ku=function Ku(){return n["a"].Date.now();};var Qu=Ku;var Zu=0/0;var eh=/^\s+|\s+$/g;var th=/^[-+]0x[0-9a-f]+$/i;var ih=/^0b[01]+$/i;var nh=/^0o[0-7]+$/i;var oh=parseInt;function sh(e){if(typeof e=="number"){return e;}if(Kr(e)){return Zu;}if(ce(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ce(t)?t+"":t;}if(typeof e!="string"){return e===0?e:+e;}e=e.replace(eh,"");var i=ih.test(e);return i||nh.test(e)?oh(e.slice(2),i?2:8):th.test(e)?Zu:+e;}var rh=sh;var ah="Expected a function";var ch=Math.max,lh=Math.min;function dh(e,t,i){var n,o,s,r,a,c,l=0,d=false,u=false,h=true;if(typeof e!="function"){throw new TypeError(ah);}t=rh(t)||0;if(ce(i)){d=!!i.leading;u="maxWait"in i;s=u?ch(rh(i.maxWait)||0,t):s;h="trailing"in i?!!i.trailing:h;}function f(t){var i=n,s=o;n=o=undefined;l=t;r=e.apply(s,i);return r;}function m(e){l=e;a=setTimeout(b,t);return d?f(e):r;}function g(e){var i=e-c,n=e-l,o=t-i;return u?lh(o,s-n):o;}function p(e){var i=e-c,n=e-l;return c===undefined||i>=t||i<0||u&&n>=s;}function b(){var e=Qu();if(p(e)){return w(e);}a=setTimeout(b,g(e));}function w(e){a=undefined;if(h&&n){return f(e);}n=o=undefined;return r;}function _(){if(a!==undefined){clearTimeout(a);}l=0;n=c=o=a=undefined;}function v(){return a===undefined?r:w(Qu());}function k(){var e=Qu(),i=p(e);n=arguments;o=this;c=e;if(i){if(a===undefined){return m(c);}if(u){clearTimeout(a);a=setTimeout(b,t);return f(c);}}if(a===undefined){a=setTimeout(b,t);}return r;}k.cancel=_;k.flush=v;return k;}var uh=dh;var hh=/*#__PURE__*/function(_Yd3){_inherits(hh,_Yd3);function hh(e){var _this32;_classCallCheck(this,hh);_this32=_possibleConstructorReturn(this,_getPrototypeOf(hh).call(this,e));_this32._fireSelectionChangeDoneDebounced=uh(function(e){return _this32.document.fire("selectionChangeDone",e);},200);return _this32;}_createClass(hh,[{key:"observe",value:function observe(){var _this33=this;var e=this.document;e.on("keydown",function(t,i){var n=e.selection;if(n.isFake&&fh(i.keyCode)&&_this33.isEnabled){i.preventDefault();_this33._handleSelectionMove(i.keyCode);}},{priority:"lowest"});}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(hh.prototype),"destroy",this).call(this);this._fireSelectionChangeDoneDebounced.cancel();}},{key:"_handleSelectionMove",value:function _handleSelectionMove(e){var t=this.document.selection;var i=new ml(t.getRanges(),{backward:t.isBackward,fake:false});if(e==Rl.arrowleft||e==Rl.arrowup){i.setTo(i.getFirstPosition());}if(e==Rl.arrowright||e==Rl.arrowdown){i.setTo(i.getLastPosition());}var n={oldSelection:t,newSelection:i,domSelection:null};this.document.fire("selectionChange",n);this._fireSelectionChangeDoneDebounced(n);}}]);return hh;}(Yd);function fh(e){return e==Rl.arrowright||e==Rl.arrowleft||e==Rl.arrowup||e==Rl.arrowdown;}var mh=/*#__PURE__*/function(_Yd4){_inherits(mh,_Yd4);function mh(e){var _this34;_classCallCheck(this,mh);_this34=_possibleConstructorReturn(this,_getPrototypeOf(mh).call(this,e));_this34.mutationObserver=e.getObserver(Yu);_this34.selection=_this34.document.selection;_this34.domConverter=e.domConverter;_this34._documents=new WeakSet();_this34._fireSelectionChangeDoneDebounced=uh(function(e){return _this34.document.fire("selectionChangeDone",e);},200);_this34._clearInfiniteLoopInterval=setInterval(function(){return _this34._clearInfiniteLoop();},1e3);_this34._loopbackCounter=0;return _this34;}_createClass(mh,[{key:"observe",value:function observe(e){var _this35=this;var t=e.ownerDocument;if(this._documents.has(t)){return;}this.listenTo(t,"selectionchange",function(){_this35._handleSelectionChange(t);});this._documents.add(t);}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(mh.prototype),"destroy",this).call(this);clearInterval(this._clearInfiniteLoopInterval);this._fireSelectionChangeDoneDebounced.cancel();}},{key:"_handleSelectionChange",value:function _handleSelectionChange(e){if(!this.isEnabled){return;}this.mutationObserver.flush();var t=e.defaultView.getSelection();var i=this.domConverter.domSelectionToView(t);if(i.rangeCount==0){return;}if(this.selection.isEqual(i)&&this.domConverter.isDomSelectionCorrect(t)){return;}if(++this._loopbackCounter>60){return;}if(this.selection.isSimilar(i)){this.view.forceRender();}else{var _e68={oldSelection:this.selection,newSelection:i,domSelection:t};this.document.fire("selectionChange",_e68);this._fireSelectionChangeDoneDebounced(_e68);}}},{key:"_clearInfiniteLoop",value:function _clearInfiniteLoop(){this._loopbackCounter=0;}}]);return mh;}(Yd);var gh=/*#__PURE__*/function(_Ju2){_inherits(gh,_Ju2);function gh(e){var _this36;_classCallCheck(this,gh);_this36=_possibleConstructorReturn(this,_getPrototypeOf(gh).call(this,e));_this36.domEventType=["focus","blur"];_this36.useCapture=true;var t=_this36.document;t.on("focus",function(){t.isFocused=true;_this36._renderTimeoutId=setTimeout(function(){return e.forceRender();},50);});t.on("blur",function(i,n){var o=t.selection.editableElement;if(o===null||o===n.target){t.isFocused=false;e.forceRender();}});return _this36;}_createClass(gh,[{key:"onDomEvent",value:function onDomEvent(e){this.fire(e.type,e);}},{key:"destroy",value:function destroy(){if(this._renderTimeoutId){clearTimeout(this._renderTimeoutId);}_get(_getPrototypeOf(gh.prototype),"destroy",this).call(this);}}]);return gh;}(Ju);var ph=/*#__PURE__*/function(_Ju3){_inherits(ph,_Ju3);function ph(e){var _this37;_classCallCheck(this,ph);_this37=_possibleConstructorReturn(this,_getPrototypeOf(ph).call(this,e));_this37.domEventType=["compositionstart","compositionupdate","compositionend"];var t=_this37.document;t.on("compositionstart",function(){t.isComposing=true;});t.on("compositionend",function(){t.isComposing=false;});return _this37;}_createClass(ph,[{key:"onDomEvent",value:function onDomEvent(e){this.fire(e.type,e);}}]);return ph;}(Ju);var bh=/*#__PURE__*/function(_Ju4){_inherits(bh,_Ju4);function bh(e){var _this38;_classCallCheck(this,bh);_this38=_possibleConstructorReturn(this,_getPrototypeOf(bh).call(this,e));_this38.domEventType=["beforeinput"];return _this38;}_createClass(bh,[{key:"onDomEvent",value:function onDomEvent(e){this.fire(e.type,e);}}]);return bh;}(Ju);function wh(e){return Object.prototype.toString.apply(e)=="[object Range]";}function _h(e){var t=e.ownerDocument.defaultView.getComputedStyle(e);return{top:parseInt(t.borderTopWidth,10),right:parseInt(t.borderRightWidth,10),bottom:parseInt(t.borderBottomWidth,10),left:parseInt(t.borderLeftWidth,10)};}var vh=["top","right","bottom","left","width","height"];var kh=/*#__PURE__*/function(){function kh(e){_classCallCheck(this,kh);var t=wh(e);Object.defineProperty(this,"_source",{value:e._source||e,writable:true,enumerable:false});if(Gs(e)||t){if(t){yh(this,kh.getDomRangeRects(e)[0]);}else{yh(this,e.getBoundingClientRect());}}else if(Hd(e)){var _t72=e.innerWidth,_i80=e.innerHeight;yh(this,{top:0,right:_t72,bottom:_i80,left:0,width:_t72,height:_i80});}else{yh(this,e);}}_createClass(kh,[{key:"clone",value:function clone(){return new kh(this);}},{key:"moveTo",value:function moveTo(e,t){this.top=t;this.right=e+this.width;this.bottom=t+this.height;this.left=e;return this;}},{key:"moveBy",value:function moveBy(e,t){this.top+=t;this.right+=e;this.left+=e;this.bottom+=t;return this;}},{key:"getIntersection",value:function getIntersection(e){var t={top:Math.max(this.top,e.top),right:Math.min(this.right,e.right),bottom:Math.min(this.bottom,e.bottom),left:Math.max(this.left,e.left)};t.width=t.right-t.left;t.height=t.bottom-t.top;if(t.width<0||t.height<0){return null;}else{return new kh(t);}}},{key:"getIntersectionArea",value:function getIntersectionArea(e){var t=this.getIntersection(e);if(t){return t.getArea();}else{return 0;}}},{key:"getArea",value:function getArea(){return this.width*this.height;}},{key:"getVisible",value:function getVisible(){var e=this._source;var t=this.clone();if(!xh(e)){var _i81=e.parentNode||e.commonAncestorContainer;while(_i81&&!xh(_i81)){var _e69=new kh(_i81);var _n39=t.getIntersection(_e69);if(_n39){if(_n39.getArea()<t.getArea()){t=_n39;}}else{return null;}_i81=_i81.parentNode;}}return t;}},{key:"isEqual",value:function isEqual(e){for(var _i82=0,_vh=vh;_i82<_vh.length;_i82++){var _t73=_vh[_i82];if(this[_t73]!==e[_t73]){return false;}}return true;}},{key:"contains",value:function contains(e){var t=this.getIntersection(e);return!!(t&&t.isEqual(e));}},{key:"excludeScrollbarsAndBorders",value:function excludeScrollbarsAndBorders(){var e=this._source;var t,i,n;if(Hd(e)){t=e.innerWidth-e.document.documentElement.clientWidth;i=e.innerHeight-e.document.documentElement.clientHeight;n=e.getComputedStyle(e.document.documentElement).direction;}else{var _o28=_h(this._source);t=e.offsetWidth-e.clientWidth-_o28.left-_o28.right;i=e.offsetHeight-e.clientHeight-_o28.top-_o28.bottom;n=e.ownerDocument.defaultView.getComputedStyle(e).direction;this.left+=_o28.left;this.top+=_o28.top;this.right-=_o28.right;this.bottom-=_o28.bottom;this.width=this.right-this.left;this.height=this.bottom-this.top;}this.width-=t;if(n==="ltr"){this.right-=t;}else{this.left+=t;}this.height-=i;this.bottom-=i;return this;}}],[{key:"getDomRangeRects",value:function getDomRangeRects(e){var t=[];var i=Array.from(e.getClientRects());if(i.length){for(var _i84=0,_i83=i;_i84<_i83.length;_i84++){var _e70=_i83[_i84];t.push(new kh(_e70));}}else{var _i85=e.startContainer;if(od(_i85)){_i85=_i85.parentNode;}var _n40=new kh(_i85.getBoundingClientRect());_n40.right=_n40.left;_n40.width=0;t.push(_n40);}return t;}}]);return kh;}();function yh(e,t){for(var _i86=0,_vh2=vh;_i86<_vh2.length;_i86++){var _i87=_vh2[_i86];e[_i87]=t[_i87];}}function xh(e){if(!Gs(e)){return false;}return e===e.ownerDocument.body;}var Ah={};function Ch(_ref7){var e=_ref7.target,_ref7$viewportOffset=_ref7.viewportOffset,t=_ref7$viewportOffset===void 0?0:_ref7$viewportOffset;var i=Oh(e);var n=i;var o=null;while(n){var _s13=void 0;if(n==i){_s13=Rh(e);}else{_s13=Rh(o);}Eh(_s13,function(){return Lh(e,n);});var _r8=Lh(e,n);Mh(n,_r8,t);if(n.parent!=n){o=n.frameElement;n=n.parent;if(!o){return;}}else{n=null;}}}function Th(e){var t=Rh(e);Eh(t,function(){return new kh(e);});}Object.assign(Ah,{scrollViewportToShowTarget:Ch,scrollAncestorsToShowTarget:Th});function Mh(e,t,i){var n=t.clone().moveBy(0,i);var o=t.clone().moveBy(0,-i);var s=new kh(e).excludeScrollbarsAndBorders();var r=[o,n];if(!r.every(function(e){return s.contains(e);})){var _r9=e.scrollX,_a7=e.scrollY;if(Sh(o,s)){_a7-=s.top-t.top+i;}else if(Ph(n,s)){_a7+=t.bottom-s.bottom+i;}if(Ih(t,s)){_r9-=s.left-t.left+i;}else if(Nh(t,s)){_r9+=t.right-s.right+i;}e.scrollTo(_r9,_a7);}}function Eh(e,t){var i=Oh(e);var n,o;while(e!=i.document.body){o=t();n=new kh(e).excludeScrollbarsAndBorders();if(!n.contains(o)){if(Sh(o,n)){e.scrollTop-=n.top-o.top;}else if(Ph(o,n)){e.scrollTop+=o.bottom-n.bottom;}if(Ih(o,n)){e.scrollLeft-=n.left-o.left;}else if(Nh(o,n)){e.scrollLeft+=o.right-n.right;}}e=e.parentNode;}}function Ph(e,t){return e.bottom>t.bottom;}function Sh(e,t){return e.top<t.top;}function Ih(e,t){return e.left<t.left;}function Nh(e,t){return e.right>t.right;}function Oh(e){if(wh(e)){return e.startContainer.ownerDocument.defaultView;}else{return e.ownerDocument.defaultView;}}function Rh(e){if(wh(e)){var _t74=e.commonAncestorContainer;if(od(_t74)){_t74=_t74.parentNode;}return _t74;}else{return e.parentNode;}}function Lh(e,t){var i=Oh(e);var n=new kh(e);if(i===t){return n;}else{var _e71=i;while(_e71!=t){var _t75=_e71.frameElement;var _i88=new kh(_t75).excludeScrollbarsAndBorders();n.moveBy(_i88.left,_i88.top);_e71=_e71.parent;}}return n;}var zh=/*#__PURE__*/function(){function zh(e){var _this39=this;_classCallCheck(this,zh);this.document=new pl(e);this.domConverter=new Dd(this.document);this.domRoots=new Map();this.set("isRenderingInProgress",false);this._renderer=new Ad(this.domConverter,this.document.selection);this._renderer.bind("isFocused").to(this.document);this._initialDomRootAttributes=new WeakMap();this._observers=new Map();this._ongoingChange=false;this._postFixersInProgress=false;this._renderingDisabled=false;this._hasChangedSinceTheLastRendering=false;this._writer=new ql(this.document);this.addObserver(Yu);this.addObserver(mh);this.addObserver(gh);this.addObserver(Xu);this.addObserver(hh);this.addObserver(ph);if(Cl.isAndroid){this.addObserver(bh);}hd(this);Fl(this);this.on("render",function(){_this39._render();_this39.document.fire("layoutChanged");_this39._hasChangedSinceTheLastRendering=false;});this.listenTo(this.document.selection,"change",function(){_this39._hasChangedSinceTheLastRendering=true;});}_createClass(zh,[{key:"attachDomRoot",value:function attachDomRoot(e){var _this40=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"main";var i=this.document.getRoot(t);i._name=e.tagName.toLowerCase();var n={};for(var _i89=0,_Array$from2=Array.from(e.attributes);_i89<_Array$from2.length;_i89++){var _ref9=_Array$from2[_i89];var _t76=_ref9.name,_o29=_ref9.value;n[_t76]=_o29;if(_t76==="class"){this._writer.addClass(_o29.split(" "),i);}else{this._writer.setAttribute(_t76,_o29,i);}}this._initialDomRootAttributes.set(e,n);var o=function o(){_this40._writer.setAttribute("contenteditable",!i.isReadOnly,i);if(i.isReadOnly){_this40._writer.addClass("ck-read-only",i);}else{_this40._writer.removeClass("ck-read-only",i);}};o();this.domRoots.set(t,e);this.domConverter.bindElements(e,i);this._renderer.markToSync("children",i);this._renderer.markToSync("attributes",i);this._renderer.domDocuments.add(e.ownerDocument);i.on("change:children",function(e,t){return _this40._renderer.markToSync("children",t);});i.on("change:attributes",function(e,t){return _this40._renderer.markToSync("attributes",t);});i.on("change:text",function(e,t){return _this40._renderer.markToSync("text",t);});i.on("change:isReadOnly",function(){return _this40.change(o);});i.on("change",function(){_this40._hasChangedSinceTheLastRendering=true;});var _iteratorNormalCompletion81=true;var _didIteratorError81=false;var _iteratorError81=undefined;try{for(var _iterator81=this._observers.values()[Symbol.iterator](),_step81;!(_iteratorNormalCompletion81=(_step81=_iterator81.next()).done);_iteratorNormalCompletion81=true){var _i90=_step81.value;_i90.observe(e,t);}}catch(err){_didIteratorError81=true;_iteratorError81=err;}finally{try{if(!_iteratorNormalCompletion81&&_iterator81["return"]!=null){_iterator81["return"]();}}finally{if(_didIteratorError81){throw _iteratorError81;}}}}},{key:"detachDomRoot",value:function detachDomRoot(e){var t=this.domRoots.get(e);Array.from(t.attributes).forEach(function(_ref10){var e=_ref10.name;return t.removeAttribute(e);});var i=this._initialDomRootAttributes.get(t);for(var _e72 in i){t.setAttribute(_e72,i[_e72]);}this.domRoots["delete"](e);this.domConverter.unbindDomElement(t);}},{key:"getDomRoot",value:function getDomRoot(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"main";return this.domRoots.get(e);}},{key:"addObserver",value:function addObserver(e){var t=this._observers.get(e);if(t){return t;}t=new e(this);this._observers.set(e,t);var _iteratorNormalCompletion82=true;var _didIteratorError82=false;var _iteratorError82=undefined;try{for(var _iterator82=this.domRoots[Symbol.iterator](),_step82;!(_iteratorNormalCompletion82=(_step82=_iterator82.next()).done);_iteratorNormalCompletion82=true){var _step82$value=_slicedToArray(_step82.value,2),_e73=_step82$value[0],_i91=_step82$value[1];t.observe(_i91,_e73);}}catch(err){_didIteratorError82=true;_iteratorError82=err;}finally{try{if(!_iteratorNormalCompletion82&&_iterator82["return"]!=null){_iterator82["return"]();}}finally{if(_didIteratorError82){throw _iteratorError82;}}}t.enable();return t;}},{key:"getObserver",value:function getObserver(e){return this._observers.get(e);}},{key:"disableObservers",value:function disableObservers(){var _iteratorNormalCompletion83=true;var _didIteratorError83=false;var _iteratorError83=undefined;try{for(var _iterator83=this._observers.values()[Symbol.iterator](),_step83;!(_iteratorNormalCompletion83=(_step83=_iterator83.next()).done);_iteratorNormalCompletion83=true){var _e74=_step83.value;_e74.disable();}}catch(err){_didIteratorError83=true;_iteratorError83=err;}finally{try{if(!_iteratorNormalCompletion83&&_iterator83["return"]!=null){_iterator83["return"]();}}finally{if(_didIteratorError83){throw _iteratorError83;}}}}},{key:"enableObservers",value:function enableObservers(){var _iteratorNormalCompletion84=true;var _didIteratorError84=false;var _iteratorError84=undefined;try{for(var _iterator84=this._observers.values()[Symbol.iterator](),_step84;!(_iteratorNormalCompletion84=(_step84=_iterator84.next()).done);_iteratorNormalCompletion84=true){var _e75=_step84.value;_e75.enable();}}catch(err){_didIteratorError84=true;_iteratorError84=err;}finally{try{if(!_iteratorNormalCompletion84&&_iterator84["return"]!=null){_iterator84["return"]();}}finally{if(_didIteratorError84){throw _iteratorError84;}}}}},{key:"scrollToTheSelection",value:function scrollToTheSelection(){var e=this.document.selection.getFirstRange();if(e){Ch({target:this.domConverter.viewRangeToDom(e),viewportOffset:20});}}},{key:"focus",value:function focus(){if(!this.document.isFocused){var _e76=this.document.selection.editableElement;if(_e76){this.domConverter.focus(_e76);this.forceRender();}else{}}}},{key:"change",value:function change(e){if(this.isRenderingInProgress||this._postFixersInProgress){throw new rr["b"]("cannot-change-view-tree: "+"Attempting to make changes to the view when it is in an incorrect state: rendering or post-fixers are in progress. "+"This may cause some unexpected behavior and inconsistency between the DOM and the view.",this);}try{if(this._ongoingChange){return e(this._writer);}this._ongoingChange=true;var _t77=e(this._writer);this._ongoingChange=false;if(!this._renderingDisabled&&this._hasChangedSinceTheLastRendering){this._postFixersInProgress=true;this.document._callPostFixers(this._writer);this._postFixersInProgress=false;this.fire("render");}return _t77;}catch(e){rr["b"].rethrowUnexpectedError(e,this);}}},{key:"forceRender",value:function forceRender(){this._hasChangedSinceTheLastRendering=true;this.change(function(){});}},{key:"destroy",value:function destroy(){var _iteratorNormalCompletion85=true;var _didIteratorError85=false;var _iteratorError85=undefined;try{for(var _iterator85=this._observers.values()[Symbol.iterator](),_step85;!(_iteratorNormalCompletion85=(_step85=_iterator85.next()).done);_iteratorNormalCompletion85=true){var _e77=_step85.value;_e77.destroy();}}catch(err){_didIteratorError85=true;_iteratorError85=err;}finally{try{if(!_iteratorNormalCompletion85&&_iterator85["return"]!=null){_iterator85["return"]();}}finally{if(_didIteratorError85){throw _iteratorError85;}}}this.document.destroy();this.stopListening();}},{key:"createPositionAt",value:function createPositionAt(e,t){return dl._createAt(e,t);}},{key:"createPositionAfter",value:function createPositionAfter(e){return dl._createAfter(e);}},{key:"createPositionBefore",value:function createPositionBefore(e){return dl._createBefore(e);}},{key:"createRange",value:function createRange(e,t){return new ul(e,t);}},{key:"createRangeOn",value:function createRangeOn(e){return ul._createOn(e);}},{key:"createRangeIn",value:function createRangeIn(e){return ul._createIn(e);}},{key:"createSelection",value:function createSelection(e,t,i){return new ml(e,t,i);}},{key:"_disableRendering",value:function _disableRendering(e){this._renderingDisabled=e;if(e==false){this.change(function(){});}}},{key:"_render",value:function _render(){this.isRenderingInProgress=true;this.disableObservers();this._renderer.render();this.enableObservers();this.isRenderingInProgress=false;}}]);return zh;}();kr(zh,Jc);var Dh=/*#__PURE__*/function(){function Dh(e){_classCallCheck(this,Dh);this.parent=null;this._attrs=Hr(e);}_createClass(Dh,[{key:"isAttached",value:function isAttached(){return this.root.is("rootElement");}},{key:"getPath",value:function getPath(){var e=[];var t=this;while(t.parent){e.unshift(t.startOffset);t=t.parent;}return e;}},{key:"getAncestors",value:function getAncestors(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{includeSelf:false,parentFirst:false};var t=[];var i=e.includeSelf?this:this.parent;while(i){t[e.parentFirst?"push":"unshift"](i);i=i.parent;}return t;}},{key:"getCommonAncestor",value:function getCommonAncestor(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=this.getAncestors(t);var n=e.getAncestors(t);var o=0;while(i[o]==n[o]&&i[o]){o++;}return o===0?null:i[o-1];}},{key:"isBefore",value:function isBefore(e){if(this==e){return false;}if(this.root!==e.root){return false;}var t=this.getPath();var i=e.getPath();var n=Or(t,i);switch(n){case"prefix":return true;case"extension":return false;default:return t[n]<i[n];}}},{key:"isAfter",value:function isAfter(e){if(this==e){return false;}if(this.root!==e.root){return false;}return!this.isBefore(e);}},{key:"hasAttribute",value:function hasAttribute(e){return this._attrs.has(e);}},{key:"getAttribute",value:function getAttribute(e){return this._attrs.get(e);}},{key:"getAttributes",value:function getAttributes(){return this._attrs.entries();}},{key:"getAttributeKeys",value:function getAttributeKeys(){return this._attrs.keys();}},{key:"toJSON",value:function toJSON(){var e={};if(this._attrs.size){e.attributes=Array.from(this._attrs).reduce(function(e,t){e[t[0]]=t[1];return e;},{});}return e;}},{key:"is",value:function is(e){return e=="node"||e=="model:node";}},{key:"_clone",value:function _clone(){return new Dh(this._attrs);}},{key:"_remove",value:function _remove(){this.parent._removeChildren(this.index);}},{key:"_setAttribute",value:function _setAttribute(e,t){this._attrs.set(e,t);}},{key:"_setAttributesTo",value:function _setAttributesTo(e){this._attrs=Hr(e);}},{key:"_removeAttribute",value:function _removeAttribute(e){return this._attrs["delete"](e);}},{key:"_clearAttributes",value:function _clearAttributes(){this._attrs.clear();}},{key:"index",get:function get(){var e;if(!this.parent){return null;}if((e=this.parent.getChildIndex(this))===null){throw new rr["b"]("model-node-not-found-in-parent: The node's parent does not contain this node.",this);}return e;}},{key:"startOffset",get:function get(){var e;if(!this.parent){return null;}if((e=this.parent.getChildStartOffset(this))===null){throw new rr["b"]("model-node-not-found-in-parent: The node's parent does not contain this node.",this);}return e;}},{key:"offsetSize",get:function get(){return 1;}},{key:"endOffset",get:function get(){if(!this.parent){return null;}return this.startOffset+this.offsetSize;}},{key:"nextSibling",get:function get(){var e=this.index;return e!==null&&this.parent.getChild(e+1)||null;}},{key:"previousSibling",get:function get(){var e=this.index;return e!==null&&this.parent.getChild(e-1)||null;}},{key:"root",get:function get(){var e=this;while(e.parent){e=e.parent;}return e;}}]);return Dh;}();var jh=/*#__PURE__*/function(_Dh){_inherits(jh,_Dh);function jh(e,t){var _this41;_classCallCheck(this,jh);_this41=_possibleConstructorReturn(this,_getPrototypeOf(jh).call(this,t));_this41._data=e||"";return _this41;}_createClass(jh,[{key:"is",value:function is(e){return e=="text"||e=="model:text"||_get(_getPrototypeOf(jh.prototype),"is",this).call(this,e);}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(jh.prototype),"toJSON",this).call(this);e.data=this.data;return e;}},{key:"_clone",value:function _clone(){return new jh(this.data,this.getAttributes());}},{key:"offsetSize",get:function get(){return this.data.length;}},{key:"data",get:function get(){return this._data;}}],[{key:"fromJSON",value:function fromJSON(e){return new jh(e.data,e.attributes);}}]);return jh;}(Dh);var Bh=/*#__PURE__*/function(){function Bh(e,t,i){_classCallCheck(this,Bh);this.textNode=e;if(t<0||t>e.offsetSize){throw new rr["b"]("model-textproxy-wrong-offsetintext: Given offsetInText value is incorrect.",this);}if(i<0||t+i>e.offsetSize){throw new rr["b"]("model-textproxy-wrong-length: Given length value is incorrect.",this);}this.data=e.data.substring(t,t+i);this.offsetInText=t;}_createClass(Bh,[{key:"is",value:function is(e){return e=="textProxy"||e=="model:textProxy";}},{key:"getPath",value:function getPath(){var e=this.textNode.getPath();if(e.length>0){e[e.length-1]+=this.offsetInText;}return e;}},{key:"getAncestors",value:function getAncestors(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{includeSelf:false,parentFirst:false};var t=[];var i=e.includeSelf?this:this.parent;while(i){t[e.parentFirst?"push":"unshift"](i);i=i.parent;}return t;}},{key:"hasAttribute",value:function hasAttribute(e){return this.textNode.hasAttribute(e);}},{key:"getAttribute",value:function getAttribute(e){return this.textNode.getAttribute(e);}},{key:"getAttributes",value:function getAttributes(){return this.textNode.getAttributes();}},{key:"getAttributeKeys",value:function getAttributeKeys(){return this.textNode.getAttributeKeys();}},{key:"startOffset",get:function get(){return this.textNode.startOffset!==null?this.textNode.startOffset+this.offsetInText:null;}},{key:"offsetSize",get:function get(){return this.data.length;}},{key:"endOffset",get:function get(){return this.startOffset!==null?this.startOffset+this.offsetSize:null;}},{key:"isPartial",get:function get(){return this.offsetSize!==this.textNode.offsetSize;}},{key:"parent",get:function get(){return this.textNode.parent;}},{key:"root",get:function get(){return this.textNode.root;}}]);return Bh;}();var Vh=/*#__PURE__*/function(){function Vh(e){_classCallCheck(this,Vh);this._nodes=[];if(e){this._insertNodes(0,e);}}_createClass(Vh,[{key:Symbol.iterator,value:function value(){return this._nodes[Symbol.iterator]();}},{key:"getNode",value:function getNode(e){return this._nodes[e]||null;}},{key:"getNodeIndex",value:function getNodeIndex(e){var t=this._nodes.indexOf(e);return t==-1?null:t;}},{key:"getNodeStartOffset",value:function getNodeStartOffset(e){var t=this.getNodeIndex(e);return t===null?null:this._nodes.slice(0,t).reduce(function(e,t){return e+t.offsetSize;},0);}},{key:"indexToOffset",value:function indexToOffset(e){if(e==this._nodes.length){return this.maxOffset;}var t=this._nodes[e];if(!t){throw new rr["b"]("model-nodelist-index-out-of-bounds: Given index cannot be found in the node list.",this);}return this.getNodeStartOffset(t);}},{key:"offsetToIndex",value:function offsetToIndex(e){var t=0;var _iteratorNormalCompletion86=true;var _didIteratorError86=false;var _iteratorError86=undefined;try{for(var _iterator86=this._nodes[Symbol.iterator](),_step86;!(_iteratorNormalCompletion86=(_step86=_iterator86.next()).done);_iteratorNormalCompletion86=true){var _i92=_step86.value;if(e>=t&&e<t+_i92.offsetSize){return this.getNodeIndex(_i92);}t+=_i92.offsetSize;}}catch(err){_didIteratorError86=true;_iteratorError86=err;}finally{try{if(!_iteratorNormalCompletion86&&_iterator86["return"]!=null){_iterator86["return"]();}}finally{if(_didIteratorError86){throw _iteratorError86;}}}if(t!=e){throw new rr["b"]("model-nodelist-offset-out-of-bounds: Given offset cannot be found in the node list.",this,{offset:e,nodeList:this});}return this.length;}},{key:"_insertNodes",value:function _insertNodes(e,t){var _this$_nodes;var _iteratorNormalCompletion87=true;var _didIteratorError87=false;var _iteratorError87=undefined;try{for(var _iterator87=t[Symbol.iterator](),_step87;!(_iteratorNormalCompletion87=(_step87=_iterator87.next()).done);_iteratorNormalCompletion87=true){var _e78=_step87.value;if(!(_e78 instanceof Dh)){throw new rr["b"]("model-nodelist-insertNodes-not-node: Trying to insert an object which is not a Node instance.",this);}}}catch(err){_didIteratorError87=true;_iteratorError87=err;}finally{try{if(!_iteratorNormalCompletion87&&_iterator87["return"]!=null){_iterator87["return"]();}}finally{if(_didIteratorError87){throw _iteratorError87;}}}(_this$_nodes=this._nodes).splice.apply(_this$_nodes,[e,0].concat(_toConsumableArray(t)));}},{key:"_removeNodes",value:function _removeNodes(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;return this._nodes.splice(e,t);}},{key:"toJSON",value:function toJSON(){return this._nodes.map(function(e){return e.toJSON();});}},{key:"length",get:function get(){return this._nodes.length;}},{key:"maxOffset",get:function get(){return this._nodes.reduce(function(e,t){return e+t.offsetSize;},0);}}]);return Vh;}();var Fh=/*#__PURE__*/function(_Dh2){_inherits(Fh,_Dh2);function Fh(e,t,i){var _this42;_classCallCheck(this,Fh);_this42=_possibleConstructorReturn(this,_getPrototypeOf(Fh).call(this,t));_this42.name=e;_this42._children=new Vh();if(i){_this42._insertChild(0,i);}return _this42;}_createClass(Fh,[{key:"is",value:function is(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=e.replace(/^model:/,"");if(!t){return i=="element"||i==this.name||_get(_getPrototypeOf(Fh.prototype),"is",this).call(this,e);}else{return i=="element"&&t==this.name;}}},{key:"getChild",value:function getChild(e){return this._children.getNode(e);}},{key:"getChildren",value:function getChildren(){return this._children[Symbol.iterator]();}},{key:"getChildIndex",value:function getChildIndex(e){return this._children.getNodeIndex(e);}},{key:"getChildStartOffset",value:function getChildStartOffset(e){return this._children.getNodeStartOffset(e);}},{key:"offsetToIndex",value:function offsetToIndex(e){return this._children.offsetToIndex(e);}},{key:"getNodeByPath",value:function getNodeByPath(e){var t=this;var _iteratorNormalCompletion88=true;var _didIteratorError88=false;var _iteratorError88=undefined;try{for(var _iterator88=e[Symbol.iterator](),_step88;!(_iteratorNormalCompletion88=(_step88=_iterator88.next()).done);_iteratorNormalCompletion88=true){var _i93=_step88.value;t=t.getChild(t.offsetToIndex(_i93));}}catch(err){_didIteratorError88=true;_iteratorError88=err;}finally{try{if(!_iteratorNormalCompletion88&&_iterator88["return"]!=null){_iterator88["return"]();}}finally{if(_didIteratorError88){throw _iteratorError88;}}}return t;}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(Fh.prototype),"toJSON",this).call(this);e.name=this.name;if(this._children.length>0){e.children=[];var _iteratorNormalCompletion89=true;var _didIteratorError89=false;var _iteratorError89=undefined;try{for(var _iterator89=this._children[Symbol.iterator](),_step89;!(_iteratorNormalCompletion89=(_step89=_iterator89.next()).done);_iteratorNormalCompletion89=true){var _t78=_step89.value;e.children.push(_t78.toJSON());}}catch(err){_didIteratorError89=true;_iteratorError89=err;}finally{try{if(!_iteratorNormalCompletion89&&_iterator89["return"]!=null){_iterator89["return"]();}}finally{if(_didIteratorError89){throw _iteratorError89;}}}}return e;}},{key:"_clone",value:function _clone(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var t=e?Array.from(this._children).map(function(e){return e._clone(true);}):null;return new Fh(this.name,this.getAttributes(),t);}},{key:"_appendChild",value:function _appendChild(e){this._insertChild(this.childCount,e);}},{key:"_insertChild",value:function _insertChild(e,t){var i=Hh(t);var _iteratorNormalCompletion90=true;var _didIteratorError90=false;var _iteratorError90=undefined;try{for(var _iterator90=i[Symbol.iterator](),_step90;!(_iteratorNormalCompletion90=(_step90=_iterator90.next()).done);_iteratorNormalCompletion90=true){var _e79=_step90.value;if(_e79.parent!==null){_e79._remove();}_e79.parent=this;}}catch(err){_didIteratorError90=true;_iteratorError90=err;}finally{try{if(!_iteratorNormalCompletion90&&_iterator90["return"]!=null){_iterator90["return"]();}}finally{if(_didIteratorError90){throw _iteratorError90;}}}this._children._insertNodes(e,i);}},{key:"_removeChildren",value:function _removeChildren(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var i=this._children._removeNodes(e,t);var _iteratorNormalCompletion91=true;var _didIteratorError91=false;var _iteratorError91=undefined;try{for(var _iterator91=i[Symbol.iterator](),_step91;!(_iteratorNormalCompletion91=(_step91=_iterator91.next()).done);_iteratorNormalCompletion91=true){var _e80=_step91.value;_e80.parent=null;}}catch(err){_didIteratorError91=true;_iteratorError91=err;}finally{try{if(!_iteratorNormalCompletion91&&_iterator91["return"]!=null){_iterator91["return"]();}}finally{if(_didIteratorError91){throw _iteratorError91;}}}return i;}},{key:"childCount",get:function get(){return this._children.length;}},{key:"maxOffset",get:function get(){return this._children.maxOffset;}},{key:"isEmpty",get:function get(){return this.childCount===0;}}],[{key:"fromJSON",value:function fromJSON(e){var t=null;if(e.children){t=[];var _iteratorNormalCompletion92=true;var _didIteratorError92=false;var _iteratorError92=undefined;try{for(var _iterator92=e.children[Symbol.iterator](),_step92;!(_iteratorNormalCompletion92=(_step92=_iterator92.next()).done);_iteratorNormalCompletion92=true){var _i94=_step92.value;if(_i94.name){t.push(Fh.fromJSON(_i94));}else{t.push(jh.fromJSON(_i94));}}}catch(err){_didIteratorError92=true;_iteratorError92=err;}finally{try{if(!_iteratorNormalCompletion92&&_iterator92["return"]!=null){_iterator92["return"]();}}finally{if(_didIteratorError92){throw _iteratorError92;}}}}return new Fh(e.name,e.attributes,t);}}]);return Fh;}(Dh);function Hh(e){if(typeof e=="string"){return[new jh(e)];}if(!Fr(e)){e=[e];}return Array.from(e).map(function(e){if(typeof e=="string"){return new jh(e);}if(e instanceof Bh){return new jh(e.data,e.getAttributes());}return e;});}var Wh=/*#__PURE__*/function(){function Wh(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,Wh);if(!e.boundaries&&!e.startPosition){throw new rr["b"]("model-tree-walker-no-start-position: Neither boundaries nor starting position have been defined.",null);}var t=e.direction||"forward";if(t!="forward"&&t!="backward"){throw new rr["b"]("model-tree-walker-unknown-direction: Only `backward` and `forward` direction allowed.",e,{direction:t});}this.direction=t;this.boundaries=e.boundaries||null;if(e.startPosition){this.position=e.startPosition.clone();}else{this.position=$h._createAt(this.boundaries[this.direction=="backward"?"end":"start"]);}this.position.stickiness="toNone";this.singleCharacters=!!e.singleCharacters;this.shallow=!!e.shallow;this.ignoreElementEnd=!!e.ignoreElementEnd;this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null;this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null;this._visitedParent=this.position.parent;}_createClass(Wh,[{key:Symbol.iterator,value:function value(){return this;}},{key:"skip",value:function skip(e){var t,i,n,o;do{n=this.position;o=this._visitedParent;var _this$next2=this.next();t=_this$next2.done;i=_this$next2.value;}while(!t&&e(i));if(!t){this.position=n;this._visitedParent=o;}}},{key:"next",value:function next(){if(this.direction=="forward"){return this._next();}else{return this._previous();}}},{key:"_next",value:function _next(){var e=this.position;var t=this.position.clone();var i=this._visitedParent;if(i.parent===null&&t.offset===i.maxOffset){return{done:true};}if(i===this._boundaryEndParent&&t.offset==this.boundaries.end.offset){return{done:true};}var n=t.textNode?t.textNode:t.nodeAfter;if(n instanceof Fh){if(!this.shallow){t.path.push(0);this._visitedParent=n;}else{t.offset++;}this.position=t;return Uh("elementStart",n,e,t,1);}else if(n instanceof jh){var _o30;if(this.singleCharacters){_o30=1;}else{var _e81=n.endOffset;if(this._boundaryEndParent==i&&this.boundaries.end.offset<_e81){_e81=this.boundaries.end.offset;}_o30=_e81-t.offset;}var _s14=t.offset-n.startOffset;var _r10=new Bh(n,_s14,_o30);t.offset+=_o30;this.position=t;return Uh("text",_r10,e,t,_o30);}else{t.path.pop();t.offset++;this.position=t;this._visitedParent=i.parent;if(this.ignoreElementEnd){return this._next();}else{return Uh("elementEnd",i,e,t);}}}},{key:"_previous",value:function _previous(){var e=this.position;var t=this.position.clone();var i=this._visitedParent;if(i.parent===null&&t.offset===0){return{done:true};}if(i==this._boundaryStartParent&&t.offset==this.boundaries.start.offset){return{done:true};}var n=t.textNode?t.textNode:t.nodeBefore;if(n instanceof Fh){t.offset--;if(!this.shallow){t.path.push(n.maxOffset);this.position=t;this._visitedParent=n;if(this.ignoreElementEnd){return this._previous();}else{return Uh("elementEnd",n,e,t);}}else{this.position=t;return Uh("elementStart",n,e,t,1);}}else if(n instanceof jh){var _o31;if(this.singleCharacters){_o31=1;}else{var _e82=n.startOffset;if(this._boundaryStartParent==i&&this.boundaries.start.offset>_e82){_e82=this.boundaries.start.offset;}_o31=t.offset-_e82;}var _s15=t.offset-n.startOffset;var _r11=new Bh(n,_s15-_o31,_o31);t.offset-=_o31;this.position=t;return Uh("text",_r11,e,t,_o31);}else{t.path.pop();this.position=t;this._visitedParent=i.parent;return Uh("elementStart",i,e,t,1);}}}]);return Wh;}();function Uh(e,t,i,n,o){return{done:false,value:{type:e,item:t,previousPosition:i,nextPosition:n,length:o}};}var $h=/*#__PURE__*/function(){function $h(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"toNone";_classCallCheck(this,$h);if(!e.is("element")&&!e.is("documentFragment")){throw new rr["b"]("model-position-root-invalid: Position root invalid.",e);}if(!(t instanceof Array)||t.length===0){throw new rr["b"]("model-position-path-incorrect-format: Position path must be an array with at least one item.",e,{path:t});}t=e.getPath().concat(t);e=e.root;this.root=e;this.path=t;this.stickiness=i;}_createClass($h,[{key:"compareWith",value:function compareWith(e){if(this.root!=e.root){return"different";}var t=Or(this.path,e.path);switch(t){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[t]<e.path[t]?"before":"after";}}},{key:"getLastMatchingPosition",value:function getLastMatchingPosition(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};t.startPosition=this;var i=new Wh(t);i.skip(e);return i.position;}},{key:"getParentPath",value:function getParentPath(){return this.path.slice(0,-1);}},{key:"getAncestors",value:function getAncestors(){if(this.parent.is("documentFragment")){return[this.parent];}else{return this.parent.getAncestors({includeSelf:true});}}},{key:"getCommonPath",value:function getCommonPath(e){if(this.root!=e.root){return[];}var t=Or(this.path,e.path);var i=typeof t=="string"?Math.min(this.path.length,e.path.length):t;return this.path.slice(0,i);}},{key:"getCommonAncestor",value:function getCommonAncestor(e){var t=this.getAncestors();var i=e.getAncestors();var n=0;while(t[n]==i[n]&&t[n]){n++;}return n===0?null:t[n-1];}},{key:"getShiftedBy",value:function getShiftedBy(e){var t=this.clone();var i=t.offset+e;t.offset=i<0?0:i;return t;}},{key:"isAfter",value:function isAfter(e){return this.compareWith(e)=="after";}},{key:"isBefore",value:function isBefore(e){return this.compareWith(e)=="before";}},{key:"isEqual",value:function isEqual(e){return this.compareWith(e)=="same";}},{key:"isTouching",value:function isTouching(e){var t=null;var i=null;var n=this.compareWith(e);switch(n){case"same":return true;case"before":t=$h._createAt(this);i=$h._createAt(e);break;case"after":t=$h._createAt(e);i=$h._createAt(this);break;default:return false;}var o=t.parent;while(t.path.length+i.path.length){if(t.isEqual(i)){return true;}if(t.path.length>i.path.length){if(t.offset!==o.maxOffset){return false;}t.path=t.path.slice(0,-1);o=o.parent;t.offset++;}else{if(i.offset!==0){return false;}i.path=i.path.slice(0,-1);}}}},{key:"is",value:function is(e){return e=="position"||e=="model:position";}},{key:"hasSameParentAs",value:function hasSameParentAs(e){if(this.root!==e.root){return false;}var t=this.getParentPath();var i=e.getParentPath();return Or(t,i)=="same";}},{key:"getTransformedByOperation",value:function getTransformedByOperation(e){var t;switch(e.type){case"insert":t=this._getTransformedByInsertOperation(e);break;case"move":case"remove":case"reinsert":t=this._getTransformedByMoveOperation(e);break;case"split":t=this._getTransformedBySplitOperation(e);break;case"merge":t=this._getTransformedByMergeOperation(e);break;default:t=$h._createAt(this);break;}return t;}},{key:"_getTransformedByInsertOperation",value:function _getTransformedByInsertOperation(e){return this._getTransformedByInsertion(e.position,e.howMany);}},{key:"_getTransformedByMoveOperation",value:function _getTransformedByMoveOperation(e){return this._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany);}},{key:"_getTransformedBySplitOperation",value:function _getTransformedBySplitOperation(e){var t=e.movedRange;var i=t.containsPosition(this)||t.start.isEqual(this)&&this.stickiness=="toNext";if(i){return this._getCombined(e.splitPosition,e.moveTargetPosition);}else{if(e.graveyardPosition){return this._getTransformedByMove(e.graveyardPosition,e.insertionPosition,1);}else{return this._getTransformedByInsertion(e.insertionPosition,1);}}}},{key:"_getTransformedByMergeOperation",value:function _getTransformedByMergeOperation(e){var t=e.movedRange;var i=t.containsPosition(this)||t.start.isEqual(this);var n;if(i){n=this._getCombined(e.sourcePosition,e.targetPosition);if(e.sourcePosition.isBefore(e.targetPosition)){n=n._getTransformedByDeletion(e.deletionPosition,1);}}else if(this.isEqual(e.deletionPosition)){n=$h._createAt(e.deletionPosition);}else{n=this._getTransformedByMove(e.deletionPosition,e.graveyardPosition,1);}return n;}},{key:"_getTransformedByDeletion",value:function _getTransformedByDeletion(e,t){var i=$h._createAt(this);if(this.root!=e.root){return i;}if(Or(e.getParentPath(),this.getParentPath())=="same"){if(e.offset<this.offset){if(e.offset+t>this.offset){return null;}else{i.offset-=t;}}}else if(Or(e.getParentPath(),this.getParentPath())=="prefix"){var _n41=e.path.length-1;if(e.offset<=this.path[_n41]){if(e.offset+t>this.path[_n41]){return null;}else{i.path[_n41]-=t;}}}return i;}},{key:"_getTransformedByInsertion",value:function _getTransformedByInsertion(e,t){var i=$h._createAt(this);if(this.root!=e.root){return i;}if(Or(e.getParentPath(),this.getParentPath())=="same"){if(e.offset<this.offset||e.offset==this.offset&&this.stickiness!="toPrevious"){i.offset+=t;}}else if(Or(e.getParentPath(),this.getParentPath())=="prefix"){var _n42=e.path.length-1;if(e.offset<=this.path[_n42]){i.path[_n42]+=t;}}return i;}},{key:"_getTransformedByMove",value:function _getTransformedByMove(e,t,i){t=t._getTransformedByDeletion(e,i);if(e.isEqual(t)){return $h._createAt(this);}var n=this._getTransformedByDeletion(e,i);var o=n===null||e.isEqual(this)&&this.stickiness=="toNext"||e.getShiftedBy(i).isEqual(this)&&this.stickiness=="toPrevious";if(o){return this._getCombined(e,t);}else{return n._getTransformedByInsertion(t,i);}}},{key:"_getCombined",value:function _getCombined(e,t){var i=e.path.length-1;var n=$h._createAt(t);n.stickiness=this.stickiness;n.offset=n.offset+this.path[i]-e.offset;n.path=n.path.concat(this.path.slice(i+1));return n;}},{key:"toJSON",value:function toJSON(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness};}},{key:"clone",value:function clone(){return new this.constructor(this.root,this.path,this.stickiness);}},{key:"offset",get:function get(){return Aa(this.path);},set:function set(e){this.path[this.path.length-1]=e;}},{key:"parent",get:function get(){var e=this.root;for(var _t79=0;_t79<this.path.length-1;_t79++){e=e.getChild(e.offsetToIndex(this.path[_t79]));if(!e){throw new rr["b"]("model-position-path-incorrect: The position's path is incorrect.",this,{position:this});}}if(e.is("text")){throw new rr["b"]("model-position-path-incorrect: The position's path is incorrect.",this,{position:this});}return e;}},{key:"index",get:function get(){return this.parent.offsetToIndex(this.offset);}},{key:"textNode",get:function get(){var e=this.parent.getChild(this.index);return e instanceof jh&&e.startOffset<this.offset?e:null;}},{key:"nodeAfter",get:function get(){return this.textNode===null?this.parent.getChild(this.index):null;}},{key:"nodeBefore",get:function get(){return this.textNode===null?this.parent.getChild(this.index-1):null;}},{key:"isAtStart",get:function get(){return this.offset===0;}},{key:"isAtEnd",get:function get(){return this.offset==this.parent.maxOffset;}}],[{key:"_createAt",value:function _createAt(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"toNone";if(e instanceof $h){return new $h(e.root,e.path,e.stickiness);}else{var _n43=e;if(t=="end"){t=_n43.maxOffset;}else if(t=="before"){return this._createBefore(_n43,i);}else if(t=="after"){return this._createAfter(_n43,i);}else if(t!==0&&!t){throw new rr["b"]("model-createPositionAt-offset-required: "+"Model#createPositionAt() requires the offset when the first parameter is a model item.",[this,e]);}if(!_n43.is("element")&&!_n43.is("documentFragment")){throw new rr["b"]("model-position-parent-incorrect: Position parent have to be a element or document fragment.",[this,e]);}var _o32=_n43.getPath();_o32.push(t);return new this(_n43.root,_o32,i);}}},{key:"_createAfter",value:function _createAfter(e,t){if(!e.parent){throw new rr["b"]("model-position-after-root: You cannot make a position after root.",[this,e],{root:e});}return this._createAt(e.parent,e.endOffset,t);}},{key:"_createBefore",value:function _createBefore(e,t){if(!e.parent){throw new rr["b"]("model-position-before-root: You cannot make a position before root.",e,{root:e});}return this._createAt(e.parent,e.startOffset,t);}},{key:"fromJSON",value:function fromJSON(e,t){if(e.root==="$graveyard"){var _i95=new $h(t.graveyard,e.path);_i95.stickiness=e.stickiness;return _i95;}if(!t.getRoot(e.root)){throw new rr["b"]("model-position-fromjson-no-root: Cannot create position for document. Root with specified name does not exist.",t,{rootName:e.root});}return new $h(t.getRoot(e.root),e.path,e.stickiness);}}]);return $h;}();var qh=/*#__PURE__*/function(){function qh(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;_classCallCheck(this,qh);this.start=$h._createAt(e);this.end=t?$h._createAt(t):$h._createAt(e);this.start.stickiness=this.isCollapsed?"toNone":"toNext";this.end.stickiness=this.isCollapsed?"toNone":"toPrevious";}_createClass(qh,[{key:Symbol.iterator,value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function value(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function value$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:return _context13.delegateYield(new Wh({boundaries:this,ignoreElementEnd:true}),"t0",1);case 1:case"end":return _context13.stop();}}},value,this);})},{key:"containsPosition",value:function containsPosition(e){return e.isAfter(this.start)&&e.isBefore(this.end);}},{key:"containsRange",value:function containsRange(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(e.isCollapsed){t=false;}var i=this.containsPosition(e.start)||t&&this.start.isEqual(e.start);var n=this.containsPosition(e.end)||t&&this.end.isEqual(e.end);return i&&n;}},{key:"containsItem",value:function containsItem(e){var t=$h._createBefore(e);return this.containsPosition(t)||this.start.isEqual(t);}},{key:"is",value:function is(e){return e=="range"||e=="model:range";}},{key:"isEqual",value:function isEqual(e){return this.start.isEqual(e.start)&&this.end.isEqual(e.end);}},{key:"isIntersecting",value:function isIntersecting(e){return this.start.isBefore(e.end)&&this.end.isAfter(e.start);}},{key:"getDifference",value:function getDifference(e){var t=[];if(this.isIntersecting(e)){if(this.containsPosition(e.start)){t.push(new qh(this.start,e.start));}if(this.containsPosition(e.end)){t.push(new qh(e.end,this.end));}}else{t.push(new qh(this.start,this.end));}return t;}},{key:"getIntersection",value:function getIntersection(e){if(this.isIntersecting(e)){var _t80=this.start;var _i96=this.end;if(this.containsPosition(e.start)){_t80=e.start;}if(this.containsPosition(e.end)){_i96=e.end;}return new qh(_t80,_i96);}return null;}},{key:"getMinimalFlatRanges",value:function getMinimalFlatRanges(){var e=[];var t=this.start.getCommonPath(this.end).length;var i=$h._createAt(this.start);var n=i.parent;while(i.path.length>t+1){var _t81=n.maxOffset-i.offset;if(_t81!==0){e.push(new qh(i,i.getShiftedBy(_t81)));}i.path=i.path.slice(0,-1);i.offset++;n=n.parent;}while(i.path.length<=this.end.path.length){var _t82=this.end.path[i.path.length-1];var _n44=_t82-i.offset;if(_n44!==0){e.push(new qh(i,i.getShiftedBy(_n44)));}i.offset=_t82;i.path.push(0);}return e;}},{key:"getWalker",value:function getWalker(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};e.boundaries=this;return new Wh(e);}},{key:"getItems",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getItems(){var e,t,_iteratorNormalCompletion93,_didIteratorError93,_iteratorError93,_iterator93,_step93,_e83,_args14=arguments;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getItems$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:e=_args14.length>0&&_args14[0]!==undefined?_args14[0]:{};e.boundaries=this;e.ignoreElementEnd=true;t=new Wh(e);_iteratorNormalCompletion93=true;_didIteratorError93=false;_iteratorError93=undefined;_context14.prev=7;_iterator93=t[Symbol.iterator]();case 9:if(_iteratorNormalCompletion93=(_step93=_iterator93.next()).done){_context14.next=16;break;}_e83=_step93.value;_context14.next=13;return _e83.item;case 13:_iteratorNormalCompletion93=true;_context14.next=9;break;case 16:_context14.next=22;break;case 18:_context14.prev=18;_context14.t0=_context14["catch"](7);_didIteratorError93=true;_iteratorError93=_context14.t0;case 22:_context14.prev=22;_context14.prev=23;if(!_iteratorNormalCompletion93&&_iterator93["return"]!=null){_iterator93["return"]();}case 25:_context14.prev=25;if(!_didIteratorError93){_context14.next=28;break;}throw _iteratorError93;case 28:return _context14.finish(25);case 29:return _context14.finish(22);case 30:case"end":return _context14.stop();}}},getItems,this,[[7,18,22,30],[23,,25,29]]);})},{key:"getPositions",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getPositions(){var e,t,_iteratorNormalCompletion94,_didIteratorError94,_iteratorError94,_iterator94,_step94,_e84,_args15=arguments;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getPositions$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:e=_args15.length>0&&_args15[0]!==undefined?_args15[0]:{};e.boundaries=this;t=new Wh(e);_context15.next=5;return t.position;case 5:_iteratorNormalCompletion94=true;_didIteratorError94=false;_iteratorError94=undefined;_context15.prev=8;_iterator94=t[Symbol.iterator]();case 10:if(_iteratorNormalCompletion94=(_step94=_iterator94.next()).done){_context15.next=17;break;}_e84=_step94.value;_context15.next=14;return _e84.nextPosition;case 14:_iteratorNormalCompletion94=true;_context15.next=10;break;case 17:_context15.next=23;break;case 19:_context15.prev=19;_context15.t0=_context15["catch"](8);_didIteratorError94=true;_iteratorError94=_context15.t0;case 23:_context15.prev=23;_context15.prev=24;if(!_iteratorNormalCompletion94&&_iterator94["return"]!=null){_iterator94["return"]();}case 26:_context15.prev=26;if(!_didIteratorError94){_context15.next=29;break;}throw _iteratorError94;case 29:return _context15.finish(26);case 30:return _context15.finish(23);case 31:case"end":return _context15.stop();}}},getPositions,this,[[8,19,23,31],[24,,26,30]]);})},{key:"getTransformedByOperation",value:function getTransformedByOperation(e){switch(e.type){case"insert":return this._getTransformedByInsertOperation(e);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(e);case"split":return[this._getTransformedBySplitOperation(e)];case"merge":return[this._getTransformedByMergeOperation(e)];}return[new qh(this.start,this.end)];}},{key:"getTransformedByOperations",value:function getTransformedByOperations(e){var t=[new qh(this.start,this.end)];var _iteratorNormalCompletion95=true;var _didIteratorError95=false;var _iteratorError95=undefined;try{for(var _iterator95=e[Symbol.iterator](),_step95;!(_iteratorNormalCompletion95=(_step95=_iterator95.next()).done);_iteratorNormalCompletion95=true){var _i98=_step95.value;for(var _e87=0;_e87<t.length;_e87++){var _n46=t[_e87].getTransformedByOperation(_i98);t.splice.apply(t,[_e87,1].concat(_toConsumableArray(_n46)));_e87+=_n46.length-1;}}}catch(err){_didIteratorError95=true;_iteratorError95=err;}finally{try{if(!_iteratorNormalCompletion95&&_iterator95["return"]!=null){_iterator95["return"]();}}finally{if(_didIteratorError95){throw _iteratorError95;}}}for(var _e85=0;_e85<t.length;_e85++){var _i97=t[_e85];for(var _n45=_e85+1;_n45<t.length;_n45++){var _e86=t[_n45];if(_i97.containsRange(_e86)||_e86.containsRange(_i97)||_i97.isEqual(_e86)){t.splice(_n45,1);}}}return t;}},{key:"getCommonAncestor",value:function getCommonAncestor(){return this.start.getCommonAncestor(this.end);}},{key:"getContainedElement",value:function getContainedElement(){if(this.isCollapsed){return null;}var e=this.start.nodeAfter;var t=this.end.nodeBefore;if(e&&e.is("element")&&e===t){return e;}return null;}},{key:"toJSON",value:function toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()};}},{key:"clone",value:function clone(){return new this.constructor(this.start,this.end);}},{key:"_getTransformedByInsertOperation",value:function _getTransformedByInsertOperation(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return this._getTransformedByInsertion(e.position,e.howMany,t);}},{key:"_getTransformedByMoveOperation",value:function _getTransformedByMoveOperation(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var i=e.sourcePosition;var n=e.howMany;var o=e.targetPosition;return this._getTransformedByMove(i,o,n,t);}},{key:"_getTransformedBySplitOperation",value:function _getTransformedBySplitOperation(e){var t=this.start._getTransformedBySplitOperation(e);var i=this.end._getTransformedBySplitOperation(e);if(this.end.isEqual(e.insertionPosition)){i=this.end.getShiftedBy(1);}if(t.root!=i.root){i=this.end.getShiftedBy(-1);}return new qh(t,i);}},{key:"_getTransformedByMergeOperation",value:function _getTransformedByMergeOperation(e){if(this.start.isEqual(e.targetPosition)&&this.end.isEqual(e.deletionPosition)){return new qh(this.start);}var t=this.start._getTransformedByMergeOperation(e);var i=this.end._getTransformedByMergeOperation(e);if(t.root!=i.root){i=this.end.getShiftedBy(-1);}if(t.isAfter(i)){if(e.sourcePosition.isBefore(e.targetPosition)){t=$h._createAt(i);t.offset=0;}else{if(!e.deletionPosition.isEqual(t)){i=e.deletionPosition;}t=e.targetPosition;}return new qh(t,i);}return new qh(t,i);}},{key:"_getTransformedByInsertion",value:function _getTransformedByInsertion(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(i&&this.containsPosition(e)){return[new qh(this.start,e),new qh(e.getShiftedBy(t),this.end._getTransformedByInsertion(e,t))];}else{var _i99=new qh(this.start,this.end);_i99.start=_i99.start._getTransformedByInsertion(e,t);_i99.end=_i99.end._getTransformedByInsertion(e,t);return[_i99];}}},{key:"_getTransformedByMove",value:function _getTransformedByMove(e,t,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;if(this.isCollapsed){var _n47=this.start._getTransformedByMove(e,t,i);return[new qh(_n47)];}var o=qh._createFromPositionAndShift(e,i);var s=t._getTransformedByDeletion(e,i);if(this.containsPosition(t)&&!n){if(o.containsPosition(this.start)||o.containsPosition(this.end)){var _n48=this.start._getTransformedByMove(e,t,i);var _o33=this.end._getTransformedByMove(e,t,i);return[new qh(_n48,_o33)];}}var r;var a=this.getDifference(o);var c=null;var l=this.getIntersection(o);if(a.length==1){c=new qh(a[0].start._getTransformedByDeletion(e,i),a[0].end._getTransformedByDeletion(e,i));}else if(a.length==2){c=new qh(this.start,this.end._getTransformedByDeletion(e,i));}if(c){r=c._getTransformedByInsertion(s,i,l!==null||n);}else{r=[];}if(l){var _e88=new qh(l.start._getCombined(o.start,s),l.end._getCombined(o.start,s));if(r.length==2){r.splice(1,0,_e88);}else{r.push(_e88);}}return r;}},{key:"_getTransformedByDeletion",value:function _getTransformedByDeletion(e,t){var i=this.start._getTransformedByDeletion(e,t);var n=this.end._getTransformedByDeletion(e,t);if(i==null&&n==null){return null;}if(i==null){i=e;}if(n==null){n=e;}return new qh(i,n);}},{key:"isCollapsed",get:function get(){return this.start.isEqual(this.end);}},{key:"isFlat",get:function get(){var e=this.start.getParentPath();var t=this.end.getParentPath();return Or(e,t)=="same";}},{key:"root",get:function get(){return this.start.root;}}],[{key:"_createFromPositionAndShift",value:function _createFromPositionAndShift(e,t){var i=e;var n=e.getShiftedBy(t);return t>0?new this(i,n):new this(n,i);}},{key:"_createIn",value:function _createIn(e){return new this($h._createAt(e,0),$h._createAt(e,e.maxOffset));}},{key:"_createOn",value:function _createOn(e){return this._createFromPositionAndShift($h._createBefore(e),e.offsetSize);}},{key:"_createFromRanges",value:function _createFromRanges(e){if(e.length===0){throw new rr["b"]("range-create-from-ranges-empty-array: At least one range has to be passed.",null);}else if(e.length==1){return e[0].clone();}var t=e[0];e.sort(function(e,t){return e.start.isAfter(t.start)?1:-1;});var i=e.indexOf(t);var n=new this(t.start,t.end);if(i>0){for(var _t83=i-1;true;_t83++){if(e[_t83].end.isEqual(n.start)){n.start=$h._createAt(e[_t83].start);}else{break;}}}for(var _t84=i+1;_t84<e.length;_t84++){if(e[_t84].start.isEqual(n.end)){n.end=$h._createAt(e[_t84].end);}else{break;}}return n;}},{key:"fromJSON",value:function fromJSON(e,t){return new this($h.fromJSON(e.start,t),$h.fromJSON(e.end,t));}}]);return qh;}();var Yh=/*#__PURE__*/function(){function Yh(){var _this43=this;_classCallCheck(this,Yh);this._modelToViewMapping=new WeakMap();this._viewToModelMapping=new WeakMap();this._viewToModelLengthCallbacks=new Map();this._markerNameToElements=new Map();this._elementToMarkerNames=new Map();this._unboundMarkerNames=new Set();this.on("modelToViewPosition",function(e,t){if(t.viewPosition){return;}var i=_this43._modelToViewMapping.get(t.modelPosition.parent);t.viewPosition=_this43._findPositionIn(i,t.modelPosition.offset);},{priority:"low"});this.on("viewToModelPosition",function(e,t){if(t.modelPosition){return;}var i=_this43.findMappedViewAncestor(t.viewPosition);var n=_this43._viewToModelMapping.get(i);var o=_this43._toModelOffset(t.viewPosition.parent,t.viewPosition.offset,i);t.modelPosition=$h._createAt(n,o);},{priority:"low"});}_createClass(Yh,[{key:"bindElements",value:function bindElements(e,t){this._modelToViewMapping.set(e,t);this._viewToModelMapping.set(t,e);}},{key:"unbindViewElement",value:function unbindViewElement(e){var t=this.toModelElement(e);this._viewToModelMapping["delete"](e);if(this._elementToMarkerNames.has(e)){var _iteratorNormalCompletion96=true;var _didIteratorError96=false;var _iteratorError96=undefined;try{for(var _iterator96=this._elementToMarkerNames.get(e)[Symbol.iterator](),_step96;!(_iteratorNormalCompletion96=(_step96=_iterator96.next()).done);_iteratorNormalCompletion96=true){var _t85=_step96.value;this._unboundMarkerNames.add(_t85);}}catch(err){_didIteratorError96=true;_iteratorError96=err;}finally{try{if(!_iteratorNormalCompletion96&&_iterator96["return"]!=null){_iterator96["return"]();}}finally{if(_didIteratorError96){throw _iteratorError96;}}}}if(this._modelToViewMapping.get(t)==e){this._modelToViewMapping["delete"](t);}}},{key:"unbindModelElement",value:function unbindModelElement(e){var t=this.toViewElement(e);this._modelToViewMapping["delete"](e);if(this._viewToModelMapping.get(t)==e){this._viewToModelMapping["delete"](t);}}},{key:"bindElementToMarker",value:function bindElementToMarker(e,t){var i=this._markerNameToElements.get(t)||new Set();i.add(e);var n=this._elementToMarkerNames.get(e)||new Set();n.add(t);this._markerNameToElements.set(t,i);this._elementToMarkerNames.set(e,n);}},{key:"unbindElementFromMarkerName",value:function unbindElementFromMarkerName(e,t){var i=this._markerNameToElements.get(t);if(i){i["delete"](e);if(i.size==0){this._markerNameToElements["delete"](t);}}var n=this._elementToMarkerNames.get(e);if(n){n["delete"](t);if(n.size==0){this._elementToMarkerNames["delete"](e);}}}},{key:"flushUnboundMarkerNames",value:function flushUnboundMarkerNames(){var e=Array.from(this._unboundMarkerNames);this._unboundMarkerNames.clear();return e;}},{key:"clearBindings",value:function clearBindings(){this._modelToViewMapping=new WeakMap();this._viewToModelMapping=new WeakMap();this._markerNameToElements=new Map();this._elementToMarkerNames=new Map();this._unboundMarkerNames=new Set();}},{key:"toModelElement",value:function toModelElement(e){return this._viewToModelMapping.get(e);}},{key:"toViewElement",value:function toViewElement(e){return this._modelToViewMapping.get(e);}},{key:"toModelRange",value:function toModelRange(e){return new qh(this.toModelPosition(e.start),this.toModelPosition(e.end));}},{key:"toViewRange",value:function toViewRange(e){return new ul(this.toViewPosition(e.start),this.toViewPosition(e.end));}},{key:"toModelPosition",value:function toModelPosition(e){var t={viewPosition:e,mapper:this};this.fire("viewToModelPosition",t);return t.modelPosition;}},{key:"toViewPosition",value:function toViewPosition(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{isPhantom:false};var i={modelPosition:e,mapper:this,isPhantom:t.isPhantom};this.fire("modelToViewPosition",i);return i.viewPosition;}},{key:"markerNameToElements",value:function markerNameToElements(e){var t=this._markerNameToElements.get(e);if(!t){return null;}var i=new Set();var _iteratorNormalCompletion97=true;var _didIteratorError97=false;var _iteratorError97=undefined;try{for(var _iterator97=t[Symbol.iterator](),_step97;!(_iteratorNormalCompletion97=(_step97=_iterator97.next()).done);_iteratorNormalCompletion97=true){var _e89=_step97.value;if(_e89.is("attributeElement")){var _iteratorNormalCompletion98=true;var _didIteratorError98=false;var _iteratorError98=undefined;try{for(var _iterator98=_e89.getElementsWithSameId()[Symbol.iterator](),_step98;!(_iteratorNormalCompletion98=(_step98=_iterator98.next()).done);_iteratorNormalCompletion98=true){var _t86=_step98.value;i.add(_t86);}}catch(err){_didIteratorError98=true;_iteratorError98=err;}finally{try{if(!_iteratorNormalCompletion98&&_iterator98["return"]!=null){_iterator98["return"]();}}finally{if(_didIteratorError98){throw _iteratorError98;}}}}else{i.add(_e89);}}}catch(err){_didIteratorError97=true;_iteratorError97=err;}finally{try{if(!_iteratorNormalCompletion97&&_iterator97["return"]!=null){_iterator97["return"]();}}finally{if(_didIteratorError97){throw _iteratorError97;}}}return i;}},{key:"registerViewToModelLength",value:function registerViewToModelLength(e,t){this._viewToModelLengthCallbacks.set(e,t);}},{key:"findMappedViewAncestor",value:function findMappedViewAncestor(e){var t=e.parent;while(!this._viewToModelMapping.has(t)){t=t.parent;}return t;}},{key:"_toModelOffset",value:function _toModelOffset(e,t,i){if(i!=e){var _n49=this._toModelOffset(e.parent,e.index,i);var _o34=this._toModelOffset(e,t,e);return _n49+_o34;}if(e.is("text")){return t;}var n=0;for(var _i100=0;_i100<t;_i100++){n+=this.getModelLength(e.getChild(_i100));}return n;}},{key:"getModelLength",value:function getModelLength(e){if(this._viewToModelLengthCallbacks.get(e.name)){var _t87=this._viewToModelLengthCallbacks.get(e.name);return _t87(e);}else if(this._viewToModelMapping.has(e)){return 1;}else if(e.is("text")){return e.data.length;}else if(e.is("uiElement")){return 0;}else{var _t88=0;var _iteratorNormalCompletion99=true;var _didIteratorError99=false;var _iteratorError99=undefined;try{for(var _iterator99=e.getChildren()[Symbol.iterator](),_step99;!(_iteratorNormalCompletion99=(_step99=_iterator99.next()).done);_iteratorNormalCompletion99=true){var _i101=_step99.value;_t88+=this.getModelLength(_i101);}}catch(err){_didIteratorError99=true;_iteratorError99=err;}finally{try{if(!_iteratorNormalCompletion99&&_iterator99["return"]!=null){_iterator99["return"]();}}finally{if(_didIteratorError99){throw _iteratorError99;}}}return _t88;}}},{key:"_findPositionIn",value:function _findPositionIn(e,t){var i;var n=0;var o=0;var s=0;if(e.is("text")){return new dl(e,t);}while(o<t){i=e.getChild(s);n=this.getModelLength(i);o+=n;s++;}if(o==t){return this._moveViewPositionToTextNode(new dl(e,s));}else{return this._findPositionIn(i,t-(o-n));}}},{key:"_moveViewPositionToTextNode",value:function _moveViewPositionToTextNode(e){var t=e.nodeBefore;var i=e.nodeAfter;if(t instanceof jr){return new dl(t,t.data.length);}else if(i instanceof jr){return new dl(i,0);}return e;}}]);return Yh;}();kr(Yh,dr);var Gh=/*#__PURE__*/function(){function Gh(){_classCallCheck(this,Gh);this._consumable=new Map();this._textProxyRegistry=new Map();}_createClass(Gh,[{key:"add",value:function add(e,t){t=Jh(t);if(e instanceof Bh){e=this._getSymbolForTextProxy(e);}if(!this._consumable.has(e)){this._consumable.set(e,new Map());}this._consumable.get(e).set(t,true);}},{key:"consume",value:function consume(e,t){t=Jh(t);if(e instanceof Bh){e=this._getSymbolForTextProxy(e);}if(this.test(e,t)){this._consumable.get(e).set(t,false);return true;}else{return false;}}},{key:"test",value:function test(e,t){t=Jh(t);if(e instanceof Bh){e=this._getSymbolForTextProxy(e);}var i=this._consumable.get(e);if(i===undefined){return null;}var n=i.get(t);if(n===undefined){return null;}return n;}},{key:"revert",value:function revert(e,t){t=Jh(t);if(e instanceof Bh){e=this._getSymbolForTextProxy(e);}var i=this.test(e,t);if(i===false){this._consumable.get(e).set(t,true);return true;}else if(i===true){return false;}return null;}},{key:"_getSymbolForTextProxy",value:function _getSymbolForTextProxy(e){var t=null;var i=this._textProxyRegistry.get(e.startOffset);if(i){var _n50=i.get(e.endOffset);if(_n50){t=_n50.get(e.parent);}}if(!t){t=this._addSymbolForTextProxy(e.startOffset,e.endOffset,e.parent);}return t;}},{key:"_addSymbolForTextProxy",value:function _addSymbolForTextProxy(e,t,i){var n=Symbol("textProxySymbol");var o,s;o=this._textProxyRegistry.get(e);if(!o){o=new Map();this._textProxyRegistry.set(e,o);}s=o.get(t);if(!s){s=new Map();o.set(t,s);}s.set(i,n);return n;}}]);return Gh;}();function Jh(e){var t=e.split(":");return t.length>1?t[0]+":"+t[1]:t[0];}var Xh=/*#__PURE__*/function(){function Xh(e){_classCallCheck(this,Xh);this.conversionApi=Uc({dispatcher:this},e);}_createClass(Xh,[{key:"convertChanges",value:function convertChanges(e,t,i){var _iteratorNormalCompletion100=true;var _didIteratorError100=false;var _iteratorError100=undefined;try{for(var _iterator100=e.getMarkersToRemove()[Symbol.iterator](),_step100;!(_iteratorNormalCompletion100=(_step100=_iterator100.next()).done);_iteratorNormalCompletion100=true){var _t89=_step100.value;this.convertMarkerRemove(_t89.name,_t89.range,i);}}catch(err){_didIteratorError100=true;_iteratorError100=err;}finally{try{if(!_iteratorNormalCompletion100&&_iterator100["return"]!=null){_iterator100["return"]();}}finally{if(_didIteratorError100){throw _iteratorError100;}}}var _iteratorNormalCompletion101=true;var _didIteratorError101=false;var _iteratorError101=undefined;try{for(var _iterator101=e.getChanges()[Symbol.iterator](),_step101;!(_iteratorNormalCompletion101=(_step101=_iterator101.next()).done);_iteratorNormalCompletion101=true){var _t90=_step101.value;if(_t90.type=="insert"){this.convertInsert(qh._createFromPositionAndShift(_t90.position,_t90.length),i);}else if(_t90.type=="remove"){this.convertRemove(_t90.position,_t90.length,_t90.name,i);}else{this.convertAttribute(_t90.range,_t90.attributeKey,_t90.attributeOldValue,_t90.attributeNewValue,i);}}}catch(err){_didIteratorError101=true;_iteratorError101=err;}finally{try{if(!_iteratorNormalCompletion101&&_iterator101["return"]!=null){_iterator101["return"]();}}finally{if(_didIteratorError101){throw _iteratorError101;}}}var _iteratorNormalCompletion102=true;var _didIteratorError102=false;var _iteratorError102=undefined;try{for(var _iterator102=this.conversionApi.mapper.flushUnboundMarkerNames()[Symbol.iterator](),_step102;!(_iteratorNormalCompletion102=(_step102=_iterator102.next()).done);_iteratorNormalCompletion102=true){var _e90=_step102.value;var _n51=t.get(_e90).getRange();this.convertMarkerRemove(_e90,_n51,i);this.convertMarkerAdd(_e90,_n51,i);}}catch(err){_didIteratorError102=true;_iteratorError102=err;}finally{try{if(!_iteratorNormalCompletion102&&_iterator102["return"]!=null){_iterator102["return"]();}}finally{if(_didIteratorError102){throw _iteratorError102;}}}var _iteratorNormalCompletion103=true;var _didIteratorError103=false;var _iteratorError103=undefined;try{for(var _iterator103=e.getMarkersToAdd()[Symbol.iterator](),_step103;!(_iteratorNormalCompletion103=(_step103=_iterator103.next()).done);_iteratorNormalCompletion103=true){var _t91=_step103.value;this.convertMarkerAdd(_t91.name,_t91.range,i);}}catch(err){_didIteratorError103=true;_iteratorError103=err;}finally{try{if(!_iteratorNormalCompletion103&&_iterator103["return"]!=null){_iterator103["return"]();}}finally{if(_didIteratorError103){throw _iteratorError103;}}}}},{key:"convertInsert",value:function convertInsert(e,t){this.conversionApi.writer=t;this.conversionApi.consumable=this._createInsertConsumable(e);var _iteratorNormalCompletion104=true;var _didIteratorError104=false;var _iteratorError104=undefined;try{for(var _iterator104=e[Symbol.iterator](),_step104;!(_iteratorNormalCompletion104=(_step104=_iterator104.next()).done);_iteratorNormalCompletion104=true){var _t92=_step104.value;var _e91=_t92.item;var _i102=qh._createFromPositionAndShift(_t92.previousPosition,_t92.length);var _n52={item:_e91,range:_i102};this._testAndFire("insert",_n52);var _iteratorNormalCompletion105=true;var _didIteratorError105=false;var _iteratorError105=undefined;try{for(var _iterator105=_e91.getAttributeKeys()[Symbol.iterator](),_step105;!(_iteratorNormalCompletion105=(_step105=_iterator105.next()).done);_iteratorNormalCompletion105=true){var _t93=_step105.value;_n52.attributeKey=_t93;_n52.attributeOldValue=null;_n52.attributeNewValue=_e91.getAttribute(_t93);this._testAndFire("attribute:".concat(_t93),_n52);}}catch(err){_didIteratorError105=true;_iteratorError105=err;}finally{try{if(!_iteratorNormalCompletion105&&_iterator105["return"]!=null){_iterator105["return"]();}}finally{if(_didIteratorError105){throw _iteratorError105;}}}}}catch(err){_didIteratorError104=true;_iteratorError104=err;}finally{try{if(!_iteratorNormalCompletion104&&_iterator104["return"]!=null){_iterator104["return"]();}}finally{if(_didIteratorError104){throw _iteratorError104;}}}this._clearConversionApi();}},{key:"convertRemove",value:function convertRemove(e,t,i,n){this.conversionApi.writer=n;this.fire("remove:"+i,{position:e,length:t},this.conversionApi);this._clearConversionApi();}},{key:"convertAttribute",value:function convertAttribute(e,t,i,n,o){this.conversionApi.writer=o;this.conversionApi.consumable=this._createConsumableForRange(e,"attribute:".concat(t));var _iteratorNormalCompletion106=true;var _didIteratorError106=false;var _iteratorError106=undefined;try{for(var _iterator106=e[Symbol.iterator](),_step106;!(_iteratorNormalCompletion106=(_step106=_iterator106.next()).done);_iteratorNormalCompletion106=true){var _o35=_step106.value;var _e92=_o35.item;var _s16=qh._createFromPositionAndShift(_o35.previousPosition,_o35.length);var _r12={item:_e92,range:_s16,attributeKey:t,attributeOldValue:i,attributeNewValue:n};this._testAndFire("attribute:".concat(t),_r12);}}catch(err){_didIteratorError106=true;_iteratorError106=err;}finally{try{if(!_iteratorNormalCompletion106&&_iterator106["return"]!=null){_iterator106["return"]();}}finally{if(_didIteratorError106){throw _iteratorError106;}}}this._clearConversionApi();}},{key:"convertSelection",value:function convertSelection(e,t,i){var n=Array.from(t.getMarkersAtPosition(e.getFirstPosition()));this.conversionApi.writer=i;this.conversionApi.consumable=this._createSelectionConsumable(e,n);this.fire("selection",{selection:e},this.conversionApi);if(!e.isCollapsed){return;}for(var _i103=0,_n53=n;_i103<_n53.length;_i103++){var _t94=_n53[_i103];var _i104=_t94.getRange();if(!Kh(e.getFirstPosition(),_t94,this.conversionApi.mapper)){continue;}var _n54={item:e,markerName:_t94.name,markerRange:_i104};if(this.conversionApi.consumable.test(e,"addMarker:"+_t94.name)){this.fire("addMarker:"+_t94.name,_n54,this.conversionApi);}}var _iteratorNormalCompletion107=true;var _didIteratorError107=false;var _iteratorError107=undefined;try{for(var _iterator107=e.getAttributeKeys()[Symbol.iterator](),_step107;!(_iteratorNormalCompletion107=(_step107=_iterator107.next()).done);_iteratorNormalCompletion107=true){var _t95=_step107.value;var _i105={item:e,range:e.getFirstRange(),attributeKey:_t95,attributeOldValue:null,attributeNewValue:e.getAttribute(_t95)};if(this.conversionApi.consumable.test(e,"attribute:"+_i105.attributeKey)){this.fire("attribute:"+_i105.attributeKey+":$text",_i105,this.conversionApi);}}}catch(err){_didIteratorError107=true;_iteratorError107=err;}finally{try{if(!_iteratorNormalCompletion107&&_iterator107["return"]!=null){_iterator107["return"]();}}finally{if(_didIteratorError107){throw _iteratorError107;}}}this._clearConversionApi();}},{key:"convertMarkerAdd",value:function convertMarkerAdd(e,t,i){if(!t.root.document||t.root.rootName=="$graveyard"){return;}this.conversionApi.writer=i;var n="addMarker:"+e;var o=new Gh();o.add(t,n);this.conversionApi.consumable=o;this.fire(n,{markerName:e,markerRange:t},this.conversionApi);if(!o.test(t,n)){return;}this.conversionApi.consumable=this._createConsumableForRange(t,n);var _iteratorNormalCompletion108=true;var _didIteratorError108=false;var _iteratorError108=undefined;try{for(var _iterator108=t.getItems()[Symbol.iterator](),_step108;!(_iteratorNormalCompletion108=(_step108=_iterator108.next()).done);_iteratorNormalCompletion108=true){var _i106=_step108.value;if(!this.conversionApi.consumable.test(_i106,n)){continue;}var _o36={item:_i106,range:qh._createOn(_i106),markerName:e,markerRange:t};this.fire(n,_o36,this.conversionApi);}}catch(err){_didIteratorError108=true;_iteratorError108=err;}finally{try{if(!_iteratorNormalCompletion108&&_iterator108["return"]!=null){_iterator108["return"]();}}finally{if(_didIteratorError108){throw _iteratorError108;}}}this._clearConversionApi();}},{key:"convertMarkerRemove",value:function convertMarkerRemove(e,t,i){if(!t.root.document||t.root.rootName=="$graveyard"){return;}this.conversionApi.writer=i;this.fire("removeMarker:"+e,{markerName:e,markerRange:t},this.conversionApi);this._clearConversionApi();}},{key:"_createInsertConsumable",value:function _createInsertConsumable(e){var t=new Gh();var _iteratorNormalCompletion109=true;var _didIteratorError109=false;var _iteratorError109=undefined;try{for(var _iterator109=e[Symbol.iterator](),_step109;!(_iteratorNormalCompletion109=(_step109=_iterator109.next()).done);_iteratorNormalCompletion109=true){var _i107=_step109.value;var _e93=_i107.item;t.add(_e93,"insert");var _iteratorNormalCompletion110=true;var _didIteratorError110=false;var _iteratorError110=undefined;try{for(var _iterator110=_e93.getAttributeKeys()[Symbol.iterator](),_step110;!(_iteratorNormalCompletion110=(_step110=_iterator110.next()).done);_iteratorNormalCompletion110=true){var _i108=_step110.value;t.add(_e93,"attribute:"+_i108);}}catch(err){_didIteratorError110=true;_iteratorError110=err;}finally{try{if(!_iteratorNormalCompletion110&&_iterator110["return"]!=null){_iterator110["return"]();}}finally{if(_didIteratorError110){throw _iteratorError110;}}}}}catch(err){_didIteratorError109=true;_iteratorError109=err;}finally{try{if(!_iteratorNormalCompletion109&&_iterator109["return"]!=null){_iterator109["return"]();}}finally{if(_didIteratorError109){throw _iteratorError109;}}}return t;}},{key:"_createConsumableForRange",value:function _createConsumableForRange(e,t){var i=new Gh();var _iteratorNormalCompletion111=true;var _didIteratorError111=false;var _iteratorError111=undefined;try{for(var _iterator111=e.getItems()[Symbol.iterator](),_step111;!(_iteratorNormalCompletion111=(_step111=_iterator111.next()).done);_iteratorNormalCompletion111=true){var _n55=_step111.value;i.add(_n55,t);}}catch(err){_didIteratorError111=true;_iteratorError111=err;}finally{try{if(!_iteratorNormalCompletion111&&_iterator111["return"]!=null){_iterator111["return"]();}}finally{if(_didIteratorError111){throw _iteratorError111;}}}return i;}},{key:"_createSelectionConsumable",value:function _createSelectionConsumable(e,t){var i=new Gh();i.add(e,"selection");var _iteratorNormalCompletion112=true;var _didIteratorError112=false;var _iteratorError112=undefined;try{for(var _iterator112=t[Symbol.iterator](),_step112;!(_iteratorNormalCompletion112=(_step112=_iterator112.next()).done);_iteratorNormalCompletion112=true){var _n56=_step112.value;i.add(e,"addMarker:"+_n56.name);}}catch(err){_didIteratorError112=true;_iteratorError112=err;}finally{try{if(!_iteratorNormalCompletion112&&_iterator112["return"]!=null){_iterator112["return"]();}}finally{if(_didIteratorError112){throw _iteratorError112;}}}var _iteratorNormalCompletion113=true;var _didIteratorError113=false;var _iteratorError113=undefined;try{for(var _iterator113=e.getAttributeKeys()[Symbol.iterator](),_step113;!(_iteratorNormalCompletion113=(_step113=_iterator113.next()).done);_iteratorNormalCompletion113=true){var _t96=_step113.value;i.add(e,"attribute:"+_t96);}}catch(err){_didIteratorError113=true;_iteratorError113=err;}finally{try{if(!_iteratorNormalCompletion113&&_iterator113["return"]!=null){_iterator113["return"]();}}finally{if(_didIteratorError113){throw _iteratorError113;}}}return i;}},{key:"_testAndFire",value:function _testAndFire(e,t){if(!this.conversionApi.consumable.test(t.item,e)){return;}var i=t.item.name||"$text";this.fire(e+":"+i,t,this.conversionApi);}},{key:"_clearConversionApi",value:function _clearConversionApi(){delete this.conversionApi.writer;delete this.conversionApi.consumable;}}]);return Xh;}();kr(Xh,dr);function Kh(e,t,i){var n=t.getRange();var o=Array.from(e.getAncestors());o.shift();o.reverse();var s=o.some(function(e){if(n.containsItem(e)){var _t97=i.toViewElement(e);return!!_t97.getCustomProperty("addHighlight");}});return!s;}var Qh=/*#__PURE__*/function(){function Qh(e,t,i){_classCallCheck(this,Qh);this._lastRangeBackward=false;this._ranges=[];this._attrs=new Map();if(e){this.setTo(e,t,i);}}_createClass(Qh,[{key:"isEqual",value:function isEqual(e){if(this.rangeCount!=e.rangeCount){return false;}else if(this.rangeCount===0){return true;}if(!this.anchor.isEqual(e.anchor)||!this.focus.isEqual(e.focus)){return false;}var _iteratorNormalCompletion114=true;var _didIteratorError114=false;var _iteratorError114=undefined;try{for(var _iterator114=this._ranges[Symbol.iterator](),_step114;!(_iteratorNormalCompletion114=(_step114=_iterator114.next()).done);_iteratorNormalCompletion114=true){var _t98=_step114.value;var _i109=false;var _iteratorNormalCompletion115=true;var _didIteratorError115=false;var _iteratorError115=undefined;try{for(var _iterator115=e._ranges[Symbol.iterator](),_step115;!(_iteratorNormalCompletion115=(_step115=_iterator115.next()).done);_iteratorNormalCompletion115=true){var _n57=_step115.value;if(_t98.isEqual(_n57)){_i109=true;break;}}}catch(err){_didIteratorError115=true;_iteratorError115=err;}finally{try{if(!_iteratorNormalCompletion115&&_iterator115["return"]!=null){_iterator115["return"]();}}finally{if(_didIteratorError115){throw _iteratorError115;}}}if(!_i109){return false;}}}catch(err){_didIteratorError114=true;_iteratorError114=err;}finally{try{if(!_iteratorNormalCompletion114&&_iterator114["return"]!=null){_iterator114["return"]();}}finally{if(_didIteratorError114){throw _iteratorError114;}}}return true;}},{key:"getRanges",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getRanges(){var _iteratorNormalCompletion116,_didIteratorError116,_iteratorError116,_iterator116,_step116,_e94;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getRanges$(_context16){while(1){switch(_context16.prev=_context16.next){case 0:_iteratorNormalCompletion116=true;_didIteratorError116=false;_iteratorError116=undefined;_context16.prev=3;_iterator116=this._ranges[Symbol.iterator]();case 5:if(_iteratorNormalCompletion116=(_step116=_iterator116.next()).done){_context16.next=12;break;}_e94=_step116.value;_context16.next=9;return new qh(_e94.start,_e94.end);case 9:_iteratorNormalCompletion116=true;_context16.next=5;break;case 12:_context16.next=18;break;case 14:_context16.prev=14;_context16.t0=_context16["catch"](3);_didIteratorError116=true;_iteratorError116=_context16.t0;case 18:_context16.prev=18;_context16.prev=19;if(!_iteratorNormalCompletion116&&_iterator116["return"]!=null){_iterator116["return"]();}case 21:_context16.prev=21;if(!_didIteratorError116){_context16.next=24;break;}throw _iteratorError116;case 24:return _context16.finish(21);case 25:return _context16.finish(18);case 26:case"end":return _context16.stop();}}},getRanges,this,[[3,14,18,26],[19,,21,25]]);})},{key:"getFirstRange",value:function getFirstRange(){var e=null;var _iteratorNormalCompletion117=true;var _didIteratorError117=false;var _iteratorError117=undefined;try{for(var _iterator117=this._ranges[Symbol.iterator](),_step117;!(_iteratorNormalCompletion117=(_step117=_iterator117.next()).done);_iteratorNormalCompletion117=true){var _t99=_step117.value;if(!e||_t99.start.isBefore(e.start)){e=_t99;}}}catch(err){_didIteratorError117=true;_iteratorError117=err;}finally{try{if(!_iteratorNormalCompletion117&&_iterator117["return"]!=null){_iterator117["return"]();}}finally{if(_didIteratorError117){throw _iteratorError117;}}}return e?new qh(e.start,e.end):null;}},{key:"getLastRange",value:function getLastRange(){var e=null;var _iteratorNormalCompletion118=true;var _didIteratorError118=false;var _iteratorError118=undefined;try{for(var _iterator118=this._ranges[Symbol.iterator](),_step118;!(_iteratorNormalCompletion118=(_step118=_iterator118.next()).done);_iteratorNormalCompletion118=true){var _t100=_step118.value;if(!e||_t100.end.isAfter(e.end)){e=_t100;}}}catch(err){_didIteratorError118=true;_iteratorError118=err;}finally{try{if(!_iteratorNormalCompletion118&&_iterator118["return"]!=null){_iterator118["return"]();}}finally{if(_didIteratorError118){throw _iteratorError118;}}}return e?new qh(e.start,e.end):null;}},{key:"getFirstPosition",value:function getFirstPosition(){var e=this.getFirstRange();return e?e.start.clone():null;}},{key:"getLastPosition",value:function getLastPosition(){var e=this.getLastRange();return e?e.end.clone():null;}},{key:"setTo",value:function setTo(e,t,i){if(e===null){this._setRanges([]);}else if(e instanceof Qh){this._setRanges(e.getRanges(),e.isBackward);}else if(e&&typeof e.getRanges=="function"){this._setRanges(e.getRanges(),e.isBackward);}else if(e instanceof qh){this._setRanges([e],!!t&&!!t.backward);}else if(e instanceof $h){this._setRanges([new qh(e)]);}else if(e instanceof Dh){var _n58=!!i&&!!i.backward;var _o37;if(t=="in"){_o37=qh._createIn(e);}else if(t=="on"){_o37=qh._createOn(e);}else if(t!==undefined){_o37=new qh($h._createAt(e,t));}else{throw new rr["b"]("model-selection-setTo-required-second-parameter: "+"selection.setTo requires the second parameter when the first parameter is a node.",[this,e]);}this._setRanges([_o37],_n58);}else if(Fr(e)){this._setRanges(e,t&&!!t.backward);}else{throw new rr["b"]("model-selection-setTo-not-selectable: Cannot set the selection to the given place.",[this,e]);}}},{key:"_setRanges",value:function _setRanges(e){var _this44=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;e=Array.from(e);var i=e.some(function(t){if(!(t instanceof qh)){throw new rr["b"]("model-selection-set-ranges-not-range: "+"Selection range set to an object that is not an instance of model.Range.",[_this44,e]);}return _this44._ranges.every(function(e){return!e.isEqual(t);});});if(e.length===this._ranges.length&&!i){return;}this._removeAllRanges();var _iteratorNormalCompletion119=true;var _didIteratorError119=false;var _iteratorError119=undefined;try{for(var _iterator119=e[Symbol.iterator](),_step119;!(_iteratorNormalCompletion119=(_step119=_iterator119.next()).done);_iteratorNormalCompletion119=true){var _t101=_step119.value;this._pushRange(_t101);}}catch(err){_didIteratorError119=true;_iteratorError119=err;}finally{try{if(!_iteratorNormalCompletion119&&_iterator119["return"]!=null){_iterator119["return"]();}}finally{if(_didIteratorError119){throw _iteratorError119;}}}this._lastRangeBackward=!!t;this.fire("change:range",{directChange:true});}},{key:"setFocus",value:function setFocus(e,t){if(this.anchor===null){throw new rr["b"]("model-selection-setFocus-no-ranges: Cannot set selection focus if there are no ranges in selection.",[this,e]);}var i=$h._createAt(e,t);if(i.compareWith(this.focus)=="same"){return;}var n=this.anchor;if(this._ranges.length){this._popRange();}if(i.compareWith(n)=="before"){this._pushRange(new qh(i,n));this._lastRangeBackward=true;}else{this._pushRange(new qh(n,i));this._lastRangeBackward=false;}this.fire("change:range",{directChange:true});}},{key:"getAttribute",value:function getAttribute(e){return this._attrs.get(e);}},{key:"getAttributes",value:function getAttributes(){return this._attrs.entries();}},{key:"getAttributeKeys",value:function getAttributeKeys(){return this._attrs.keys();}},{key:"hasAttribute",value:function hasAttribute(e){return this._attrs.has(e);}},{key:"removeAttribute",value:function removeAttribute(e){if(this.hasAttribute(e)){this._attrs["delete"](e);this.fire("change:attribute",{attributeKeys:[e],directChange:true});}}},{key:"setAttribute",value:function setAttribute(e,t){if(this.getAttribute(e)!==t){this._attrs.set(e,t);this.fire("change:attribute",{attributeKeys:[e],directChange:true});}}},{key:"getSelectedElement",value:function getSelectedElement(){if(this.rangeCount!==1){return null;}return this.getFirstRange().getContainedElement();}},{key:"is",value:function is(e){return e=="selection"||e=="model:selection";}},{key:"getSelectedBlocks",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getSelectedBlocks(){var e,_iteratorNormalCompletion120,_didIteratorError120,_iteratorError120,_iterator120,_step120,_t102,_i110,_iteratorNormalCompletion121,_didIteratorError121,_iteratorError121,_iterator121,_step121,_i111,_n60,_n59;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getSelectedBlocks$(_context17){while(1){switch(_context17.prev=_context17.next){case 0:e=new WeakSet();_iteratorNormalCompletion120=true;_didIteratorError120=false;_iteratorError120=undefined;_context17.prev=4;_iterator120=this.getRanges()[Symbol.iterator]();case 6:if(_iteratorNormalCompletion120=(_step120=_iterator120.next()).done){_context17.next=47;break;}_t102=_step120.value;_i110=tf(_t102.start,e);if(!(_i110&&nf(_i110,_t102))){_context17.next=12;break;}_context17.next=12;return _i110;case 12:_iteratorNormalCompletion121=true;_didIteratorError121=false;_iteratorError121=undefined;_context17.prev=15;_iterator121=_t102.getWalker()[Symbol.iterator]();case 17:if(_iteratorNormalCompletion121=(_step121=_iterator121.next()).done){_context17.next=26;break;}_i111=_step121.value;_n60=_i111.item;if(!(_i111.type=="elementEnd"&&ef(_n60,e,_t102))){_context17.next=23;break;}_context17.next=23;return _n60;case 23:_iteratorNormalCompletion121=true;_context17.next=17;break;case 26:_context17.next=32;break;case 28:_context17.prev=28;_context17.t0=_context17["catch"](15);_didIteratorError121=true;_iteratorError121=_context17.t0;case 32:_context17.prev=32;_context17.prev=33;if(!_iteratorNormalCompletion121&&_iterator121["return"]!=null){_iterator121["return"]();}case 35:_context17.prev=35;if(!_didIteratorError121){_context17.next=38;break;}throw _iteratorError121;case 38:return _context17.finish(35);case 39:return _context17.finish(32);case 40:_n59=tf(_t102.end,e);if(!(_n59&&!_t102.end.isTouching($h._createAt(_n59,0))&&nf(_n59,_t102))){_context17.next=44;break;}_context17.next=44;return _n59;case 44:_iteratorNormalCompletion120=true;_context17.next=6;break;case 47:_context17.next=53;break;case 49:_context17.prev=49;_context17.t1=_context17["catch"](4);_didIteratorError120=true;_iteratorError120=_context17.t1;case 53:_context17.prev=53;_context17.prev=54;if(!_iteratorNormalCompletion120&&_iterator120["return"]!=null){_iterator120["return"]();}case 56:_context17.prev=56;if(!_didIteratorError120){_context17.next=59;break;}throw _iteratorError120;case 59:return _context17.finish(56);case 60:return _context17.finish(53);case 61:case"end":return _context17.stop();}}},getSelectedBlocks,this,[[4,49,53,61],[15,28,32,40],[33,,35,39],[54,,56,60]]);})},{key:"containsEntireContent",value:function containsEntireContent(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.anchor.root;var t=$h._createAt(e,0);var i=$h._createAt(e,"end");return t.isTouching(this.getFirstPosition())&&i.isTouching(this.getLastPosition());}},{key:"_pushRange",value:function _pushRange(e){this._checkRange(e);this._ranges.push(new qh(e.start,e.end));}},{key:"_checkRange",value:function _checkRange(e){for(var _t103=0;_t103<this._ranges.length;_t103++){if(e.isIntersecting(this._ranges[_t103])){throw new rr["b"]("model-selection-range-intersects: Trying to add a range that intersects with another range in the selection.",[this,e],{addedRange:e,intersectingRange:this._ranges[_t103]});}}}},{key:"_removeAllRanges",value:function _removeAllRanges(){while(this._ranges.length>0){this._popRange();}}},{key:"_popRange",value:function _popRange(){this._ranges.pop();}},{key:"anchor",get:function get(){if(this._ranges.length>0){var _e95=this._ranges[this._ranges.length-1];return this._lastRangeBackward?_e95.end:_e95.start;}return null;}},{key:"focus",get:function get(){if(this._ranges.length>0){var _e96=this._ranges[this._ranges.length-1];return this._lastRangeBackward?_e96.start:_e96.end;}return null;}},{key:"isCollapsed",get:function get(){var e=this._ranges.length;if(e===1){return this._ranges[0].isCollapsed;}else{return false;}}},{key:"rangeCount",get:function get(){return this._ranges.length;}},{key:"isBackward",get:function get(){return!this.isCollapsed&&this._lastRangeBackward;}}]);return Qh;}();kr(Qh,dr);function Zh(e,t){if(t.has(e)){return false;}t.add(e);return e.root.document.model.schema.isBlock(e)&&e.parent;}function ef(e,t,i){return Zh(e,t)&&nf(e,i);}function tf(e,t){var i=e.parent;var n=i.root.document.model.schema;var o=e.parent.getAncestors({parentFirst:true,includeSelf:true});var s=false;var r=o.find(function(e){if(s){return false;}s=n.isLimit(e);return!s&&Zh(e,t);});o.forEach(function(e){return t.add(e);});return r;}function nf(e,t){var i=of(e);if(!i){return true;}var n=t.containsRange(qh._createOn(i),true);return!n;}function of(e){var t=e.root.document.model.schema;var i=e.parent;while(i){if(t.isBlock(i)){return i;}i=i.parent;}}var sf=/*#__PURE__*/function(_qh){_inherits(sf,_qh);function sf(e,t){var _this45;_classCallCheck(this,sf);_this45=_possibleConstructorReturn(this,_getPrototypeOf(sf).call(this,e,t));rf.call(_assertThisInitialized(_this45));return _this45;}_createClass(sf,[{key:"detach",value:function detach(){this.stopListening();}},{key:"is",value:function is(e){return e=="liveRange"||e=="model:liveRange"||_get(_getPrototypeOf(sf.prototype),"is",this).call(this,e);}},{key:"toRange",value:function toRange(){return new qh(this.start,this.end);}}],[{key:"fromRange",value:function fromRange(e){return new sf(e.start,e.end);}}]);return sf;}(qh);function rf(){var _this46=this;this.listenTo(this.root.document.model,"applyOperation",function(e,t){var i=t[0];if(!i.isDocumentOperation){return;}af.call(_this46,i);},{priority:"low"});}function af(e){var t=this.getTransformedByOperation(e);var i=qh._createFromRanges(t);var n=!i.isEqual(this);var o=cf(this,e);var s=null;if(n){if(i.root.rootName=="$graveyard"){if(e.type=="remove"){s=e.sourcePosition;}else{s=e.deletionPosition;}}var _t104=this.toRange();this.start=i.start;this.end=i.end;this.fire("change:range",_t104,{deletionPosition:s});}else if(o){this.fire("change:content",this.toRange(),{deletionPosition:s});}}function cf(e,t){switch(t.type){case"insert":return e.containsPosition(t.position);case"move":case"remove":case"reinsert":case"merge":return e.containsPosition(t.sourcePosition)||e.start.isEqual(t.sourcePosition)||e.containsPosition(t.targetPosition);case"split":return e.containsPosition(t.splitPosition)||e.containsPosition(t.insertionPosition);}return false;}kr(sf,dr);var lf="selection:";var df=/*#__PURE__*/function(){function df(e){_classCallCheck(this,df);this._selection=new uf(e);this._selection.delegate("change:range").to(this);this._selection.delegate("change:attribute").to(this);this._selection.delegate("change:marker").to(this);}_createClass(df,[{key:"getRanges",value:function getRanges(){return this._selection.getRanges();}},{key:"getFirstPosition",value:function getFirstPosition(){return this._selection.getFirstPosition();}},{key:"getLastPosition",value:function getLastPosition(){return this._selection.getLastPosition();}},{key:"getFirstRange",value:function getFirstRange(){return this._selection.getFirstRange();}},{key:"getLastRange",value:function getLastRange(){return this._selection.getLastRange();}},{key:"getSelectedBlocks",value:function getSelectedBlocks(){return this._selection.getSelectedBlocks();}},{key:"getSelectedElement",value:function getSelectedElement(){return this._selection.getSelectedElement();}},{key:"containsEntireContent",value:function containsEntireContent(e){return this._selection.containsEntireContent(e);}},{key:"destroy",value:function destroy(){this._selection.destroy();}},{key:"getAttributeKeys",value:function getAttributeKeys(){return this._selection.getAttributeKeys();}},{key:"getAttributes",value:function getAttributes(){return this._selection.getAttributes();}},{key:"getAttribute",value:function getAttribute(e){return this._selection.getAttribute(e);}},{key:"hasAttribute",value:function hasAttribute(e){return this._selection.hasAttribute(e);}},{key:"refresh",value:function refresh(){this._selection._updateMarkers();this._selection._updateAttributes(false);}},{key:"is",value:function is(e){return e=="selection"||e=="model:selection"||e=="documentSelection"||e=="model:documentSelection";}},{key:"_setFocus",value:function _setFocus(e,t){this._selection.setFocus(e,t);}},{key:"_setTo",value:function _setTo(e,t,i){this._selection.setTo(e,t,i);}},{key:"_setAttribute",value:function _setAttribute(e,t){this._selection.setAttribute(e,t);}},{key:"_removeAttribute",value:function _removeAttribute(e){this._selection.removeAttribute(e);}},{key:"_getStoredAttributes",value:function _getStoredAttributes(){return this._selection._getStoredAttributes();}},{key:"_overrideGravity",value:function _overrideGravity(){return this._selection.overrideGravity();}},{key:"_restoreGravity",value:function _restoreGravity(e){this._selection.restoreGravity(e);}},{key:"isCollapsed",get:function get(){return this._selection.isCollapsed;}},{key:"anchor",get:function get(){return this._selection.anchor;}},{key:"focus",get:function get(){return this._selection.focus;}},{key:"rangeCount",get:function get(){return this._selection.rangeCount;}},{key:"hasOwnRange",get:function get(){return this._selection.hasOwnRange;}},{key:"isBackward",get:function get(){return this._selection.isBackward;}},{key:"isGravityOverridden",get:function get(){return this._selection.isGravityOverridden;}},{key:"markers",get:function get(){return this._selection.markers;}},{key:"_ranges",get:function get(){return this._selection._ranges;}}],[{key:"_getStoreAttributeKey",value:function _getStoreAttributeKey(e){return lf+e;}},{key:"_isStoreAttributeKey",value:function _isStoreAttributeKey(e){return e.startsWith(lf);}}]);return df;}();kr(df,dr);var uf=/*#__PURE__*/function(_Qh){_inherits(uf,_Qh);function uf(e){var _this47;_classCallCheck(this,uf);_this47=_possibleConstructorReturn(this,_getPrototypeOf(uf).call(this));_this47.markers=new yr({idProperty:"name"});_this47._model=e.model;_this47._document=e;_this47._attributePriority=new Map();_this47._fixGraveyardRangesData=[];_this47._hasChangedRange=false;_this47._overriddenGravityRegister=new Set();_this47.listenTo(_this47._model,"applyOperation",function(e,t){var i=t[0];if(!i.isDocumentOperation||i.type=="marker"||i.type=="rename"||i.type=="noop"){return;}while(_this47._fixGraveyardRangesData.length){var _this47$_fixGraveyard=_this47._fixGraveyardRangesData.shift(),_e97=_this47$_fixGraveyard.liveRange,_t105=_this47$_fixGraveyard.sourcePosition;_this47._fixGraveyardSelection(_e97,_t105);}if(_this47._hasChangedRange){_this47._hasChangedRange=false;_this47.fire("change:range",{directChange:false});}},{priority:"lowest"});_this47.on("change:range",function(){var _iteratorNormalCompletion122=true;var _didIteratorError122=false;var _iteratorError122=undefined;try{for(var _iterator122=_this47.getRanges()[Symbol.iterator](),_step122;!(_iteratorNormalCompletion122=(_step122=_iterator122.next()).done);_iteratorNormalCompletion122=true){var _e98=_step122.value;if(!_this47._document._validateSelectionRange(_e98)){throw new rr["b"]("document-selection-wrong-position: Range from document selection starts or ends at incorrect position.",_assertThisInitialized(_this47),{range:_e98});}}}catch(err){_didIteratorError122=true;_iteratorError122=err;}finally{try{if(!_iteratorNormalCompletion122&&_iterator122["return"]!=null){_iterator122["return"]();}}finally{if(_didIteratorError122){throw _iteratorError122;}}}});_this47.listenTo(_this47._model.markers,"update",function(){return _this47._updateMarkers();});_this47.listenTo(_this47._document,"change",function(e,t){ff(_this47._model,t);});return _this47;}_createClass(uf,[{key:"destroy",value:function destroy(){for(var _e99=0;_e99<this._ranges.length;_e99++){this._ranges[_e99].detach();}this.stopListening();}},{key:"getRanges",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getRanges(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getRanges$(_context18){while(1){switch(_context18.prev=_context18.next){case 0:if(!this._ranges.length){_context18.next=4;break;}return _context18.delegateYield(_get(_getPrototypeOf(uf.prototype),"getRanges",this).call(this),"t0",2);case 2:_context18.next=6;break;case 4:_context18.next=6;return this._document._getDefaultRange();case 6:case"end":return _context18.stop();}}},getRanges,this);})},{key:"getFirstRange",value:function getFirstRange(){return _get(_getPrototypeOf(uf.prototype),"getFirstRange",this).call(this)||this._document._getDefaultRange();}},{key:"getLastRange",value:function getLastRange(){return _get(_getPrototypeOf(uf.prototype),"getLastRange",this).call(this)||this._document._getDefaultRange();}},{key:"setTo",value:function setTo(e,t,i){_get(_getPrototypeOf(uf.prototype),"setTo",this).call(this,e,t,i);this._updateAttributes(true);this._updateMarkers();}},{key:"setFocus",value:function setFocus(e,t){_get(_getPrototypeOf(uf.prototype),"setFocus",this).call(this,e,t);this._updateAttributes(true);this._updateMarkers();}},{key:"setAttribute",value:function setAttribute(e,t){if(this._setAttribute(e,t)){var _t106=[e];this.fire("change:attribute",{attributeKeys:_t106,directChange:true});}}},{key:"removeAttribute",value:function removeAttribute(e){if(this._removeAttribute(e)){var _t107=[e];this.fire("change:attribute",{attributeKeys:_t107,directChange:true});}}},{key:"overrideGravity",value:function overrideGravity(){var e=ir();this._overriddenGravityRegister.add(e);if(this._overriddenGravityRegister.size===1){this._updateAttributes(true);}return e;}},{key:"restoreGravity",value:function restoreGravity(e){if(!this._overriddenGravityRegister.has(e)){throw new rr["b"]("document-selection-gravity-wrong-restore: Attempting to restore the selection gravity for an unknown UID.",this,{uid:e});}this._overriddenGravityRegister["delete"](e);if(!this.isGravityOverridden){this._updateAttributes(true);}}},{key:"_popRange",value:function _popRange(){this._ranges.pop().detach();}},{key:"_pushRange",value:function _pushRange(e){var t=this._prepareRange(e);if(t){this._ranges.push(t);}}},{key:"_prepareRange",value:function _prepareRange(e){var _this48=this;this._checkRange(e);if(e.root==this._document.graveyard){return;}var t=sf.fromRange(e);t.on("change:range",function(e,i,n){_this48._hasChangedRange=true;if(t.root==_this48._document.graveyard){_this48._fixGraveyardRangesData.push({liveRange:t,sourcePosition:n.deletionPosition});}});return t;}},{key:"_updateMarkers",value:function _updateMarkers(){var e=[];var t=false;var _iteratorNormalCompletion123=true;var _didIteratorError123=false;var _iteratorError123=undefined;try{for(var _iterator123=this._model.markers[Symbol.iterator](),_step123;!(_iteratorNormalCompletion123=(_step123=_iterator123.next()).done);_iteratorNormalCompletion123=true){var _t108=_step123.value;var _i114=_t108.getRange();var _iteratorNormalCompletion124=true;var _didIteratorError124=false;var _iteratorError124=undefined;try{for(var _iterator124=this.getRanges()[Symbol.iterator](),_step124;!(_iteratorNormalCompletion124=(_step124=_iterator124.next()).done);_iteratorNormalCompletion124=true){var _n61=_step124.value;if(_i114.containsRange(_n61,!_n61.isCollapsed)){e.push(_t108);}}}catch(err){_didIteratorError124=true;_iteratorError124=err;}finally{try{if(!_iteratorNormalCompletion124&&_iterator124["return"]!=null){_iterator124["return"]();}}finally{if(_didIteratorError124){throw _iteratorError124;}}}}}catch(err){_didIteratorError123=true;_iteratorError123=err;}finally{try{if(!_iteratorNormalCompletion123&&_iterator123["return"]!=null){_iterator123["return"]();}}finally{if(_didIteratorError123){throw _iteratorError123;}}}var i=Array.from(this.markers);for(var _i112=0,_e100=e;_i112<_e100.length;_i112++){var _i115=_e100[_i112];if(!this.markers.has(_i115)){this.markers.add(_i115);t=true;}}for(var _i113=0,_Array$from3=Array.from(this.markers);_i113<_Array$from3.length;_i113++){var _i116=_Array$from3[_i113];if(!e.includes(_i116)){this.markers.remove(_i116);t=true;}}if(t){this.fire("change:marker",{oldMarkers:i,directChange:false});}}},{key:"_updateAttributes",value:function _updateAttributes(e){var t=Hr(this._getSurroundingAttributes());var i=Hr(this.getAttributes());if(e){this._attributePriority=new Map();this._attrs=new Map();}else{var _iteratorNormalCompletion125=true;var _didIteratorError125=false;var _iteratorError125=undefined;try{for(var _iterator125=this._attributePriority[Symbol.iterator](),_step125;!(_iteratorNormalCompletion125=(_step125=_iterator125.next()).done);_iteratorNormalCompletion125=true){var _step125$value=_slicedToArray(_step125.value,2),_e101=_step125$value[0],_t109=_step125$value[1];if(_t109=="low"){this._attrs["delete"](_e101);this._attributePriority["delete"](_e101);}}}catch(err){_didIteratorError125=true;_iteratorError125=err;}finally{try{if(!_iteratorNormalCompletion125&&_iterator125["return"]!=null){_iterator125["return"]();}}finally{if(_didIteratorError125){throw _iteratorError125;}}}}this._setAttributesTo(t);var n=[];var _iteratorNormalCompletion126=true;var _didIteratorError126=false;var _iteratorError126=undefined;try{for(var _iterator126=this.getAttributes()[Symbol.iterator](),_step126;!(_iteratorNormalCompletion126=(_step126=_iterator126.next()).done);_iteratorNormalCompletion126=true){var _step126$value=_slicedToArray(_step126.value,2),_e102=_step126$value[0],_t110=_step126$value[1];if(!i.has(_e102)||i.get(_e102)!==_t110){n.push(_e102);}}}catch(err){_didIteratorError126=true;_iteratorError126=err;}finally{try{if(!_iteratorNormalCompletion126&&_iterator126["return"]!=null){_iterator126["return"]();}}finally{if(_didIteratorError126){throw _iteratorError126;}}}var _iteratorNormalCompletion127=true;var _didIteratorError127=false;var _iteratorError127=undefined;try{for(var _iterator127=i[Symbol.iterator](),_step127;!(_iteratorNormalCompletion127=(_step127=_iterator127.next()).done);_iteratorNormalCompletion127=true){var _step127$value=_slicedToArray(_step127.value,1),_e103=_step127$value[0];if(!this.hasAttribute(_e103)){n.push(_e103);}}}catch(err){_didIteratorError127=true;_iteratorError127=err;}finally{try{if(!_iteratorNormalCompletion127&&_iterator127["return"]!=null){_iterator127["return"]();}}finally{if(_didIteratorError127){throw _iteratorError127;}}}if(n.length>0){this.fire("change:attribute",{attributeKeys:n,directChange:false});}}},{key:"_setAttribute",value:function _setAttribute(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:true;var n=i?"normal":"low";if(n=="low"&&this._attributePriority.get(e)=="normal"){return false;}var o=_get(_getPrototypeOf(uf.prototype),"getAttribute",this).call(this,e);if(o===t){return false;}this._attrs.set(e,t);this._attributePriority.set(e,n);return true;}},{key:"_removeAttribute",value:function _removeAttribute(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var i=t?"normal":"low";if(i=="low"&&this._attributePriority.get(e)=="normal"){return false;}this._attributePriority.set(e,i);if(!_get(_getPrototypeOf(uf.prototype),"hasAttribute",this).call(this,e)){return false;}this._attrs["delete"](e);return true;}},{key:"_setAttributesTo",value:function _setAttributesTo(e){var t=new Set();var _iteratorNormalCompletion128=true;var _didIteratorError128=false;var _iteratorError128=undefined;try{for(var _iterator128=this.getAttributes()[Symbol.iterator](),_step128;!(_iteratorNormalCompletion128=(_step128=_iterator128.next()).done);_iteratorNormalCompletion128=true){var _step128$value=_slicedToArray(_step128.value,2),_t111=_step128$value[0],_i117=_step128$value[1];if(e.get(_t111)===_i117){continue;}this._removeAttribute(_t111,false);}}catch(err){_didIteratorError128=true;_iteratorError128=err;}finally{try{if(!_iteratorNormalCompletion128&&_iterator128["return"]!=null){_iterator128["return"]();}}finally{if(_didIteratorError128){throw _iteratorError128;}}}var _iteratorNormalCompletion129=true;var _didIteratorError129=false;var _iteratorError129=undefined;try{for(var _iterator129=e[Symbol.iterator](),_step129;!(_iteratorNormalCompletion129=(_step129=_iterator129.next()).done);_iteratorNormalCompletion129=true){var _step129$value=_slicedToArray(_step129.value,2),_i118=_step129$value[0],_n62=_step129$value[1];var _e104=this._setAttribute(_i118,_n62,false);if(_e104){t.add(_i118);}}}catch(err){_didIteratorError129=true;_iteratorError129=err;}finally{try{if(!_iteratorNormalCompletion129&&_iterator129["return"]!=null){_iterator129["return"]();}}finally{if(_didIteratorError129){throw _iteratorError129;}}}return t;}},{key:"_getStoredAttributes",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _getStoredAttributes(){var e,_iteratorNormalCompletion130,_didIteratorError130,_iteratorError130,_iterator130,_step130,_t112,_i119;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _getStoredAttributes$(_context19){while(1){switch(_context19.prev=_context19.next){case 0:e=this.getFirstPosition().parent;if(!(this.isCollapsed&&e.isEmpty)){_context19.next=30;break;}_iteratorNormalCompletion130=true;_didIteratorError130=false;_iteratorError130=undefined;_context19.prev=5;_iterator130=e.getAttributeKeys()[Symbol.iterator]();case 7:if(_iteratorNormalCompletion130=(_step130=_iterator130.next()).done){_context19.next=16;break;}_t112=_step130.value;if(!_t112.startsWith(lf)){_context19.next=13;break;}_i119=_t112.substr(lf.length);_context19.next=13;return[_i119,e.getAttribute(_t112)];case 13:_iteratorNormalCompletion130=true;_context19.next=7;break;case 16:_context19.next=22;break;case 18:_context19.prev=18;_context19.t0=_context19["catch"](5);_didIteratorError130=true;_iteratorError130=_context19.t0;case 22:_context19.prev=22;_context19.prev=23;if(!_iteratorNormalCompletion130&&_iterator130["return"]!=null){_iterator130["return"]();}case 25:_context19.prev=25;if(!_didIteratorError130){_context19.next=28;break;}throw _iteratorError130;case 28:return _context19.finish(25);case 29:return _context19.finish(22);case 30:case"end":return _context19.stop();}}},_getStoredAttributes,this,[[5,18,22,30],[23,,25,29]]);})},{key:"_getSurroundingAttributes",value:function _getSurroundingAttributes(){var e=this.getFirstPosition();var t=this._model.schema;var i=null;if(!this.isCollapsed){var _e105=this.getFirstRange();var _iteratorNormalCompletion131=true;var _didIteratorError131=false;var _iteratorError131=undefined;try{for(var _iterator131=_e105[Symbol.iterator](),_step131;!(_iteratorNormalCompletion131=(_step131=_iterator131.next()).done);_iteratorNormalCompletion131=true){var _n63=_step131.value;if(_n63.item.is("element")&&t.isObject(_n63.item)){break;}if(_n63.type=="text"){i=_n63.item.getAttributes();break;}}}catch(err){_didIteratorError131=true;_iteratorError131=err;}finally{try{if(!_iteratorNormalCompletion131&&_iterator131["return"]!=null){_iterator131["return"]();}}finally{if(_didIteratorError131){throw _iteratorError131;}}}}else{var _t113=e.textNode?e.textNode:e.nodeBefore;var _n64=e.textNode?e.textNode:e.nodeAfter;if(!this.isGravityOverridden){i=hf(_t113);}if(!i){i=hf(_n64);}if(!this.isGravityOverridden&&!i){var _e106=_t113;while(_e106&&!i){_e106=_e106.previousSibling;i=hf(_e106);}}if(!i){var _e107=_n64;while(_e107&&!i){_e107=_e107.nextSibling;i=hf(_e107);}}if(!i){i=this._getStoredAttributes();}}return i;}},{key:"_fixGraveyardSelection",value:function _fixGraveyardSelection(e,t){var i=t.clone();var n=this._model.schema.getNearestSelectionRange(i);var o=this._ranges.indexOf(e);this._ranges.splice(o,1);e.detach();if(n){var _e108=this._prepareRange(n);this._ranges.splice(o,0,_e108);}}},{key:"isCollapsed",get:function get(){var e=this._ranges.length;return e===0?this._document._getDefaultRange().isCollapsed:_get(_getPrototypeOf(uf.prototype),"isCollapsed",this);}},{key:"anchor",get:function get(){return _get(_getPrototypeOf(uf.prototype),"anchor",this)||this._document._getDefaultRange().start;}},{key:"focus",get:function get(){return _get(_getPrototypeOf(uf.prototype),"focus",this)||this._document._getDefaultRange().end;}},{key:"rangeCount",get:function get(){return this._ranges.length?this._ranges.length:1;}},{key:"hasOwnRange",get:function get(){return this._ranges.length>0;}},{key:"isGravityOverridden",get:function get(){return!!this._overriddenGravityRegister.size;}}]);return uf;}(Qh);function hf(e){if(e instanceof Bh||e instanceof jh){return e.getAttributes();}return null;}function ff(e,t){var i=e.document.differ;var _iteratorNormalCompletion132=true;var _didIteratorError132=false;var _iteratorError132=undefined;try{var _loop2=function _loop2(){var n=_step132.value;if(n.type!="insert"){return"continue";}var i=n.position.parent;var o=n.length===i.maxOffset;if(o){e.enqueueChange(t,function(e){var t=Array.from(i.getAttributeKeys()).filter(function(e){return e.startsWith(lf);});var _iteratorNormalCompletion133=true;var _didIteratorError133=false;var _iteratorError133=undefined;try{for(var _iterator133=t[Symbol.iterator](),_step133;!(_iteratorNormalCompletion133=(_step133=_iterator133.next()).done);_iteratorNormalCompletion133=true){var _n65=_step133.value;e.removeAttribute(_n65,i);}}catch(err){_didIteratorError133=true;_iteratorError133=err;}finally{try{if(!_iteratorNormalCompletion133&&_iterator133["return"]!=null){_iterator133["return"]();}}finally{if(_didIteratorError133){throw _iteratorError133;}}}});}};for(var _iterator132=i.getChanges()[Symbol.iterator](),_step132;!(_iteratorNormalCompletion132=(_step132=_iterator132.next()).done);_iteratorNormalCompletion132=true){var _ret=_loop2();if(_ret==="continue")continue;}}catch(err){_didIteratorError132=true;_iteratorError132=err;}finally{try{if(!_iteratorNormalCompletion132&&_iterator132["return"]!=null){_iterator132["return"]();}}finally{if(_didIteratorError132){throw _iteratorError132;}}}}var mf=/*#__PURE__*/function(){function mf(e){_classCallCheck(this,mf);this._dispatchers=e;}_createClass(mf,[{key:"add",value:function add(e){var _iteratorNormalCompletion134=true;var _didIteratorError134=false;var _iteratorError134=undefined;try{for(var _iterator134=this._dispatchers[Symbol.iterator](),_step134;!(_iteratorNormalCompletion134=(_step134=_iterator134.next()).done);_iteratorNormalCompletion134=true){var _t114=_step134.value;e(_t114);}}catch(err){_didIteratorError134=true;_iteratorError134=err;}finally{try{if(!_iteratorNormalCompletion134&&_iterator134["return"]!=null){_iterator134["return"]();}}finally{if(_didIteratorError134){throw _iteratorError134;}}}return this;}}]);return mf;}();var gf=1,pf=4;function bf(e){return Hs(e,gf|pf);}var wf=bf;var _f=/*#__PURE__*/function(_mf){_inherits(_f,_mf);function _f(){_classCallCheck(this,_f);return _possibleConstructorReturn(this,_getPrototypeOf(_f).apply(this,arguments));}_createClass(_f,[{key:"elementToElement",value:function elementToElement(e){return this.add(Rf(e));}},{key:"attributeToElement",value:function attributeToElement(e){return this.add(Lf(e));}},{key:"attributeToAttribute",value:function attributeToAttribute(e){return this.add(zf(e));}},{key:"markerToElement",value:function markerToElement(e){return this.add(Df(e));}},{key:"markerToHighlight",value:function markerToHighlight(e){return this.add(jf(e));}}]);return _f;}(mf);function vf(){return function(e,t,i){if(!i.consumable.consume(t.item,"insert")){return;}var n=i.writer;var o=i.mapper.toViewPosition(t.range.start);var s=n.createText(t.item.data);n.insert(o,s);};}function kf(){return function(e,t,i){var n=i.mapper.toViewPosition(t.position);var o=t.position.getShiftedBy(t.length);var s=i.mapper.toViewPosition(o,{isPhantom:true});var r=i.writer.createRange(n,s);var a=i.writer.remove(r.getTrimmed());var _iteratorNormalCompletion135=true;var _didIteratorError135=false;var _iteratorError135=undefined;try{for(var _iterator135=i.writer.createRangeIn(a).getItems()[Symbol.iterator](),_step135;!(_iteratorNormalCompletion135=(_step135=_iterator135.next()).done);_iteratorNormalCompletion135=true){var _e109=_step135.value;i.mapper.unbindViewElement(_e109);}}catch(err){_didIteratorError135=true;_iteratorError135=err;}finally{try{if(!_iteratorNormalCompletion135&&_iterator135["return"]!=null){_iterator135["return"]();}}finally{if(_didIteratorError135){throw _iteratorError135;}}}};}function yf(e,t){var i=e.createAttributeElement("span",t.attributes);if(t.classes){i._addClass(t.classes);}if(t.priority){i._priority=t.priority;}i._id=t.id;return i;}function xf(){return function(e,t,i){var n=t.selection;if(n.isCollapsed){return;}if(!i.consumable.consume(n,"selection")){return;}var o=[];var _iteratorNormalCompletion136=true;var _didIteratorError136=false;var _iteratorError136=undefined;try{for(var _iterator136=n.getRanges()[Symbol.iterator](),_step136;!(_iteratorNormalCompletion136=(_step136=_iterator136.next()).done);_iteratorNormalCompletion136=true){var _e110=_step136.value;var _t115=i.mapper.toViewRange(_e110);o.push(_t115);}}catch(err){_didIteratorError136=true;_iteratorError136=err;}finally{try{if(!_iteratorNormalCompletion136&&_iterator136["return"]!=null){_iterator136["return"]();}}finally{if(_didIteratorError136){throw _iteratorError136;}}}i.writer.setSelection(o,{backward:n.isBackward});};}function Af(){return function(e,t,i){var n=t.selection;if(!n.isCollapsed){return;}if(!i.consumable.consume(n,"selection")){return;}var o=i.writer;var s=n.getFirstPosition();var r=i.mapper.toViewPosition(s);var a=o.breakAttributes(r);o.setSelection(a);};}function Cf(){return function(e,t,i){var n=i.writer;var o=n.document.selection;var _iteratorNormalCompletion137=true;var _didIteratorError137=false;var _iteratorError137=undefined;try{for(var _iterator137=o.getRanges()[Symbol.iterator](),_step137;!(_iteratorNormalCompletion137=(_step137=_iterator137.next()).done);_iteratorNormalCompletion137=true){var _e111=_step137.value;if(_e111.isCollapsed){if(_e111.end.parent.isAttached()){i.writer.mergeAttributes(_e111.start);}}}}catch(err){_didIteratorError137=true;_iteratorError137=err;}finally{try{if(!_iteratorNormalCompletion137&&_iterator137["return"]!=null){_iterator137["return"]();}}finally{if(_didIteratorError137){throw _iteratorError137;}}}n.setSelection(null);};}function Tf(e){return function(t,i,n){var o=e(i.attributeOldValue,n.writer);var s=e(i.attributeNewValue,n.writer);if(!o&&!s){return;}if(!n.consumable.consume(i.item,t.name)){return;}var r=n.writer;var a=r.document.selection;if(i.item instanceof Qh||i.item instanceof df){r.wrap(a.getFirstRange(),s);}else{var _e112=n.mapper.toViewRange(i.range);if(i.attributeOldValue!==null&&o){_e112=r.unwrap(_e112,o);}if(i.attributeNewValue!==null&&s){r.wrap(_e112,s);}}};}function Mf(e){return function(t,i,n){var o=e(i.item,n.writer);if(!o){return;}if(!n.consumable.consume(i.item,"insert")){return;}var s=n.mapper.toViewPosition(i.range.start);n.mapper.bindElements(i.item,o);n.writer.insert(s,o);};}function Ef(e){return function(t,i,n){i.isOpening=true;var o=e(i,n.writer);i.isOpening=false;var s=e(i,n.writer);if(!o||!s){return;}var r=i.markerRange;if(r.isCollapsed&&!n.consumable.consume(r,t.name)){return;}var _iteratorNormalCompletion138=true;var _didIteratorError138=false;var _iteratorError138=undefined;try{for(var _iterator138=r[Symbol.iterator](),_step138;!(_iteratorNormalCompletion138=(_step138=_iterator138.next()).done);_iteratorNormalCompletion138=true){var _e113=_step138.value;if(!n.consumable.consume(_e113.item,t.name)){return;}}}catch(err){_didIteratorError138=true;_iteratorError138=err;}finally{try{if(!_iteratorNormalCompletion138&&_iterator138["return"]!=null){_iterator138["return"]();}}finally{if(_didIteratorError138){throw _iteratorError138;}}}var a=n.mapper;var c=n.writer;c.insert(a.toViewPosition(r.start),o);n.mapper.bindElementToMarker(o,i.markerName);if(!r.isCollapsed){c.insert(a.toViewPosition(r.end),s);n.mapper.bindElementToMarker(s,i.markerName);}t.stop();};}function Pf(){return function(e,t,i){var n=i.mapper.markerNameToElements(t.markerName);if(!n){return;}var _iteratorNormalCompletion139=true;var _didIteratorError139=false;var _iteratorError139=undefined;try{for(var _iterator139=n[Symbol.iterator](),_step139;!(_iteratorNormalCompletion139=(_step139=_iterator139.next()).done);_iteratorNormalCompletion139=true){var _e114=_step139.value;i.mapper.unbindElementFromMarkerName(_e114,t.markerName);i.writer.clear(i.writer.createRangeOn(_e114),_e114);}}catch(err){_didIteratorError139=true;_iteratorError139=err;}finally{try{if(!_iteratorNormalCompletion139&&_iterator139["return"]!=null){_iterator139["return"]();}}finally{if(_didIteratorError139){throw _iteratorError139;}}}i.writer.clearClonedElementsGroup(t.markerName);e.stop();};}function Sf(e){return function(t,i,n){var o=e(i.attributeOldValue,i);var s=e(i.attributeNewValue,i);if(!o&&!s){return;}if(!n.consumable.consume(i.item,t.name)){return;}var r=n.mapper.toViewElement(i.item);var a=n.writer;if(!r){throw new rr["b"]("conversion-attribute-to-attribute-on-text: "+"Trying to convert text node's attribute with attribute-to-attribute converter.",[i,n]);}if(i.attributeOldValue!==null&&o){if(o.key=="class"){var _e115=Array.isArray(o.value)?o.value:[o.value];var _iteratorNormalCompletion140=true;var _didIteratorError140=false;var _iteratorError140=undefined;try{for(var _iterator140=_e115[Symbol.iterator](),_step140;!(_iteratorNormalCompletion140=(_step140=_iterator140.next()).done);_iteratorNormalCompletion140=true){var _t116=_step140.value;a.removeClass(_t116,r);}}catch(err){_didIteratorError140=true;_iteratorError140=err;}finally{try{if(!_iteratorNormalCompletion140&&_iterator140["return"]!=null){_iterator140["return"]();}}finally{if(_didIteratorError140){throw _iteratorError140;}}}}else if(o.key=="style"){var _e116=Object.keys(o.value);for(var _i120=0,_e117=_e116;_i120<_e117.length;_i120++){var _t117=_e117[_i120];a.removeStyle(_t117,r);}}else{a.removeAttribute(o.key,r);}}if(i.attributeNewValue!==null&&s){if(s.key=="class"){var _e118=Array.isArray(s.value)?s.value:[s.value];var _iteratorNormalCompletion141=true;var _didIteratorError141=false;var _iteratorError141=undefined;try{for(var _iterator141=_e118[Symbol.iterator](),_step141;!(_iteratorNormalCompletion141=(_step141=_iterator141.next()).done);_iteratorNormalCompletion141=true){var _t118=_step141.value;a.addClass(_t118,r);}}catch(err){_didIteratorError141=true;_iteratorError141=err;}finally{try{if(!_iteratorNormalCompletion141&&_iterator141["return"]!=null){_iterator141["return"]();}}finally{if(_didIteratorError141){throw _iteratorError141;}}}}else if(s.key=="style"){var _e119=Object.keys(s.value);for(var _i121=0,_e120=_e119;_i121<_e120.length;_i121++){var _t119=_e120[_i121];a.setStyle(_t119,s.value[_t119],r);}}else{a.setAttribute(s.key,s.value,r);}}};}function If(e){return function(t,i,n){if(!i.item){return;}if(!(i.item instanceof Qh||i.item instanceof df)&&!i.item.is("textProxy")){return;}var o=Wf(e,i,n);if(!o){return;}if(!n.consumable.consume(i.item,t.name)){return;}var s=n.writer;var r=yf(s,o);var a=s.document.selection;if(i.item instanceof Qh||i.item instanceof df){s.wrap(a.getFirstRange(),r,a);}else{var _e121=n.mapper.toViewRange(i.range);var _t120=s.wrap(_e121,r);var _iteratorNormalCompletion142=true;var _didIteratorError142=false;var _iteratorError142=undefined;try{for(var _iterator142=_t120.getItems()[Symbol.iterator](),_step142;!(_iteratorNormalCompletion142=(_step142=_iterator142.next()).done);_iteratorNormalCompletion142=true){var _e122=_step142.value;if(_e122.is("attributeElement")&&_e122.isSimilar(r)){n.mapper.bindElementToMarker(_e122,i.markerName);break;}}}catch(err){_didIteratorError142=true;_iteratorError142=err;}finally{try{if(!_iteratorNormalCompletion142&&_iterator142["return"]!=null){_iterator142["return"]();}}finally{if(_didIteratorError142){throw _iteratorError142;}}}}};}function Nf(e){return function(t,i,n){if(!i.item){return;}if(!(i.item instanceof Fh)){return;}var o=Wf(e,i,n);if(!o){return;}if(!n.consumable.test(i.item,t.name)){return;}var s=n.mapper.toViewElement(i.item);if(s&&s.getCustomProperty("addHighlight")){n.consumable.consume(i.item,t.name);var _iteratorNormalCompletion143=true;var _didIteratorError143=false;var _iteratorError143=undefined;try{for(var _iterator143=qh._createIn(i.item)[Symbol.iterator](),_step143;!(_iteratorNormalCompletion143=(_step143=_iterator143.next()).done);_iteratorNormalCompletion143=true){var _e123=_step143.value;n.consumable.consume(_e123.item,t.name);}}catch(err){_didIteratorError143=true;_iteratorError143=err;}finally{try{if(!_iteratorNormalCompletion143&&_iterator143["return"]!=null){_iterator143["return"]();}}finally{if(_didIteratorError143){throw _iteratorError143;}}}s.getCustomProperty("addHighlight")(s,o,n.writer);n.mapper.bindElementToMarker(s,i.markerName);}};}function Of(e){return function(t,i,n){if(i.markerRange.isCollapsed){return;}var o=Wf(e,i,n);if(!o){return;}var s=yf(n.writer,o);var r=n.mapper.markerNameToElements(i.markerName);if(!r){return;}var _iteratorNormalCompletion144=true;var _didIteratorError144=false;var _iteratorError144=undefined;try{for(var _iterator144=r[Symbol.iterator](),_step144;!(_iteratorNormalCompletion144=(_step144=_iterator144.next()).done);_iteratorNormalCompletion144=true){var _e124=_step144.value;n.mapper.unbindElementFromMarkerName(_e124,i.markerName);if(_e124.is("attributeElement")){n.writer.unwrap(n.writer.createRangeOn(_e124),s);}else{_e124.getCustomProperty("removeHighlight")(_e124,o.id,n.writer);}}}catch(err){_didIteratorError144=true;_iteratorError144=err;}finally{try{if(!_iteratorNormalCompletion144&&_iterator144["return"]!=null){_iterator144["return"]();}}finally{if(_didIteratorError144){throw _iteratorError144;}}}n.writer.clearClonedElementsGroup(i.markerName);t.stop();};}function Rf(e){e=wf(e);e.view=Bf(e.view,"container");return function(t){t.on("insert:"+e.model,Mf(e.view),{priority:e.converterPriority||"normal"});};}function Lf(e){e=wf(e);var t=e.model.key?e.model.key:e.model;var i="attribute:"+t;if(e.model.name){i+=":"+e.model.name;}if(e.model.values){var _iteratorNormalCompletion145=true;var _didIteratorError145=false;var _iteratorError145=undefined;try{for(var _iterator145=e.model.values[Symbol.iterator](),_step145;!(_iteratorNormalCompletion145=(_step145=_iterator145.next()).done);_iteratorNormalCompletion145=true){var _t121=_step145.value;e.view[_t121]=Bf(e.view[_t121],"attribute");}}catch(err){_didIteratorError145=true;_iteratorError145=err;}finally{try{if(!_iteratorNormalCompletion145&&_iterator145["return"]!=null){_iterator145["return"]();}}finally{if(_didIteratorError145){throw _iteratorError145;}}}}else{e.view=Bf(e.view,"attribute");}var n=Ff(e);return function(t){t.on(i,Tf(n),{priority:e.converterPriority||"normal"});};}function zf(e){e=wf(e);var t=e.model.key?e.model.key:e.model;var i="attribute:"+t;if(e.model.name){i+=":"+e.model.name;}if(e.model.values){var _iteratorNormalCompletion146=true;var _didIteratorError146=false;var _iteratorError146=undefined;try{for(var _iterator146=e.model.values[Symbol.iterator](),_step146;!(_iteratorNormalCompletion146=(_step146=_iterator146.next()).done);_iteratorNormalCompletion146=true){var _t122=_step146.value;e.view[_t122]=Hf(e.view[_t122]);}}catch(err){_didIteratorError146=true;_iteratorError146=err;}finally{try{if(!_iteratorNormalCompletion146&&_iterator146["return"]!=null){_iterator146["return"]();}}finally{if(_didIteratorError146){throw _iteratorError146;}}}}else{e.view=Hf(e.view);}var n=Ff(e);return function(t){t.on(i,Sf(n),{priority:e.converterPriority||"normal"});};}function Df(e){e=wf(e);e.view=Bf(e.view,"ui");return function(t){t.on("addMarker:"+e.model,Ef(e.view),{priority:e.converterPriority||"normal"});t.on("removeMarker:"+e.model,Pf(e.view),{priority:e.converterPriority||"normal"});};}function jf(e){return function(t){t.on("addMarker:"+e.model,If(e.view),{priority:e.converterPriority||"normal"});t.on("addMarker:"+e.model,Nf(e.view),{priority:e.converterPriority||"normal"});t.on("removeMarker:"+e.model,Of(e.view),{priority:e.converterPriority||"normal"});};}function Bf(e,t){if(typeof e=="function"){return e;}return function(i,n){return Vf(e,n,t);};}function Vf(e,t,i){if(typeof e=="string"){e={name:e};}var n;var o=Object.assign({},e.attributes);if(i=="container"){n=t.createContainerElement(e.name,o);}else if(i=="attribute"){var _i122={priority:e.priority||wl.DEFAULT_PRIORITY};n=t.createAttributeElement(e.name,o,_i122);}else{n=t.createUIElement(e.name,o);}if(e.styles){var _i123=Object.keys(e.styles);for(var _i125=0,_i124=_i123;_i125<_i124.length;_i125++){var _o38=_i124[_i125];t.setStyle(_o38,e.styles[_o38],n);}}if(e.classes){var _i126=e.classes;if(typeof _i126=="string"){t.addClass(_i126,n);}else{var _iteratorNormalCompletion147=true;var _didIteratorError147=false;var _iteratorError147=undefined;try{for(var _iterator147=_i126[Symbol.iterator](),_step147;!(_iteratorNormalCompletion147=(_step147=_iterator147.next()).done);_iteratorNormalCompletion147=true){var _e125=_step147.value;t.addClass(_e125,n);}}catch(err){_didIteratorError147=true;_iteratorError147=err;}finally{try{if(!_iteratorNormalCompletion147&&_iterator147["return"]!=null){_iterator147["return"]();}}finally{if(_didIteratorError147){throw _iteratorError147;}}}}}return n;}function Ff(e){if(e.model.values){return function(t,i){var n=e.view[t];if(n){return n(t,i);}return null;};}else{return e.view;}}function Hf(e){if(typeof e=="string"){return function(t){return{key:e,value:t};};}else if(_typeof(e)=="object"){if(e.value){return function(){return e;};}else{return function(t){return{key:e.key,value:t};};}}else{return e;}}function Wf(e,t,i){var n=typeof e=="function"?e(t,i):e;if(!n){return null;}if(!n.priority){n.priority=10;}if(!n.id){n.id=t.markerName;}return n;}var Uf=/*#__PURE__*/function(_mf2){_inherits(Uf,_mf2);function Uf(){_classCallCheck(this,Uf);return _possibleConstructorReturn(this,_getPrototypeOf(Uf).apply(this,arguments));}_createClass(Uf,[{key:"elementToElement",value:function elementToElement(e){return this.add(Gf(e));}},{key:"elementToAttribute",value:function elementToAttribute(e){return this.add(Jf(e));}},{key:"attributeToAttribute",value:function attributeToAttribute(e){return this.add(Xf(e));}},{key:"elementToMarker",value:function elementToMarker(e){return this.add(Kf(e));}}]);return Uf;}(mf);function $f(){return function(e,t,i){if(!t.modelRange&&i.consumable.consume(t.viewItem,{name:true})){var _i$convertChildren=i.convertChildren(t.viewItem,t.modelCursor),_e126=_i$convertChildren.modelRange,_n66=_i$convertChildren.modelCursor;t.modelRange=_e126;t.modelCursor=_n66;}};}function qf(){return function(e,t,i){if(i.schema.checkChild(t.modelCursor,"$text")){if(i.consumable.consume(t.viewItem)){var _e127=i.writer.createText(t.viewItem.data);i.writer.insert(_e127,t.modelCursor);t.modelRange=qh._createFromPositionAndShift(t.modelCursor,_e127.offsetSize);t.modelCursor=t.modelRange.end;}}};}function Yf(e,t){return function(i,n){var o=n.newSelection;var s=new Qh();var r=[];var _iteratorNormalCompletion148=true;var _didIteratorError148=false;var _iteratorError148=undefined;try{for(var _iterator148=o.getRanges()[Symbol.iterator](),_step148;!(_iteratorNormalCompletion148=(_step148=_iterator148.next()).done);_iteratorNormalCompletion148=true){var _e128=_step148.value;r.push(t.toModelRange(_e128));}}catch(err){_didIteratorError148=true;_iteratorError148=err;}finally{try{if(!_iteratorNormalCompletion148&&_iterator148["return"]!=null){_iterator148["return"]();}}finally{if(_didIteratorError148){throw _iteratorError148;}}}s.setTo(r,{backward:o.isBackward});if(!s.isEqual(e.document.selection)){e.change(function(e){e.setSelection(s);});}};}function Gf(e){e=wf(e);var t=Zf(e);var i=Qf(e.view);var n=i?"element:"+i:"element";return function(i){i.on(n,t,{priority:e.converterPriority||"normal"});};}function Jf(e){e=wf(e);im(e);var t=nm(e,false);var i=Qf(e.view);var n=i?"element:"+i:"element";return function(i){i.on(n,t,{priority:e.converterPriority||"low"});};}function Xf(e){e=wf(e);var t=null;if(typeof e.view=="string"||e.view.key){t=tm(e);}im(e,t);var i=nm(e,true);return function(t){t.on("element",i,{priority:e.converterPriority||"low"});};}function Kf(e){e=wf(e);rm(e);return Gf(e);}function Qf(e){if(typeof e=="string"){return e;}if(_typeof(e)=="object"&&typeof e.name=="string"){return e.name;}return null;}function Zf(e){var t=e.view?new Wr(e.view):null;return function(i,n,o){var s={};if(t){var _e129=t.match(n.viewItem);if(!_e129){return;}s=_e129.match;}s.name=true;var r=em(e.model,n.viewItem,o.writer);if(!r){return;}if(!o.consumable.test(n.viewItem,s)){return;}var a=o.splitToAllowedParent(r,n.modelCursor);if(!a){return;}o.writer.insert(r,a.position);o.convertChildren(n.viewItem,o.writer.createPositionAt(r,0));o.consumable.consume(n.viewItem,s);var c=o.getSplitParts(r);n.modelRange=new qh(o.writer.createPositionBefore(r),o.writer.createPositionAfter(c[c.length-1]));if(a.cursorParent){n.modelCursor=o.writer.createPositionAt(a.cursorParent,0);}else{n.modelCursor=n.modelRange.end;}};}function em(e,t,i){if(e instanceof Function){return e(t,i);}else{return i.createElement(e);}}function tm(e){if(typeof e.view=="string"){e.view={key:e.view};}var t=e.view.key;var i;if(t=="class"||t=="style"){var _n67=t=="class"?"classes":"styles";i=_defineProperty({},_n67,e.view.value);}else{var _n68=typeof e.view.value=="undefined"?/[\s\S]*/:e.view.value;i={attributes:_defineProperty({},t,_n68)};}if(e.view.name){i.name=e.view.name;}e.view=i;return t;}function im(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=t===null?true:function(e){return e.getAttribute(t);};var n=_typeof(e.model)!="object"?e.model:e.model.key;var o=_typeof(e.model)!="object"||typeof e.model.value=="undefined"?i:e.model.value;e.model={key:n,value:o};}function nm(e,t){var i=new Wr(e.view);return function(n,o,s){var r=i.match(o.viewItem);if(!r){return;}var a=e.model.key;var c=typeof e.model.value=="function"?e.model.value(o.viewItem):e.model.value;if(c===null){return;}if(om(e.view,o.viewItem)){r.match.name=true;}else{delete r.match.name;}if(!s.consumable.test(o.viewItem,r.match)){return;}if(!o.modelRange){o=Object.assign(o,s.convertChildren(o.viewItem,o.modelCursor));}var l=sm(o.modelRange,{key:a,value:c},t,s);if(l){s.consumable.consume(o.viewItem,r.match);}};}function om(e,t){var i=typeof e=="function"?e(t):e;if(_typeof(i)=="object"&&!Qf(i)){return false;}return!i.classes&&!i.attributes&&!i.styles;}function sm(e,t,i,n){var o=false;for(var _i128=0,_Array$from4=Array.from(e.getItems({shallow:i}));_i128<_Array$from4.length;_i128++){var _s17=_Array$from4[_i128];if(n.schema.checkAttribute(_s17,t.key)){n.writer.setAttribute(t.key,t.value,_s17);o=true;}}return o;}function rm(e){var t=e.model;e.model=function(e,i){var n=typeof t=="string"?t:t(e);return i.createElement("$marker",{"data-name":n});};}var am=/*#__PURE__*/function(){function am(e,t){var _this49=this;_classCallCheck(this,am);this.model=e;this.view=new zh(t);this.mapper=new Yh();this.downcastDispatcher=new Xh({mapper:this.mapper});var i=this.model.document;var n=i.selection;var o=this.model.markers;this.listenTo(this.model,"_beforeChanges",function(){_this49.view._disableRendering(true);},{priority:"highest"});this.listenTo(this.model,"_afterChanges",function(){_this49.view._disableRendering(false);},{priority:"lowest"});this.listenTo(i,"change",function(){_this49.view.change(function(e){_this49.downcastDispatcher.convertChanges(i.differ,o,e);_this49.downcastDispatcher.convertSelection(n,o,e);});},{priority:"low"});this.listenTo(this.view.document,"selectionChange",Yf(this.model,this.mapper));this.downcastDispatcher.on("insert:$text",vf(),{priority:"lowest"});this.downcastDispatcher.on("remove",kf(),{priority:"low"});this.downcastDispatcher.on("selection",Cf(),{priority:"low"});this.downcastDispatcher.on("selection",xf(),{priority:"low"});this.downcastDispatcher.on("selection",Af(),{priority:"low"});this.view.document.roots.bindTo(this.model.document.roots).using(function(e){if(e.rootName=="$graveyard"){return null;}var t=new cl(_this49.view.document,e.name);t.rootName=e.rootName;_this49.mapper.bindElements(e,t);return t;});}_createClass(am,[{key:"destroy",value:function destroy(){this.view.destroy();this.stopListening();}}]);return am;}();kr(am,Jc);var cm=/*#__PURE__*/function(){function cm(){_classCallCheck(this,cm);this._commands=new Map();}_createClass(cm,[{key:"add",value:function add(e,t){this._commands.set(e,t);}},{key:"get",value:function get(e){return this._commands.get(e);}},{key:"execute",value:function execute(e){var i=this.get(e);if(!i){throw new rr["b"]("commandcollection-command-not-found: Command does not exist.",this,{commandName:e});}for(var _len16=arguments.length,t=new Array(_len16>1?_len16-1:0),_key16=1;_key16<_len16;_key16++){t[_key16-1]=arguments[_key16];}i.execute.apply(i,t);}},{key:"names",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function names(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function names$(_context20){while(1){switch(_context20.prev=_context20.next){case 0:return _context20.delegateYield(this._commands.keys(),"t0",1);case 1:case"end":return _context20.stop();}}},names,this);})},{key:"commands",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function commands(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function commands$(_context21){while(1){switch(_context21.prev=_context21.next){case 0:return _context21.delegateYield(this._commands.values(),"t0",1);case 1:case"end":return _context21.stop();}}},commands,this);})},{key:Symbol.iterator,value:function value(){return this._commands[Symbol.iterator]();}},{key:"destroy",value:function destroy(){var _iteratorNormalCompletion149=true;var _didIteratorError149=false;var _iteratorError149=undefined;try{for(var _iterator149=this.commands()[Symbol.iterator](),_step149;!(_iteratorNormalCompletion149=(_step149=_iterator149.next()).done);_iteratorNormalCompletion149=true){var _e130=_step149.value;_e130.destroy();}}catch(err){_didIteratorError149=true;_iteratorError149=err;}finally{try{if(!_iteratorNormalCompletion149&&_iterator149["return"]!=null){_iterator149["return"]();}}finally{if(_didIteratorError149){throw _iteratorError149;}}}}}]);return cm;}();var lm=/*#__PURE__*/function(){function lm(){_classCallCheck(this,lm);this._consumables=new Map();}_createClass(lm,[{key:"add",value:function add(e,t){var i;if(e.is("text")||e.is("documentFragment")){this._consumables.set(e,true);return;}if(!this._consumables.has(e)){i=new dm(e);this._consumables.set(e,i);}else{i=this._consumables.get(e);}i.add(t);}},{key:"test",value:function test(e,t){var i=this._consumables.get(e);if(i===undefined){return null;}if(e.is("text")||e.is("documentFragment")){return i;}return i.test(t);}},{key:"consume",value:function consume(e,t){if(this.test(e,t)){if(e.is("text")||e.is("documentFragment")){this._consumables.set(e,false);}else{this._consumables.get(e).consume(t);}return true;}return false;}},{key:"revert",value:function revert(e,t){var i=this._consumables.get(e);if(i!==undefined){if(e.is("text")||e.is("documentFragment")){this._consumables.set(e,true);}else{i.revert(t);}}}}],[{key:"consumablesFromElement",value:function consumablesFromElement(e){var t={element:e,name:true,attributes:[],classes:[],styles:[]};var i=e.getAttributeKeys();var _iteratorNormalCompletion150=true;var _didIteratorError150=false;var _iteratorError150=undefined;try{for(var _iterator150=i[Symbol.iterator](),_step150;!(_iteratorNormalCompletion150=(_step150=_iterator150.next()).done);_iteratorNormalCompletion150=true){var _e131=_step150.value;if(_e131=="style"||_e131=="class"){continue;}t.attributes.push(_e131);}}catch(err){_didIteratorError150=true;_iteratorError150=err;}finally{try{if(!_iteratorNormalCompletion150&&_iterator150["return"]!=null){_iterator150["return"]();}}finally{if(_didIteratorError150){throw _iteratorError150;}}}var n=e.getClassNames();var _iteratorNormalCompletion151=true;var _didIteratorError151=false;var _iteratorError151=undefined;try{for(var _iterator151=n[Symbol.iterator](),_step151;!(_iteratorNormalCompletion151=(_step151=_iterator151.next()).done);_iteratorNormalCompletion151=true){var _e132=_step151.value;t.classes.push(_e132);}}catch(err){_didIteratorError151=true;_iteratorError151=err;}finally{try{if(!_iteratorNormalCompletion151&&_iterator151["return"]!=null){_iterator151["return"]();}}finally{if(_didIteratorError151){throw _iteratorError151;}}}var o=e.getStyleNames();var _iteratorNormalCompletion152=true;var _didIteratorError152=false;var _iteratorError152=undefined;try{for(var _iterator152=o[Symbol.iterator](),_step152;!(_iteratorNormalCompletion152=(_step152=_iterator152.next()).done);_iteratorNormalCompletion152=true){var _e133=_step152.value;t.styles.push(_e133);}}catch(err){_didIteratorError152=true;_iteratorError152=err;}finally{try{if(!_iteratorNormalCompletion152&&_iterator152["return"]!=null){_iterator152["return"]();}}finally{if(_didIteratorError152){throw _iteratorError152;}}}return t;}},{key:"createFrom",value:function createFrom(e,t){if(!t){t=new lm(e);}if(e.is("text")){t.add(e);return t;}if(e.is("element")){t.add(e,lm.consumablesFromElement(e));}if(e.is("documentFragment")){t.add(e);}var _iteratorNormalCompletion153=true;var _didIteratorError153=false;var _iteratorError153=undefined;try{for(var _iterator153=e.getChildren()[Symbol.iterator](),_step153;!(_iteratorNormalCompletion153=(_step153=_iterator153.next()).done);_iteratorNormalCompletion153=true){var _i129=_step153.value;t=lm.createFrom(_i129,t);}}catch(err){_didIteratorError153=true;_iteratorError153=err;}finally{try{if(!_iteratorNormalCompletion153&&_iterator153["return"]!=null){_iterator153["return"]();}}finally{if(_didIteratorError153){throw _iteratorError153;}}}return t;}}]);return lm;}();var dm=/*#__PURE__*/function(){function dm(e){_classCallCheck(this,dm);this.element=e;this._canConsumeName=null;this._consumables={attributes:new Map(),styles:new Map(),classes:new Map()};}_createClass(dm,[{key:"add",value:function add(e){if(e.name){this._canConsumeName=true;}for(var _t123 in this._consumables){if(_t123 in e){this._add(_t123,e[_t123]);}}}},{key:"test",value:function test(e){if(e.name&&!this._canConsumeName){return this._canConsumeName;}for(var _t124 in this._consumables){if(_t124 in e){var _i130=this._test(_t124,e[_t124]);if(_i130!==true){return _i130;}}}return true;}},{key:"consume",value:function consume(e){if(e.name){this._canConsumeName=false;}for(var _t125 in this._consumables){if(_t125 in e){this._consume(_t125,e[_t125]);}}}},{key:"revert",value:function revert(e){if(e.name){this._canConsumeName=true;}for(var _t126 in this._consumables){if(_t126 in e){this._revert(_t126,e[_t126]);}}}},{key:"_add",value:function _add(e,t){var i=Jt(t)?t:[t];var n=this._consumables[e];var _iteratorNormalCompletion154=true;var _didIteratorError154=false;var _iteratorError154=undefined;try{for(var _iterator154=i[Symbol.iterator](),_step154;!(_iteratorNormalCompletion154=(_step154=_iterator154.next()).done);_iteratorNormalCompletion154=true){var _t127=_step154.value;if(e==="attributes"&&(_t127==="class"||_t127==="style")){throw new rr["b"]("viewconsumable-invalid-attribute: Classes and styles should be handled separately.",this);}n.set(_t127,true);if(e==="styles"){var _iteratorNormalCompletion155=true;var _didIteratorError155=false;var _iteratorError155=undefined;try{for(var _iterator155=this.element.document.stylesProcessor.getRelatedStyles(_t127)[Symbol.iterator](),_step155;!(_iteratorNormalCompletion155=(_step155=_iterator155.next()).done);_iteratorNormalCompletion155=true){var _e134=_step155.value;n.set(_e134,true);}}catch(err){_didIteratorError155=true;_iteratorError155=err;}finally{try{if(!_iteratorNormalCompletion155&&_iterator155["return"]!=null){_iterator155["return"]();}}finally{if(_didIteratorError155){throw _iteratorError155;}}}}}}catch(err){_didIteratorError154=true;_iteratorError154=err;}finally{try{if(!_iteratorNormalCompletion154&&_iterator154["return"]!=null){_iterator154["return"]();}}finally{if(_didIteratorError154){throw _iteratorError154;}}}}},{key:"_test",value:function _test(e,t){var i=Jt(t)?t:[t];var n=this._consumables[e];var _iteratorNormalCompletion156=true;var _didIteratorError156=false;var _iteratorError156=undefined;try{for(var _iterator156=i[Symbol.iterator](),_step156;!(_iteratorNormalCompletion156=(_step156=_iterator156.next()).done);_iteratorNormalCompletion156=true){var _t128=_step156.value;if(e==="attributes"&&(_t128==="class"||_t128==="style")){var _e135=_t128=="class"?"classes":"styles";var _i131=this._test(_e135,_toConsumableArray(this._consumables[_e135].keys()));if(_i131!==true){return _i131;}}else{var _e136=n.get(_t128);if(_e136===undefined){return null;}if(!_e136){return false;}}}}catch(err){_didIteratorError156=true;_iteratorError156=err;}finally{try{if(!_iteratorNormalCompletion156&&_iterator156["return"]!=null){_iterator156["return"]();}}finally{if(_didIteratorError156){throw _iteratorError156;}}}return true;}},{key:"_consume",value:function _consume(e,t){var i=Jt(t)?t:[t];var n=this._consumables[e];var _iteratorNormalCompletion157=true;var _didIteratorError157=false;var _iteratorError157=undefined;try{for(var _iterator157=i[Symbol.iterator](),_step157;!(_iteratorNormalCompletion157=(_step157=_iterator157.next()).done);_iteratorNormalCompletion157=true){var _t129=_step157.value;if(e==="attributes"&&(_t129==="class"||_t129==="style")){var _e137=_t129=="class"?"classes":"styles";this._consume(_e137,_toConsumableArray(this._consumables[_e137].keys()));}else{n.set(_t129,false);if(e=="styles"){var _iteratorNormalCompletion158=true;var _didIteratorError158=false;var _iteratorError158=undefined;try{for(var _iterator158=this.element.document.stylesProcessor.getRelatedStyles(_t129)[Symbol.iterator](),_step158;!(_iteratorNormalCompletion158=(_step158=_iterator158.next()).done);_iteratorNormalCompletion158=true){var _e138=_step158.value;n.set(_e138,false);}}catch(err){_didIteratorError158=true;_iteratorError158=err;}finally{try{if(!_iteratorNormalCompletion158&&_iterator158["return"]!=null){_iterator158["return"]();}}finally{if(_didIteratorError158){throw _iteratorError158;}}}}}}}catch(err){_didIteratorError157=true;_iteratorError157=err;}finally{try{if(!_iteratorNormalCompletion157&&_iterator157["return"]!=null){_iterator157["return"]();}}finally{if(_didIteratorError157){throw _iteratorError157;}}}}},{key:"_revert",value:function _revert(e,t){var i=Jt(t)?t:[t];var n=this._consumables[e];var _iteratorNormalCompletion159=true;var _didIteratorError159=false;var _iteratorError159=undefined;try{for(var _iterator159=i[Symbol.iterator](),_step159;!(_iteratorNormalCompletion159=(_step159=_iterator159.next()).done);_iteratorNormalCompletion159=true){var _t130=_step159.value;if(e==="attributes"&&(_t130==="class"||_t130==="style")){var _e139=_t130=="class"?"classes":"styles";this._revert(_e139,_toConsumableArray(this._consumables[_e139].keys()));}else{var _e140=n.get(_t130);if(_e140===false){n.set(_t130,true);}}}}catch(err){_didIteratorError159=true;_iteratorError159=err;}finally{try{if(!_iteratorNormalCompletion159&&_iterator159["return"]!=null){_iterator159["return"]();}}finally{if(_didIteratorError159){throw _iteratorError159;}}}}}]);return dm;}();var um=/*#__PURE__*/function(){function um(){var _this50=this;_classCallCheck(this,um);this._sourceDefinitions={};this._attributeProperties={};this.decorate("checkChild");this.decorate("checkAttribute");this.on("checkAttribute",function(e,t){t[0]=new hm(t[0]);},{priority:"highest"});this.on("checkChild",function(e,t){t[0]=new hm(t[0]);t[1]=_this50.getDefinition(t[1]);},{priority:"highest"});}_createClass(um,[{key:"register",value:function register(e,t){if(this._sourceDefinitions[e]){throw new rr["b"]("schema-cannot-register-item-twice: A single item cannot be registered twice in the schema.",this,{itemName:e});}this._sourceDefinitions[e]=[Object.assign({},t)];this._clearCache();}},{key:"extend",value:function extend(e,t){if(!this._sourceDefinitions[e]){throw new rr["b"]("schema-cannot-extend-missing-item: Cannot extend an item which was not registered yet.",this,{itemName:e});}this._sourceDefinitions[e].push(Object.assign({},t));this._clearCache();}},{key:"getDefinitions",value:function getDefinitions(){if(!this._compiledDefinitions){this._compile();}return this._compiledDefinitions;}},{key:"getDefinition",value:function getDefinition(e){var t;if(typeof e=="string"){t=e;}else if(e.is&&(e.is("text")||e.is("textProxy"))){t="$text";}else{t=e.name;}return this.getDefinitions()[t];}},{key:"isRegistered",value:function isRegistered(e){return!!this.getDefinition(e);}},{key:"isBlock",value:function isBlock(e){var t=this.getDefinition(e);return!!(t&&t.isBlock);}},{key:"isLimit",value:function isLimit(e){var t=this.getDefinition(e);if(!t){return false;}return!!(t.isLimit||t.isObject);}},{key:"isObject",value:function isObject(e){var t=this.getDefinition(e);return!!(t&&t.isObject);}},{key:"isInline",value:function isInline(e){var t=this.getDefinition(e);return!!(t&&t.isInline);}},{key:"checkChild",value:function checkChild(e,t){if(!t){return false;}return this._checkContextMatch(t,e);}},{key:"checkAttribute",value:function checkAttribute(e,t){var i=this.getDefinition(e.last);if(!i){return false;}return i.allowAttributes.includes(t);}},{key:"checkMerge",value:function checkMerge(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(e instanceof $h){var _t131=e.nodeBefore;var _i132=e.nodeAfter;if(!(_t131 instanceof Fh)){throw new rr["b"]("schema-check-merge-no-element-before: The node before the merge position must be an element.",this);}if(!(_i132 instanceof Fh)){throw new rr["b"]("schema-check-merge-no-element-after: The node after the merge position must be an element.",this);}return this.checkMerge(_t131,_i132);}var _iteratorNormalCompletion160=true;var _didIteratorError160=false;var _iteratorError160=undefined;try{for(var _iterator160=t.getChildren()[Symbol.iterator](),_step160;!(_iteratorNormalCompletion160=(_step160=_iterator160.next()).done);_iteratorNormalCompletion160=true){var _i133=_step160.value;if(!this.checkChild(e,_i133)){return false;}}}catch(err){_didIteratorError160=true;_iteratorError160=err;}finally{try{if(!_iteratorNormalCompletion160&&_iterator160["return"]!=null){_iterator160["return"]();}}finally{if(_didIteratorError160){throw _iteratorError160;}}}return true;}},{key:"addChildCheck",value:function addChildCheck(e){this.on("checkChild",function(t,_ref11){var _ref12=_slicedToArray(_ref11,2),i=_ref12[0],n=_ref12[1];if(!n){return;}var o=e(i,n);if(typeof o=="boolean"){t.stop();t["return"]=o;}},{priority:"high"});}},{key:"addAttributeCheck",value:function addAttributeCheck(e){this.on("checkAttribute",function(t,_ref13){var _ref14=_slicedToArray(_ref13,2),i=_ref14[0],n=_ref14[1];var o=e(i,n);if(typeof o=="boolean"){t.stop();t["return"]=o;}},{priority:"high"});}},{key:"setAttributeProperties",value:function setAttributeProperties(e,t){this._attributeProperties[e]=Object.assign(this.getAttributeProperties(e),t);}},{key:"getAttributeProperties",value:function getAttributeProperties(e){return this._attributeProperties[e]||{};}},{key:"getLimitElement",value:function getLimitElement(e){var t;if(e instanceof $h){t=e.parent;}else{var _i134=e instanceof qh?[e]:Array.from(e.getRanges());t=_i134.reduce(function(e,t){var i=t.getCommonAncestor();if(!e){return i;}return e.getCommonAncestor(i,{includeSelf:true});},null);}while(!this.isLimit(t)){if(t.parent){t=t.parent;}else{break;}}return t;}},{key:"checkAttributeInSelection",value:function checkAttributeInSelection(e,t){if(e.isCollapsed){var _i135=e.getFirstPosition();var _n69=[].concat(_toConsumableArray(_i135.getAncestors()),[new jh("",e.getAttributes())]);return this.checkAttribute(_n69,t);}else{var _i136=e.getRanges();var _iteratorNormalCompletion161=true;var _didIteratorError161=false;var _iteratorError161=undefined;try{for(var _iterator161=_i136[Symbol.iterator](),_step161;!(_iteratorNormalCompletion161=(_step161=_iterator161.next()).done);_iteratorNormalCompletion161=true){var _e141=_step161.value;var _iteratorNormalCompletion162=true;var _didIteratorError162=false;var _iteratorError162=undefined;try{for(var _iterator162=_e141[Symbol.iterator](),_step162;!(_iteratorNormalCompletion162=(_step162=_iterator162.next()).done);_iteratorNormalCompletion162=true){var _i137=_step162.value;if(this.checkAttribute(_i137.item,t)){return true;}}}catch(err){_didIteratorError162=true;_iteratorError162=err;}finally{try{if(!_iteratorNormalCompletion162&&_iterator162["return"]!=null){_iterator162["return"]();}}finally{if(_didIteratorError162){throw _iteratorError162;}}}}}catch(err){_didIteratorError161=true;_iteratorError161=err;}finally{try{if(!_iteratorNormalCompletion161&&_iterator161["return"]!=null){_iterator161["return"]();}}finally{if(_didIteratorError161){throw _iteratorError161;}}}}return false;}},{key:"getValidRanges",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getValidRanges(e,t){var _iteratorNormalCompletion163,_didIteratorError163,_iteratorError163,_iterator163,_step163,_i138;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getValidRanges$(_context22){while(1){switch(_context22.prev=_context22.next){case 0:e=Mm(e);_iteratorNormalCompletion163=true;_didIteratorError163=false;_iteratorError163=undefined;_context22.prev=4;_iterator163=e[Symbol.iterator]();case 6:if(_iteratorNormalCompletion163=(_step163=_iterator163.next()).done){_context22.next=12;break;}_i138=_step163.value;return _context22.delegateYield(this._getValidRangesForRange(_i138,t),"t0",9);case 9:_iteratorNormalCompletion163=true;_context22.next=6;break;case 12:_context22.next=18;break;case 14:_context22.prev=14;_context22.t1=_context22["catch"](4);_didIteratorError163=true;_iteratorError163=_context22.t1;case 18:_context22.prev=18;_context22.prev=19;if(!_iteratorNormalCompletion163&&_iterator163["return"]!=null){_iterator163["return"]();}case 21:_context22.prev=21;if(!_didIteratorError163){_context22.next=24;break;}throw _iteratorError163;case 24:return _context22.finish(21);case 25:return _context22.finish(18);case 26:case"end":return _context22.stop();}}},getValidRanges,this,[[4,14,18,26],[19,,21,25]]);})},{key:"getNearestSelectionRange",value:function getNearestSelectionRange(e){var _this51=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"both";if(this.checkChild(e,"$text")){return new qh(e);}var i,n;var o=e.getAncestors().reverse().find(function(e){return _this51.isLimit(e);})||e.root;if(t=="both"||t=="backward"){i=new Wh({boundaries:qh._createIn(o),startPosition:e,direction:"backward"});}if(t=="both"||t=="forward"){n=new Wh({boundaries:qh._createIn(o),startPosition:e});}var _iteratorNormalCompletion164=true;var _didIteratorError164=false;var _iteratorError164=undefined;try{for(var _iterator164=Tm(i,n)[Symbol.iterator](),_step164;!(_iteratorNormalCompletion164=(_step164=_iterator164.next()).done);_iteratorNormalCompletion164=true){var _e142=_step164.value;var _t132=_e142.walker==i?"elementEnd":"elementStart";var _n70=_e142.value;if(_n70.type==_t132&&this.isObject(_n70.item)){return qh._createOn(_n70.item);}if(this.checkChild(_n70.nextPosition,"$text")){return new qh(_n70.nextPosition);}}}catch(err){_didIteratorError164=true;_iteratorError164=err;}finally{try{if(!_iteratorNormalCompletion164&&_iterator164["return"]!=null){_iterator164["return"]();}}finally{if(_didIteratorError164){throw _iteratorError164;}}}return null;}},{key:"findAllowedParent",value:function findAllowedParent(e,t){var i=e.parent;while(i){if(this.checkChild(i,t)){return i;}if(this.isLimit(i)){return null;}i=i.parent;}return null;}},{key:"removeDisallowedAttributes",value:function removeDisallowedAttributes(e,t){var _iteratorNormalCompletion165=true;var _didIteratorError165=false;var _iteratorError165=undefined;try{for(var _iterator165=e[Symbol.iterator](),_step165;!(_iteratorNormalCompletion165=(_step165=_iterator165.next()).done);_iteratorNormalCompletion165=true){var _i139=_step165.value;if(_i139.is("text")){Em(this,_i139,t);}else{var _e143=qh._createIn(_i139);var _n71=_e143.getPositions();var _iteratorNormalCompletion166=true;var _didIteratorError166=false;var _iteratorError166=undefined;try{for(var _iterator166=_n71[Symbol.iterator](),_step166;!(_iteratorNormalCompletion166=(_step166=_iterator166.next()).done);_iteratorNormalCompletion166=true){var _e144=_step166.value;var _i140=_e144.nodeBefore||_e144.parent;Em(this,_i140,t);}}catch(err){_didIteratorError166=true;_iteratorError166=err;}finally{try{if(!_iteratorNormalCompletion166&&_iterator166["return"]!=null){_iterator166["return"]();}}finally{if(_didIteratorError166){throw _iteratorError166;}}}}}}catch(err){_didIteratorError165=true;_iteratorError165=err;}finally{try{if(!_iteratorNormalCompletion165&&_iterator165["return"]!=null){_iterator165["return"]();}}finally{if(_didIteratorError165){throw _iteratorError165;}}}}},{key:"createContext",value:function createContext(e){return new hm(e);}},{key:"_clearCache",value:function _clearCache(){this._compiledDefinitions=null;}},{key:"_compile",value:function _compile(){var e={};var t=this._sourceDefinitions;var i=Object.keys(t);for(var _i142=0,_i141=i;_i142<_i141.length;_i142++){var _n72=_i141[_i142];e[_n72]=fm(t[_n72],_n72);}for(var _i144=0,_i143=i;_i144<_i143.length;_i144++){var _t133=_i143[_i144];mm(e,_t133);}for(var _i146=0,_i145=i;_i146<_i145.length;_i146++){var _t134=_i145[_i146];gm(e,_t134);}for(var _i148=0,_i147=i;_i148<_i147.length;_i148++){var _t135=_i147[_i148];pm(e,_t135);bm(e,_t135);}for(var _i150=0,_i149=i;_i150<_i149.length;_i150++){var _t136=_i149[_i150];wm(e,_t136);_m(e,_t136);}this._compiledDefinitions=e;}},{key:"_checkContextMatch",value:function _checkContextMatch(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:t.length-1;var n=t.getItem(i);if(e.allowIn.includes(n.name)){if(i==0){return true;}else{var _e145=this.getDefinition(n);return this._checkContextMatch(_e145,t,i-1);}}else{return false;}}},{key:"_getValidRangesForRange",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _getValidRangesForRange(e,t){var i,n,_iteratorNormalCompletion167,_didIteratorError167,_iteratorError167,_iterator167,_step167,_o39;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _getValidRangesForRange$(_context23){while(1){switch(_context23.prev=_context23.next){case 0:i=e.start;n=e.start;_iteratorNormalCompletion167=true;_didIteratorError167=false;_iteratorError167=undefined;_context23.prev=5;_iterator167=e.getItems({shallow:true})[Symbol.iterator]();case 7:if(_iteratorNormalCompletion167=(_step167=_iterator167.next()).done){_context23.next=20;break;}_o39=_step167.value;if(!_o39.is("element")){_context23.next=11;break;}return _context23.delegateYield(this._getValidRangesForRange(qh._createIn(_o39),t),"t0",11);case 11:if(this.checkAttribute(_o39,t)){_context23.next=16;break;}if(i.isEqual(n)){_context23.next=15;break;}_context23.next=15;return new qh(i,n);case 15:i=$h._createAfter(_o39);case 16:n=$h._createAfter(_o39);case 17:_iteratorNormalCompletion167=true;_context23.next=7;break;case 20:_context23.next=26;break;case 22:_context23.prev=22;_context23.t1=_context23["catch"](5);_didIteratorError167=true;_iteratorError167=_context23.t1;case 26:_context23.prev=26;_context23.prev=27;if(!_iteratorNormalCompletion167&&_iterator167["return"]!=null){_iterator167["return"]();}case 29:_context23.prev=29;if(!_didIteratorError167){_context23.next=32;break;}throw _iteratorError167;case 32:return _context23.finish(29);case 33:return _context23.finish(26);case 34:if(i.isEqual(n)){_context23.next=37;break;}_context23.next=37;return new qh(i,n);case 37:case"end":return _context23.stop();}}},_getValidRangesForRange,this,[[5,22,26,34],[27,,29,33]]);})}]);return um;}();kr(um,Jc);var hm=/*#__PURE__*/function(){function hm(e){_classCallCheck(this,hm);if(e instanceof hm){return e;}if(typeof e=="string"){e=[e];}else if(!Array.isArray(e)){e=e.getAncestors({includeSelf:true});}if(e[0]&&typeof e[0]!="string"&&e[0].is("documentFragment")){e.shift();}this._items=e.map(Cm);}_createClass(hm,[{key:Symbol.iterator,value:function value(){return this._items[Symbol.iterator]();}},{key:"push",value:function push(e){var t=new hm([e]);t._items=[].concat(_toConsumableArray(this._items),_toConsumableArray(t._items));return t;}},{key:"getItem",value:function getItem(e){return this._items[e];}},{key:"getNames",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getNames(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getNames$(_context24){while(1){switch(_context24.prev=_context24.next){case 0:return _context24.delegateYield(this._items.map(function(e){return e.name;}),"t0",1);case 1:case"end":return _context24.stop();}}},getNames,this);})},{key:"endsWith",value:function endsWith(e){return Array.from(this.getNames()).join(" ").endsWith(e);}},{key:"startsWith",value:function startsWith(e){return Array.from(this.getNames()).join(" ").startsWith(e);}},{key:"length",get:function get(){return this._items.length;}},{key:"last",get:function get(){return this._items[this._items.length-1];}}]);return hm;}();function fm(e,t){var i={name:t,allowIn:[],allowContentOf:[],allowWhere:[],allowAttributes:[],allowAttributesOf:[],inheritTypesFrom:[]};vm(e,i);km(e,i,"allowIn");km(e,i,"allowContentOf");km(e,i,"allowWhere");km(e,i,"allowAttributes");km(e,i,"allowAttributesOf");km(e,i,"inheritTypesFrom");ym(e,i);return i;}function mm(e,t){var _iteratorNormalCompletion168=true;var _didIteratorError168=false;var _iteratorError168=undefined;try{for(var _iterator168=e[t].allowContentOf[Symbol.iterator](),_step168;!(_iteratorNormalCompletion168=(_step168=_iterator168.next()).done);_iteratorNormalCompletion168=true){var _i151=_step168.value;if(e[_i151]){var _n73=xm(e,_i151);_n73.forEach(function(e){e.allowIn.push(t);});}}}catch(err){_didIteratorError168=true;_iteratorError168=err;}finally{try{if(!_iteratorNormalCompletion168&&_iterator168["return"]!=null){_iterator168["return"]();}}finally{if(_didIteratorError168){throw _iteratorError168;}}}delete e[t].allowContentOf;}function gm(e,t){var _iteratorNormalCompletion169=true;var _didIteratorError169=false;var _iteratorError169=undefined;try{for(var _iterator169=e[t].allowWhere[Symbol.iterator](),_step169;!(_iteratorNormalCompletion169=(_step169=_iterator169.next()).done);_iteratorNormalCompletion169=true){var _i152=_step169.value;var _n74=e[_i152];if(_n74){var _e$t$allowIn;var _i153=_n74.allowIn;(_e$t$allowIn=e[t].allowIn).push.apply(_e$t$allowIn,_toConsumableArray(_i153));}}}catch(err){_didIteratorError169=true;_iteratorError169=err;}finally{try{if(!_iteratorNormalCompletion169&&_iterator169["return"]!=null){_iterator169["return"]();}}finally{if(_didIteratorError169){throw _iteratorError169;}}}delete e[t].allowWhere;}function pm(e,t){var _iteratorNormalCompletion170=true;var _didIteratorError170=false;var _iteratorError170=undefined;try{for(var _iterator170=e[t].allowAttributesOf[Symbol.iterator](),_step170;!(_iteratorNormalCompletion170=(_step170=_iterator170.next()).done);_iteratorNormalCompletion170=true){var _i154=_step170.value;var _n75=e[_i154];if(_n75){var _e$t$allowAttributes;var _i155=_n75.allowAttributes;(_e$t$allowAttributes=e[t].allowAttributes).push.apply(_e$t$allowAttributes,_toConsumableArray(_i155));}}}catch(err){_didIteratorError170=true;_iteratorError170=err;}finally{try{if(!_iteratorNormalCompletion170&&_iterator170["return"]!=null){_iterator170["return"]();}}finally{if(_didIteratorError170){throw _iteratorError170;}}}delete e[t].allowAttributesOf;}function bm(e,t){var i=e[t];var _iteratorNormalCompletion171=true;var _didIteratorError171=false;var _iteratorError171=undefined;try{for(var _iterator171=i.inheritTypesFrom[Symbol.iterator](),_step171;!(_iteratorNormalCompletion171=(_step171=_iterator171.next()).done);_iteratorNormalCompletion171=true){var _t137=_step171.value;var _n76=e[_t137];if(_n76){var _e146=Object.keys(_n76).filter(function(e){return e.startsWith("is");});var _iteratorNormalCompletion172=true;var _didIteratorError172=false;var _iteratorError172=undefined;try{for(var _iterator172=_e146[Symbol.iterator](),_step172;!(_iteratorNormalCompletion172=(_step172=_iterator172.next()).done);_iteratorNormalCompletion172=true){var _t138=_step172.value;if(!(_t138 in i)){i[_t138]=_n76[_t138];}}}catch(err){_didIteratorError172=true;_iteratorError172=err;}finally{try{if(!_iteratorNormalCompletion172&&_iterator172["return"]!=null){_iterator172["return"]();}}finally{if(_didIteratorError172){throw _iteratorError172;}}}}}}catch(err){_didIteratorError171=true;_iteratorError171=err;}finally{try{if(!_iteratorNormalCompletion171&&_iterator171["return"]!=null){_iterator171["return"]();}}finally{if(_didIteratorError171){throw _iteratorError171;}}}delete i.inheritTypesFrom;}function wm(e,t){var i=e[t];var n=i.allowIn.filter(function(t){return e[t];});i.allowIn=Array.from(new Set(n));}function _m(e,t){var i=e[t];i.allowAttributes=Array.from(new Set(i.allowAttributes));}function vm(e,t){var _iteratorNormalCompletion173=true;var _didIteratorError173=false;var _iteratorError173=undefined;try{for(var _iterator173=e[Symbol.iterator](),_step173;!(_iteratorNormalCompletion173=(_step173=_iterator173.next()).done);_iteratorNormalCompletion173=true){var _i156=_step173.value;var _e147=Object.keys(_i156).filter(function(e){return e.startsWith("is");});var _iteratorNormalCompletion174=true;var _didIteratorError174=false;var _iteratorError174=undefined;try{for(var _iterator174=_e147[Symbol.iterator](),_step174;!(_iteratorNormalCompletion174=(_step174=_iterator174.next()).done);_iteratorNormalCompletion174=true){var _n77=_step174.value;t[_n77]=_i156[_n77];}}catch(err){_didIteratorError174=true;_iteratorError174=err;}finally{try{if(!_iteratorNormalCompletion174&&_iterator174["return"]!=null){_iterator174["return"]();}}finally{if(_didIteratorError174){throw _iteratorError174;}}}}}catch(err){_didIteratorError173=true;_iteratorError173=err;}finally{try{if(!_iteratorNormalCompletion173&&_iterator173["return"]!=null){_iterator173["return"]();}}finally{if(_didIteratorError173){throw _iteratorError173;}}}}function km(e,t,i){var _iteratorNormalCompletion175=true;var _didIteratorError175=false;var _iteratorError175=undefined;try{for(var _iterator175=e[Symbol.iterator](),_step175;!(_iteratorNormalCompletion175=(_step175=_iterator175.next()).done);_iteratorNormalCompletion175=true){var _n78=_step175.value;if(typeof _n78[i]=="string"){t[i].push(_n78[i]);}else if(Array.isArray(_n78[i])){var _t$i;(_t$i=t[i]).push.apply(_t$i,_toConsumableArray(_n78[i]));}}}catch(err){_didIteratorError175=true;_iteratorError175=err;}finally{try{if(!_iteratorNormalCompletion175&&_iterator175["return"]!=null){_iterator175["return"]();}}finally{if(_didIteratorError175){throw _iteratorError175;}}}}function ym(e,t){var _iteratorNormalCompletion176=true;var _didIteratorError176=false;var _iteratorError176=undefined;try{for(var _iterator176=e[Symbol.iterator](),_step176;!(_iteratorNormalCompletion176=(_step176=_iterator176.next()).done);_iteratorNormalCompletion176=true){var _i157=_step176.value;var _e148=_i157.inheritAllFrom;if(_e148){t.allowContentOf.push(_e148);t.allowWhere.push(_e148);t.allowAttributesOf.push(_e148);t.inheritTypesFrom.push(_e148);}}}catch(err){_didIteratorError176=true;_iteratorError176=err;}finally{try{if(!_iteratorNormalCompletion176&&_iterator176["return"]!=null){_iterator176["return"]();}}finally{if(_didIteratorError176){throw _iteratorError176;}}}}function xm(e,t){var i=e[t];return Am(e).filter(function(e){return e.allowIn.includes(i.name);});}function Am(e){return Object.keys(e).map(function(t){return e[t];});}function Cm(e){if(typeof e=="string"){return{name:e,getAttributeKeys:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getAttributeKeys(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getAttributeKeys$(_context25){while(1){switch(_context25.prev=_context25.next){case 0:case"end":return _context25.stop();}}},getAttributeKeys);}),getAttribute:function getAttribute(){}};}else{return{name:e.is("element")?e.name:"$text",getAttributeKeys:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getAttributeKeys(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getAttributeKeys$(_context26){while(1){switch(_context26.prev=_context26.next){case 0:return _context26.delegateYield(e.getAttributeKeys(),"t0",1);case 1:case"end":return _context26.stop();}}},getAttributeKeys);}),getAttribute:function getAttribute(t){return e.getAttribute(t);}};}}function Tm(e,t){var i,_t139,_e149;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function Tm$(_context27){while(1){switch(_context27.prev=_context27.next){case 0:i=false;case 1:if(i){_context27.next=17;break;}i=true;if(!e){_context27.next=9;break;}_t139=e.next();if(_t139.done){_context27.next=9;break;}i=false;_context27.next=9;return{walker:e,value:_t139.value};case 9:if(!t){_context27.next=15;break;}_e149=t.next();if(_e149.done){_context27.next=15;break;}i=false;_context27.next=15;return{walker:t,value:_e149.value};case 15:_context27.next=1;break;case 17:case"end":return _context27.stop();}}},_marked);}function Mm(e){var _iteratorNormalCompletion177,_didIteratorError177,_iteratorError177,_iterator177,_step177,_t140;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function Mm$(_context28){while(1){switch(_context28.prev=_context28.next){case 0:_iteratorNormalCompletion177=true;_didIteratorError177=false;_iteratorError177=undefined;_context28.prev=3;_iterator177=e[Symbol.iterator]();case 5:if(_iteratorNormalCompletion177=(_step177=_iterator177.next()).done){_context28.next=11;break;}_t140=_step177.value;return _context28.delegateYield(_t140.getMinimalFlatRanges(),"t0",8);case 8:_iteratorNormalCompletion177=true;_context28.next=5;break;case 11:_context28.next=17;break;case 13:_context28.prev=13;_context28.t1=_context28["catch"](3);_didIteratorError177=true;_iteratorError177=_context28.t1;case 17:_context28.prev=17;_context28.prev=18;if(!_iteratorNormalCompletion177&&_iterator177["return"]!=null){_iterator177["return"]();}case 20:_context28.prev=20;if(!_didIteratorError177){_context28.next=23;break;}throw _iteratorError177;case 23:return _context28.finish(20);case 24:return _context28.finish(17);case 25:case"end":return _context28.stop();}}},_marked2,null,[[3,13,17,25],[18,,20,24]]);}function Em(e,t,i){var _iteratorNormalCompletion178=true;var _didIteratorError178=false;var _iteratorError178=undefined;try{for(var _iterator178=t.getAttributeKeys()[Symbol.iterator](),_step178;!(_iteratorNormalCompletion178=(_step178=_iterator178.next()).done);_iteratorNormalCompletion178=true){var _n79=_step178.value;if(!e.checkAttribute(t,_n79)){i.removeAttribute(_n79,t);}}}catch(err){_didIteratorError178=true;_iteratorError178=err;}finally{try{if(!_iteratorNormalCompletion178&&_iterator178["return"]!=null){_iterator178["return"]();}}finally{if(_didIteratorError178){throw _iteratorError178;}}}}var Pm=/*#__PURE__*/function(){function Pm(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,Pm);this._splitParts=new Map();this._modelCursor=null;this.conversionApi=Object.assign({},e);this.conversionApi.convertItem=this._convertItem.bind(this);this.conversionApi.convertChildren=this._convertChildren.bind(this);this.conversionApi.splitToAllowedParent=this._splitToAllowedParent.bind(this);this.conversionApi.getSplitParts=this._getSplitParts.bind(this);}_createClass(Pm,[{key:"convert",value:function convert(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:["$root"];this.fire("viewCleanup",e);this._modelCursor=Im(i,t);this.conversionApi.writer=t;this.conversionApi.consumable=lm.createFrom(e);this.conversionApi.store={};var _this$_convertItem=this._convertItem(e,this._modelCursor),n=_this$_convertItem.modelRange;var o=t.createDocumentFragment();if(n){this._removeEmptyElements();for(var _i158=0,_Array$from5=Array.from(this._modelCursor.parent.getChildren());_i158<_Array$from5.length;_i158++){var _e150=_Array$from5[_i158];t.append(_e150,o);}o.markers=Sm(o,t);}this._modelCursor=null;this._splitParts.clear();this.conversionApi.writer=null;this.conversionApi.store=null;return o;}},{key:"_convertItem",value:function _convertItem(e,t){var i=Object.assign({viewItem:e,modelCursor:t,modelRange:null});if(e.is("element")){this.fire("element:"+e.name,i,this.conversionApi);}else if(e.is("text")){this.fire("text",i,this.conversionApi);}else{this.fire("documentFragment",i,this.conversionApi);}if(i.modelRange&&!(i.modelRange instanceof qh)){throw new rr["b"]("view-conversion-dispatcher-incorrect-result: Incorrect conversion result was dropped.",this);}return{modelRange:i.modelRange,modelCursor:i.modelCursor};}},{key:"_convertChildren",value:function _convertChildren(e,t){var i=new qh(t);var n=t;for(var _i159=0,_Array$from6=Array.from(e.getChildren());_i159<_Array$from6.length;_i159++){var _t141=_Array$from6[_i159];var _e151=this._convertItem(_t141,n);if(_e151.modelRange instanceof qh){i.end=_e151.modelRange.end;n=_e151.modelCursor;}}return{modelRange:i,modelCursor:n};}},{key:"_splitToAllowedParent",value:function _splitToAllowedParent(e,t){var i=this.conversionApi.schema.findAllowedParent(t,e);if(!i){return null;}if(i===t.parent){return{position:t};}if(this._modelCursor.parent.getAncestors().includes(i)){return null;}var n=this.conversionApi.writer.split(t,i);var o=[];var _iteratorNormalCompletion179=true;var _didIteratorError179=false;var _iteratorError179=undefined;try{for(var _iterator179=n.range.getWalker()[Symbol.iterator](),_step179;!(_iteratorNormalCompletion179=(_step179=_iterator179.next()).done);_iteratorNormalCompletion179=true){var _e152=_step179.value;if(_e152.type=="elementEnd"){o.push(_e152.item);}else{var _t142=o.pop();var _i160=_e152.item;this._registerSplitPair(_t142,_i160);}}}catch(err){_didIteratorError179=true;_iteratorError179=err;}finally{try{if(!_iteratorNormalCompletion179&&_iterator179["return"]!=null){_iterator179["return"]();}}finally{if(_didIteratorError179){throw _iteratorError179;}}}return{position:n.position,cursorParent:n.range.end.parent};}},{key:"_registerSplitPair",value:function _registerSplitPair(e,t){if(!this._splitParts.has(e)){this._splitParts.set(e,[e]);}var i=this._splitParts.get(e);this._splitParts.set(t,i);i.push(t);}},{key:"_getSplitParts",value:function _getSplitParts(e){var t;if(!this._splitParts.has(e)){t=[e];}else{t=this._splitParts.get(e);}return t;}},{key:"_removeEmptyElements",value:function _removeEmptyElements(){var e=false;var _iteratorNormalCompletion180=true;var _didIteratorError180=false;var _iteratorError180=undefined;try{for(var _iterator180=this._splitParts.keys()[Symbol.iterator](),_step180;!(_iteratorNormalCompletion180=(_step180=_iterator180.next()).done);_iteratorNormalCompletion180=true){var _t143=_step180.value;if(_t143.isEmpty){this.conversionApi.writer.remove(_t143);this._splitParts["delete"](_t143);e=true;}}}catch(err){_didIteratorError180=true;_iteratorError180=err;}finally{try{if(!_iteratorNormalCompletion180&&_iterator180["return"]!=null){_iterator180["return"]();}}finally{if(_didIteratorError180){throw _iteratorError180;}}}if(e){this._removeEmptyElements();}}}]);return Pm;}();kr(Pm,dr);function Sm(e,t){var i=new Set();var n=new Map();var o=qh._createIn(e).getItems();var _iteratorNormalCompletion181=true;var _didIteratorError181=false;var _iteratorError181=undefined;try{for(var _iterator181=o[Symbol.iterator](),_step181;!(_iteratorNormalCompletion181=(_step181=_iterator181.next()).done);_iteratorNormalCompletion181=true){var _e153=_step181.value;if(_e153.name=="$marker"){i.add(_e153);}}}catch(err){_didIteratorError181=true;_iteratorError181=err;}finally{try{if(!_iteratorNormalCompletion181&&_iterator181["return"]!=null){_iterator181["return"]();}}finally{if(_didIteratorError181){throw _iteratorError181;}}}var _iteratorNormalCompletion182=true;var _didIteratorError182=false;var _iteratorError182=undefined;try{for(var _iterator182=i[Symbol.iterator](),_step182;!(_iteratorNormalCompletion182=(_step182=_iterator182.next()).done);_iteratorNormalCompletion182=true){var _e154=_step182.value;var _i161=_e154.getAttribute("data-name");var _o40=t.createPositionBefore(_e154);if(!n.has(_i161)){n.set(_i161,new qh(_o40.clone()));}else{n.get(_i161).end=_o40.clone();}t.remove(_e154);}}catch(err){_didIteratorError182=true;_iteratorError182=err;}finally{try{if(!_iteratorNormalCompletion182&&_iterator182["return"]!=null){_iterator182["return"]();}}finally{if(_didIteratorError182){throw _iteratorError182;}}}return n;}function Im(e,t){var i;var _iteratorNormalCompletion183=true;var _didIteratorError183=false;var _iteratorError183=undefined;try{for(var _iterator183=new hm(e)[Symbol.iterator](),_step183;!(_iteratorNormalCompletion183=(_step183=_iterator183.next()).done);_iteratorNormalCompletion183=true){var _n80=_step183.value;var _e155={};var _iteratorNormalCompletion184=true;var _didIteratorError184=false;var _iteratorError184=undefined;try{for(var _iterator184=_n80.getAttributeKeys()[Symbol.iterator](),_step184;!(_iteratorNormalCompletion184=(_step184=_iterator184.next()).done);_iteratorNormalCompletion184=true){var _t144=_step184.value;_e155[_t144]=_n80.getAttribute(_t144);}}catch(err){_didIteratorError184=true;_iteratorError184=err;}finally{try{if(!_iteratorNormalCompletion184&&_iterator184["return"]!=null){_iterator184["return"]();}}finally{if(_didIteratorError184){throw _iteratorError184;}}}var _o41=t.createElement(_n80.name,_e155);if(i){t.append(_o41,i);}i=$h._createAt(_o41,0);}}catch(err){_didIteratorError183=true;_iteratorError183=err;}finally{try{if(!_iteratorNormalCompletion183&&_iterator183["return"]!=null){_iterator183["return"]();}}finally{if(_didIteratorError183){throw _iteratorError183;}}}return i;}var Nm=/*#__PURE__*/function(){function Nm(e,t){var _this52=this;_classCallCheck(this,Nm);this.model=e;this.stylesProcessor=t;this.processor;this.mapper=new Yh();this.downcastDispatcher=new Xh({mapper:this.mapper});this.downcastDispatcher.on("insert:$text",vf(),{priority:"lowest"});this.upcastDispatcher=new Pm({schema:e.schema});this.viewDocument=new pl(t);this._viewWriter=new ql(this.viewDocument);this.upcastDispatcher.on("text",qf(),{priority:"lowest"});this.upcastDispatcher.on("element",$f(),{priority:"lowest"});this.upcastDispatcher.on("documentFragment",$f(),{priority:"lowest"});this.decorate("init");this.on("init",function(){_this52.fire("ready");},{priority:"lowest"});}_createClass(Nm,[{key:"get",value:function get(e){var _ref15=e||{},_ref15$rootName=_ref15.rootName,t=_ref15$rootName===void 0?"main":_ref15$rootName,_ref15$trim=_ref15.trim,i=_ref15$trim===void 0?"empty":_ref15$trim;if(!this._checkIfRootsExists([t])){throw new rr["b"]("datacontroller-get-non-existent-root: Attempting to get data from a non-existing root.",this);}var n=this.model.document.getRoot(t);if(i==="empty"&&!this.model.hasContent(n,{ignoreWhitespaces:true})){return"";}return this.stringify(n);}},{key:"stringify",value:function stringify(e){var t=this.toView(e);return this.processor.toData(t);}},{key:"toView",value:function toView(e){var t=this.viewDocument;var i=this._viewWriter;this.mapper.clearBindings();var n=qh._createIn(e);var o=new Ul(t);this.mapper.bindElements(e,o);this.downcastDispatcher.convertInsert(n,i);if(!e.is("documentFragment")){var _t145=Om(e);var _iteratorNormalCompletion185=true;var _didIteratorError185=false;var _iteratorError185=undefined;try{for(var _iterator185=_t145[Symbol.iterator](),_step185;!(_iteratorNormalCompletion185=(_step185=_iterator185.next()).done);_iteratorNormalCompletion185=true){var _step185$value=_slicedToArray(_step185.value,2),_e156=_step185$value[0],_n81=_step185$value[1];this.downcastDispatcher.convertMarkerAdd(_e156,_n81,i);}}catch(err){_didIteratorError185=true;_iteratorError185=err;}finally{try{if(!_iteratorNormalCompletion185&&_iterator185["return"]!=null){_iterator185["return"]();}}finally{if(_didIteratorError185){throw _iteratorError185;}}}}return o;}},{key:"init",value:function init(e){var _this53=this;if(this.model.document.version){throw new rr["b"]("datacontroller-init-document-not-empty: Trying to set initial data to not empty document.",this);}var t={};if(typeof e==="string"){t.main=e;}else{t=e;}if(!this._checkIfRootsExists(Object.keys(t))){throw new rr["b"]("datacontroller-init-non-existent-root: Attempting to init data on a non-existing root.",this);}this.model.enqueueChange("transparent",function(e){for(var _i162=0,_Object$keys2=Object.keys(t);_i162<_Object$keys2.length;_i162++){var _i163=_Object$keys2[_i162];var _n82=_this53.model.document.getRoot(_i163);e.insert(_this53.parse(t[_i163],_n82),_n82,0);}});return Promise.resolve();}},{key:"set",value:function set(e){var _this54=this;var t={};if(typeof e==="string"){t.main=e;}else{t=e;}if(!this._checkIfRootsExists(Object.keys(t))){throw new rr["b"]("datacontroller-set-non-existent-root: Attempting to set data on a non-existing root.",this);}this.model.enqueueChange("transparent",function(e){e.setSelection(null);e.removeSelectionAttribute(_this54.model.document.selection.getAttributeKeys());for(var _i164=0,_Object$keys3=Object.keys(t);_i164<_Object$keys3.length;_i164++){var _i165=_Object$keys3[_i164];var _n83=_this54.model.document.getRoot(_i165);e.remove(e.createRangeIn(_n83));e.insert(_this54.parse(t[_i165],_n83),_n83,0);}});}},{key:"parse",value:function parse(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"$root";var i=this.processor.toView(e);return this.toModel(i,t);}},{key:"toModel",value:function toModel(e){var _this55=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"$root";return this.model.change(function(i){return _this55.upcastDispatcher.convert(e,i,t);});}},{key:"addStyleProcessorRules",value:function addStyleProcessorRules(e){e(this.stylesProcessor);}},{key:"destroy",value:function destroy(){this.stopListening();}},{key:"_checkIfRootsExists",value:function _checkIfRootsExists(e){var _iteratorNormalCompletion186=true;var _didIteratorError186=false;var _iteratorError186=undefined;try{for(var _iterator186=e[Symbol.iterator](),_step186;!(_iteratorNormalCompletion186=(_step186=_iterator186.next()).done);_iteratorNormalCompletion186=true){var _t146=_step186.value;if(!this.model.document.getRootNames().includes(_t146)){return false;}}}catch(err){_didIteratorError186=true;_iteratorError186=err;}finally{try{if(!_iteratorNormalCompletion186&&_iterator186["return"]!=null){_iterator186["return"]();}}finally{if(_didIteratorError186){throw _iteratorError186;}}}return true;}}]);return Nm;}();kr(Nm,Jc);function Om(e){var t=[];var i=e.root.document;if(!i){return[];}var n=qh._createIn(e);var _iteratorNormalCompletion187=true;var _didIteratorError187=false;var _iteratorError187=undefined;try{for(var _iterator187=i.model.markers[Symbol.iterator](),_step187;!(_iteratorNormalCompletion187=(_step187=_iterator187.next()).done);_iteratorNormalCompletion187=true){var _e157=_step187.value;var _i166=n.getIntersection(_e157.getRange());if(_i166){t.push([_e157.name,_i166]);}}}catch(err){_didIteratorError187=true;_iteratorError187=err;}finally{try{if(!_iteratorNormalCompletion187&&_iterator187["return"]!=null){_iterator187["return"]();}}finally{if(_didIteratorError187){throw _iteratorError187;}}}return t;}var Rm=/*#__PURE__*/function(){function Rm(e,t){_classCallCheck(this,Rm);this._helpers=new Map();this._downcast=Array.isArray(e)?e:[e];this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:true});this._upcast=Array.isArray(t)?t:[t];this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:false});}_createClass(Rm,[{key:"addAlias",value:function addAlias(e,t){var i=this._downcast.includes(t);var n=this._upcast.includes(t);if(!n&&!i){throw new rr["b"]("conversion-add-alias-dispatcher-not-registered: "+"Trying to register and alias for a dispatcher that nas not been registered.",this);}this._createConversionHelpers({name:e,dispatchers:[t],isDowncast:i});}},{key:"for",value:function _for(e){if(!this._helpers.has(e)){throw new rr["b"]("conversion-for-unknown-group: Trying to add a converter to an unknown dispatchers group.",this);}return this._helpers.get(e);}},{key:"elementToElement",value:function elementToElement(e){this["for"]("downcast").elementToElement(e);var _iteratorNormalCompletion188=true;var _didIteratorError188=false;var _iteratorError188=undefined;try{for(var _iterator188=Lm(e)[Symbol.iterator](),_step188;!(_iteratorNormalCompletion188=(_step188=_iterator188.next()).done);_iteratorNormalCompletion188=true){var _ref17=_step188.value;var _t147=_ref17.model,_i167=_ref17.view;this["for"]("upcast").elementToElement({model:_t147,view:_i167,converterPriority:e.converterPriority});}}catch(err){_didIteratorError188=true;_iteratorError188=err;}finally{try{if(!_iteratorNormalCompletion188&&_iterator188["return"]!=null){_iterator188["return"]();}}finally{if(_didIteratorError188){throw _iteratorError188;}}}}},{key:"attributeToElement",value:function attributeToElement(e){this["for"]("downcast").attributeToElement(e);var _iteratorNormalCompletion189=true;var _didIteratorError189=false;var _iteratorError189=undefined;try{for(var _iterator189=Lm(e)[Symbol.iterator](),_step189;!(_iteratorNormalCompletion189=(_step189=_iterator189.next()).done);_iteratorNormalCompletion189=true){var _ref19=_step189.value;var _t148=_ref19.model,_i168=_ref19.view;this["for"]("upcast").elementToAttribute({view:_i168,model:_t148,converterPriority:e.converterPriority});}}catch(err){_didIteratorError189=true;_iteratorError189=err;}finally{try{if(!_iteratorNormalCompletion189&&_iterator189["return"]!=null){_iterator189["return"]();}}finally{if(_didIteratorError189){throw _iteratorError189;}}}}},{key:"attributeToAttribute",value:function attributeToAttribute(e){this["for"]("downcast").attributeToAttribute(e);var _iteratorNormalCompletion190=true;var _didIteratorError190=false;var _iteratorError190=undefined;try{for(var _iterator190=Lm(e)[Symbol.iterator](),_step190;!(_iteratorNormalCompletion190=(_step190=_iterator190.next()).done);_iteratorNormalCompletion190=true){var _ref21=_step190.value;var _t149=_ref21.model,_i169=_ref21.view;this["for"]("upcast").attributeToAttribute({view:_i169,model:_t149});}}catch(err){_didIteratorError190=true;_iteratorError190=err;}finally{try{if(!_iteratorNormalCompletion190&&_iterator190["return"]!=null){_iterator190["return"]();}}finally{if(_didIteratorError190){throw _iteratorError190;}}}}},{key:"_createConversionHelpers",value:function _createConversionHelpers(_ref22){var e=_ref22.name,t=_ref22.dispatchers,i=_ref22.isDowncast;if(this._helpers.has(e)){throw new rr["b"]("conversion-group-exists: Trying to register a group name that has already been registered.",this);}var n=i?new _f(t):new Uf(t);this._helpers.set(e,n);}}]);return Rm;}();function Lm(e){var _iteratorNormalCompletion191,_didIteratorError191,_iteratorError191,_iterator191,_step191,_t150,_i170,_n84,_o42;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function Lm$(_context29){while(1){switch(_context29.prev=_context29.next){case 0:if(!e.model.values){_context29.next=31;break;}_iteratorNormalCompletion191=true;_didIteratorError191=false;_iteratorError191=undefined;_context29.prev=4;_iterator191=e.model.values[Symbol.iterator]();case 6:if(_iteratorNormalCompletion191=(_step191=_iterator191.next()).done){_context29.next=15;break;}_t150=_step191.value;_i170={key:e.model.key,value:_t150};_n84=e.view[_t150];_o42=e.upcastAlso?e.upcastAlso[_t150]:undefined;return _context29.delegateYield(zm(_i170,_n84,_o42),"t0",12);case 12:_iteratorNormalCompletion191=true;_context29.next=6;break;case 15:_context29.next=21;break;case 17:_context29.prev=17;_context29.t1=_context29["catch"](4);_didIteratorError191=true;_iteratorError191=_context29.t1;case 21:_context29.prev=21;_context29.prev=22;if(!_iteratorNormalCompletion191&&_iterator191["return"]!=null){_iterator191["return"]();}case 24:_context29.prev=24;if(!_didIteratorError191){_context29.next=27;break;}throw _iteratorError191;case 27:return _context29.finish(24);case 28:return _context29.finish(21);case 29:_context29.next=32;break;case 31:return _context29.delegateYield(zm(e.model,e.view,e.upcastAlso),"t2",32);case 32:case"end":return _context29.stop();}}},_marked3,null,[[4,17,21,29],[22,,24,28]]);}function zm(e,t,i){var _iteratorNormalCompletion192,_didIteratorError192,_iteratorError192,_iterator192,_step192,_t151;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function zm$(_context30){while(1){switch(_context30.prev=_context30.next){case 0:_context30.next=2;return{model:e,view:t};case 2:if(!i){_context30.next=30;break;}i=Array.isArray(i)?i:[i];_iteratorNormalCompletion192=true;_didIteratorError192=false;_iteratorError192=undefined;_context30.prev=7;_iterator192=i[Symbol.iterator]();case 9:if(_iteratorNormalCompletion192=(_step192=_iterator192.next()).done){_context30.next=16;break;}_t151=_step192.value;_context30.next=13;return{model:e,view:_t151};case 13:_iteratorNormalCompletion192=true;_context30.next=9;break;case 16:_context30.next=22;break;case 18:_context30.prev=18;_context30.t0=_context30["catch"](7);_didIteratorError192=true;_iteratorError192=_context30.t0;case 22:_context30.prev=22;_context30.prev=23;if(!_iteratorNormalCompletion192&&_iterator192["return"]!=null){_iterator192["return"]();}case 25:_context30.prev=25;if(!_didIteratorError192){_context30.next=28;break;}throw _iteratorError192;case 28:return _context30.finish(25);case 29:return _context30.finish(22);case 30:case"end":return _context30.stop();}}},_marked4,null,[[7,18,22,30],[23,,25,29]]);}var Dm=/*#__PURE__*/function(){function Dm(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"default";_classCallCheck(this,Dm);this.operations=[];this.type=e;}_createClass(Dm,[{key:"addOperation",value:function addOperation(e){e.batch=this;this.operations.push(e);return e;}},{key:"baseVersion",get:function get(){var _iteratorNormalCompletion193=true;var _didIteratorError193=false;var _iteratorError193=undefined;try{for(var _iterator193=this.operations[Symbol.iterator](),_step193;!(_iteratorNormalCompletion193=(_step193=_iterator193.next()).done);_iteratorNormalCompletion193=true){var _e158=_step193.value;if(_e158.baseVersion!==null){return _e158.baseVersion;}}}catch(err){_didIteratorError193=true;_iteratorError193=err;}finally{try{if(!_iteratorNormalCompletion193&&_iterator193["return"]!=null){_iterator193["return"]();}}finally{if(_didIteratorError193){throw _iteratorError193;}}}return null;}}]);return Dm;}();var jm=/*#__PURE__*/function(){function jm(e){_classCallCheck(this,jm);this.baseVersion=e;this.isDocumentOperation=this.baseVersion!==null;this.batch=null;}_createClass(jm,[{key:"_validate",value:function _validate(){}},{key:"toJSON",value:function toJSON(){var e=Object.assign({},this);e.__className=this.constructor.className;delete e.batch;delete e.isDocumentOperation;return e;}}],[{key:"fromJSON",value:function fromJSON(e){return new this(e.baseVersion);}},{key:"className",get:function get(){return"Operation";}}]);return jm;}();var Bm=/*#__PURE__*/function(){function Bm(e){_classCallCheck(this,Bm);this.markers=new Map();this._children=new Vh();if(e){this._insertChild(0,e);}}_createClass(Bm,[{key:Symbol.iterator,value:function value(){return this.getChildren();}},{key:"is",value:function is(e){return e=="documentFragment"||e=="model:documentFragment";}},{key:"getChild",value:function getChild(e){return this._children.getNode(e);}},{key:"getChildren",value:function getChildren(){return this._children[Symbol.iterator]();}},{key:"getChildIndex",value:function getChildIndex(e){return this._children.getNodeIndex(e);}},{key:"getChildStartOffset",value:function getChildStartOffset(e){return this._children.getNodeStartOffset(e);}},{key:"getPath",value:function getPath(){return[];}},{key:"getNodeByPath",value:function getNodeByPath(e){var t=this;var _iteratorNormalCompletion194=true;var _didIteratorError194=false;var _iteratorError194=undefined;try{for(var _iterator194=e[Symbol.iterator](),_step194;!(_iteratorNormalCompletion194=(_step194=_iterator194.next()).done);_iteratorNormalCompletion194=true){var _i171=_step194.value;t=t.getChild(t.offsetToIndex(_i171));}}catch(err){_didIteratorError194=true;_iteratorError194=err;}finally{try{if(!_iteratorNormalCompletion194&&_iterator194["return"]!=null){_iterator194["return"]();}}finally{if(_didIteratorError194){throw _iteratorError194;}}}return t;}},{key:"offsetToIndex",value:function offsetToIndex(e){return this._children.offsetToIndex(e);}},{key:"toJSON",value:function toJSON(){var e=[];var _iteratorNormalCompletion195=true;var _didIteratorError195=false;var _iteratorError195=undefined;try{for(var _iterator195=this._children[Symbol.iterator](),_step195;!(_iteratorNormalCompletion195=(_step195=_iterator195.next()).done);_iteratorNormalCompletion195=true){var _t152=_step195.value;e.push(_t152.toJSON());}}catch(err){_didIteratorError195=true;_iteratorError195=err;}finally{try{if(!_iteratorNormalCompletion195&&_iterator195["return"]!=null){_iterator195["return"]();}}finally{if(_didIteratorError195){throw _iteratorError195;}}}return e;}},{key:"_appendChild",value:function _appendChild(e){this._insertChild(this.childCount,e);}},{key:"_insertChild",value:function _insertChild(e,t){var i=Vm(t);var _iteratorNormalCompletion196=true;var _didIteratorError196=false;var _iteratorError196=undefined;try{for(var _iterator196=i[Symbol.iterator](),_step196;!(_iteratorNormalCompletion196=(_step196=_iterator196.next()).done);_iteratorNormalCompletion196=true){var _e159=_step196.value;if(_e159.parent!==null){_e159._remove();}_e159.parent=this;}}catch(err){_didIteratorError196=true;_iteratorError196=err;}finally{try{if(!_iteratorNormalCompletion196&&_iterator196["return"]!=null){_iterator196["return"]();}}finally{if(_didIteratorError196){throw _iteratorError196;}}}this._children._insertNodes(e,i);}},{key:"_removeChildren",value:function _removeChildren(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var i=this._children._removeNodes(e,t);var _iteratorNormalCompletion197=true;var _didIteratorError197=false;var _iteratorError197=undefined;try{for(var _iterator197=i[Symbol.iterator](),_step197;!(_iteratorNormalCompletion197=(_step197=_iterator197.next()).done);_iteratorNormalCompletion197=true){var _e160=_step197.value;_e160.parent=null;}}catch(err){_didIteratorError197=true;_iteratorError197=err;}finally{try{if(!_iteratorNormalCompletion197&&_iterator197["return"]!=null){_iterator197["return"]();}}finally{if(_didIteratorError197){throw _iteratorError197;}}}return i;}},{key:"childCount",get:function get(){return this._children.length;}},{key:"maxOffset",get:function get(){return this._children.maxOffset;}},{key:"isEmpty",get:function get(){return this.childCount===0;}},{key:"root",get:function get(){return this;}},{key:"parent",get:function get(){return null;}}],[{key:"fromJSON",value:function fromJSON(e){var t=[];var _iteratorNormalCompletion198=true;var _didIteratorError198=false;var _iteratorError198=undefined;try{for(var _iterator198=e[Symbol.iterator](),_step198;!(_iteratorNormalCompletion198=(_step198=_iterator198.next()).done);_iteratorNormalCompletion198=true){var _i172=_step198.value;if(_i172.name){t.push(Fh.fromJSON(_i172));}else{t.push(jh.fromJSON(_i172));}}}catch(err){_didIteratorError198=true;_iteratorError198=err;}finally{try{if(!_iteratorNormalCompletion198&&_iterator198["return"]!=null){_iterator198["return"]();}}finally{if(_didIteratorError198){throw _iteratorError198;}}}return new Bm(t);}}]);return Bm;}();function Vm(e){if(typeof e=="string"){return[new jh(e)];}if(!Fr(e)){e=[e];}return Array.from(e).map(function(e){if(typeof e=="string"){return new jh(e);}if(e instanceof Bh){return new jh(e.data,e.getAttributes());}return e;});}function Fm(e,t){t=$m(t);var i=t.reduce(function(e,t){return e+t.offsetSize;},0);var n=e.parent;Ym(e);var o=e.index;n._insertChild(o,t);qm(n,o+t.length);qm(n,o);return new qh(e,e.getShiftedBy(i));}function Hm(e){if(!e.isFlat){throw new rr["b"]("operation-utils-remove-range-not-flat: "+"Trying to remove a range which starts and ends in different element.",this);}var t=e.start.parent;Ym(e.start);Ym(e.end);var i=t._removeChildren(e.start.index,e.end.index-e.start.index);qm(t,e.start.index);return i;}function Wm(e,t){if(!e.isFlat){throw new rr["b"]("operation-utils-move-range-not-flat: "+"Trying to move a range which starts and ends in different element.",this);}var i=Hm(e);t=t._getTransformedByDeletion(e.start,e.end.offset-e.start.offset);return Fm(t,i);}function Um(e,t,i){Ym(e.start);Ym(e.end);var _iteratorNormalCompletion199=true;var _didIteratorError199=false;var _iteratorError199=undefined;try{for(var _iterator199=e.getItems({shallow:true})[Symbol.iterator](),_step199;!(_iteratorNormalCompletion199=(_step199=_iterator199.next()).done);_iteratorNormalCompletion199=true){var _n85=_step199.value;var _e161=_n85.is("textProxy")?_n85.textNode:_n85;if(i!==null){_e161._setAttribute(t,i);}else{_e161._removeAttribute(t);}qm(_e161.parent,_e161.index);}}catch(err){_didIteratorError199=true;_iteratorError199=err;}finally{try{if(!_iteratorNormalCompletion199&&_iterator199["return"]!=null){_iterator199["return"]();}}finally{if(_didIteratorError199){throw _iteratorError199;}}}qm(e.end.parent,e.end.index);}function $m(e){var t=[];if(!(e instanceof Array)){e=[e];}for(var _i173=0;_i173<e.length;_i173++){if(typeof e[_i173]=="string"){t.push(new jh(e[_i173]));}else if(e[_i173]instanceof Bh){t.push(new jh(e[_i173].data,e[_i173].getAttributes()));}else if(e[_i173]instanceof Bm||e[_i173]instanceof Vh){var _iteratorNormalCompletion200=true;var _didIteratorError200=false;var _iteratorError200=undefined;try{for(var _iterator200=e[_i173][Symbol.iterator](),_step200;!(_iteratorNormalCompletion200=(_step200=_iterator200.next()).done);_iteratorNormalCompletion200=true){var _n86=_step200.value;t.push(_n86);}}catch(err){_didIteratorError200=true;_iteratorError200=err;}finally{try{if(!_iteratorNormalCompletion200&&_iterator200["return"]!=null){_iterator200["return"]();}}finally{if(_didIteratorError200){throw _iteratorError200;}}}}else if(e[_i173]instanceof Dh){t.push(e[_i173]);}}for(var _e162=1;_e162<t.length;_e162++){var _i174=t[_e162];var _n87=t[_e162-1];if(_i174 instanceof jh&&_n87 instanceof jh&&Gm(_i174,_n87)){t.splice(_e162-1,2,new jh(_n87.data+_i174.data,_n87.getAttributes()));_e162--;}}return t;}function qm(e,t){var i=e.getChild(t-1);var n=e.getChild(t);if(i&&n&&i.is("text")&&n.is("text")&&Gm(i,n)){var _o43=new jh(i.data+n.data,i.getAttributes());e._removeChildren(t-1,2);e._insertChild(t-1,_o43);}}function Ym(e){var t=e.textNode;var i=e.parent;if(t){var _n88=e.offset-t.startOffset;var _o44=t.index;i._removeChildren(_o44,1);var _s18=new jh(t.data.substr(0,_n88),t.getAttributes());var _r13=new jh(t.data.substr(_n88),t.getAttributes());i._insertChild(_o44,[_s18,_r13]);}}function Gm(e,t){var i=e.getAttributes();var n=t.getAttributes();var _iteratorNormalCompletion201=true;var _didIteratorError201=false;var _iteratorError201=undefined;try{for(var _iterator201=i[Symbol.iterator](),_step201;!(_iteratorNormalCompletion201=(_step201=_iterator201.next()).done);_iteratorNormalCompletion201=true){var _e163=_step201.value;if(_e163[1]!==t.getAttribute(_e163[0])){return false;}n.next();}}catch(err){_didIteratorError201=true;_iteratorError201=err;}finally{try{if(!_iteratorNormalCompletion201&&_iterator201["return"]!=null){_iterator201["return"]();}}finally{if(_didIteratorError201){throw _iteratorError201;}}}return n.next().done;}function Jm(e,t){return Uu(e,t);}var Xm=Jm;var Km=/*#__PURE__*/function(_jm){_inherits(Km,_jm);function Km(e,t,i,n,o){var _this56;_classCallCheck(this,Km);_this56=_possibleConstructorReturn(this,_getPrototypeOf(Km).call(this,o));_this56.range=e.clone();_this56.key=t;_this56.oldValue=i===undefined?null:i;_this56.newValue=n===undefined?null:n;return _this56;}_createClass(Km,[{key:"clone",value:function clone(){return new Km(this.range,this.key,this.oldValue,this.newValue,this.baseVersion);}},{key:"getReversed",value:function getReversed(){return new Km(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1);}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(Km.prototype),"toJSON",this).call(this);e.range=this.range.toJSON();return e;}},{key:"_validate",value:function _validate(){if(!this.range.isFlat){throw new rr["b"]("attribute-operation-range-not-flat: The range to change is not flat.",this);}var _iteratorNormalCompletion202=true;var _didIteratorError202=false;var _iteratorError202=undefined;try{for(var _iterator202=this.range.getItems({shallow:true})[Symbol.iterator](),_step202;!(_iteratorNormalCompletion202=(_step202=_iterator202.next()).done);_iteratorNormalCompletion202=true){var _e164=_step202.value;if(this.oldValue!==null&&!Xm(_e164.getAttribute(this.key),this.oldValue)){throw new rr["b"]("attribute-operation-wrong-old-value: Changed node has different attribute value than operation's "+"old attribute value.",this,{item:_e164,key:this.key,value:this.oldValue});}if(this.oldValue===null&&this.newValue!==null&&_e164.hasAttribute(this.key)){throw new rr["b"]("attribute-operation-attribute-exists: The attribute with given key already exists.",this,{node:_e164,key:this.key});}}}catch(err){_didIteratorError202=true;_iteratorError202=err;}finally{try{if(!_iteratorNormalCompletion202&&_iterator202["return"]!=null){_iterator202["return"]();}}finally{if(_didIteratorError202){throw _iteratorError202;}}}}},{key:"_execute",value:function _execute(){if(!Xm(this.oldValue,this.newValue)){Um(this.range,this.key,this.newValue);}}},{key:"type",get:function get(){if(this.oldValue===null){return"addAttribute";}else if(this.newValue===null){return"removeAttribute";}else{return"changeAttribute";}}}],[{key:"fromJSON",value:function fromJSON(e,t){return new Km(qh.fromJSON(e.range,t),e.key,e.oldValue,e.newValue,e.baseVersion);}},{key:"className",get:function get(){return"AttributeOperation";}}]);return Km;}(jm);var Qm=/*#__PURE__*/function(_jm2){_inherits(Qm,_jm2);function Qm(e,t){var _this57;_classCallCheck(this,Qm);_this57=_possibleConstructorReturn(this,_getPrototypeOf(Qm).call(this,null));_this57.sourcePosition=e.clone();_this57.howMany=t;return _this57;}_createClass(Qm,[{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(Qm.prototype),"toJSON",this).call(this);e.sourcePosition=this.sourcePosition.toJSON();return e;}},{key:"_validate",value:function _validate(){if(this.sourcePosition.root.document){throw new rr["b"]("detach-operation-on-document-node: Cannot detach document node.",this);}}},{key:"_execute",value:function _execute(){Hm(qh._createFromPositionAndShift(this.sourcePosition,this.howMany));}},{key:"type",get:function get(){return"detach";}}],[{key:"className",get:function get(){return"DetachOperation";}}]);return Qm;}(jm);var Zm=/*#__PURE__*/function(_jm3){_inherits(Zm,_jm3);function Zm(e,t,i,n){var _this58;_classCallCheck(this,Zm);_this58=_possibleConstructorReturn(this,_getPrototypeOf(Zm).call(this,n));_this58.sourcePosition=e.clone();_this58.sourcePosition.stickiness="toNext";_this58.howMany=t;_this58.targetPosition=i.clone();_this58.targetPosition.stickiness="toNone";return _this58;}_createClass(Zm,[{key:"clone",value:function clone(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion);}},{key:"getMovedRangeStart",value:function getMovedRangeStart(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany);}},{key:"getReversed",value:function getReversed(){var e=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new this.constructor(this.getMovedRangeStart(),this.howMany,e,this.baseVersion+1);}},{key:"_validate",value:function _validate(){var e=this.sourcePosition.parent;var t=this.targetPosition.parent;var i=this.sourcePosition.offset;var n=this.targetPosition.offset;if(i+this.howMany>e.maxOffset){throw new rr["b"]("move-operation-nodes-do-not-exist: The nodes which should be moved do not exist.",this);}else if(e===t&&i<n&&n<i+this.howMany){throw new rr["b"]("move-operation-range-into-itself: Trying to move a range of nodes to the inside of that range.",this);}else if(this.sourcePosition.root==this.targetPosition.root){if(Or(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())=="prefix"){var _e165=this.sourcePosition.path.length-1;if(this.targetPosition.path[_e165]>=i&&this.targetPosition.path[_e165]<i+this.howMany){throw new rr["b"]("move-operation-node-into-itself: Trying to move a range of nodes into one of nodes from that range.",this);}}}}},{key:"_execute",value:function _execute(){Wm(qh._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition);}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(Zm.prototype),"toJSON",this).call(this);e.sourcePosition=this.sourcePosition.toJSON();e.targetPosition=this.targetPosition.toJSON();return e;}},{key:"type",get:function get(){if(this.targetPosition.root.rootName=="$graveyard"){return"remove";}else if(this.sourcePosition.root.rootName=="$graveyard"){return"reinsert";}return"move";}}],[{key:"fromJSON",value:function fromJSON(e,t){var i=$h.fromJSON(e.sourcePosition,t);var n=$h.fromJSON(e.targetPosition,t);return new this(i,e.howMany,n,e.baseVersion);}},{key:"className",get:function get(){return"MoveOperation";}}]);return Zm;}(jm);var eg=/*#__PURE__*/function(_jm4){_inherits(eg,_jm4);function eg(e,t,i){var _this59;_classCallCheck(this,eg);_this59=_possibleConstructorReturn(this,_getPrototypeOf(eg).call(this,i));_this59.position=e.clone();_this59.position.stickiness="toNone";_this59.nodes=new Vh($m(t));_this59.shouldReceiveAttributes=false;return _this59;}_createClass(eg,[{key:"clone",value:function clone(){var e=new Vh(_toConsumableArray(this.nodes).map(function(e){return e._clone(true);}));var t=new eg(this.position,e,this.baseVersion);t.shouldReceiveAttributes=this.shouldReceiveAttributes;return t;}},{key:"getReversed",value:function getReversed(){var e=this.position.root.document.graveyard;var t=new $h(e,[0]);return new Zm(this.position,this.nodes.maxOffset,t,this.baseVersion+1);}},{key:"_validate",value:function _validate(){var e=this.position.parent;if(!e||e.maxOffset<this.position.offset){throw new rr["b"]("insert-operation-position-invalid: Insertion position is invalid.",this);}}},{key:"_execute",value:function _execute(){var e=this.nodes;this.nodes=new Vh(_toConsumableArray(e).map(function(e){return e._clone(true);}));Fm(this.position,e);}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(eg.prototype),"toJSON",this).call(this);e.position=this.position.toJSON();e.nodes=this.nodes.toJSON();return e;}},{key:"type",get:function get(){return"insert";}},{key:"howMany",get:function get(){return this.nodes.maxOffset;}}],[{key:"fromJSON",value:function fromJSON(e,t){var i=[];var _iteratorNormalCompletion203=true;var _didIteratorError203=false;var _iteratorError203=undefined;try{for(var _iterator203=e.nodes[Symbol.iterator](),_step203;!(_iteratorNormalCompletion203=(_step203=_iterator203.next()).done);_iteratorNormalCompletion203=true){var _t153=_step203.value;if(_t153.name){i.push(Fh.fromJSON(_t153));}else{i.push(jh.fromJSON(_t153));}}}catch(err){_didIteratorError203=true;_iteratorError203=err;}finally{try{if(!_iteratorNormalCompletion203&&_iterator203["return"]!=null){_iterator203["return"]();}}finally{if(_didIteratorError203){throw _iteratorError203;}}}var n=new eg($h.fromJSON(e.position,t),i,e.baseVersion);n.shouldReceiveAttributes=e.shouldReceiveAttributes;return n;}},{key:"className",get:function get(){return"InsertOperation";}}]);return eg;}(jm);var tg=/*#__PURE__*/function(_jm5){_inherits(tg,_jm5);function tg(e,t,i,n,o,s){var _this60;_classCallCheck(this,tg);_this60=_possibleConstructorReturn(this,_getPrototypeOf(tg).call(this,s));_this60.name=e;_this60.oldRange=t?t.clone():null;_this60.newRange=i?i.clone():null;_this60.affectsData=o;_this60._markers=n;return _this60;}_createClass(tg,[{key:"clone",value:function clone(){return new tg(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion);}},{key:"getReversed",value:function getReversed(){return new tg(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1);}},{key:"_execute",value:function _execute(){var e=this.newRange?"_set":"_remove";this._markers[e](this.name,this.newRange,true,this.affectsData);}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(tg.prototype),"toJSON",this).call(this);if(this.oldRange){e.oldRange=this.oldRange.toJSON();}if(this.newRange){e.newRange=this.newRange.toJSON();}delete e._markers;return e;}},{key:"type",get:function get(){return"marker";}}],[{key:"fromJSON",value:function fromJSON(e,t){return new tg(e.name,e.oldRange?qh.fromJSON(e.oldRange,t):null,e.newRange?qh.fromJSON(e.newRange,t):null,t.model.markers,e.affectsData,e.baseVersion);}},{key:"className",get:function get(){return"MarkerOperation";}}]);return tg;}(jm);var ig=/*#__PURE__*/function(_jm6){_inherits(ig,_jm6);function ig(e,t,i,n){var _this61;_classCallCheck(this,ig);_this61=_possibleConstructorReturn(this,_getPrototypeOf(ig).call(this,n));_this61.position=e;_this61.position.stickiness="toNext";_this61.oldName=t;_this61.newName=i;return _this61;}_createClass(ig,[{key:"clone",value:function clone(){return new ig(this.position.clone(),this.oldName,this.newName,this.baseVersion);}},{key:"getReversed",value:function getReversed(){return new ig(this.position.clone(),this.newName,this.oldName,this.baseVersion+1);}},{key:"_validate",value:function _validate(){var e=this.position.nodeAfter;if(!(e instanceof Fh)){throw new rr["b"]("rename-operation-wrong-position: Given position is invalid or node after it is not an instance of Element.",this);}else if(e.name!==this.oldName){throw new rr["b"]("rename-operation-wrong-name: Element to change has different name than operation's old name.",this);}}},{key:"_execute",value:function _execute(){var e=this.position.nodeAfter;e.name=this.newName;}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(ig.prototype),"toJSON",this).call(this);e.position=this.position.toJSON();return e;}},{key:"type",get:function get(){return"rename";}}],[{key:"fromJSON",value:function fromJSON(e,t){return new ig($h.fromJSON(e.position,t),e.oldName,e.newName,e.baseVersion);}},{key:"className",get:function get(){return"RenameOperation";}}]);return ig;}(jm);var ng=/*#__PURE__*/function(_jm7){_inherits(ng,_jm7);function ng(e,t,i,n,o){var _this62;_classCallCheck(this,ng);_this62=_possibleConstructorReturn(this,_getPrototypeOf(ng).call(this,o));_this62.root=e;_this62.key=t;_this62.oldValue=i;_this62.newValue=n;return _this62;}_createClass(ng,[{key:"clone",value:function clone(){return new ng(this.root,this.key,this.oldValue,this.newValue,this.baseVersion);}},{key:"getReversed",value:function getReversed(){return new ng(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1);}},{key:"_validate",value:function _validate(){if(this.root!=this.root.root||this.root.is("documentFragment")){throw new rr["b"]("rootattribute-operation-not-a-root: The element to change is not a root element.",this,{root:this.root,key:this.key});}if(this.oldValue!==null&&this.root.getAttribute(this.key)!==this.oldValue){throw new rr["b"]("rootattribute-operation-wrong-old-value: Changed node has different attribute value than operation's "+"old attribute value.",this,{root:this.root,key:this.key});}if(this.oldValue===null&&this.newValue!==null&&this.root.hasAttribute(this.key)){throw new rr["b"]("rootattribute-operation-attribute-exists: The attribute with given key already exists.",this,{root:this.root,key:this.key});}}},{key:"_execute",value:function _execute(){if(this.newValue!==null){this.root._setAttribute(this.key,this.newValue);}else{this.root._removeAttribute(this.key);}}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(ng.prototype),"toJSON",this).call(this);e.root=this.root.toJSON();return e;}},{key:"type",get:function get(){if(this.oldValue===null){return"addRootAttribute";}else if(this.newValue===null){return"removeRootAttribute";}else{return"changeRootAttribute";}}}],[{key:"fromJSON",value:function fromJSON(e,t){if(!t.getRoot(e.root)){throw new rr["b"]("rootattribute-operation-fromjson-no-root: Cannot create RootAttributeOperation. Root with specified name does not exist.",this,{rootName:e.root});}return new ng(t.getRoot(e.root),e.key,e.oldValue,e.newValue,e.baseVersion);}},{key:"className",get:function get(){return"RootAttributeOperation";}}]);return ng;}(jm);var og=/*#__PURE__*/function(_jm8){_inherits(og,_jm8);function og(e,t,i,n,o){var _this63;_classCallCheck(this,og);_this63=_possibleConstructorReturn(this,_getPrototypeOf(og).call(this,o));_this63.sourcePosition=e.clone();_this63.sourcePosition.stickiness="toPrevious";_this63.howMany=t;_this63.targetPosition=i.clone();_this63.targetPosition.stickiness="toNext";_this63.graveyardPosition=n.clone();return _this63;}_createClass(og,[{key:"clone",value:function clone(){return new this.constructor(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion);}},{key:"getReversed",value:function getReversed(){var e=this.targetPosition._getTransformedByMergeOperation(this);var t=this.sourcePosition.path.slice(0,-1);var i=new $h(this.sourcePosition.root,t)._getTransformedByMergeOperation(this);var n=new sg(e,this.howMany,this.graveyardPosition,this.baseVersion+1);n.insertionPosition=i;return n;}},{key:"_validate",value:function _validate(){var e=this.sourcePosition.parent;var t=this.targetPosition.parent;if(!e.parent){throw new rr["b"]("merge-operation-source-position-invalid: Merge source position is invalid.",this);}else if(!t.parent){throw new rr["b"]("merge-operation-target-position-invalid: Merge target position is invalid.",this);}else if(this.howMany!=e.maxOffset){throw new rr["b"]("merge-operation-how-many-invalid: Merge operation specifies wrong number of nodes to move.",this);}}},{key:"_execute",value:function _execute(){var e=this.sourcePosition.parent;var t=qh._createIn(e);Wm(t,this.targetPosition);Wm(qh._createOn(e),this.graveyardPosition);}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(og.prototype),"toJSON",this).call(this);e.sourcePosition=e.sourcePosition.toJSON();e.targetPosition=e.targetPosition.toJSON();e.graveyardPosition=e.graveyardPosition.toJSON();return e;}},{key:"type",get:function get(){return"merge";}},{key:"deletionPosition",get:function get(){return new $h(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1));}},{key:"movedRange",get:function get(){var e=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new qh(this.sourcePosition,e);}}],[{key:"fromJSON",value:function fromJSON(e,t){var i=$h.fromJSON(e.sourcePosition,t);var n=$h.fromJSON(e.targetPosition,t);var o=$h.fromJSON(e.graveyardPosition,t);return new this(i,e.howMany,n,o,e.baseVersion);}},{key:"className",get:function get(){return"MergeOperation";}}]);return og;}(jm);var sg=/*#__PURE__*/function(_jm9){_inherits(sg,_jm9);function sg(e,t,i,n){var _this64;_classCallCheck(this,sg);_this64=_possibleConstructorReturn(this,_getPrototypeOf(sg).call(this,n));_this64.splitPosition=e.clone();_this64.splitPosition.stickiness="toNext";_this64.howMany=t;_this64.insertionPosition=sg.getInsertionPosition(e);_this64.insertionPosition.stickiness="toNone";_this64.graveyardPosition=i?i.clone():null;if(_this64.graveyardPosition){_this64.graveyardPosition.stickiness="toNext";}return _this64;}_createClass(sg,[{key:"clone",value:function clone(){var e=new this.constructor(this.splitPosition,this.howMany,this.graveyardPosition,this.baseVersion);e.insertionPosition=this.insertionPosition;return e;}},{key:"getReversed",value:function getReversed(){var e=this.splitPosition.root.document.graveyard;var t=new $h(e,[0]);return new og(this.moveTargetPosition,this.howMany,this.splitPosition,t,this.baseVersion+1);}},{key:"_validate",value:function _validate(){var e=this.splitPosition.parent;var t=this.splitPosition.offset;if(!e||e.maxOffset<t){throw new rr["b"]("split-operation-position-invalid: Split position is invalid.",this);}else if(!e.parent){throw new rr["b"]("split-operation-split-in-root: Cannot split root element.",this);}else if(this.howMany!=e.maxOffset-this.splitPosition.offset){throw new rr["b"]("split-operation-how-many-invalid: Split operation specifies wrong number of nodes to move.",this);}else if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter){throw new rr["b"]("split-operation-graveyard-position-invalid: Graveyard position invalid.",this);}}},{key:"_execute",value:function _execute(){var e=this.splitPosition.parent;if(this.graveyardPosition){Wm(qh._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);}else{var _t154=e._clone();Fm(this.insertionPosition,_t154);}var t=new qh($h._createAt(e,this.splitPosition.offset),$h._createAt(e,e.maxOffset));Wm(t,this.moveTargetPosition);}},{key:"toJSON",value:function toJSON(){var e=_get(_getPrototypeOf(sg.prototype),"toJSON",this).call(this);e.splitPosition=this.splitPosition.toJSON();e.insertionPosition=this.insertionPosition.toJSON();if(this.graveyardPosition){e.graveyardPosition=this.graveyardPosition.toJSON();}return e;}},{key:"type",get:function get(){return"split";}},{key:"moveTargetPosition",get:function get(){var e=this.insertionPosition.path.slice();e.push(0);return new $h(this.insertionPosition.root,e);}},{key:"movedRange",get:function get(){var e=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new qh(this.splitPosition,e);}}],[{key:"getInsertionPosition",value:function getInsertionPosition(e){var t=e.path.slice(0,-1);t[t.length-1]++;return new $h(e.root,t);}},{key:"fromJSON",value:function fromJSON(e,t){var i=$h.fromJSON(e.splitPosition,t);var n=$h.fromJSON(e.insertionPosition,t);var o=e.graveyardPosition?$h.fromJSON(e.graveyardPosition,t):null;var s=new this(i,e.howMany,o,e.baseVersion);s.insertionPosition=n;return s;}},{key:"className",get:function get(){return"SplitOperation";}}]);return sg;}(jm);var rg=/*#__PURE__*/function(_Fh){_inherits(rg,_Fh);function rg(e,t){var _this65;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"main";_classCallCheck(this,rg);_this65=_possibleConstructorReturn(this,_getPrototypeOf(rg).call(this,t));_this65._document=e;_this65.rootName=i;return _this65;}_createClass(rg,[{key:"is",value:function is(e,t){var i=e.replace("model:","");if(!t){return i=="rootElement"||_get(_getPrototypeOf(rg.prototype),"is",this).call(this,e);}else{return i=="rootElement"&&t==this.name||_get(_getPrototypeOf(rg.prototype),"is",this).call(this,e,t);}}},{key:"toJSON",value:function toJSON(){return this.rootName;}},{key:"document",get:function get(){return this._document;}}]);return rg;}(Fh);var ag=/*#__PURE__*/function(){function ag(e,t){_classCallCheck(this,ag);this.model=e;this.batch=t;}_createClass(ag,[{key:"createText",value:function createText(e,t){return new jh(e,t);}},{key:"createElement",value:function createElement(e,t){return new Fh(e,t);}},{key:"createDocumentFragment",value:function createDocumentFragment(){return new Bm();}},{key:"insert",value:function insert(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;this._assertWriterUsedCorrectly();if(e instanceof jh&&e.data==""){return;}var n=$h._createAt(t,i);if(e.parent){if(hg(e.root,n.root)){this.move(qh._createOn(e),n);return;}else{if(e.root.document){throw new rr["b"]("model-writer-insert-forbidden-move: "+"Cannot move a node from a document to a different tree. "+"It is forbidden to move a node that was already in a document outside of it.",this);}else{this.remove(e);}}}var o=n.root.document?n.root.document.version:null;var s=new eg(n,e,o);if(e instanceof jh){s.shouldReceiveAttributes=true;}this.batch.addOperation(s);this.model.applyOperation(s);if(e instanceof Bm){var _iteratorNormalCompletion204=true;var _didIteratorError204=false;var _iteratorError204=undefined;try{for(var _iterator204=e.markers[Symbol.iterator](),_step204;!(_iteratorNormalCompletion204=(_step204=_iterator204.next()).done);_iteratorNormalCompletion204=true){var _step204$value=_slicedToArray(_step204.value,2),_t155=_step204$value[0],_i175=_step204$value[1];var _e166=$h._createAt(_i175.root,0);var _o45=new qh(_i175.start._getCombined(_e166,n),_i175.end._getCombined(_e166,n));var _s19={range:_o45,usingOperation:true,affectsData:true};if(this.model.markers.has(_t155)){this.updateMarker(_t155,_s19);}else{this.addMarker(_t155,_s19);}}}catch(err){_didIteratorError204=true;_iteratorError204=err;}finally{try{if(!_iteratorNormalCompletion204&&_iterator204["return"]!=null){_iterator204["return"]();}}finally{if(_didIteratorError204){throw _iteratorError204;}}}}}},{key:"insertText",value:function insertText(e,t,i,n){if(t instanceof Bm||t instanceof Fh||t instanceof $h){this.insert(this.createText(e),t,i);}else{this.insert(this.createText(e,t),i,n);}}},{key:"insertElement",value:function insertElement(e,t,i,n){if(t instanceof Bm||t instanceof Fh||t instanceof $h){this.insert(this.createElement(e),t,i);}else{this.insert(this.createElement(e,t),i,n);}}},{key:"append",value:function append(e,t){this.insert(e,t,"end");}},{key:"appendText",value:function appendText(e,t,i){if(t instanceof Bm||t instanceof Fh){this.insert(this.createText(e),t,"end");}else{this.insert(this.createText(e,t),i,"end");}}},{key:"appendElement",value:function appendElement(e,t,i){if(t instanceof Bm||t instanceof Fh){this.insert(this.createElement(e),t,"end");}else{this.insert(this.createElement(e,t),i,"end");}}},{key:"setAttribute",value:function setAttribute(e,t,i){this._assertWriterUsedCorrectly();if(i instanceof qh){var _n89=i.getMinimalFlatRanges();var _iteratorNormalCompletion205=true;var _didIteratorError205=false;var _iteratorError205=undefined;try{for(var _iterator205=_n89[Symbol.iterator](),_step205;!(_iteratorNormalCompletion205=(_step205=_iterator205.next()).done);_iteratorNormalCompletion205=true){var _i176=_step205.value;cg(this,e,t,_i176);}}catch(err){_didIteratorError205=true;_iteratorError205=err;}finally{try{if(!_iteratorNormalCompletion205&&_iterator205["return"]!=null){_iterator205["return"]();}}finally{if(_didIteratorError205){throw _iteratorError205;}}}}else{lg(this,e,t,i);}}},{key:"setAttributes",value:function setAttributes(e,t){var _iteratorNormalCompletion206=true;var _didIteratorError206=false;var _iteratorError206=undefined;try{for(var _iterator206=Hr(e)[Symbol.iterator](),_step206;!(_iteratorNormalCompletion206=(_step206=_iterator206.next()).done);_iteratorNormalCompletion206=true){var _step206$value=_slicedToArray(_step206.value,2),_i177=_step206$value[0],_n90=_step206$value[1];this.setAttribute(_i177,_n90,t);}}catch(err){_didIteratorError206=true;_iteratorError206=err;}finally{try{if(!_iteratorNormalCompletion206&&_iterator206["return"]!=null){_iterator206["return"]();}}finally{if(_didIteratorError206){throw _iteratorError206;}}}}},{key:"removeAttribute",value:function removeAttribute(e,t){this._assertWriterUsedCorrectly();if(t instanceof qh){var _i178=t.getMinimalFlatRanges();var _iteratorNormalCompletion207=true;var _didIteratorError207=false;var _iteratorError207=undefined;try{for(var _iterator207=_i178[Symbol.iterator](),_step207;!(_iteratorNormalCompletion207=(_step207=_iterator207.next()).done);_iteratorNormalCompletion207=true){var _t156=_step207.value;cg(this,e,null,_t156);}}catch(err){_didIteratorError207=true;_iteratorError207=err;}finally{try{if(!_iteratorNormalCompletion207&&_iterator207["return"]!=null){_iterator207["return"]();}}finally{if(_didIteratorError207){throw _iteratorError207;}}}}else{lg(this,e,null,t);}}},{key:"clearAttributes",value:function clearAttributes(e){var _this66=this;this._assertWriterUsedCorrectly();var t=function t(e){var _iteratorNormalCompletion208=true;var _didIteratorError208=false;var _iteratorError208=undefined;try{for(var _iterator208=e.getAttributeKeys()[Symbol.iterator](),_step208;!(_iteratorNormalCompletion208=(_step208=_iterator208.next()).done);_iteratorNormalCompletion208=true){var _t157=_step208.value;_this66.removeAttribute(_t157,e);}}catch(err){_didIteratorError208=true;_iteratorError208=err;}finally{try{if(!_iteratorNormalCompletion208&&_iterator208["return"]!=null){_iterator208["return"]();}}finally{if(_didIteratorError208){throw _iteratorError208;}}}};if(!(e instanceof qh)){t(e);}else{var _iteratorNormalCompletion209=true;var _didIteratorError209=false;var _iteratorError209=undefined;try{for(var _iterator209=e.getItems()[Symbol.iterator](),_step209;!(_iteratorNormalCompletion209=(_step209=_iterator209.next()).done);_iteratorNormalCompletion209=true){var _i179=_step209.value;t(_i179);}}catch(err){_didIteratorError209=true;_iteratorError209=err;}finally{try{if(!_iteratorNormalCompletion209&&_iterator209["return"]!=null){_iterator209["return"]();}}finally{if(_didIteratorError209){throw _iteratorError209;}}}}}},{key:"move",value:function move(e,t,i){this._assertWriterUsedCorrectly();if(!(e instanceof qh)){throw new rr["b"]("writer-move-invalid-range: Invalid range to move.",this);}if(!e.isFlat){throw new rr["b"]("writer-move-range-not-flat: Range to move is not flat.",this);}var n=$h._createAt(t,i);if(n.isEqual(e.start)){return;}this._addOperationForAffectedMarkers("move",e);if(!hg(e.root,n.root)){throw new rr["b"]("writer-move-different-document: Range is going to be moved between different documents.",this);}var o=e.root.document?e.root.document.version:null;var s=new Zm(e.start,e.end.offset-e.start.offset,n,o);this.batch.addOperation(s);this.model.applyOperation(s);}},{key:"remove",value:function remove(e){this._assertWriterUsedCorrectly();var t=e instanceof qh?e:qh._createOn(e);var i=t.getMinimalFlatRanges().reverse();var _iteratorNormalCompletion210=true;var _didIteratorError210=false;var _iteratorError210=undefined;try{for(var _iterator210=i[Symbol.iterator](),_step210;!(_iteratorNormalCompletion210=(_step210=_iterator210.next()).done);_iteratorNormalCompletion210=true){var _e167=_step210.value;this._addOperationForAffectedMarkers("move",_e167);ug(_e167.start,_e167.end.offset-_e167.start.offset,this.batch,this.model);}}catch(err){_didIteratorError210=true;_iteratorError210=err;}finally{try{if(!_iteratorNormalCompletion210&&_iterator210["return"]!=null){_iterator210["return"]();}}finally{if(_didIteratorError210){throw _iteratorError210;}}}}},{key:"merge",value:function merge(e){this._assertWriterUsedCorrectly();var t=e.nodeBefore;var i=e.nodeAfter;this._addOperationForAffectedMarkers("merge",e);if(!(t instanceof Fh)){throw new rr["b"]("writer-merge-no-element-before: Node before merge position must be an element.",this);}if(!(i instanceof Fh)){throw new rr["b"]("writer-merge-no-element-after: Node after merge position must be an element.",this);}if(!e.root.document){this._mergeDetached(e);}else{this._merge(e);}}},{key:"createPositionFromPath",value:function createPositionFromPath(e,t,i){return this.model.createPositionFromPath(e,t,i);}},{key:"createPositionAt",value:function createPositionAt(e,t){return this.model.createPositionAt(e,t);}},{key:"createPositionAfter",value:function createPositionAfter(e){return this.model.createPositionAfter(e);}},{key:"createPositionBefore",value:function createPositionBefore(e){return this.model.createPositionBefore(e);}},{key:"createRange",value:function createRange(e,t){return this.model.createRange(e,t);}},{key:"createRangeIn",value:function createRangeIn(e){return this.model.createRangeIn(e);}},{key:"createRangeOn",value:function createRangeOn(e){return this.model.createRangeOn(e);}},{key:"createSelection",value:function createSelection(e,t,i){return this.model.createSelection(e,t,i);}},{key:"_mergeDetached",value:function _mergeDetached(e){var t=e.nodeBefore;var i=e.nodeAfter;this.move(qh._createIn(i),$h._createAt(t,"end"));this.remove(i);}},{key:"_merge",value:function _merge(e){var t=$h._createAt(e.nodeBefore,"end");var i=$h._createAt(e.nodeAfter,0);var n=e.root.document.graveyard;var o=new $h(n,[0]);var s=e.root.document.version;var r=new og(i,e.nodeAfter.maxOffset,t,o,s);this.batch.addOperation(r);this.model.applyOperation(r);}},{key:"rename",value:function rename(e,t){this._assertWriterUsedCorrectly();if(!(e instanceof Fh)){throw new rr["b"]("writer-rename-not-element-instance: Trying to rename an object which is not an instance of Element.",this);}var i=e.root.document?e.root.document.version:null;var n=new ig($h._createBefore(e),e.name,t,i);this.batch.addOperation(n);this.model.applyOperation(n);}},{key:"split",value:function split(e,t){this._assertWriterUsedCorrectly();var i=e.parent;if(!i.parent){throw new rr["b"]("writer-split-element-no-parent: Element with no parent can not be split.",this);}if(!t){t=i.parent;}if(!e.parent.getAncestors({includeSelf:true}).includes(t)){throw new rr["b"]("writer-split-invalid-limit-element: Limit element is not a position ancestor.",this);}var n,o;do{var _t158=i.root.document?i.root.document.version:null;var _s20=i.maxOffset-e.offset;var _r14=new sg(e,_s20,null,_t158);this.batch.addOperation(_r14);this.model.applyOperation(_r14);if(!n&&!o){n=i;o=e.parent.nextSibling;}e=this.createPositionAfter(e.parent);i=e.parent;}while(i!==t);return{position:e,range:new qh($h._createAt(n,"end"),$h._createAt(o,0))};}},{key:"wrap",value:function wrap(e,t){this._assertWriterUsedCorrectly();if(!e.isFlat){throw new rr["b"]("writer-wrap-range-not-flat: Range to wrap is not flat.",this);}var i=t instanceof Fh?t:new Fh(t);if(i.childCount>0){throw new rr["b"]("writer-wrap-element-not-empty: Element to wrap with is not empty.",this);}if(i.parent!==null){throw new rr["b"]("writer-wrap-element-attached: Element to wrap with is already attached to tree model.",this);}this.insert(i,e.start);var n=new qh(e.start.getShiftedBy(1),e.end.getShiftedBy(1));this.move(n,$h._createAt(i,0));}},{key:"unwrap",value:function unwrap(e){this._assertWriterUsedCorrectly();if(e.parent===null){throw new rr["b"]("writer-unwrap-element-no-parent: Trying to unwrap an element which has no parent.",this);}this.move(qh._createIn(e),this.createPositionAfter(e));this.remove(e);}},{key:"addMarker",value:function addMarker(e,t){this._assertWriterUsedCorrectly();if(!t||typeof t.usingOperation!="boolean"){throw new rr["b"]("writer-addMarker-no-usingOperation: The options.usingOperation parameter is required when adding a new marker.",this);}var i=t.usingOperation;var n=t.range;var o=t.affectsData===undefined?false:t.affectsData;if(this.model.markers.has(e)){throw new rr["b"]("writer-addMarker-marker-exists: Marker with provided name already exists.",this);}if(!n){throw new rr["b"]("writer-addMarker-no-range: Range parameter is required when adding a new marker.",this);}if(!i){return this.model.markers._set(e,n,i,o);}dg(this,e,null,n,o);return this.model.markers.get(e);}},{key:"updateMarker",value:function updateMarker(e,t){this._assertWriterUsedCorrectly();var i=typeof e=="string"?e:e.name;var n=this.model.markers.get(i);if(!n){throw new rr["b"]("writer-updateMarker-marker-not-exists: Marker with provided name does not exists.",this);}if(!t){this.model.markers._refresh(n);return;}var o=typeof t.usingOperation=="boolean";var s=typeof t.affectsData=="boolean";var r=s?t.affectsData:n.affectsData;if(!o&&!t.range&&!s){throw new rr["b"]("writer-updateMarker-wrong-options: One of the options is required - provide range, usingOperations or affectsData.",this);}var a=n.getRange();var c=t.range?t.range:a;if(o&&t.usingOperation!==n.managedUsingOperations){if(t.usingOperation){dg(this,i,null,c,r);}else{dg(this,i,a,null,r);this.model.markers._set(i,c,undefined,r);}return;}if(n.managedUsingOperations){dg(this,i,a,c,r);}else{this.model.markers._set(i,c,undefined,r);}}},{key:"removeMarker",value:function removeMarker(e){this._assertWriterUsedCorrectly();var t=typeof e=="string"?e:e.name;if(!this.model.markers.has(t)){throw new rr["b"]("writer-removeMarker-no-marker: Trying to remove marker which does not exist.",this);}var i=this.model.markers.get(t);if(!i.managedUsingOperations){this.model.markers._remove(t);return;}var n=i.getRange();dg(this,t,n,null,i.affectsData);}},{key:"setSelection",value:function setSelection(e,t,i){this._assertWriterUsedCorrectly();this.model.document.selection._setTo(e,t,i);}},{key:"setSelectionFocus",value:function setSelectionFocus(e,t){this._assertWriterUsedCorrectly();this.model.document.selection._setFocus(e,t);}},{key:"setSelectionAttribute",value:function setSelectionAttribute(e,t){this._assertWriterUsedCorrectly();if(typeof e==="string"){this._setSelectionAttribute(e,t);}else{var _iteratorNormalCompletion211=true;var _didIteratorError211=false;var _iteratorError211=undefined;try{for(var _iterator211=Hr(e)[Symbol.iterator](),_step211;!(_iteratorNormalCompletion211=(_step211=_iterator211.next()).done);_iteratorNormalCompletion211=true){var _step211$value=_slicedToArray(_step211.value,2),_t159=_step211$value[0],_i180=_step211$value[1];this._setSelectionAttribute(_t159,_i180);}}catch(err){_didIteratorError211=true;_iteratorError211=err;}finally{try{if(!_iteratorNormalCompletion211&&_iterator211["return"]!=null){_iterator211["return"]();}}finally{if(_didIteratorError211){throw _iteratorError211;}}}}}},{key:"removeSelectionAttribute",value:function removeSelectionAttribute(e){this._assertWriterUsedCorrectly();if(typeof e==="string"){this._removeSelectionAttribute(e);}else{var _iteratorNormalCompletion212=true;var _didIteratorError212=false;var _iteratorError212=undefined;try{for(var _iterator212=e[Symbol.iterator](),_step212;!(_iteratorNormalCompletion212=(_step212=_iterator212.next()).done);_iteratorNormalCompletion212=true){var _t160=_step212.value;this._removeSelectionAttribute(_t160);}}catch(err){_didIteratorError212=true;_iteratorError212=err;}finally{try{if(!_iteratorNormalCompletion212&&_iterator212["return"]!=null){_iterator212["return"]();}}finally{if(_didIteratorError212){throw _iteratorError212;}}}}}},{key:"overrideSelectionGravity",value:function overrideSelectionGravity(){return this.model.document.selection._overrideGravity();}},{key:"restoreSelectionGravity",value:function restoreSelectionGravity(e){this.model.document.selection._restoreGravity(e);}},{key:"_setSelectionAttribute",value:function _setSelectionAttribute(e,t){var i=this.model.document.selection;if(i.isCollapsed&&i.anchor.parent.isEmpty){var _n91=df._getStoreAttributeKey(e);this.setAttribute(_n91,t,i.anchor.parent);}i._setAttribute(e,t);}},{key:"_removeSelectionAttribute",value:function _removeSelectionAttribute(e){var t=this.model.document.selection;if(t.isCollapsed&&t.anchor.parent.isEmpty){var _i181=df._getStoreAttributeKey(e);this.removeAttribute(_i181,t.anchor.parent);}t._removeAttribute(e);}},{key:"_assertWriterUsedCorrectly",value:function _assertWriterUsedCorrectly(){if(this.model._currentWriter!==this){throw new rr["b"]("writer-incorrect-use: Trying to use a writer outside the change() block.",this);}}},{key:"_addOperationForAffectedMarkers",value:function _addOperationForAffectedMarkers(e,t){var _iteratorNormalCompletion213=true;var _didIteratorError213=false;var _iteratorError213=undefined;try{for(var _iterator213=this.model.markers[Symbol.iterator](),_step213;!(_iteratorNormalCompletion213=(_step213=_iterator213.next()).done);_iteratorNormalCompletion213=true){var _i182=_step213.value;if(!_i182.managedUsingOperations){continue;}var _n92=_i182.getRange();var _o46=false;if(e=="move"){_o46=t.containsPosition(_n92.start)||t.start.isEqual(_n92.start)||t.containsPosition(_n92.end)||t.end.isEqual(_n92.end);}else{var _e168=t.nodeBefore;var _i183=t.nodeAfter;var _s21=_n92.start.parent==_e168&&_n92.start.isAtEnd;var _r15=_n92.end.parent==_i183&&_n92.end.offset==0;var _a8=_n92.end.nodeAfter==_i183;var _c3=_n92.start.nodeAfter==_i183;_o46=_s21||_r15||_a8||_c3;}if(_o46){this.updateMarker(_i182.name,{range:_n92});}}}catch(err){_didIteratorError213=true;_iteratorError213=err;}finally{try{if(!_iteratorNormalCompletion213&&_iterator213["return"]!=null){_iterator213["return"]();}}finally{if(_didIteratorError213){throw _iteratorError213;}}}}}]);return ag;}();function cg(e,t,i,n){var o=e.model;var s=o.document;var r=n.start;var a;var c;var l;var _iteratorNormalCompletion214=true;var _didIteratorError214=false;var _iteratorError214=undefined;try{for(var _iterator214=n.getWalker({shallow:true})[Symbol.iterator](),_step214;!(_iteratorNormalCompletion214=(_step214=_iterator214.next()).done);_iteratorNormalCompletion214=true){var _e169=_step214.value;l=_e169.item.getAttribute(t);if(a&&c!=l){if(c!=i){d();}r=a;}a=_e169.nextPosition;c=l;}}catch(err){_didIteratorError214=true;_iteratorError214=err;}finally{try{if(!_iteratorNormalCompletion214&&_iterator214["return"]!=null){_iterator214["return"]();}}finally{if(_didIteratorError214){throw _iteratorError214;}}}if(a instanceof $h&&a!=r&&c!=i){d();}function d(){var n=new qh(r,a);var l=n.root.document?s.version:null;var d=new Km(n,t,c,i,l);e.batch.addOperation(d);o.applyOperation(d);}}function lg(e,t,i,n){var o=e.model;var s=o.document;var r=n.getAttribute(t);var a,c;if(r!=i){var _l2=n.root===n;if(_l2){var _e170=n.document?s.version:null;c=new ng(n,t,r,i,_e170);}else{a=new qh($h._createBefore(n),e.createPositionAfter(n));var _o47=a.root.document?s.version:null;c=new Km(a,t,r,i,_o47);}e.batch.addOperation(c);o.applyOperation(c);}}function dg(e,t,i,n,o){var s=e.model;var r=s.document;var a=new tg(t,i,n,s.markers,o,r.version);e.batch.addOperation(a);s.applyOperation(a);}function ug(e,t,i,n){var o;if(e.root.document){var _i184=n.document;var _s22=new $h(_i184.graveyard,[0]);o=new Zm(e,t,_s22,_i184.version);}else{o=new Qm(e,t);}i.addOperation(o);n.applyOperation(o);}function hg(e,t){if(e===t){return true;}if(e instanceof rg&&t instanceof rg){return true;}return false;}var fg=/*#__PURE__*/function(){function fg(e){_classCallCheck(this,fg);this._markerCollection=e;this._changesInElement=new Map();this._elementSnapshots=new Map();this._changedMarkers=new Map();this._changeCount=0;this._cachedChanges=null;this._cachedChangesWithGraveyard=null;}_createClass(fg,[{key:"refreshItem",value:function refreshItem(e){if(this._isInInsertedElement(e.parent)){return;}this._markRemove(e.parent,e.startOffset,e.offsetSize);this._markInsert(e.parent,e.startOffset,e.offsetSize);var t=qh._createOn(e);var _iteratorNormalCompletion215=true;var _didIteratorError215=false;var _iteratorError215=undefined;try{for(var _iterator215=this._markerCollection.getMarkersIntersectingRange(t)[Symbol.iterator](),_step215;!(_iteratorNormalCompletion215=(_step215=_iterator215.next()).done);_iteratorNormalCompletion215=true){var _e171=_step215.value;var _t161=_e171.getRange();this.bufferMarkerChange(_e171.name,_t161,_t161,_e171.affectsData);}}catch(err){_didIteratorError215=true;_iteratorError215=err;}finally{try{if(!_iteratorNormalCompletion215&&_iterator215["return"]!=null){_iterator215["return"]();}}finally{if(_didIteratorError215){throw _iteratorError215;}}}this._cachedChanges=null;}},{key:"bufferOperation",value:function bufferOperation(e){switch(e.type){case"insert":{if(this._isInInsertedElement(e.position.parent)){return;}this._markInsert(e.position.parent,e.position.offset,e.nodes.maxOffset);break;}case"addAttribute":case"removeAttribute":case"changeAttribute":{var _iteratorNormalCompletion216=true;var _didIteratorError216=false;var _iteratorError216=undefined;try{for(var _iterator216=e.range.getItems({shallow:true})[Symbol.iterator](),_step216;!(_iteratorNormalCompletion216=(_step216=_iterator216.next()).done);_iteratorNormalCompletion216=true){var _t162=_step216.value;if(this._isInInsertedElement(_t162.parent)){continue;}this._markAttribute(_t162);}}catch(err){_didIteratorError216=true;_iteratorError216=err;}finally{try{if(!_iteratorNormalCompletion216&&_iterator216["return"]!=null){_iterator216["return"]();}}finally{if(_didIteratorError216){throw _iteratorError216;}}}break;}case"remove":case"move":case"reinsert":{if(e.sourcePosition.isEqual(e.targetPosition)||e.sourcePosition.getShiftedBy(e.howMany).isEqual(e.targetPosition)){return;}var _t163=this._isInInsertedElement(e.sourcePosition.parent);var _i185=this._isInInsertedElement(e.targetPosition.parent);if(!_t163){this._markRemove(e.sourcePosition.parent,e.sourcePosition.offset,e.howMany);}if(!_i185){this._markInsert(e.targetPosition.parent,e.getMovedRangeStart().offset,e.howMany);}break;}case"rename":{if(this._isInInsertedElement(e.position.parent)){return;}this._markRemove(e.position.parent,e.position.offset,1);this._markInsert(e.position.parent,e.position.offset,1);var _t164=qh._createFromPositionAndShift(e.position,1);var _iteratorNormalCompletion217=true;var _didIteratorError217=false;var _iteratorError217=undefined;try{for(var _iterator217=this._markerCollection.getMarkersIntersectingRange(_t164)[Symbol.iterator](),_step217;!(_iteratorNormalCompletion217=(_step217=_iterator217.next()).done);_iteratorNormalCompletion217=true){var _e172=_step217.value;var _t165=_e172.getRange();this.bufferMarkerChange(_e172.name,_t165,_t165,_e172.affectsData);}}catch(err){_didIteratorError217=true;_iteratorError217=err;}finally{try{if(!_iteratorNormalCompletion217&&_iterator217["return"]!=null){_iterator217["return"]();}}finally{if(_didIteratorError217){throw _iteratorError217;}}}break;}case"split":{var _t166=e.splitPosition.parent;if(!this._isInInsertedElement(_t166)){this._markRemove(_t166,e.splitPosition.offset,e.howMany);}if(!this._isInInsertedElement(e.insertionPosition.parent)){this._markInsert(e.insertionPosition.parent,e.insertionPosition.offset,1);}if(e.graveyardPosition){this._markRemove(e.graveyardPosition.parent,e.graveyardPosition.offset,1);}break;}case"merge":{var _t167=e.sourcePosition.parent;if(!this._isInInsertedElement(_t167.parent)){this._markRemove(_t167.parent,_t167.startOffset,1);}var _i186=e.graveyardPosition.parent;this._markInsert(_i186,e.graveyardPosition.offset,1);var _n93=e.targetPosition.parent;if(!this._isInInsertedElement(_n93)){this._markInsert(_n93,e.targetPosition.offset,_t167.maxOffset);}break;}}this._cachedChanges=null;}},{key:"bufferMarkerChange",value:function bufferMarkerChange(e,t,i,n){var o=this._changedMarkers.get(e);if(!o){this._changedMarkers.set(e,{oldRange:t,newRange:i,affectsData:n});}else{o.newRange=i;o.affectsData=n;if(o.oldRange==null&&o.newRange==null){this._changedMarkers["delete"](e);}}}},{key:"getMarkersToRemove",value:function getMarkersToRemove(){var e=[];var _iteratorNormalCompletion218=true;var _didIteratorError218=false;var _iteratorError218=undefined;try{for(var _iterator218=this._changedMarkers[Symbol.iterator](),_step218;!(_iteratorNormalCompletion218=(_step218=_iterator218.next()).done);_iteratorNormalCompletion218=true){var _step218$value=_slicedToArray(_step218.value,2),_t168=_step218$value[0],_i187=_step218$value[1];if(_i187.oldRange!=null){e.push({name:_t168,range:_i187.oldRange});}}}catch(err){_didIteratorError218=true;_iteratorError218=err;}finally{try{if(!_iteratorNormalCompletion218&&_iterator218["return"]!=null){_iterator218["return"]();}}finally{if(_didIteratorError218){throw _iteratorError218;}}}return e;}},{key:"getMarkersToAdd",value:function getMarkersToAdd(){var e=[];var _iteratorNormalCompletion219=true;var _didIteratorError219=false;var _iteratorError219=undefined;try{for(var _iterator219=this._changedMarkers[Symbol.iterator](),_step219;!(_iteratorNormalCompletion219=(_step219=_iterator219.next()).done);_iteratorNormalCompletion219=true){var _step219$value=_slicedToArray(_step219.value,2),_t169=_step219$value[0],_i188=_step219$value[1];if(_i188.newRange!=null){e.push({name:_t169,range:_i188.newRange});}}}catch(err){_didIteratorError219=true;_iteratorError219=err;}finally{try{if(!_iteratorNormalCompletion219&&_iterator219["return"]!=null){_iterator219["return"]();}}finally{if(_didIteratorError219){throw _iteratorError219;}}}return e;}},{key:"getChangedMarkers",value:function getChangedMarkers(){return Array.from(this._changedMarkers).map(function(e){return{name:e[0],data:{oldRange:e[1].oldRange,newRange:e[1].newRange}};});}},{key:"hasDataChanges",value:function hasDataChanges(){var _iteratorNormalCompletion220=true;var _didIteratorError220=false;var _iteratorError220=undefined;try{for(var _iterator220=this._changedMarkers[Symbol.iterator](),_step220;!(_iteratorNormalCompletion220=(_step220=_iterator220.next()).done);_iteratorNormalCompletion220=true){var _step220$value=_slicedToArray(_step220.value,2),_e173=_step220$value[1];if(_e173.affectsData){return true;}}}catch(err){_didIteratorError220=true;_iteratorError220=err;}finally{try{if(!_iteratorNormalCompletion220&&_iterator220["return"]!=null){_iterator220["return"]();}}finally{if(_didIteratorError220){throw _iteratorError220;}}}return this._changesInElement.size>0;}},{key:"getChanges",value:function getChanges(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{includeChangesInGraveyard:false};if(this._cachedChanges){if(e.includeChangesInGraveyard){return this._cachedChangesWithGraveyard.slice();}else{return this._cachedChanges.slice();}}var t=[];var _iteratorNormalCompletion221=true;var _didIteratorError221=false;var _iteratorError221=undefined;try{for(var _iterator221=this._changesInElement.keys()[Symbol.iterator](),_step221;!(_iteratorNormalCompletion221=(_step221=_iterator221.next()).done);_iteratorNormalCompletion221=true){var _e175=_step221.value;var _i191=this._changesInElement.get(_e175).sort(function(e,t){if(e.offset===t.offset){if(e.type!=t.type){return e.type=="remove"?-1:1;}return 0;}return e.offset<t.offset?-1:1;});var _n95=this._elementSnapshots.get(_e175);var _o49=mg(_e175.getChildren());var _s24=gg(_n95.length,_i191);var _r17=0;var _a9=0;var _iteratorNormalCompletion222=true;var _didIteratorError222=false;var _iteratorError222=undefined;try{for(var _iterator222=_s24[Symbol.iterator](),_step222;!(_iteratorNormalCompletion222=(_step222=_iterator222.next()).done);_iteratorNormalCompletion222=true){var _i192=_step222.value;if(_i192==="i"){t.push(this._getInsertDiff(_e175,_r17,_o49[_r17].name));_r17++;}else if(_i192==="r"){t.push(this._getRemoveDiff(_e175,_r17,_n95[_a9].name));_a9++;}else if(_i192==="a"){var _i193=_o49[_r17].attributes;var _s25=_n95[_a9].attributes;var _c4=void 0;if(_o49[_r17].name=="$text"){_c4=new qh($h._createAt(_e175,_r17),$h._createAt(_e175,_r17+1));}else{var _t171=_e175.offsetToIndex(_r17);_c4=new qh($h._createAt(_e175,_r17),$h._createAt(_e175.getChild(_t171),0));}t.push.apply(t,_toConsumableArray(this._getAttributesDiff(_c4,_s25,_i193)));_r17++;_a9++;}else{_r17++;_a9++;}}}catch(err){_didIteratorError222=true;_iteratorError222=err;}finally{try{if(!_iteratorNormalCompletion222&&_iterator222["return"]!=null){_iterator222["return"]();}}finally{if(_didIteratorError222){throw _iteratorError222;}}}}}catch(err){_didIteratorError221=true;_iteratorError221=err;}finally{try{if(!_iteratorNormalCompletion221&&_iterator221["return"]!=null){_iterator221["return"]();}}finally{if(_didIteratorError221){throw _iteratorError221;}}}t.sort(function(e,t){if(e.position.root!=t.position.root){return e.position.root.rootName<t.position.root.rootName?-1:1;}if(e.position.isEqual(t.position)){return e.changeCount-t.changeCount;}return e.position.isBefore(t.position)?-1:1;});for(var _e174=1;_e174<t.length;_e174++){var _i189=t[_e174-1];var _n94=t[_e174];var _o48=_i189.type=="remove"&&_n94.type=="remove"&&_i189.name=="$text"&&_n94.name=="$text"&&_i189.position.isEqual(_n94.position);var _s23=_i189.type=="insert"&&_n94.type=="insert"&&_i189.name=="$text"&&_n94.name=="$text"&&_i189.position.parent==_n94.position.parent&&_i189.position.offset+_i189.length==_n94.position.offset;var _r16=_i189.type=="attribute"&&_n94.type=="attribute"&&_i189.position.parent==_n94.position.parent&&_i189.range.isFlat&&_n94.range.isFlat&&_i189.position.offset+_i189.length==_n94.position.offset&&_i189.attributeKey==_n94.attributeKey&&_i189.attributeOldValue==_n94.attributeOldValue&&_i189.attributeNewValue==_n94.attributeNewValue;if(_o48||_s23||_r16){t[_e174-1].length++;if(_r16){t[_e174-1].range.end=t[_e174-1].range.end.getShiftedBy(1);}t.splice(_e174,1);_e174--;}}for(var _i190=0,_t170=t;_i190<_t170.length;_i190++){var _e176=_t170[_i190];delete _e176.changeCount;if(_e176.type=="attribute"){delete _e176.position;delete _e176.length;}}this._changeCount=0;this._cachedChangesWithGraveyard=t.slice();this._cachedChanges=t.slice().filter(pg);if(e.includeChangesInGraveyard){return this._cachedChangesWithGraveyard;}else{return this._cachedChanges;}}},{key:"reset",value:function reset(){this._changesInElement.clear();this._elementSnapshots.clear();this._changedMarkers.clear();this._cachedChanges=null;}},{key:"_markInsert",value:function _markInsert(e,t,i){var n={type:"insert",offset:t,howMany:i,count:this._changeCount++};this._markChange(e,n);}},{key:"_markRemove",value:function _markRemove(e,t,i){var n={type:"remove",offset:t,howMany:i,count:this._changeCount++};this._markChange(e,n);this._removeAllNestedChanges(e,t,i);}},{key:"_markAttribute",value:function _markAttribute(e){var t={type:"attribute",offset:e.startOffset,howMany:e.offsetSize,count:this._changeCount++};this._markChange(e.parent,t);}},{key:"_markChange",value:function _markChange(e,t){this._makeSnapshot(e);var i=this._getChangesForElement(e);this._handleChange(t,i);i.push(t);for(var _e177=0;_e177<i.length;_e177++){if(i[_e177].howMany<1){i.splice(_e177,1);_e177--;}}}},{key:"_getChangesForElement",value:function _getChangesForElement(e){var t;if(this._changesInElement.has(e)){t=this._changesInElement.get(e);}else{t=[];this._changesInElement.set(e,t);}return t;}},{key:"_makeSnapshot",value:function _makeSnapshot(e){if(!this._elementSnapshots.has(e)){this._elementSnapshots.set(e,mg(e.getChildren()));}}},{key:"_handleChange",value:function _handleChange(e,t){e.nodesToHandle=e.howMany;var _iteratorNormalCompletion223=true;var _didIteratorError223=false;var _iteratorError223=undefined;try{for(var _iterator223=t[Symbol.iterator](),_step223;!(_iteratorNormalCompletion223=(_step223=_iterator223.next()).done);_iteratorNormalCompletion223=true){var _i194=_step223.value;var _n96=e.offset+e.howMany;var _o50=_i194.offset+_i194.howMany;if(e.type=="insert"){if(_i194.type=="insert"){if(e.offset<=_i194.offset){_i194.offset+=e.howMany;}else if(e.offset<_o50){_i194.howMany+=e.nodesToHandle;e.nodesToHandle=0;}}if(_i194.type=="remove"){if(e.offset<_i194.offset){_i194.offset+=e.howMany;}}if(_i194.type=="attribute"){if(e.offset<=_i194.offset){_i194.offset+=e.howMany;}else if(e.offset<_o50){var _o51=_i194.howMany;_i194.howMany=e.offset-_i194.offset;t.unshift({type:"attribute",offset:_n96,howMany:_o51-_i194.howMany,count:this._changeCount++});}}}if(e.type=="remove"){if(_i194.type=="insert"){if(_n96<=_i194.offset){_i194.offset-=e.howMany;}else if(_n96<=_o50){if(e.offset<_i194.offset){var _t172=_n96-_i194.offset;_i194.offset=e.offset;_i194.howMany-=_t172;e.nodesToHandle-=_t172;}else{_i194.howMany-=e.nodesToHandle;e.nodesToHandle=0;}}else{if(e.offset<=_i194.offset){e.nodesToHandle-=_i194.howMany;_i194.howMany=0;}else if(e.offset<_o50){var _t173=_o50-e.offset;_i194.howMany-=_t173;e.nodesToHandle-=_t173;}}}if(_i194.type=="remove"){if(_n96<=_i194.offset){_i194.offset-=e.howMany;}else if(e.offset<_i194.offset){e.nodesToHandle+=_i194.howMany;_i194.howMany=0;}}if(_i194.type=="attribute"){if(_n96<=_i194.offset){_i194.offset-=e.howMany;}else if(e.offset<_i194.offset){var _t174=_n96-_i194.offset;_i194.offset=e.offset;_i194.howMany-=_t174;}else if(e.offset<_o50){if(_n96<=_o50){var _n97=_i194.howMany;_i194.howMany=e.offset-_i194.offset;var _o52=_n97-_i194.howMany-e.nodesToHandle;t.unshift({type:"attribute",offset:e.offset,howMany:_o52,count:this._changeCount++});}else{_i194.howMany-=_o50-e.offset;}}}}if(e.type=="attribute"){if(_i194.type=="insert"){if(e.offset<_i194.offset&&_n96>_i194.offset){if(_n96>_o50){var _e178={type:"attribute",offset:_o50,howMany:_n96-_o50,count:this._changeCount++};this._handleChange(_e178,t);t.push(_e178);}e.nodesToHandle=_i194.offset-e.offset;e.howMany=e.nodesToHandle;}else if(e.offset>=_i194.offset&&e.offset<_o50){if(_n96>_o50){e.nodesToHandle=_n96-_o50;e.offset=_o50;}else{e.nodesToHandle=0;}}}if(_i194.type=="remove"){if(e.offset<_i194.offset&&_n96>_i194.offset){var _o53={type:"attribute",offset:_i194.offset,howMany:_n96-_i194.offset,count:this._changeCount++};this._handleChange(_o53,t);t.push(_o53);e.nodesToHandle=_i194.offset-e.offset;e.howMany=e.nodesToHandle;}}if(_i194.type=="attribute"){if(e.offset>=_i194.offset&&_n96<=_o50){e.nodesToHandle=0;e.howMany=0;e.offset=0;}else if(e.offset<=_i194.offset&&_n96>=_o50){_i194.howMany=0;}}}}}catch(err){_didIteratorError223=true;_iteratorError223=err;}finally{try{if(!_iteratorNormalCompletion223&&_iterator223["return"]!=null){_iterator223["return"]();}}finally{if(_didIteratorError223){throw _iteratorError223;}}}e.howMany=e.nodesToHandle;delete e.nodesToHandle;}},{key:"_getInsertDiff",value:function _getInsertDiff(e,t,i){return{type:"insert",position:$h._createAt(e,t),name:i,length:1,changeCount:this._changeCount++};}},{key:"_getRemoveDiff",value:function _getRemoveDiff(e,t,i){return{type:"remove",position:$h._createAt(e,t),name:i,length:1,changeCount:this._changeCount++};}},{key:"_getAttributesDiff",value:function _getAttributesDiff(e,t,i){var n=[];i=new Map(i);var _iteratorNormalCompletion224=true;var _didIteratorError224=false;var _iteratorError224=undefined;try{for(var _iterator224=t[Symbol.iterator](),_step224;!(_iteratorNormalCompletion224=(_step224=_iterator224.next()).done);_iteratorNormalCompletion224=true){var _step224$value=_slicedToArray(_step224.value,2),_o54=_step224$value[0],_s26=_step224$value[1];var _t175=i.has(_o54)?i.get(_o54):null;if(_t175!==_s26){n.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:_o54,attributeOldValue:_s26,attributeNewValue:_t175,changeCount:this._changeCount++});}i["delete"](_o54);}}catch(err){_didIteratorError224=true;_iteratorError224=err;}finally{try{if(!_iteratorNormalCompletion224&&_iterator224["return"]!=null){_iterator224["return"]();}}finally{if(_didIteratorError224){throw _iteratorError224;}}}var _iteratorNormalCompletion225=true;var _didIteratorError225=false;var _iteratorError225=undefined;try{for(var _iterator225=i[Symbol.iterator](),_step225;!(_iteratorNormalCompletion225=(_step225=_iterator225.next()).done);_iteratorNormalCompletion225=true){var _step225$value=_slicedToArray(_step225.value,2),_t176=_step225$value[0],_o55=_step225$value[1];n.push({type:"attribute",position:e.start,range:e.clone(),length:1,attributeKey:_t176,attributeOldValue:null,attributeNewValue:_o55,changeCount:this._changeCount++});}}catch(err){_didIteratorError225=true;_iteratorError225=err;}finally{try{if(!_iteratorNormalCompletion225&&_iterator225["return"]!=null){_iterator225["return"]();}}finally{if(_didIteratorError225){throw _iteratorError225;}}}return n;}},{key:"_isInInsertedElement",value:function _isInInsertedElement(e){var t=e.parent;if(!t){return false;}var i=this._changesInElement.get(t);var n=e.startOffset;if(i){var _iteratorNormalCompletion226=true;var _didIteratorError226=false;var _iteratorError226=undefined;try{for(var _iterator226=i[Symbol.iterator](),_step226;!(_iteratorNormalCompletion226=(_step226=_iterator226.next()).done);_iteratorNormalCompletion226=true){var _e179=_step226.value;if(_e179.type=="insert"&&n>=_e179.offset&&n<_e179.offset+_e179.howMany){return true;}}}catch(err){_didIteratorError226=true;_iteratorError226=err;}finally{try{if(!_iteratorNormalCompletion226&&_iterator226["return"]!=null){_iterator226["return"]();}}finally{if(_didIteratorError226){throw _iteratorError226;}}}}return this._isInInsertedElement(t);}},{key:"_removeAllNestedChanges",value:function _removeAllNestedChanges(e,t,i){var n=new qh($h._createAt(e,t),$h._createAt(e,t+i));var _iteratorNormalCompletion227=true;var _didIteratorError227=false;var _iteratorError227=undefined;try{for(var _iterator227=n.getItems({shallow:true})[Symbol.iterator](),_step227;!(_iteratorNormalCompletion227=(_step227=_iterator227.next()).done);_iteratorNormalCompletion227=true){var _e180=_step227.value;if(_e180.is("element")){this._elementSnapshots["delete"](_e180);this._changesInElement["delete"](_e180);this._removeAllNestedChanges(_e180,0,_e180.maxOffset);}}}catch(err){_didIteratorError227=true;_iteratorError227=err;}finally{try{if(!_iteratorNormalCompletion227&&_iterator227["return"]!=null){_iterator227["return"]();}}finally{if(_didIteratorError227){throw _iteratorError227;}}}}},{key:"isEmpty",get:function get(){return this._changesInElement.size==0&&this._changedMarkers.size==0;}}]);return fg;}();function mg(e){var t=[];var _iteratorNormalCompletion228=true;var _didIteratorError228=false;var _iteratorError228=undefined;try{for(var _iterator228=e[Symbol.iterator](),_step228;!(_iteratorNormalCompletion228=(_step228=_iterator228.next()).done);_iteratorNormalCompletion228=true){var _i195=_step228.value;if(_i195.is("text")){for(var _e181=0;_e181<_i195.data.length;_e181++){t.push({name:"$text",attributes:new Map(_i195.getAttributes())});}}else{t.push({name:_i195.name,attributes:new Map(_i195.getAttributes())});}}}catch(err){_didIteratorError228=true;_iteratorError228=err;}finally{try{if(!_iteratorNormalCompletion228&&_iterator228["return"]!=null){_iterator228["return"]();}}finally{if(_didIteratorError228){throw _iteratorError228;}}}return t;}function gg(e,t){var i=[];var n=0;var o=0;var _iteratorNormalCompletion229=true;var _didIteratorError229=false;var _iteratorError229=undefined;try{for(var _iterator229=t[Symbol.iterator](),_step229;!(_iteratorNormalCompletion229=(_step229=_iterator229.next()).done);_iteratorNormalCompletion229=true){var _e182=_step229.value;if(_e182.offset>n){for(var _t178=0;_t178<_e182.offset-n;_t178++){i.push("e");}o+=_e182.offset-n;}if(_e182.type=="insert"){for(var _t179=0;_t179<_e182.howMany;_t179++){i.push("i");}n=_e182.offset+_e182.howMany;}else if(_e182.type=="remove"){for(var _t180=0;_t180<_e182.howMany;_t180++){i.push("r");}n=_e182.offset;o+=_e182.howMany;}else{i.push.apply(i,_toConsumableArray("a".repeat(_e182.howMany).split("")));n=_e182.offset+_e182.howMany;o+=_e182.howMany;}}}catch(err){_didIteratorError229=true;_iteratorError229=err;}finally{try{if(!_iteratorNormalCompletion229&&_iterator229["return"]!=null){_iterator229["return"]();}}finally{if(_didIteratorError229){throw _iteratorError229;}}}if(o<e){for(var _t177=0;_t177<e-o-n;_t177++){i.push("e");}}return i;}function pg(e){var t=e.position&&e.position.root.rootName=="$graveyard";var i=e.range&&e.range.root.rootName=="$graveyard";return!t&&!i;}var bg=/*#__PURE__*/function(){function bg(){_classCallCheck(this,bg);this._operations=[];this._undoPairs=new Map();this._undoneOperations=new Set();}_createClass(bg,[{key:"addOperation",value:function addOperation(e){if(this._operations.includes(e)){return;}this._operations.push(e);}},{key:"getOperations",value:function getOperations(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Number.POSITIVE_INFINITY;if(e<0){return[];}return this._operations.slice(e,t);}},{key:"getOperation",value:function getOperation(e){return this._operations[e];}},{key:"setOperationAsUndone",value:function setOperationAsUndone(e,t){this._undoPairs.set(t,e);this._undoneOperations.add(e);}},{key:"isUndoingOperation",value:function isUndoingOperation(e){return this._undoPairs.has(e);}},{key:"isUndoneOperation",value:function isUndoneOperation(e){return this._undoneOperations.has(e);}},{key:"getUndoneOperation",value:function getUndoneOperation(e){return this._undoPairs.get(e);}}]);return bg;}();function wg(e){return!!e&&e.length==1&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(e);}function _g(e){return!!e&&e.length==1&&/[\ud800-\udbff]/.test(e);}function vg(e){return!!e&&e.length==1&&/[\udc00-\udfff]/.test(e);}function kg(e,t){return _g(e.charAt(t-1))&&vg(e.charAt(t));}function yg(e,t){return wg(e.charAt(t));}var xg="$graveyard";var Ag=/*#__PURE__*/function(){function Ag(e){var _this67=this;_classCallCheck(this,Ag);this.model=e;this.version=0;this.history=new bg(this);this.selection=new df(this);this.roots=new yr({idProperty:"rootName"});this.differ=new fg(e.markers);this._postFixers=new Set();this._hasSelectionChangedFromTheLastChangeBlock=false;this.createRoot("$root",xg);this.listenTo(e,"applyOperation",function(e,t){var i=t[0];if(i.isDocumentOperation&&i.baseVersion!==_this67.version){throw new rr["b"]("model-document-applyOperation-wrong-version: Only operations with matching versions can be applied.",_this67,{operation:i});}},{priority:"highest"});this.listenTo(e,"applyOperation",function(e,t){var i=t[0];if(i.isDocumentOperation){_this67.differ.bufferOperation(i);}},{priority:"high"});this.listenTo(e,"applyOperation",function(e,t){var i=t[0];if(i.isDocumentOperation){_this67.version++;_this67.history.addOperation(i);}},{priority:"low"});this.listenTo(this.selection,"change",function(){_this67._hasSelectionChangedFromTheLastChangeBlock=true;});this.listenTo(e.markers,"update",function(e,t,i,n){_this67.differ.bufferMarkerChange(t.name,i,n,t.affectsData);if(i===null){t.on("change",function(e,i){_this67.differ.bufferMarkerChange(t.name,i,t.getRange(),t.affectsData);});}});}_createClass(Ag,[{key:"createRoot",value:function createRoot(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"$root";var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"main";if(this.roots.get(t)){throw new rr["b"]("model-document-createRoot-name-exists: Root with specified name already exists.",this,{name:t});}var i=new rg(this,e,t);this.roots.add(i);return i;}},{key:"destroy",value:function destroy(){this.selection.destroy();this.stopListening();}},{key:"getRoot",value:function getRoot(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"main";return this.roots.get(e);}},{key:"getRootNames",value:function getRootNames(){return Array.from(this.roots,function(e){return e.rootName;}).filter(function(e){return e!=xg;});}},{key:"registerPostFixer",value:function registerPostFixer(e){this._postFixers.add(e);}},{key:"toJSON",value:function toJSON(){var e=zr(this);e.selection="[engine.model.DocumentSelection]";e.model="[engine.model.Model]";return e;}},{key:"_handleChangeBlock",value:function _handleChangeBlock(e){if(this._hasDocumentChangedFromTheLastChangeBlock()){this._callPostFixers(e);this.selection.refresh();if(this.differ.hasDataChanges()){this.fire("change:data",e.batch);}else{this.fire("change",e.batch);}this.selection.refresh();this.differ.reset();}this._hasSelectionChangedFromTheLastChangeBlock=false;}},{key:"_hasDocumentChangedFromTheLastChangeBlock",value:function _hasDocumentChangedFromTheLastChangeBlock(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock;}},{key:"_getDefaultRoot",value:function _getDefaultRoot(){var _iteratorNormalCompletion230=true;var _didIteratorError230=false;var _iteratorError230=undefined;try{for(var _iterator230=this.roots[Symbol.iterator](),_step230;!(_iteratorNormalCompletion230=(_step230=_iterator230.next()).done);_iteratorNormalCompletion230=true){var _e183=_step230.value;if(_e183!==this.graveyard){return _e183;}}}catch(err){_didIteratorError230=true;_iteratorError230=err;}finally{try{if(!_iteratorNormalCompletion230&&_iterator230["return"]!=null){_iterator230["return"]();}}finally{if(_didIteratorError230){throw _iteratorError230;}}}return this.graveyard;}},{key:"_getDefaultRange",value:function _getDefaultRange(){var e=this._getDefaultRoot();var t=this.model;var i=t.schema;var n=t.createPositionFromPath(e,[0]);var o=i.getNearestSelectionRange(n);return o||t.createRange(n);}},{key:"_validateSelectionRange",value:function _validateSelectionRange(e){return Cg(e.start)&&Cg(e.end);}},{key:"_callPostFixers",value:function _callPostFixers(e){var t=false;do{var _iteratorNormalCompletion231=true;var _didIteratorError231=false;var _iteratorError231=undefined;try{for(var _iterator231=this._postFixers[Symbol.iterator](),_step231;!(_iteratorNormalCompletion231=(_step231=_iterator231.next()).done);_iteratorNormalCompletion231=true){var _i196=_step231.value;this.selection.refresh();t=_i196(e);if(t){break;}}}catch(err){_didIteratorError231=true;_iteratorError231=err;}finally{try{if(!_iteratorNormalCompletion231&&_iterator231["return"]!=null){_iterator231["return"]();}}finally{if(_didIteratorError231){throw _iteratorError231;}}}}while(t);}},{key:"graveyard",get:function get(){return this.getRoot(xg);}}]);return Ag;}();kr(Ag,dr);function Cg(e){var t=e.textNode;if(t){var _i197=t.data;var _n98=e.offset-t.startOffset;return!kg(_i197,_n98)&&!yg(_i197,_n98);}return true;}var Tg=/*#__PURE__*/function(){function Tg(){_classCallCheck(this,Tg);this._markers=new Map();}_createClass(Tg,[{key:Symbol.iterator,value:function value(){return this._markers.values();}},{key:"has",value:function has(e){return this._markers.has(e);}},{key:"get",value:function get(e){return this._markers.get(e)||null;}},{key:"_set",value:function _set(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var o=e instanceof Mg?e.name:e;var s=this._markers.get(o);if(s){var _e184=s.getRange();var _r18=false;if(!_e184.isEqual(t)){s._attachLiveRange(sf.fromRange(t));_r18=true;}if(i!=s.managedUsingOperations){s._managedUsingOperations=i;_r18=true;}if(typeof n==="boolean"&&n!=s.affectsData){s._affectsData=n;_r18=true;}if(_r18){this.fire("update:"+o,s,_e184,t);}return s;}var r=sf.fromRange(t);var a=new Mg(o,r,i,n);this._markers.set(o,a);this.fire("update:"+o,a,null,t);return a;}},{key:"_remove",value:function _remove(e){var t=e instanceof Mg?e.name:e;var i=this._markers.get(t);if(i){this._markers["delete"](t);this.fire("update:"+t,i,i.getRange(),null);this._destroyMarker(i);return true;}return false;}},{key:"_refresh",value:function _refresh(e){var t=e instanceof Mg?e.name:e;var i=this._markers.get(t);if(!i){throw new rr["b"]("markercollection-refresh-marker-not-exists: Marker with provided name does not exists.",this);}var n=i.getRange();this.fire("update:"+t,i,n,n,i.managedUsingOperations,i.affectsData);}},{key:"getMarkersAtPosition",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getMarkersAtPosition(e){var _iteratorNormalCompletion232,_didIteratorError232,_iteratorError232,_iterator232,_step232,_t181;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getMarkersAtPosition$(_context31){while(1){switch(_context31.prev=_context31.next){case 0:_iteratorNormalCompletion232=true;_didIteratorError232=false;_iteratorError232=undefined;_context31.prev=3;_iterator232=this[Symbol.iterator]();case 5:if(_iteratorNormalCompletion232=(_step232=_iterator232.next()).done){_context31.next=13;break;}_t181=_step232.value;if(!_t181.getRange().containsPosition(e)){_context31.next=10;break;}_context31.next=10;return _t181;case 10:_iteratorNormalCompletion232=true;_context31.next=5;break;case 13:_context31.next=19;break;case 15:_context31.prev=15;_context31.t0=_context31["catch"](3);_didIteratorError232=true;_iteratorError232=_context31.t0;case 19:_context31.prev=19;_context31.prev=20;if(!_iteratorNormalCompletion232&&_iterator232["return"]!=null){_iterator232["return"]();}case 22:_context31.prev=22;if(!_didIteratorError232){_context31.next=25;break;}throw _iteratorError232;case 25:return _context31.finish(22);case 26:return _context31.finish(19);case 27:case"end":return _context31.stop();}}},getMarkersAtPosition,this,[[3,15,19,27],[20,,22,26]]);})},{key:"getMarkersIntersectingRange",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getMarkersIntersectingRange(e){var _iteratorNormalCompletion233,_didIteratorError233,_iteratorError233,_iterator233,_step233,_t182;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getMarkersIntersectingRange$(_context32){while(1){switch(_context32.prev=_context32.next){case 0:_iteratorNormalCompletion233=true;_didIteratorError233=false;_iteratorError233=undefined;_context32.prev=3;_iterator233=this[Symbol.iterator]();case 5:if(_iteratorNormalCompletion233=(_step233=_iterator233.next()).done){_context32.next=13;break;}_t182=_step233.value;if(!(_t182.getRange().getIntersection(e)!==null)){_context32.next=10;break;}_context32.next=10;return _t182;case 10:_iteratorNormalCompletion233=true;_context32.next=5;break;case 13:_context32.next=19;break;case 15:_context32.prev=15;_context32.t0=_context32["catch"](3);_didIteratorError233=true;_iteratorError233=_context32.t0;case 19:_context32.prev=19;_context32.prev=20;if(!_iteratorNormalCompletion233&&_iterator233["return"]!=null){_iterator233["return"]();}case 22:_context32.prev=22;if(!_didIteratorError233){_context32.next=25;break;}throw _iteratorError233;case 25:return _context32.finish(22);case 26:return _context32.finish(19);case 27:case"end":return _context32.stop();}}},getMarkersIntersectingRange,this,[[3,15,19,27],[20,,22,26]]);})},{key:"destroy",value:function destroy(){var _iteratorNormalCompletion234=true;var _didIteratorError234=false;var _iteratorError234=undefined;try{for(var _iterator234=this._markers.values()[Symbol.iterator](),_step234;!(_iteratorNormalCompletion234=(_step234=_iterator234.next()).done);_iteratorNormalCompletion234=true){var _e185=_step234.value;this._destroyMarker(_e185);}}catch(err){_didIteratorError234=true;_iteratorError234=err;}finally{try{if(!_iteratorNormalCompletion234&&_iterator234["return"]!=null){_iterator234["return"]();}}finally{if(_didIteratorError234){throw _iteratorError234;}}}this._markers=null;this.stopListening();}},{key:"getMarkersGroup",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getMarkersGroup(e){var _iteratorNormalCompletion235,_didIteratorError235,_iteratorError235,_iterator235,_step235,_t183;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getMarkersGroup$(_context33){while(1){switch(_context33.prev=_context33.next){case 0:_iteratorNormalCompletion235=true;_didIteratorError235=false;_iteratorError235=undefined;_context33.prev=3;_iterator235=this._markers.values()[Symbol.iterator]();case 5:if(_iteratorNormalCompletion235=(_step235=_iterator235.next()).done){_context33.next=13;break;}_t183=_step235.value;if(!_t183.name.startsWith(e+":")){_context33.next=10;break;}_context33.next=10;return _t183;case 10:_iteratorNormalCompletion235=true;_context33.next=5;break;case 13:_context33.next=19;break;case 15:_context33.prev=15;_context33.t0=_context33["catch"](3);_didIteratorError235=true;_iteratorError235=_context33.t0;case 19:_context33.prev=19;_context33.prev=20;if(!_iteratorNormalCompletion235&&_iterator235["return"]!=null){_iterator235["return"]();}case 22:_context33.prev=22;if(!_didIteratorError235){_context33.next=25;break;}throw _iteratorError235;case 25:return _context33.finish(22);case 26:return _context33.finish(19);case 27:case"end":return _context33.stop();}}},getMarkersGroup,this,[[3,15,19,27],[20,,22,26]]);})},{key:"_destroyMarker",value:function _destroyMarker(e){e.stopListening();e._detachLiveRange();}}]);return Tg;}();kr(Tg,dr);var Mg=/*#__PURE__*/function(){function Mg(e,t,i,n){_classCallCheck(this,Mg);this.name=e;this._liveRange=this._attachLiveRange(t);this._managedUsingOperations=i;this._affectsData=n;}_createClass(Mg,[{key:"getStart",value:function getStart(){if(!this._liveRange){throw new rr["b"]("marker-destroyed: Cannot use a destroyed marker instance.",this);}return this._liveRange.start.clone();}},{key:"getEnd",value:function getEnd(){if(!this._liveRange){throw new rr["b"]("marker-destroyed: Cannot use a destroyed marker instance.",this);}return this._liveRange.end.clone();}},{key:"getRange",value:function getRange(){if(!this._liveRange){throw new rr["b"]("marker-destroyed: Cannot use a destroyed marker instance.",this);}return this._liveRange.toRange();}},{key:"is",value:function is(e){return e=="marker"||e=="model:marker";}},{key:"_attachLiveRange",value:function _attachLiveRange(e){if(this._liveRange){this._detachLiveRange();}e.delegate("change:range").to(this);e.delegate("change:content").to(this);this._liveRange=e;return e;}},{key:"_detachLiveRange",value:function _detachLiveRange(){this._liveRange.stopDelegating("change:range",this);this._liveRange.stopDelegating("change:content",this);this._liveRange.detach();this._liveRange=null;}},{key:"managedUsingOperations",get:function get(){if(!this._liveRange){throw new rr["b"]("marker-destroyed: Cannot use a destroyed marker instance.",this);}return this._managedUsingOperations;}},{key:"affectsData",get:function get(){if(!this._liveRange){throw new rr["b"]("marker-destroyed: Cannot use a destroyed marker instance.",this);}return this._affectsData;}}]);return Mg;}();kr(Mg,dr);var Eg=/*#__PURE__*/function(_jm10){_inherits(Eg,_jm10);function Eg(){_classCallCheck(this,Eg);return _possibleConstructorReturn(this,_getPrototypeOf(Eg).apply(this,arguments));}_createClass(Eg,[{key:"clone",value:function clone(){return new Eg(this.baseVersion);}},{key:"getReversed",value:function getReversed(){return new Eg(this.baseVersion+1);}},{key:"_execute",value:function _execute(){}},{key:"type",get:function get(){return"noop";}}],[{key:"className",get:function get(){return"NoOperation";}}]);return Eg;}(jm);var Pg={};Pg[Km.className]=Km;Pg[eg.className]=eg;Pg[tg.className]=tg;Pg[Zm.className]=Zm;Pg[Eg.className]=Eg;Pg[jm.className]=jm;Pg[ig.className]=ig;Pg[ng.className]=ng;Pg[sg.className]=sg;Pg[og.className]=og;var Sg=/*#__PURE__*/function(){function Sg(){_classCallCheck(this,Sg);}_createClass(Sg,null,[{key:"fromJSON",value:function fromJSON(e,t){return Pg[e.__className].fromJSON(e,t);}}]);return Sg;}();var Ig=/*#__PURE__*/function(_$h){_inherits(Ig,_$h);function Ig(e,t){var _this68;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"toNone";_classCallCheck(this,Ig);_this68=_possibleConstructorReturn(this,_getPrototypeOf(Ig).call(this,e,t,i));if(!_this68.root.is("rootElement")){throw new rr["b"]("model-liveposition-root-not-rootelement: LivePosition's root has to be an instance of RootElement.",e);}Ng.call(_assertThisInitialized(_this68));return _this68;}_createClass(Ig,[{key:"detach",value:function detach(){this.stopListening();}},{key:"is",value:function is(e){return e=="livePosition"||e=="model:livePosition"||_get(_getPrototypeOf(Ig.prototype),"is",this).call(this,e);}},{key:"toPosition",value:function toPosition(){return new $h(this.root,this.path.slice(),this.stickiness);}}],[{key:"fromPosition",value:function fromPosition(e,t){return new this(e.root,e.path.slice(),t?t:e.stickiness);}}]);return Ig;}($h);function Ng(){var _this69=this;this.listenTo(this.root.document.model,"applyOperation",function(e,t){var i=t[0];if(!i.isDocumentOperation){return;}Og.call(_this69,i);},{priority:"low"});}function Og(e){var t=this.getTransformedByOperation(e);if(!this.isEqual(t)){var _e186=this.toPosition();this.path=t.path;this.root=t.root;this.fire("change",_e186);}}kr(Ig,dr);function Rg(e,t,i,n){return e.change(function(o){var s;if(!i){s=e.document.selection;}else if(i instanceof Qh||i instanceof df){s=i;}else{s=o.createSelection(i,n);}if(!s.isCollapsed){e.deleteContent(s,{doNotAutoparagraph:true});}var r=new Lg(e,o,s.anchor);var a;if(t.is("documentFragment")){a=t.getChildren();}else{a=[t];}r.handleNodes(a,{isFirst:true,isLast:true});var c=r.getSelectionRange();if(c){if(s instanceof df){o.setSelection(c);}else{s.setTo(c);}}else{}var l=r.getAffectedRange()||e.createRange(s.anchor);r.destroy();return l;});}var Lg=/*#__PURE__*/function(){function Lg(e,t,i){_classCallCheck(this,Lg);this.model=e;this.writer=t;this.position=i;this.canMergeWith=new Set([this.position.parent]);this.schema=e.schema;this._filterAttributesOf=[];this._affectedStart=null;this._affectedEnd=null;}_createClass(Lg,[{key:"handleNodes",value:function handleNodes(e,t){e=Array.from(e);for(var _i198=0;_i198<e.length;_i198++){var _n99=e[_i198];this._handleNode(_n99,{isFirst:_i198===0&&t.isFirst,isLast:_i198===e.length-1&&t.isLast});}this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer);this._filterAttributesOf=[];}},{key:"getSelectionRange",value:function getSelectionRange(){if(this.nodeToSelect){return qh._createOn(this.nodeToSelect);}return this.model.schema.getNearestSelectionRange(this.position);}},{key:"getAffectedRange",value:function getAffectedRange(){if(!this._affectedStart){return null;}return new qh(this._affectedStart,this._affectedEnd);}},{key:"destroy",value:function destroy(){if(this._affectedStart){this._affectedStart.detach();}if(this._affectedEnd){this._affectedEnd.detach();}}},{key:"_handleNode",value:function _handleNode(e,t){if(this.schema.isObject(e)){this._handleObject(e,t);return;}var i=this._checkAndSplitToAllowedPosition(e,t);if(!i){this._handleDisallowedNode(e,t);return;}this._insert(e);this._mergeSiblingsOf(e,t);}},{key:"_handleObject",value:function _handleObject(e,t){if(this._checkAndSplitToAllowedPosition(e)){this._insert(e);}else{this._tryAutoparagraphing(e,t);}}},{key:"_handleDisallowedNode",value:function _handleDisallowedNode(e,t){if(e.is("element")){this.handleNodes(e.getChildren(),t);}else{this._tryAutoparagraphing(e,t);}}},{key:"_insert",value:function _insert(e){if(!this.schema.checkChild(this.position,e)){throw new rr["b"]("insertcontent-wrong-position: Given node cannot be inserted on the given position.",this,{node:e,position:this.position});}var t=Ig.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position);this.writer.insert(e,this.position);this.position=t.toPosition();t.detach();if(this.schema.isObject(e)&&!this.schema.checkChild(this.position,"$text")){this.nodeToSelect=e;}else{this.nodeToSelect=null;}this._filterAttributesOf.push(e);}},{key:"_setAffectedBoundaries",value:function _setAffectedBoundaries(e){if(!this._affectedStart){this._affectedStart=Ig.fromPosition(e,"toPrevious");}if(!this._affectedEnd||this._affectedEnd.isBefore(e)){if(this._affectedEnd){this._affectedEnd.detach();}this._affectedEnd=Ig.fromPosition(e,"toNext");}}},{key:"_mergeSiblingsOf",value:function _mergeSiblingsOf(e,t){if(!(e instanceof Fh)){return;}var i=this._canMergeLeft(e,t);var n=this._canMergeRight(e,t);var o=Ig._createBefore(e);o.stickiness="toNext";var s=Ig._createAfter(e);s.stickiness="toNext";if(i){var _e187=Ig.fromPosition(this.position);_e187.stickiness="toNext";if(this._affectedStart.isEqual(o)){this._affectedStart.detach();this._affectedStart=Ig._createAt(o.nodeBefore,"end","toPrevious");}this.writer.merge(o);if(o.isEqual(this._affectedEnd)&&t.isLast){this._affectedEnd.detach();this._affectedEnd=Ig._createAt(o.nodeBefore,"end","toNext");}this.position=_e187.toPosition();_e187.detach();}if(n){if(!this.position.isEqual(s)){throw new rr["b"]("insertcontent-invalid-insertion-position",this);}this.position=$h._createAt(s.nodeBefore,"end");var _e188=Ig.fromPosition(this.position,"toPrevious");if(this._affectedEnd.isEqual(s)){this._affectedEnd.detach();this._affectedEnd=Ig._createAt(s.nodeBefore,"end","toNext");}this.writer.merge(s);if(s.getShiftedBy(-1).isEqual(this._affectedStart)&&t.isFirst){this._affectedStart.detach();this._affectedStart=Ig._createAt(s.nodeBefore,0,"toPrevious");}this.position=_e188.toPosition();_e188.detach();}if(i||n){this._filterAttributesOf.push(this.position.parent);}o.detach();s.detach();}},{key:"_canMergeLeft",value:function _canMergeLeft(e,t){var i=e.previousSibling;return t.isFirst&&i instanceof Fh&&this.canMergeWith.has(i)&&this.model.schema.checkMerge(i,e);}},{key:"_canMergeRight",value:function _canMergeRight(e,t){var i=e.nextSibling;return t.isLast&&i instanceof Fh&&this.canMergeWith.has(i)&&this.model.schema.checkMerge(e,i);}},{key:"_tryAutoparagraphing",value:function _tryAutoparagraphing(e,t){var i=this.writer.createElement("paragraph");if(this._getAllowedIn(i,this.position.parent)&&this.schema.checkChild(i,e)){i._appendChild(e);this._handleNode(i,t);}}},{key:"_checkAndSplitToAllowedPosition",value:function _checkAndSplitToAllowedPosition(e){var t=this._getAllowedIn(e,this.position.parent);if(!t){return false;}while(t!=this.position.parent){if(this.schema.isLimit(this.position.parent)){return false;}if(this.position.isAtStart){var _e189=this.position.parent;this.position=this.writer.createPositionBefore(_e189);if(_e189.isEmpty&&_e189.parent===t){this.writer.remove(_e189);}}else if(this.position.isAtEnd){this.position=this.writer.createPositionAfter(this.position.parent);}else{var _e190=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position);this.writer.split(this.position);this.position=_e190;this.canMergeWith.add(this.position.nodeAfter);}}return true;}},{key:"_getAllowedIn",value:function _getAllowedIn(e,t){if(this.schema.checkChild(t,e)){return t;}if(t.parent){return this._getAllowedIn(e,t.parent);}return null;}}]);return Lg;}();function zg(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(t.isCollapsed){return;}var n=t.getFirstRange();if(n.root.rootName=="$graveyard"){return;}var o=e.schema;e.change(function(e){if(!i.doNotResetEntireContent&&Hg(o,t)){Fg(e,t,o);return;}var s=n.start;var r=Ig.fromPosition(n.end,"toNext");if(!n.start.isTouching(n.end)){e.remove(n);}if(!i.leaveUnmerged){Dg(e,s,r);o.removeDisallowedAttributes(s.parent.getChildren(),e);}Wg(e,t,s);if(!i.doNotAutoparagraph&&jg(o,s)){Vg(e,s,t);}r.detach();});}function Dg(e,t,i){var n=t.parent;var o=i.parent;if(n==o){return;}if(e.model.schema.isLimit(n)||e.model.schema.isLimit(o)){return;}if(!Bg(t,i,e.model.schema)){return;}t=e.createPositionAfter(n);i=e.createPositionBefore(o);if(!i.isEqual(t)){e.insert(o,t);}e.merge(t);while(i.parent.isEmpty){var _t184=i.parent;i=e.createPositionBefore(_t184);e.remove(_t184);}Dg(e,t,i);}function jg(e,t){var i=e.checkChild(t,"$text");var n=e.checkChild(t,"paragraph");return!i&&n;}function Bg(e,t,i){var n=new qh(e,t);var _iteratorNormalCompletion236=true;var _didIteratorError236=false;var _iteratorError236=undefined;try{for(var _iterator236=n.getWalker()[Symbol.iterator](),_step236;!(_iteratorNormalCompletion236=(_step236=_iterator236.next()).done);_iteratorNormalCompletion236=true){var _e191=_step236.value;if(i.isLimit(_e191.item)){return false;}}}catch(err){_didIteratorError236=true;_iteratorError236=err;}finally{try{if(!_iteratorNormalCompletion236&&_iterator236["return"]!=null){_iterator236["return"]();}}finally{if(_didIteratorError236){throw _iteratorError236;}}}return true;}function Vg(e,t,i){var n=e.createElement("paragraph");e.insert(n,t);Wg(e,i,e.createPositionAt(n,0));}function Fg(e,t){var i=e.model.schema.getLimitElement(t);e.remove(e.createRangeIn(i));Vg(e,e.createPositionAt(i,0),t);}function Hg(e,t){var i=e.getLimitElement(t);if(!t.containsEntireContent(i)){return false;}var n=t.getFirstRange();if(n.start.parent==n.end.parent){return false;}return e.checkChild(i,"paragraph");}function Wg(e,t,i){if(t instanceof df){e.setSelection(i);}else{t.setTo(i);}}var Ug=' ,.?!:;"-()';function $g(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=e.schema;var o=i.direction!="backward";var s=i.unit?i.unit:"character";var r=t.focus;var a=new Wh({boundaries:Jg(r,o),singleCharacters:true,direction:o?"forward":"backward"});var c={walker:a,schema:n,isForward:o,unit:s};var l;var _loop3=function _loop3(){if(l.done){return{v:void 0};}var i=qg(c,l.value);if(i){if(t instanceof df){e.change(function(e){e.setSelectionFocus(i);});}else{t.setFocus(i);}return{v:void 0};}};while(l=a.next()){var _ret2=_loop3();if(_typeof(_ret2)==="object")return _ret2.v;}}function qg(e,t){if(t.type=="text"){if(e.unit==="word"){return Gg(e.walker,e.isForward);}return Yg(e.walker,e.unit,e.isForward);}if(t.type==(e.isForward?"elementStart":"elementEnd")){if(e.schema.isObject(t.item)){return $h._createAt(t.item,e.isForward?"after":"before");}if(e.schema.checkChild(t.nextPosition,"$text")){return t.nextPosition;}}else{if(e.schema.isLimit(t.item)){e.walker.skip(function(){return true;});return;}if(e.schema.checkChild(t.nextPosition,"$text")){return t.nextPosition;}}}function Yg(e,t){var i=e.position.textNode;if(i){var _n100=i.data;var _o56=e.position.offset-i.startOffset;while(kg(_n100,_o56)||t=="character"&&yg(_n100,_o56)){e.next();_o56=e.position.offset-i.startOffset;}}return e.position;}function Gg(e,t){var i=e.position.textNode;if(i){var _n101=e.position.offset-i.startOffset;while(!Xg(i.data,_n101,t)&&!Kg(i,_n101,t)){e.next();var _o57=t?e.position.nodeAfter:e.position.nodeBefore;if(_o57&&_o57.is("text")){var _n102=_o57.data.charAt(t?0:_o57.data.length-1);if(!Ug.includes(_n102)){e.next();i=e.position.textNode;}}_n101=e.position.offset-i.startOffset;}}return e.position;}function Jg(e,t){var i=e.root;var n=$h._createAt(i,t?"end":0);if(t){return new qh(e,n);}else{return new qh(n,e);}}function Xg(e,t,i){var n=t+(i?0:-1);return Ug.includes(e.charAt(n));}function Kg(e,t,i){return t===(i?e.endOffset:0);}function Qg(e,t){return e.change(function(e){var i=e.createDocumentFragment();var n=t.getFirstRange();if(!n||n.isCollapsed){return i;}var o=n.start.root;var s=n.start.getCommonPath(n.end);var r=o.getNodeByPath(s);var a;if(n.start.parent==n.end.parent){a=n;}else{a=e.createRange(e.createPositionAt(r,n.start.path[s.length]),e.createPositionAt(r,n.end.path[s.length]+1));}var c=a.end.offset-a.start.offset;var _iteratorNormalCompletion237=true;var _didIteratorError237=false;var _iteratorError237=undefined;try{for(var _iterator237=a.getItems({shallow:true})[Symbol.iterator](),_step237;!(_iteratorNormalCompletion237=(_step237=_iterator237.next()).done);_iteratorNormalCompletion237=true){var _t186=_step237.value;if(_t186.is("textProxy")){e.appendText(_t186.data,_t186.getAttributes(),i);}else{e.append(_t186._clone(true),i);}}}catch(err){_didIteratorError237=true;_iteratorError237=err;}finally{try{if(!_iteratorNormalCompletion237&&_iterator237["return"]!=null){_iterator237["return"]();}}finally{if(_didIteratorError237){throw _iteratorError237;}}}if(a!=n){var _t185=n._getTransformedByMove(a.start,e.createPositionAt(i,0),c)[0];var _o58=e.createRange(e.createPositionAt(i,0),_t185.start);var _s27=e.createRange(_t185.end,e.createPositionAt(i,"end"));Zg(_s27,e);Zg(_o58,e);}return i;});}function Zg(e,t){var i=[];Array.from(e.getItems({direction:"backward"})).map(function(e){return t.createRangeOn(e);}).filter(function(t){var i=(t.start.isAfter(e.start)||t.start.isEqual(e.start))&&(t.end.isBefore(e.end)||t.end.isEqual(e.end));return i;}).forEach(function(e){i.push(e.start.parent);t.remove(e);});i.forEach(function(e){var i=e;while(i.parent&&i.isEmpty){var _e192=t.createRangeOn(i);i=i.parent;t.remove(_e192);}});}function ep(e){e.document.registerPostFixer(function(t){return tp(t,e);});}function tp(e,t){var i=t.document.selection;var n=t.schema;var o=[];var s=false;var _iteratorNormalCompletion238=true;var _didIteratorError238=false;var _iteratorError238=undefined;try{for(var _iterator238=i.getRanges()[Symbol.iterator](),_step238;!(_iteratorNormalCompletion238=(_step238=_iterator238.next()).done);_iteratorNormalCompletion238=true){var _e193=_step238.value;var _t187=ip(_e193,n);if(_t187){o.push(_t187);s=true;}else{o.push(_e193);}}}catch(err){_didIteratorError238=true;_iteratorError238=err;}finally{try{if(!_iteratorNormalCompletion238&&_iterator238["return"]!=null){_iterator238["return"]();}}finally{if(_didIteratorError238){throw _iteratorError238;}}}if(s){e.setSelection(ap(o),{backward:i.isBackward});}}function ip(e,t){if(e.isCollapsed){return np(e,t);}return op(e,t);}function np(e,t){var i=e.start;var n=t.getNearestSelectionRange(i);if(!n){return null;}if(!n.isCollapsed){return n;}var o=n.start;if(i.isEqual(o)){return null;}return new qh(o);}function op(e,t){var i=e.start;var n=e.end;var o=t.checkChild(i,"$text");var s=t.checkChild(n,"$text");var r=t.getLimitElement(i);var a=t.getLimitElement(n);if(r===a){if(o&&s){return null;}if(rp(i,n,t)){var _e194=i.nodeAfter&&t.isObject(i.nodeAfter);var _o59=_e194?null:t.getNearestSelectionRange(i,"forward");var _s28=n.nodeBefore&&t.isObject(n.nodeBefore);var _r19=_s28?null:t.getNearestSelectionRange(n,"backward");var _a10=_o59?_o59.start:i;var _c5=_r19?_r19.start:n;return new qh(_a10,_c5);}}var c=r&&!r.is("rootElement");var l=a&&!a.is("rootElement");if(c||l){var _e195=i.nodeAfter&&n.nodeBefore&&i.nodeAfter.parent===n.nodeBefore.parent;var _o60=c&&(!_e195||!cp(i.nodeAfter,t));var _s29=l&&(!_e195||!cp(n.nodeBefore,t));var _d2=i;var _u2=n;if(_o60){_d2=$h._createBefore(sp(r,t));}if(_s29){_u2=$h._createAfter(sp(a,t));}return new qh(_d2,_u2);}return null;}function sp(e,t){var i=e;var n=i;while(t.isLimit(n)&&n.parent){i=n;n=n.parent;}return i;}function rp(e,t,i){var n=e.nodeAfter&&!i.isLimit(e.nodeAfter)||i.checkChild(e,"$text");var o=t.nodeBefore&&!i.isLimit(t.nodeBefore)||i.checkChild(t,"$text");return n||o;}function ap(e){var t=[];t.push(e.shift());var _iteratorNormalCompletion239=true;var _didIteratorError239=false;var _iteratorError239=undefined;try{for(var _iterator239=e[Symbol.iterator](),_step239;!(_iteratorNormalCompletion239=(_step239=_iterator239.next()).done);_iteratorNormalCompletion239=true){var _i199=_step239.value;var _e196=t.pop();if(_i199.isIntersecting(_e196)){var _n103=_e196.start.isAfter(_i199.start)?_i199.start:_e196.start;var _o61=_e196.end.isAfter(_i199.end)?_e196.end:_i199.end;var _s30=new qh(_n103,_o61);t.push(_s30);}else{t.push(_e196);t.push(_i199);}}}catch(err){_didIteratorError239=true;_iteratorError239=err;}finally{try{if(!_iteratorNormalCompletion239&&_iterator239["return"]!=null){_iterator239["return"]();}}finally{if(_didIteratorError239){throw _iteratorError239;}}}return t;}function cp(e,t){return e&&t.isObject(e);}var lp=/*#__PURE__*/function(){function lp(){var _this70=this;_classCallCheck(this,lp);this.markers=new Tg();this.document=new Ag(this);this.schema=new um();this._pendingChanges=[];this._currentWriter=null;["insertContent","deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach(function(e){return _this70.decorate(e);});this.on("applyOperation",function(e,t){var i=t[0];i._validate();},{priority:"highest"});this.schema.register("$root",{isLimit:true});this.schema.register("$block",{allowIn:"$root",isBlock:true});this.schema.register("$text",{allowIn:"$block",isInline:true});this.schema.register("$clipboardHolder",{allowContentOf:"$root",isLimit:true});this.schema.extend("$text",{allowIn:"$clipboardHolder"});this.schema.register("$marker");this.schema.addChildCheck(function(e,t){if(t.name==="$marker"){return true;}});ep(this);}_createClass(lp,[{key:"change",value:function change(e){try{if(this._pendingChanges.length===0){this._pendingChanges.push({batch:new Dm(),callback:e});return this._runPendingChanges()[0];}else{return e(this._currentWriter);}}catch(e){rr["b"].rethrowUnexpectedError(e,this);}}},{key:"enqueueChange",value:function enqueueChange(e,t){try{if(typeof e==="string"){e=new Dm(e);}else if(typeof e=="function"){t=e;e=new Dm();}this._pendingChanges.push({batch:e,callback:t});if(this._pendingChanges.length==1){this._runPendingChanges();}}catch(e){rr["b"].rethrowUnexpectedError(e,this);}}},{key:"applyOperation",value:function applyOperation(e){e._execute();}},{key:"insertContent",value:function insertContent(e,t,i){return Rg(this,e,t,i);}},{key:"deleteContent",value:function deleteContent(e,t){zg(this,e,t);}},{key:"modifySelection",value:function modifySelection(e,t){$g(this,e,t);}},{key:"getSelectedContent",value:function getSelectedContent(e){return Qg(this,e);}},{key:"hasContent",value:function hasContent(e,t){var i=e instanceof Fh?qh._createIn(e):e;if(i.isCollapsed){return false;}var _iteratorNormalCompletion240=true;var _didIteratorError240=false;var _iteratorError240=undefined;try{for(var _iterator240=this.markers.getMarkersIntersectingRange(i)[Symbol.iterator](),_step240;!(_iteratorNormalCompletion240=(_step240=_iterator240.next()).done);_iteratorNormalCompletion240=true){var _e197=_step240.value;if(_e197.affectsData){return true;}}}catch(err){_didIteratorError240=true;_iteratorError240=err;}finally{try{if(!_iteratorNormalCompletion240&&_iterator240["return"]!=null){_iterator240["return"]();}}finally{if(_didIteratorError240){throw _iteratorError240;}}}var _ref23=t||{},_ref23$ignoreWhitespa=_ref23.ignoreWhitespaces,n=_ref23$ignoreWhitespa===void 0?false:_ref23$ignoreWhitespa;var _iteratorNormalCompletion241=true;var _didIteratorError241=false;var _iteratorError241=undefined;try{for(var _iterator241=i.getItems()[Symbol.iterator](),_step241;!(_iteratorNormalCompletion241=(_step241=_iterator241.next()).done);_iteratorNormalCompletion241=true){var _e198=_step241.value;if(_e198.is("textProxy")){if(!n){return true;}else if(_e198.data.search(/\S/)!==-1){return true;}}else if(this.schema.isObject(_e198)){return true;}}}catch(err){_didIteratorError241=true;_iteratorError241=err;}finally{try{if(!_iteratorNormalCompletion241&&_iterator241["return"]!=null){_iterator241["return"]();}}finally{if(_didIteratorError241){throw _iteratorError241;}}}return false;}},{key:"createPositionFromPath",value:function createPositionFromPath(e,t,i){return new $h(e,t,i);}},{key:"createPositionAt",value:function createPositionAt(e,t){return $h._createAt(e,t);}},{key:"createPositionAfter",value:function createPositionAfter(e){return $h._createAfter(e);}},{key:"createPositionBefore",value:function createPositionBefore(e){return $h._createBefore(e);}},{key:"createRange",value:function createRange(e,t){return new qh(e,t);}},{key:"createRangeIn",value:function createRangeIn(e){return qh._createIn(e);}},{key:"createRangeOn",value:function createRangeOn(e){return qh._createOn(e);}},{key:"createSelection",value:function createSelection(e,t,i){return new Qh(e,t,i);}},{key:"createBatch",value:function createBatch(e){return new Dm(e);}},{key:"createOperationFromJSON",value:function createOperationFromJSON(e){return Sg.fromJSON(e,this.document);}},{key:"destroy",value:function destroy(){this.document.destroy();this.stopListening();}},{key:"_runPendingChanges",value:function _runPendingChanges(){var e=[];this.fire("_beforeChanges");while(this._pendingChanges.length){var _t188=this._pendingChanges[0].batch;this._currentWriter=new ag(this,_t188);var _i200=this._pendingChanges[0].callback(this._currentWriter);e.push(_i200);this.document._handleChangeBlock(this._currentWriter);this._pendingChanges.shift();this._currentWriter=null;}this.fire("_afterChanges");return e;}}]);return lp;}();kr(lp,Jc);var dp=/*#__PURE__*/function(){function dp(){_classCallCheck(this,dp);this._listener=Object.create(Ud);}_createClass(dp,[{key:"listenTo",value:function listenTo(e){var _this71=this;this._listener.listenTo(e,"keydown",function(e,t){_this71._listener.fire("_keydown:"+Ll(t),t);});}},{key:"set",value:function set(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=zl(e);var o=i.priority;this._listener.listenTo(this._listener,"_keydown:"+n,function(e,i){t(i,function(){i.preventDefault();i.stopPropagation();e.stop();});e["return"]=true;},{priority:o});}},{key:"press",value:function press(e){return!!this._listener.fire("_keydown:"+Ll(e),e);}},{key:"destroy",value:function destroy(){this._listener.stopListening();}}]);return dp;}();var up=/*#__PURE__*/function(_dp){_inherits(up,_dp);function up(e){var _this72;_classCallCheck(this,up);_this72=_possibleConstructorReturn(this,_getPrototypeOf(up).call(this));_this72.editor=e;return _this72;}_createClass(up,[{key:"set",value:function set(e,t){var _this73=this;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(typeof t=="string"){var _e199=t;t=function t(_t189,i){_this73.editor.execute(_e199);i();};}_get(_getPrototypeOf(up.prototype),"set",this).call(this,e,t,i);}}]);return up;}(dp);var hp=/*#__PURE__*/function(){function hp(){var _this74=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,hp);this._context=e.context||new Nr({language:e.language});this._context._addEditor(this,!e.context);var t=Array.from(this.constructor.builtinPlugins||[]);this.config=new Js(e,this.constructor.defaultConfig);this.config.define("plugins",t);this.config.define(this._context._getEditorConfig());this.plugins=new xr(this,t,this._context.plugins);this.locale=this._context.locale;this.t=this.locale.t;this.commands=new cm();this.set("state","initializing");this.once("ready",function(){return _this74.state="ready";},{priority:"high"});this.once("destroy",function(){return _this74.state="destroyed";},{priority:"high"});this.set("isReadOnly",false);this.model=new lp();var i=new Oc();this.data=new Nm(this.model,i);this.editing=new am(this.model,i);this.editing.view.document.bind("isReadOnly").to(this);this.conversion=new Rm([this.editing.downcastDispatcher,this.data.downcastDispatcher],this.data.upcastDispatcher);this.conversion.addAlias("dataDowncast",this.data.downcastDispatcher);this.conversion.addAlias("editingDowncast",this.editing.downcastDispatcher);this.keystrokes=new up(this);this.keystrokes.listenTo(this.editing.view.document);}_createClass(hp,[{key:"initPlugins",value:function initPlugins(){var e=this.config;var t=e.get("plugins");var i=e.get("removePlugins")||[];var n=e.get("extraPlugins")||[];return this.plugins.init(t.concat(n),i);}},{key:"destroy",value:function destroy(){var _this75=this;var e=Promise.resolve();if(this.state=="initializing"){e=new Promise(function(e){return _this75.once("ready",e);});}return e.then(function(){_this75.fire("destroy");_this75.stopListening();_this75.commands.destroy();}).then(function(){return _this75.plugins.destroy();}).then(function(){_this75.model.destroy();_this75.data.destroy();_this75.editing.destroy();_this75.keystrokes.destroy();}).then(function(){return _this75._context._removeEditor(_this75);});}},{key:"execute",value:function execute(){try{var _this$commands;(_this$commands=this.commands).execute.apply(_this$commands,arguments);}catch(e){rr["b"].rethrowUnexpectedError(e,this);}}}]);return hp;}();kr(hp,Jc);var fp={setData:function setData(e){this.data.set(e);},getData:function getData(e){return this.data.get(e);}};var mp=fp;var gp=/*#__PURE__*/function(){function gp(){_classCallCheck(this,gp);}_createClass(gp,[{key:"getHtml",value:function getHtml(e){var t=document.implementation.createHTMLDocument("");var i=t.createElement("div");i.appendChild(e);return i.innerHTML;}}]);return gp;}();var pp=/*#__PURE__*/function(){function pp(e){_classCallCheck(this,pp);this._domParser=new DOMParser();this._domConverter=new Dd(e,{blockFillerMode:"nbsp"});this._htmlWriter=new gp();}_createClass(pp,[{key:"toData",value:function toData(e){var t=this._domConverter.viewToDom(e,document);return this._htmlWriter.getHtml(t);}},{key:"toView",value:function toView(e){var t=this._toDom(e);return this._domConverter.domToView(t);}},{key:"_toDom",value:function _toDom(e){var t=this._domParser.parseFromString(e,"text/html");var i=t.createDocumentFragment();var n=t.body.childNodes;while(n.length>0){i.appendChild(n[0]);}return i;}}]);return pp;}();var bp=/*#__PURE__*/function(){function bp(e){_classCallCheck(this,bp);this.editor=e;this._components=new Map();}_createClass(bp,[{key:"names",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function names(){var _iteratorNormalCompletion242,_didIteratorError242,_iteratorError242,_iterator242,_step242,_e200;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function names$(_context34){while(1){switch(_context34.prev=_context34.next){case 0:_iteratorNormalCompletion242=true;_didIteratorError242=false;_iteratorError242=undefined;_context34.prev=3;_iterator242=this._components.values()[Symbol.iterator]();case 5:if(_iteratorNormalCompletion242=(_step242=_iterator242.next()).done){_context34.next=12;break;}_e200=_step242.value;_context34.next=9;return _e200.originalName;case 9:_iteratorNormalCompletion242=true;_context34.next=5;break;case 12:_context34.next=18;break;case 14:_context34.prev=14;_context34.t0=_context34["catch"](3);_didIteratorError242=true;_iteratorError242=_context34.t0;case 18:_context34.prev=18;_context34.prev=19;if(!_iteratorNormalCompletion242&&_iterator242["return"]!=null){_iterator242["return"]();}case 21:_context34.prev=21;if(!_didIteratorError242){_context34.next=24;break;}throw _iteratorError242;case 24:return _context34.finish(21);case 25:return _context34.finish(18);case 26:case"end":return _context34.stop();}}},names,this,[[3,14,18,26],[19,,21,25]]);})},{key:"add",value:function add(e,t){if(this.has(e)){throw new rr["b"]("componentfactory-item-exists: The item already exists in the component factory.",this,{name:e});}this._components.set(wp(e),{callback:t,originalName:e});}},{key:"create",value:function create(e){if(!this.has(e)){throw new rr["b"]("componentfactory-item-missing: The required component is not registered in the factory.",this,{name:e});}return this._components.get(wp(e)).callback(this.editor.locale);}},{key:"has",value:function has(e){return this._components.has(wp(e));}}]);return bp;}();function wp(e){return String(e).toLowerCase();}var _p=/*#__PURE__*/function(){function _p(){_classCallCheck(this,_p);this.set("isFocused",false);this.set("focusedElement",null);this._elements=new Set();this._nextEventLoopTimeout=null;}_createClass(_p,[{key:"add",value:function add(e){var _this76=this;if(this._elements.has(e)){throw new rr["b"]("focusTracker-add-element-already-exist",this);}this.listenTo(e,"focus",function(){return _this76._focus(e);},{useCapture:true});this.listenTo(e,"blur",function(){return _this76._blur();},{useCapture:true});this._elements.add(e);}},{key:"remove",value:function remove(e){if(e===this.focusedElement){this._blur(e);}if(this._elements.has(e)){this.stopListening(e);this._elements["delete"](e);}}},{key:"destroy",value:function destroy(){this.stopListening();}},{key:"_focus",value:function _focus(e){clearTimeout(this._nextEventLoopTimeout);this.focusedElement=e;this.isFocused=true;}},{key:"_blur",value:function _blur(){var _this77=this;clearTimeout(this._nextEventLoopTimeout);this._nextEventLoopTimeout=setTimeout(function(){_this77.focusedElement=null;_this77.isFocused=false;},0);}}]);return _p;}();kr(_p,Ud);kr(_p,Jc);var vp=/*#__PURE__*/function(){function vp(e){var _this78=this;_classCallCheck(this,vp);this.editor=e;this.componentFactory=new bp(e);this.focusTracker=new _p();this._editableElementsMap=new Map();this.listenTo(e.editing.view.document,"layoutChanged",function(){return _this78.update();});}_createClass(vp,[{key:"update",value:function update(){this.fire("update");}},{key:"destroy",value:function destroy(){this.stopListening();this.focusTracker.destroy();var _iteratorNormalCompletion243=true;var _didIteratorError243=false;var _iteratorError243=undefined;try{for(var _iterator243=this._editableElementsMap.values()[Symbol.iterator](),_step243;!(_iteratorNormalCompletion243=(_step243=_iterator243.next()).done);_iteratorNormalCompletion243=true){var _e201=_step243.value;_e201.ckeditorInstance=null;}}catch(err){_didIteratorError243=true;_iteratorError243=err;}finally{try{if(!_iteratorNormalCompletion243&&_iterator243["return"]!=null){_iterator243["return"]();}}finally{if(_didIteratorError243){throw _iteratorError243;}}}this._editableElementsMap=new Map();}},{key:"setEditableElement",value:function setEditableElement(e,t){this._editableElementsMap.set(e,t);if(!t.ckeditorInstance){t.ckeditorInstance=this.editor;}}},{key:"getEditableElement",value:function getEditableElement(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"main";return this._editableElementsMap.get(e);}},{key:"getEditableElementsNames",value:function getEditableElementsNames(){return this._editableElementsMap.keys();}},{key:"element",get:function get(){return null;}},{key:"_editableElements",get:function get(){console.warn("editor-ui-deprecated-editable-elements: "+"The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this});return this._editableElementsMap;}}]);return vp;}();kr(vp,dr);function kp(_ref24){var e=_ref24.origin,t=_ref24.originKeystrokeHandler,i=_ref24.originFocusTracker,n=_ref24.toolbar,o=_ref24.beforeFocus,s=_ref24.afterBlur;i.add(n.element);t.set("Alt+F10",function(e,t){if(i.isFocused&&!n.focusTracker.isFocused){if(o){o();}n.focus();t();}});n.keystrokes.set("Esc",function(t,i){if(n.focusTracker.isFocused){e.focus();if(s){s();}i();}});}function yp(e){if(Array.isArray(e)){return{items:e};}if(!e){return{items:[]};}return Object.assign({items:[]},e);}var xp=i(17);var Ap=new WeakMap();function Cp(e){var t=e.view,i=e.element,n=e.text,_e$isDirectHost=e.isDirectHost,o=_e$isDirectHost===void 0?true:_e$isDirectHost;var s=t.document;if(!Ap.has(s)){Ap.set(s,new Map());s.registerPostFixer(function(e){return Sp(s,e);});}Ap.get(s).set(i,{text:n,isDirectHost:o});t.change(function(e){return Sp(s,e);});}function Tp(e,t){var i=t.document;e.change(function(e){if(!Ap.has(i)){return;}var n=Ap.get(i);var o=n.get(t);e.removeAttribute("data-placeholder",o.hostElement);Ep(e,o.hostElement);n["delete"](t);});}function Mp(e,t){if(!t.hasClass("ck-placeholder")){e.addClass("ck-placeholder",t);return true;}return false;}function Ep(e,t){if(t.hasClass("ck-placeholder")){e.removeClass("ck-placeholder",t);return true;}return false;}function Pp(e){if(!e.isAttached()){return false;}var t=!Array.from(e.getChildren()).some(function(e){return!e.is("uiElement");});var i=e.document;if(!i.isFocused&&t){return true;}var n=i.selection;var o=n.anchor;if(t&&o&&o.parent!==e){return true;}return false;}function Sp(e,t){var i=Ap.get(e);var n=false;var _iteratorNormalCompletion244=true;var _didIteratorError244=false;var _iteratorError244=undefined;try{for(var _iterator244=i[Symbol.iterator](),_step244;!(_iteratorNormalCompletion244=(_step244=_iterator244.next()).done);_iteratorNormalCompletion244=true){var _step244$value=_slicedToArray(_step244.value,2),_e202=_step244$value[0],_o62=_step244$value[1];if(Ip(t,_e202,_o62)){n=true;}}}catch(err){_didIteratorError244=true;_iteratorError244=err;}finally{try{if(!_iteratorNormalCompletion244&&_iterator244["return"]!=null){_iterator244["return"]();}}finally{if(_didIteratorError244){throw _iteratorError244;}}}return n;}function Ip(e,t,i){var n=i.text,o=i.isDirectHost;var s=o?t:Np(t);var r=false;if(!s){return false;}i.hostElement=s;if(s.getAttribute("data-placeholder")!==n){e.setAttribute("data-placeholder",n,s);r=true;}if(Pp(s)){if(Mp(e,s)){r=true;}}else if(Ep(e,s)){r=true;}return r;}function Np(e){if(e.childCount===1){var _t190=e.getChild(0);if(_t190.is("element")&&!_t190.is("uiElement")){return _t190;}}return null;}var Op=/*#__PURE__*/function(_vp){_inherits(Op,_vp);function Op(e,t){var _this79;_classCallCheck(this,Op);_this79=_possibleConstructorReturn(this,_getPrototypeOf(Op).call(this,e));_this79.view=t;_this79._toolbarConfig=yp(e.config.get("toolbar"));return _this79;}_createClass(Op,[{key:"init",value:function init(){var e=this.editor;var t=this.view;var i=e.editing.view;var n=t.editable;var o=i.document.getRoot();t.editable.name=o.rootName;t.render();var s=n.element;this.setEditableElement(n.name,s);this.focusTracker.add(s);t.editable.bind("isFocused").to(this.focusTracker);i.attachDomRoot(s);this._initPlaceholder();this._initToolbar();this.fire("ready");}},{key:"destroy",value:function destroy(){var e=this.view;var t=this.editor.editing.view;t.detachDomRoot(e.editable.name);e.destroy();_get(_getPrototypeOf(Op.prototype),"destroy",this).call(this);}},{key:"_initToolbar",value:function _initToolbar(){var e=this.editor;var t=this.view;var i=t.toolbar;i.fillFromConfig(this._toolbarConfig.items,this.componentFactory);kp({origin:e.editing.view,originFocusTracker:this.focusTracker,originKeystrokeHandler:e.keystrokes,toolbar:i});}},{key:"_initPlaceholder",value:function _initPlaceholder(){var e=this.editor;var t=e.editing.view;var i=t.document.getRoot();var n=e.sourceElement;var o=e.config.get("placeholder")||n&&n.tagName.toLowerCase()==="textarea"&&n.getAttribute("placeholder");if(o){Cp({view:t,element:i,text:o,isDirectHost:false});}}}]);return Op;}(vp);var Rp=/*#__PURE__*/function(_yr){_inherits(Rp,_yr);function Rp(e){var _this80;_classCallCheck(this,Rp);_this80=_possibleConstructorReturn(this,_getPrototypeOf(Rp).call(this,{idProperty:"viewUid"}));_this80.on("add",function(e,t,i){if(!t.isRendered){t.render();}if(t.element&&_this80._parentElement){_this80._parentElement.insertBefore(t.element,_this80._parentElement.children[i]);}});_this80.on("remove",function(e,t){if(t.element&&_this80._parentElement){t.element.remove();}});_this80.locale=e;_this80._parentElement=null;return _this80;}_createClass(Rp,[{key:"destroy",value:function destroy(){this.map(function(e){return e.destroy();});}},{key:"setParent",value:function setParent(e){this._parentElement=e;}},{key:"delegate",value:function delegate(){var _this81=this;for(var _len17=arguments.length,e=new Array(_len17),_key17=0;_key17<_len17;_key17++){e[_key17]=arguments[_key17];}if(!e.length||!Lp(e)){throw new rr["b"]("ui-viewcollection-delegate-wrong-events: All event names must be strings.",this);}return{to:function to(t){var _iteratorNormalCompletion245=true;var _didIteratorError245=false;var _iteratorError245=undefined;try{for(var _iterator245=_this81[Symbol.iterator](),_step245;!(_iteratorNormalCompletion245=(_step245=_iterator245.next()).done);_iteratorNormalCompletion245=true){var _i205=_step245.value;for(var _i206=0,_e205=e;_i206<_e205.length;_i206++){var _n104=_e205[_i206];_i205.delegate(_n104).to(t);}}}catch(err){_didIteratorError245=true;_iteratorError245=err;}finally{try{if(!_iteratorNormalCompletion245&&_iterator245["return"]!=null){_iterator245["return"]();}}finally{if(_didIteratorError245){throw _iteratorError245;}}}_this81.on("add",function(i,n){for(var _i201=0,_e203=e;_i201<_e203.length;_i201++){var _i202=_e203[_i201];n.delegate(_i202).to(t);}});_this81.on("remove",function(i,n){for(var _i203=0,_e204=e;_i203<_e204.length;_i203++){var _i204=_e204[_i203];n.stopDelegating(_i204,t);}});}};}}]);return Rp;}(yr);function Lp(e){return e.every(function(e){return typeof e=="string";});}var zp="http://www.w3.org/1999/xhtml";var Dp=/*#__PURE__*/function(){function Dp(e){_classCallCheck(this,Dp);Object.assign(this,Gp(Yp(e)));this._isRendered=false;this._revertData=null;}_createClass(Dp,[{key:"render",value:function render(){var e=this._renderNode({intoFragment:true});this._isRendered=true;return e;}},{key:"apply",value:function apply(e){this._revertData=ab();this._renderNode({node:e,isApplying:true,revertData:this._revertData});return e;}},{key:"revert",value:function revert(e){if(!this._revertData){throw new rr["b"]("ui-template-revert-not-applied: Attempting to revert a template which has not been applied yet.",[this,e]);}this._revertTemplateFromNode(e,this._revertData);}},{key:"getViews",value:/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function getViews(){var _marked5,e;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function getViews$(_context36){while(1){switch(_context36.prev=_context36.next){case 0:e=function _ref25(t){var _iteratorNormalCompletion246,_didIteratorError246,_iteratorError246,_iterator246,_step246,_i207;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function e$(_context35){while(1){switch(_context35.prev=_context35.next){case 0:if(!t.children){_context35.next=32;break;}_iteratorNormalCompletion246=true;_didIteratorError246=false;_iteratorError246=undefined;_context35.prev=4;_iterator246=t.children[Symbol.iterator]();case 6:if(_iteratorNormalCompletion246=(_step246=_iterator246.next()).done){_context35.next=18;break;}_i207=_step246.value;if(!ob(_i207)){_context35.next=13;break;}_context35.next=11;return _i207;case 11:_context35.next=15;break;case 13:if(!sb(_i207)){_context35.next=15;break;}return _context35.delegateYield(e(_i207),"t0",15);case 15:_iteratorNormalCompletion246=true;_context35.next=6;break;case 18:_context35.next=24;break;case 20:_context35.prev=20;_context35.t1=_context35["catch"](4);_didIteratorError246=true;_iteratorError246=_context35.t1;case 24:_context35.prev=24;_context35.prev=25;if(!_iteratorNormalCompletion246&&_iterator246["return"]!=null){_iterator246["return"]();}case 27:_context35.prev=27;if(!_didIteratorError246){_context35.next=30;break;}throw _iteratorError246;case 30:return _context35.finish(27);case 31:return _context35.finish(24);case 32:case"end":return _context35.stop();}}},_marked5,null,[[4,20,24,32],[25,,27,31]]);};_marked5=/*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(e);return _context36.delegateYield(e(this),"t0",3);case 3:case"end":return _context36.stop();}}},getViews,this);})},{key:"_renderNode",value:function _renderNode(e){var t;if(e.node){t=this.tag&&this.text;}else{t=this.tag?this.text:!this.text;}if(t){throw new rr["b"]('ui-template-wrong-syntax: Node definition must have either "tag" or "text" when rendering a new Node.',this);}if(this.text){return this._renderText(e);}else{return this._renderElement(e);}}},{key:"_renderElement",value:function _renderElement(e){var t=e.node;if(!t){t=e.node=document.createElementNS(this.ns||zp,this.tag);}this._renderAttributes(e);this._renderElementChildren(e);this._setUpListeners(e);return t;}},{key:"_renderText",value:function _renderText(e){var t=e.node;if(t){e.revertData.text=t.textContent;}else{t=e.node=document.createTextNode("");}if(Fp(this.text)){this._bindToObservable({schema:this.text,updater:Up(t),data:e});}else{t.textContent=this.text.join("");}return t;}},{key:"_renderAttributes",value:function _renderAttributes(e){var t,i,n,o;if(!this.attributes){return;}var s=e.node;var r=e.revertData;for(t in this.attributes){n=s.getAttribute(t);i=this.attributes[t];if(r){r.attributes[t]=n;}o=ce(i[0])&&i[0].ns?i[0].ns:null;if(Fp(i)){var _a11=o?i[0].value:i;if(r&&cb(t)){_a11.unshift(n);}this._bindToObservable({schema:_a11,updater:$p(s,t,o),data:e});}else if(t=="style"&&typeof i[0]!=="string"){this._renderStyleAttribute(i[0],e);}else{if(r&&n&&cb(t)){i.unshift(n);}i=i.map(function(e){return e?e.value||e:e;}).reduce(function(e,t){return e.concat(t);},[]).reduce(eb,"");if(!nb(i)){s.setAttributeNS(o,t,i);}}}}},{key:"_renderStyleAttribute",value:function _renderStyleAttribute(e,t){var i=t.node;for(var _n105 in e){var _o63=e[_n105];if(Fp(_o63)){this._bindToObservable({schema:[_o63],updater:qp(i,_n105),data:t});}else{i.style[_n105]=_o63;}}}},{key:"_renderElementChildren",value:function _renderElementChildren(e){var t=e.node;var i=e.intoFragment?document.createDocumentFragment():t;var n=e.isApplying;var o=0;var _iteratorNormalCompletion247=true;var _didIteratorError247=false;var _iteratorError247=undefined;try{for(var _iterator247=this.children[Symbol.iterator](),_step247;!(_iteratorNormalCompletion247=(_step247=_iterator247.next()).done);_iteratorNormalCompletion247=true){var _s31=_step247.value;if(rb(_s31)){if(!n){_s31.setParent(t);var _iteratorNormalCompletion248=true;var _didIteratorError248=false;var _iteratorError248=undefined;try{for(var _iterator248=_s31[Symbol.iterator](),_step248;!(_iteratorNormalCompletion248=(_step248=_iterator248.next()).done);_iteratorNormalCompletion248=true){var _e206=_step248.value;i.appendChild(_e206.element);}}catch(err){_didIteratorError248=true;_iteratorError248=err;}finally{try{if(!_iteratorNormalCompletion248&&_iterator248["return"]!=null){_iterator248["return"]();}}finally{if(_didIteratorError248){throw _iteratorError248;}}}}}else if(ob(_s31)){if(!n){if(!_s31.isRendered){_s31.render();}i.appendChild(_s31.element);}}else if(xd(_s31)){i.appendChild(_s31);}else{if(n){var _t191=e.revertData;var _n106=ab();_t191.children.push(_n106);_s31._renderNode({node:i.childNodes[o++],isApplying:true,revertData:_n106});}else{i.appendChild(_s31.render());}}}}catch(err){_didIteratorError247=true;_iteratorError247=err;}finally{try{if(!_iteratorNormalCompletion247&&_iterator247["return"]!=null){_iterator247["return"]();}}finally{if(_didIteratorError247){throw _iteratorError247;}}}if(e.intoFragment){t.appendChild(i);}}},{key:"_setUpListeners",value:function _setUpListeners(e){var _this82=this;if(!this.eventListeners){return;}var _loop4=function _loop4(_t192){var i=_this82.eventListeners[_t192].map(function(i){var _t192$split=_t192.split("@"),_t192$split2=_slicedToArray(_t192$split,2),n=_t192$split2[0],o=_t192$split2[1];return i.activateDomEventListener(n,o,e);});if(e.revertData){e.revertData.bindings.push(i);}};for(var _t192 in this.eventListeners){_loop4(_t192);}}},{key:"_bindToObservable",value:function _bindToObservable(_ref26){var e=_ref26.schema,t=_ref26.updater,i=_ref26.data;var n=i.revertData;Wp(e,t,i);var o=e.filter(function(e){return!nb(e);}).filter(function(e){return e.observable;}).map(function(n){return n.activateAttributeListener(e,t,i);});if(n){n.bindings.push(o);}}},{key:"_revertTemplateFromNode",value:function _revertTemplateFromNode(e,t){var _iteratorNormalCompletion249=true;var _didIteratorError249=false;var _iteratorError249=undefined;try{for(var _iterator249=t.bindings[Symbol.iterator](),_step249;!(_iteratorNormalCompletion249=(_step249=_iterator249.next()).done);_iteratorNormalCompletion249=true){var _e207=_step249.value;var _iteratorNormalCompletion250=true;var _didIteratorError250=false;var _iteratorError250=undefined;try{for(var _iterator250=_e207[Symbol.iterator](),_step250;!(_iteratorNormalCompletion250=(_step250=_iterator250.next()).done);_iteratorNormalCompletion250=true){var _t193=_step250.value;_t193();}}catch(err){_didIteratorError250=true;_iteratorError250=err;}finally{try{if(!_iteratorNormalCompletion250&&_iterator250["return"]!=null){_iterator250["return"]();}}finally{if(_didIteratorError250){throw _iteratorError250;}}}}}catch(err){_didIteratorError249=true;_iteratorError249=err;}finally{try{if(!_iteratorNormalCompletion249&&_iterator249["return"]!=null){_iterator249["return"]();}}finally{if(_didIteratorError249){throw _iteratorError249;}}}if(t.text){e.textContent=t.text;return;}for(var _i208 in t.attributes){var _n107=t.attributes[_i208];if(_n107===null){e.removeAttribute(_i208);}else{e.setAttribute(_i208,_n107);}}for(var _i209=0;_i209<t.children.length;++_i209){this._revertTemplateFromNode(e.childNodes[_i209],t.children[_i209]);}}}],[{key:"bind",value:function bind(e,t){return{to:function to(i,n){return new Bp({eventNameOrFunction:i,attribute:i,observable:e,emitter:t,callback:n});},"if":function _if(i,n,o){return new Vp({observable:e,emitter:t,attribute:i,valueIfTrue:n,callback:o});}};}},{key:"extend",value:function extend(e,t){if(e._isRendered){throw new rr["b"]("template-extend-render: Attempting to extend a template which has already been rendered.",[this,e]);}ib(e,Gp(Yp(t)));}}]);return Dp;}();kr(Dp,dr);var jp=/*#__PURE__*/function(){function jp(e){_classCallCheck(this,jp);Object.assign(this,e);}_createClass(jp,[{key:"getValue",value:function getValue(e){var t=this.observable[this.attribute];return this.callback?this.callback(t,e):t;}},{key:"activateAttributeListener",value:function activateAttributeListener(e,t,i){var _this83=this;var n=function n(){return Wp(e,t,i);};this.emitter.listenTo(this.observable,"change:"+this.attribute,n);return function(){_this83.emitter.stopListening(_this83.observable,"change:"+_this83.attribute,n);};}}]);return jp;}();var Bp=/*#__PURE__*/function(_jp){_inherits(Bp,_jp);function Bp(){_classCallCheck(this,Bp);return _possibleConstructorReturn(this,_getPrototypeOf(Bp).apply(this,arguments));}_createClass(Bp,[{key:"activateDomEventListener",value:function activateDomEventListener(e,t,i){var _this84=this;var n=function n(e,i){if(!t||i.target.matches(t)){if(typeof _this84.eventNameOrFunction=="function"){_this84.eventNameOrFunction(i);}else{_this84.observable.fire(_this84.eventNameOrFunction,i);}}};this.emitter.listenTo(i.node,e,n);return function(){_this84.emitter.stopListening(i.node,e,n);};}}]);return Bp;}(jp);var Vp=/*#__PURE__*/function(_jp2){_inherits(Vp,_jp2);function Vp(){_classCallCheck(this,Vp);return _possibleConstructorReturn(this,_getPrototypeOf(Vp).apply(this,arguments));}_createClass(Vp,[{key:"getValue",value:function getValue(e){var t=_get(_getPrototypeOf(Vp.prototype),"getValue",this).call(this,e);return nb(t)?false:this.valueIfTrue||true;}}]);return Vp;}(jp);function Fp(e){if(!e){return false;}if(e.value){e=e.value;}if(Array.isArray(e)){return e.some(Fp);}else if(e instanceof jp){return true;}return false;}function Hp(e,t){return e.map(function(e){if(e instanceof jp){return e.getValue(t);}return e;});}function Wp(e,t,_ref27){var i=_ref27.node;var n=Hp(e,i);if(e.length==1&&e[0]instanceof Vp){n=n[0];}else{n=n.reduce(eb,"");}if(nb(n)){t.remove();}else{t.set(n);}}function Up(e){return{set:function set(t){e.textContent=t;},remove:function remove(){e.textContent="";}};}function $p(e,t,i){return{set:function set(n){e.setAttributeNS(i,t,n);},remove:function remove(){e.removeAttributeNS(i,t);}};}function qp(e,t){return{set:function set(i){e.style[t]=i;},remove:function remove(){e.style[t]=null;}};}function Yp(e){var t=qs(e,function(e){if(e&&(e instanceof jp||sb(e)||ob(e)||rb(e))){return e;}});return t;}function Gp(e){if(typeof e=="string"){e=Kp(e);}else if(e.text){Qp(e);}if(e.on){e.eventListeners=Xp(e.on);delete e.on;}if(!e.text){if(e.attributes){Jp(e.attributes);}var _t194=[];if(e.children){if(rb(e.children)){_t194.push(e.children);}else{var _iteratorNormalCompletion251=true;var _didIteratorError251=false;var _iteratorError251=undefined;try{for(var _iterator251=e.children[Symbol.iterator](),_step251;!(_iteratorNormalCompletion251=(_step251=_iterator251.next()).done);_iteratorNormalCompletion251=true){var _i210=_step251.value;if(sb(_i210)||ob(_i210)||xd(_i210)){_t194.push(_i210);}else{_t194.push(new Dp(_i210));}}}catch(err){_didIteratorError251=true;_iteratorError251=err;}finally{try{if(!_iteratorNormalCompletion251&&_iterator251["return"]!=null){_iterator251["return"]();}}finally{if(_didIteratorError251){throw _iteratorError251;}}}}}e.children=_t194;}return e;}function Jp(e){for(var _t195 in e){if(e[_t195].value){e[_t195].value=[].concat(e[_t195].value);}Zp(e,_t195);}}function Xp(e){for(var _t196 in e){Zp(e,_t196);}return e;}function Kp(e){return{text:[e]};}function Qp(e){if(!Array.isArray(e.text)){e.text=[e.text];}}function Zp(e,t){if(!Array.isArray(e[t])){e[t]=[e[t]];}}function eb(e,t){if(nb(t)){return e;}else if(nb(e)){return t;}else{return"".concat(e," ").concat(t);}}function tb(e,t){for(var _i211 in t){if(e[_i211]){var _e$_i;(_e$_i=e[_i211]).push.apply(_e$_i,_toConsumableArray(t[_i211]));}else{e[_i211]=t[_i211];}}}function ib(e,t){if(t.attributes){if(!e.attributes){e.attributes={};}tb(e.attributes,t.attributes);}if(t.eventListeners){if(!e.eventListeners){e.eventListeners={};}tb(e.eventListeners,t.eventListeners);}if(t.text){var _e$text;(_e$text=e.text).push.apply(_e$text,_toConsumableArray(t.text));}if(t.children&&t.children.length){if(e.children.length!=t.children.length){throw new rr["b"]("ui-template-extend-children-mismatch: The number of children in extended definition does not match.",e);}var _i212=0;var _iteratorNormalCompletion252=true;var _didIteratorError252=false;var _iteratorError252=undefined;try{for(var _iterator252=t.children[Symbol.iterator](),_step252;!(_iteratorNormalCompletion252=(_step252=_iterator252.next()).done);_iteratorNormalCompletion252=true){var _n108=_step252.value;ib(e.children[_i212++],_n108);}}catch(err){_didIteratorError252=true;_iteratorError252=err;}finally{try{if(!_iteratorNormalCompletion252&&_iterator252["return"]!=null){_iterator252["return"]();}}finally{if(_didIteratorError252){throw _iteratorError252;}}}}}function nb(e){return!e&&e!==0;}function ob(e){return e instanceof db;}function sb(e){return e instanceof Dp;}function rb(e){return e instanceof Rp;}function ab(){return{children:[],bindings:[],attributes:{}};}function cb(e){return e=="class"||e=="style";}var lb=i(19);var db=/*#__PURE__*/function(){function db(e){_classCallCheck(this,db);this.element=null;this.isRendered=false;this.locale=e;this.t=e&&e.t;this._viewCollections=new yr();this._unboundChildren=this.createCollection();this._viewCollections.on("add",function(t,i){i.locale=e;});this.decorate("render");}_createClass(db,[{key:"createCollection",value:function createCollection(){var e=new Rp();this._viewCollections.add(e);return e;}},{key:"registerChild",value:function registerChild(e){if(!Fr(e)){e=[e];}var _iteratorNormalCompletion253=true;var _didIteratorError253=false;var _iteratorError253=undefined;try{for(var _iterator253=e[Symbol.iterator](),_step253;!(_iteratorNormalCompletion253=(_step253=_iterator253.next()).done);_iteratorNormalCompletion253=true){var _t197=_step253.value;this._unboundChildren.add(_t197);}}catch(err){_didIteratorError253=true;_iteratorError253=err;}finally{try{if(!_iteratorNormalCompletion253&&_iterator253["return"]!=null){_iterator253["return"]();}}finally{if(_didIteratorError253){throw _iteratorError253;}}}}},{key:"deregisterChild",value:function deregisterChild(e){if(!Fr(e)){e=[e];}var _iteratorNormalCompletion254=true;var _didIteratorError254=false;var _iteratorError254=undefined;try{for(var _iterator254=e[Symbol.iterator](),_step254;!(_iteratorNormalCompletion254=(_step254=_iterator254.next()).done);_iteratorNormalCompletion254=true){var _t198=_step254.value;this._unboundChildren.remove(_t198);}}catch(err){_didIteratorError254=true;_iteratorError254=err;}finally{try{if(!_iteratorNormalCompletion254&&_iterator254["return"]!=null){_iterator254["return"]();}}finally{if(_didIteratorError254){throw _iteratorError254;}}}}},{key:"setTemplate",value:function setTemplate(e){this.template=new Dp(e);}},{key:"extendTemplate",value:function extendTemplate(e){Dp.extend(this.template,e);}},{key:"render",value:function render(){if(this.isRendered){throw new rr["b"]("ui-view-render-already-rendered: This View has already been rendered.",this);}if(this.template){this.element=this.template.render();this.registerChild(this.template.getViews());}this.isRendered=true;}},{key:"destroy",value:function destroy(){this.stopListening();this._viewCollections.map(function(e){return e.destroy();});if(this.template&&this.template._revertData){this.template.revert(this.element);}}},{key:"bindTemplate",get:function get(){if(this._bindTemplate){return this._bindTemplate;}return this._bindTemplate=Dp.bind(this,this);}}]);return db;}();kr(db,Ud);kr(db,Jc);var ub="[object String]";function hb(e){return typeof e=="string"||!Jt(e)&&T(e)&&v(e)==ub;}var fb=hb;function mb(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];var o=i&&i.xmlns;var s=o?e.createElementNS(o,t):e.createElement(t);for(var _e208 in i){s.setAttribute(_e208,i[_e208]);}if(fb(n)||!Fr(n)){n=[n];}var _iteratorNormalCompletion255=true;var _didIteratorError255=false;var _iteratorError255=undefined;try{for(var _iterator255=n[Symbol.iterator](),_step255;!(_iteratorNormalCompletion255=(_step255=_iterator255.next()).done);_iteratorNormalCompletion255=true){var _t199=_step255.value;if(fb(_t199)){_t199=e.createTextNode(_t199);}s.appendChild(_t199);}}catch(err){_didIteratorError255=true;_iteratorError255=err;}finally{try{if(!_iteratorNormalCompletion255&&_iterator255["return"]!=null){_iterator255["return"]();}}finally{if(_didIteratorError255){throw _iteratorError255;}}}return s;}var gb=/*#__PURE__*/function(_Rp){_inherits(gb,_Rp);function gb(){_classCallCheck(this,gb);return _possibleConstructorReturn(this,_getPrototypeOf(gb).apply(this,arguments));}_createClass(gb,[{key:"attachToDom",value:function attachToDom(){this._bodyCollectionContainer=new Dp({tag:"div",attributes:{"class":["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection},children:this}).render();var e=document.querySelector(".ck-body-wrapper");if(!e){e=mb(document,"div",{"class":"ck-body-wrapper"});document.body.appendChild(e);}e.appendChild(this._bodyCollectionContainer);}},{key:"detachFromDom",value:function detachFromDom(){_get(_getPrototypeOf(gb.prototype),"destroy",this).call(this);if(this._bodyCollectionContainer){this._bodyCollectionContainer.remove();}var e=document.querySelector(".ck-body-wrapper");if(e&&e.childElementCount==0){e.remove();}}}]);return gb;}(Rp);var pb=i(21);var bb=/*#__PURE__*/function(_db){_inherits(bb,_db);function bb(e){var _this85;_classCallCheck(this,bb);_this85=_possibleConstructorReturn(this,_getPrototypeOf(bb).call(this,e));_this85.body=new gb(e);return _this85;}_createClass(bb,[{key:"render",value:function render(){_get(_getPrototypeOf(bb.prototype),"render",this).call(this);this.body.attachToDom();}},{key:"destroy",value:function destroy(){this.body.detachFromDom();return _get(_getPrototypeOf(bb.prototype),"destroy",this).call(this);}}]);return bb;}(db);var wb=/*#__PURE__*/function(_db2){_inherits(wb,_db2);function wb(e,t,i){var _this86;_classCallCheck(this,wb);_this86=_possibleConstructorReturn(this,_getPrototypeOf(wb).call(this,e));_this86.setTemplate({tag:"div",attributes:{"class":["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:e.contentLanguage,dir:e.contentLanguageDirection}});_this86.name=null;_this86.set("isFocused",false);_this86._editableElement=i;_this86._hasExternalElement=!!_this86._editableElement;_this86._editingView=t;return _this86;}_createClass(wb,[{key:"render",value:function render(){var _this87=this;_get(_getPrototypeOf(wb.prototype),"render",this).call(this);if(this._hasExternalElement){this.template.apply(this.element=this._editableElement);}else{this._editableElement=this.element;}this.on("change:isFocused",function(){return _this87._updateIsFocusedClasses();});this._updateIsFocusedClasses();}},{key:"destroy",value:function destroy(){if(this._hasExternalElement){this.template.revert(this._editableElement);}_get(_getPrototypeOf(wb.prototype),"destroy",this).call(this);}},{key:"_updateIsFocusedClasses",value:function _updateIsFocusedClasses(){var e=this._editingView;if(e.isRenderingInProgress){i(this);}else{t(this);}function t(t){e.change(function(i){var n=e.document.getRoot(t.name);i.addClass(t.isFocused?"ck-focused":"ck-blurred",n);i.removeClass(t.isFocused?"ck-blurred":"ck-focused",n);});}function i(n){e.once("change:isRenderingInProgress",function(e,o,s){if(!s){t(n);}else{i(n);}});}}}]);return wb;}(db);var _b=/*#__PURE__*/function(_wb){_inherits(_b,_wb);function _b(e,t,i){var _this88;_classCallCheck(this,_b);_this88=_possibleConstructorReturn(this,_getPrototypeOf(_b).call(this,e,t,i));_this88.extendTemplate({attributes:{role:"textbox","class":"ck-editor__editable_inline"}});return _this88;}_createClass(_b,[{key:"render",value:function render(){var _this89=this;_get(_getPrototypeOf(_b.prototype),"render",this).call(this);var e=this._editingView;var t=this.t;e.change(function(i){var n=e.document.getRoot(_this89.name);i.setAttribute("aria-label",t("ep",[_this89.name]),n);});}}]);return _b;}(wb);var vb=/*#__PURE__*/function(){function vb(e){var _this90=this;_classCallCheck(this,vb);Object.assign(this,e);if(e.actions&&e.keystrokeHandler){var _loop5=function _loop5(_t200){var i=e.actions[_t200];if(typeof i=="string"){i=[i];}var _iteratorNormalCompletion256=true;var _didIteratorError256=false;var _iteratorError256=undefined;try{for(var _iterator256=i[Symbol.iterator](),_step256;!(_iteratorNormalCompletion256=(_step256=_iterator256.next()).done);_iteratorNormalCompletion256=true){var _n109=_step256.value;e.keystrokeHandler.set(_n109,function(e,i){_this90[_t200]();i();});}}catch(err){_didIteratorError256=true;_iteratorError256=err;}finally{try{if(!_iteratorNormalCompletion256&&_iterator256["return"]!=null){_iterator256["return"]();}}finally{if(_didIteratorError256){throw _iteratorError256;}}}};for(var _t200 in e.actions){_loop5(_t200);}}}_createClass(vb,[{key:"focusFirst",value:function focusFirst(){this._focus(this.first);}},{key:"focusLast",value:function focusLast(){this._focus(this.last);}},{key:"focusNext",value:function focusNext(){this._focus(this.next);}},{key:"focusPrevious",value:function focusPrevious(){this._focus(this.previous);}},{key:"_focus",value:function _focus(e){if(e){e.focus();}}},{key:"_getFocusableItem",value:function _getFocusableItem(e){var t=this.current;var i=this.focusables.length;if(!i){return null;}if(t===null){return this[e===1?"first":"last"];}var n=(t+i+e)%i;do{var _t201=this.focusables.get(n);if(kb(_t201)){return _t201;}n=(n+i+e)%i;}while(n!==t);return null;}},{key:"first",get:function get(){return this.focusables.find(kb)||null;}},{key:"last",get:function get(){return this.focusables.filter(kb).slice(-1)[0]||null;}},{key:"next",get:function get(){return this._getFocusableItem(1);}},{key:"previous",get:function get(){return this._getFocusableItem(-1);}},{key:"current",get:function get(){var _this91=this;var e=null;if(this.focusTracker.focusedElement===null){return null;}this.focusables.find(function(t,i){var n=t.element===_this91.focusTracker.focusedElement;if(n){e=i;}return n;});return e;}}]);return vb;}();function kb(e){return!!(e.focus&&Nd.window.getComputedStyle(e.element).display!="none");}var yb=/*#__PURE__*/function(_db3){_inherits(yb,_db3);function yb(e){var _this92;_classCallCheck(this,yb);_this92=_possibleConstructorReturn(this,_getPrototypeOf(yb).call(this,e));_this92.setTemplate({tag:"span",attributes:{"class":["ck","ck-toolbar__separator"]}});return _this92;}return yb;}(db);var xb=100;var Ab=/*#__PURE__*/function(){function Ab(e,t){_classCallCheck(this,Ab);if(!Ab._observerInstance){Ab._createObserver();}this._element=e;this._callback=t;Ab._addElementCallback(e,t);Ab._observerInstance.observe(e);}_createClass(Ab,[{key:"destroy",value:function destroy(){Ab._deleteElementCallback(this._element,this._callback);}}],[{key:"_addElementCallback",value:function _addElementCallback(e,t){if(!Ab._elementCallbacks){Ab._elementCallbacks=new Map();}var i=Ab._elementCallbacks.get(e);if(!i){i=new Set();Ab._elementCallbacks.set(e,i);}i.add(t);}},{key:"_deleteElementCallback",value:function _deleteElementCallback(e,t){var i=Ab._getElementCallbacks(e);if(i){i["delete"](t);if(!i.size){Ab._elementCallbacks["delete"](e);Ab._observerInstance.unobserve(e);}}if(Ab._elementCallbacks&&!Ab._elementCallbacks.size){Ab._observerInstance=null;Ab._elementCallbacks=null;}}},{key:"_getElementCallbacks",value:function _getElementCallbacks(e){if(!Ab._elementCallbacks){return null;}return Ab._elementCallbacks.get(e);}},{key:"_createObserver",value:function _createObserver(){var e;if(typeof Nd.window.ResizeObserver==="function"){e=Nd.window.ResizeObserver;}else{e=Cb;}Ab._observerInstance=new e(function(e){var _iteratorNormalCompletion257=true;var _didIteratorError257=false;var _iteratorError257=undefined;try{for(var _iterator257=e[Symbol.iterator](),_step257;!(_iteratorNormalCompletion257=(_step257=_iterator257.next()).done);_iteratorNormalCompletion257=true){var _t202=_step257.value;var _e209=Ab._getElementCallbacks(_t202.target);if(_e209){var _iteratorNormalCompletion258=true;var _didIteratorError258=false;var _iteratorError258=undefined;try{for(var _iterator258=_e209[Symbol.iterator](),_step258;!(_iteratorNormalCompletion258=(_step258=_iterator258.next()).done);_iteratorNormalCompletion258=true){var _i213=_step258.value;_i213(_t202);}}catch(err){_didIteratorError258=true;_iteratorError258=err;}finally{try{if(!_iteratorNormalCompletion258&&_iterator258["return"]!=null){_iterator258["return"]();}}finally{if(_didIteratorError258){throw _iteratorError258;}}}}}}catch(err){_didIteratorError257=true;_iteratorError257=err;}finally{try{if(!_iteratorNormalCompletion257&&_iterator257["return"]!=null){_iterator257["return"]();}}finally{if(_didIteratorError257){throw _iteratorError257;}}}});}}]);return Ab;}();Ab._observerInstance=null;Ab._elementCallbacks=null;var Cb=/*#__PURE__*/function(){function Cb(e){_classCallCheck(this,Cb);this._callback=e;this._elements=new Set();this._previousRects=new Map();this._periodicCheckTimeout=null;}_createClass(Cb,[{key:"observe",value:function observe(e){this._elements.add(e);this._checkElementRectsAndExecuteCallback();if(this._elements.size===1){this._startPeriodicCheck();}}},{key:"unobserve",value:function unobserve(e){this._elements["delete"](e);this._previousRects["delete"](e);if(!this._elements.size){this._stopPeriodicCheck();}}},{key:"_startPeriodicCheck",value:function _startPeriodicCheck(){var _this93=this;var e=function e(){_this93._checkElementRectsAndExecuteCallback();_this93._periodicCheckTimeout=setTimeout(e,xb);};this.listenTo(Nd.window,"resize",function(){_this93._checkElementRectsAndExecuteCallback();});this._periodicCheckTimeout=setTimeout(e,xb);}},{key:"_stopPeriodicCheck",value:function _stopPeriodicCheck(){clearTimeout(this._periodicCheckTimeout);this.stopListening();this._previousRects.clear();}},{key:"_checkElementRectsAndExecuteCallback",value:function _checkElementRectsAndExecuteCallback(){var e=[];var _iteratorNormalCompletion259=true;var _didIteratorError259=false;var _iteratorError259=undefined;try{for(var _iterator259=this._elements[Symbol.iterator](),_step259;!(_iteratorNormalCompletion259=(_step259=_iterator259.next()).done);_iteratorNormalCompletion259=true){var _t203=_step259.value;if(this._hasRectChanged(_t203)){e.push({target:_t203,contentRect:this._previousRects.get(_t203)});}}}catch(err){_didIteratorError259=true;_iteratorError259=err;}finally{try{if(!_iteratorNormalCompletion259&&_iterator259["return"]!=null){_iterator259["return"]();}}finally{if(_didIteratorError259){throw _iteratorError259;}}}if(e.length){this._callback(e);}}},{key:"_hasRectChanged",value:function _hasRectChanged(e){if(!e.ownerDocument.body.contains(e)){return false;}var t=new kh(e);var i=this._previousRects.get(e);var n=!i||!i.isEqual(t);this._previousRects.set(e,t);return n;}}]);return Cb;}();kr(Cb,Ud);function Tb(e){return e.bindTemplate.to(function(t){if(t.target===e.element){t.preventDefault();}});}var Mb=/*#__PURE__*/function(_db4){_inherits(Mb,_db4);function Mb(e){var _this94;_classCallCheck(this,Mb);_this94=_possibleConstructorReturn(this,_getPrototypeOf(Mb).call(this,e));var t=_this94.bindTemplate;_this94.set("isVisible",false);_this94.set("position","se");_this94.children=_this94.createCollection();_this94.setTemplate({tag:"div",attributes:{"class":["ck","ck-reset","ck-dropdown__panel",t.to("position",function(e){return"ck-dropdown__panel_".concat(e);}),t["if"]("isVisible","ck-dropdown__panel-visible")]},children:_this94.children,on:{selectstart:t.to(function(e){return e.preventDefault();})}});return _this94;}_createClass(Mb,[{key:"focus",value:function focus(){if(this.children.length){this.children.first.focus();}}},{key:"focusLast",value:function focusLast(){if(this.children.length){var _e210=this.children.last;if(typeof _e210.focusLast==="function"){_e210.focusLast();}else{_e210.focus();}}}}]);return Mb;}(db);var Eb=i(23);function Pb(e){while(e&&e.tagName.toLowerCase()!="html"){if(Nd.window.getComputedStyle(e).position!="static"){return e;}e=e.parentElement;}return null;}function Sb(_ref28){var e=_ref28.element,t=_ref28.target,i=_ref28.positions,n=_ref28.limiter,o=_ref28.fitInViewport;if(me(t)){t=t();}if(me(n)){n=n();}var s=Pb(e.parentElement);var r=new kh(e);var a=new kh(t);var c;var l;if(!n&&!o){var _Ib=Ib(i[0],a,r);var _Ib2=_slicedToArray(_Ib,2);l=_Ib2[0];c=_Ib2[1];}else{var _e211=n&&new kh(n).getVisible();var _t204=o&&new kh(Nd.window);var _ref29=Nb(i,a,r,_e211,_t204)||Ib(i[0],a,r);var _ref30=_slicedToArray(_ref29,2);l=_ref30[0];c=_ref30[1];}var _Ob=Ob(c),d=_Ob.left,u=_Ob.top;if(s){var _e212=Ob(new kh(s));var _t205=_h(s);d-=_e212.left;u-=_e212.top;d+=s.scrollLeft;u+=s.scrollTop;d-=_t205.left;u-=_t205.top;}return{left:d,top:u,name:l};}function Ib(e,t,i){var _e213=e(t,i),n=_e213.left,o=_e213.top,s=_e213.name;return[s,i.clone().moveTo(n,o)];}function Nb(e,t,i,n,o){var s=0;var r=0;var a;var c;var l=i.getArea();e.some(function(e){var _Ib3=Ib(e,t,i),_Ib4=_slicedToArray(_Ib3,2),d=_Ib4[0],u=_Ib4[1];var h;var f;if(n){if(o){var _e214=n.getIntersection(o);if(_e214){h=_e214.getIntersectionArea(u);}else{h=0;}}else{h=n.getIntersectionArea(u);}}if(o){f=o.getIntersectionArea(u);}if(o&&!n){if(f>r){m();}}else if(!o&&n){if(h>s){m();}}else{if(f>r&&h>=s){m();}else if(f>=r&&h>s){m();}}function m(){r=f;s=h;a=u;c=d;}return h===l;});return a?[c,a]:null;}function Ob(_ref31){var e=_ref31.left,t=_ref31.top;var _Nd$window2=Nd.window,i=_Nd$window2.scrollX,n=_Nd$window2.scrollY;return{left:e+i,top:t+n};}var Rb=/*#__PURE__*/function(_db5){_inherits(Rb,_db5);function Rb(e,t,i){var _this95;_classCallCheck(this,Rb);_this95=_possibleConstructorReturn(this,_getPrototypeOf(Rb).call(this,e));var n=_this95.bindTemplate;_this95.buttonView=t;_this95.panelView=i;_this95.set("isOpen",false);_this95.set("isEnabled",true);_this95.set("class");_this95.set("id");_this95.set("panelPosition","auto");_this95.focusTracker=new _p();_this95.keystrokes=new dp();_this95.setTemplate({tag:"div",attributes:{"class":["ck","ck-dropdown",n.to("class"),n["if"]("isEnabled","ck-disabled",function(e){return!e;})],id:n.to("id"),"aria-describedby":n.to("ariaDescribedById")},children:[t,i]});t.extendTemplate({attributes:{"class":["ck-dropdown__button"]}});return _this95;}_createClass(Rb,[{key:"render",value:function render(){var _this96=this;_get(_getPrototypeOf(Rb.prototype),"render",this).call(this);this.listenTo(this.buttonView,"open",function(){_this96.isOpen=!_this96.isOpen;});this.panelView.bind("isVisible").to(this,"isOpen");this.on("change:isOpen",function(){if(!_this96.isOpen){return;}if(_this96.panelPosition==="auto"){_this96.panelView.position=Rb._getOptimalPosition({element:_this96.panelView.element,target:_this96.buttonView.element,fitInViewport:true,positions:_this96._panelPositions}).name;}else{_this96.panelView.position=_this96.panelPosition;}});this.keystrokes.listenTo(this.element);this.focusTracker.add(this.element);var e=function(_e215){function e(_x2,_x3){return _e215.apply(this,arguments);}e.toString=function(){return _e215.toString();};return e;}(function(e,t){if(_this96.isOpen){_this96.buttonView.focus();_this96.isOpen=false;t();}});this.keystrokes.set("arrowdown",function(e,t){if(_this96.buttonView.isEnabled&&!_this96.isOpen){_this96.isOpen=true;t();}});this.keystrokes.set("arrowright",function(e,t){if(_this96.isOpen){t();}});this.keystrokes.set("arrowleft",e);this.keystrokes.set("esc",e);}},{key:"focus",value:function focus(){this.buttonView.focus();}},{key:"_panelPositions",get:function get(){var _Rb$defaultPanelPosit=Rb.defaultPanelPositions,e=_Rb$defaultPanelPosit.southEast,t=_Rb$defaultPanelPosit.southWest,i=_Rb$defaultPanelPosit.northEast,n=_Rb$defaultPanelPosit.northWest;if(this.locale.uiLanguageDirection==="ltr"){return[e,t,i,n];}else{return[t,e,n,i];}}}]);return Rb;}(db);Rb.defaultPanelPositions={southEast:function southEast(e){return{top:e.bottom,left:e.left,name:"se"};},southWest:function southWest(e,t){return{top:e.bottom,left:e.left-t.width+e.width,name:"sw"};},northEast:function northEast(e,t){return{top:e.top-t.height,left:e.left,name:"ne"};},northWest:function northWest(e,t){return{top:e.bottom-t.height,left:e.left-t.width+e.width,name:"nw"};}};Rb._getOptimalPosition=Sb;var Lb=i(25);var zb=/*#__PURE__*/function(_db6){_inherits(zb,_db6);function zb(){var _this97;_classCallCheck(this,zb);_this97=_possibleConstructorReturn(this,_getPrototypeOf(zb).call(this));var e=_this97.bindTemplate;_this97.set("content","");_this97.set("viewBox","0 0 20 20");_this97.set("fillColor","");_this97.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{"class":["ck","ck-icon"],viewBox:e.to("viewBox")}});return _this97;}_createClass(zb,[{key:"render",value:function render(){var _this98=this;_get(_getPrototypeOf(zb.prototype),"render",this).call(this);this._updateXMLContent();this._colorFillPaths();this.on("change:content",function(){_this98._updateXMLContent();_this98._colorFillPaths();});this.on("change:fillColor",function(){_this98._colorFillPaths();});}},{key:"_updateXMLContent",value:function _updateXMLContent(){if(this.content){var _e216=new DOMParser().parseFromString(this.content.trim(),"image/svg+xml");var _t206=_e216.querySelector("svg");var _i214=_t206.getAttribute("viewBox");if(_i214){this.viewBox=_i214;}this.element.innerHTML="";while(_t206.childNodes.length>0){this.element.appendChild(_t206.childNodes[0]);}}}},{key:"_colorFillPaths",value:function _colorFillPaths(){var _this99=this;if(this.fillColor){this.element.querySelectorAll(".ck-icon__fill").forEach(function(e){e.style.fill=_this99.fillColor;});}}}]);return zb;}(db);var Db=i(27);var jb=/*#__PURE__*/function(_db7){_inherits(jb,_db7);function jb(e){var _this100;_classCallCheck(this,jb);_this100=_possibleConstructorReturn(this,_getPrototypeOf(jb).call(this,e));_this100.set("text","");_this100.set("position","s");var t=_this100.bindTemplate;_this100.setTemplate({tag:"span",attributes:{"class":["ck","ck-tooltip",t.to("position",function(e){return"ck-tooltip_"+e;}),t["if"]("text","ck-hidden",function(e){return!e.trim();})]},children:[{tag:"span",attributes:{"class":["ck","ck-tooltip__text"]},children:[{text:t.to("text")}]}]});return _this100;}return jb;}(db);var Bb=i(29);var Vb=/*#__PURE__*/function(_db8){_inherits(Vb,_db8);function Vb(e){var _this101;_classCallCheck(this,Vb);_this101=_possibleConstructorReturn(this,_getPrototypeOf(Vb).call(this,e));var t=_this101.bindTemplate;var i=ir();_this101.set("class");_this101.set("labelStyle");_this101.set("icon");_this101.set("isEnabled",true);_this101.set("isOn",false);_this101.set("isVisible",true);_this101.set("isToggleable",false);_this101.set("keystroke");_this101.set("label");_this101.set("tabindex",-1);_this101.set("tooltip");_this101.set("tooltipPosition","s");_this101.set("type","button");_this101.set("withText",false);_this101.set("withKeystroke",false);_this101.children=_this101.createCollection();_this101.tooltipView=_this101._createTooltipView();_this101.labelView=_this101._createLabelView(i);_this101.iconView=new zb();_this101.iconView.extendTemplate({attributes:{"class":"ck-button__icon"}});_this101.keystrokeView=_this101._createKeystrokeView();_this101.bind("_tooltipString").to(_assertThisInitialized(_this101),"tooltip",_assertThisInitialized(_this101),"label",_assertThisInitialized(_this101),"keystroke",_this101._getTooltipString.bind(_assertThisInitialized(_this101)));_this101.setTemplate({tag:"button",attributes:{"class":["ck","ck-button",t.to("class"),t["if"]("isEnabled","ck-disabled",function(e){return!e;}),t["if"]("isVisible","ck-hidden",function(e){return!e;}),t.to("isOn",function(e){return e?"ck-on":"ck-off";}),t["if"]("withText","ck-button_with-text"),t["if"]("withKeystroke","ck-button_with-keystroke")],type:t.to("type",function(e){return e?e:"button";}),tabindex:t.to("tabindex"),"aria-labelledby":"ck-editor__aria-label_".concat(i),"aria-disabled":t["if"]("isEnabled",true,function(e){return!e;}),"aria-pressed":t.to("isOn",function(e){return _this101.isToggleable?String(e):false;})},children:_this101.children,on:{mousedown:t.to(function(e){e.preventDefault();}),click:t.to(function(e){if(_this101.isEnabled){_this101.fire("execute");}else{e.preventDefault();}})}});return _this101;}_createClass(Vb,[{key:"render",value:function render(){_get(_getPrototypeOf(Vb.prototype),"render",this).call(this);if(this.icon){this.iconView.bind("content").to(this,"icon");this.children.add(this.iconView);}this.children.add(this.tooltipView);this.children.add(this.labelView);if(this.withKeystroke){this.children.add(this.keystrokeView);}}},{key:"focus",value:function focus(){this.element.focus();}},{key:"_createTooltipView",value:function _createTooltipView(){var e=new jb();e.bind("text").to(this,"_tooltipString");e.bind("position").to(this,"tooltipPosition");return e;}},{key:"_createLabelView",value:function _createLabelView(e){var t=new db();var i=this.bindTemplate;t.setTemplate({tag:"span",attributes:{"class":["ck","ck-button__label"],style:i.to("labelStyle"),id:"ck-editor__aria-label_".concat(e)},children:[{text:this.bindTemplate.to("label")}]});return t;}},{key:"_createKeystrokeView",value:function _createKeystrokeView(){var e=new db();e.setTemplate({tag:"span",attributes:{"class":["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",function(e){return Dl(e);})}]});return e;}},{key:"_getTooltipString",value:function _getTooltipString(e,t,i){if(e){if(typeof e=="string"){return e;}else{if(i){i=Dl(i);}if(e instanceof Function){return e(t,i);}else{return"".concat(t).concat(i?" (".concat(i,")"):"");}}}return"";}}]);return Vb;}(db);var Fb='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';var Hb=/*#__PURE__*/function(_Vb){_inherits(Hb,_Vb);function Hb(e){var _this102;_classCallCheck(this,Hb);_this102=_possibleConstructorReturn(this,_getPrototypeOf(Hb).call(this,e));_this102.arrowView=_this102._createArrowView();_this102.extendTemplate({attributes:{"aria-haspopup":true}});_this102.delegate("execute").to(_assertThisInitialized(_this102),"open");return _this102;}_createClass(Hb,[{key:"render",value:function render(){_get(_getPrototypeOf(Hb.prototype),"render",this).call(this);this.children.add(this.arrowView);}},{key:"_createArrowView",value:function _createArrowView(){var e=new zb();e.content=Fb;e.extendTemplate({attributes:{"class":"ck-dropdown__arrow"}});return e;}}]);return Hb;}(Vb);var Wb=i(31);var Ub=/*#__PURE__*/function(_db9){_inherits(Ub,_db9);function Ub(){var _this103;_classCallCheck(this,Ub);_this103=_possibleConstructorReturn(this,_getPrototypeOf(Ub).call(this));_this103.items=_this103.createCollection();_this103.focusTracker=new _p();_this103.keystrokes=new dp();_this103._focusCycler=new vb({focusables:_this103.items,focusTracker:_this103.focusTracker,keystrokeHandler:_this103.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}});_this103.setTemplate({tag:"ul",attributes:{"class":["ck","ck-reset","ck-list"]},children:_this103.items});return _this103;}_createClass(Ub,[{key:"render",value:function render(){var _this104=this;_get(_getPrototypeOf(Ub.prototype),"render",this).call(this);var _iteratorNormalCompletion260=true;var _didIteratorError260=false;var _iteratorError260=undefined;try{for(var _iterator260=this.items[Symbol.iterator](),_step260;!(_iteratorNormalCompletion260=(_step260=_iterator260.next()).done);_iteratorNormalCompletion260=true){var _e217=_step260.value;this.focusTracker.add(_e217.element);}}catch(err){_didIteratorError260=true;_iteratorError260=err;}finally{try{if(!_iteratorNormalCompletion260&&_iterator260["return"]!=null){_iterator260["return"]();}}finally{if(_didIteratorError260){throw _iteratorError260;}}}this.items.on("add",function(e,t){_this104.focusTracker.add(t.element);});this.items.on("remove",function(e,t){_this104.focusTracker.remove(t.element);});this.keystrokes.listenTo(this.element);}},{key:"focus",value:function focus(){this._focusCycler.focusFirst();}},{key:"focusLast",value:function focusLast(){this._focusCycler.focusLast();}}]);return Ub;}(db);var $b=/*#__PURE__*/function(_db10){_inherits($b,_db10);function $b(e){var _this105;_classCallCheck(this,$b);_this105=_possibleConstructorReturn(this,_getPrototypeOf($b).call(this,e));_this105.children=_this105.createCollection();_this105.setTemplate({tag:"li",attributes:{"class":["ck","ck-list__item"]},children:_this105.children});return _this105;}_createClass($b,[{key:"focus",value:function focus(){this.children.first.focus();}}]);return $b;}(db);var qb=/*#__PURE__*/function(_db11){_inherits(qb,_db11);function qb(e){var _this106;_classCallCheck(this,qb);_this106=_possibleConstructorReturn(this,_getPrototypeOf(qb).call(this,e));_this106.setTemplate({tag:"li",attributes:{"class":["ck","ck-list__separator"]}});return _this106;}return qb;}(db);var Yb=i(33);var Gb=/*#__PURE__*/function(_Vb2){_inherits(Gb,_Vb2);function Gb(e){var _this107;_classCallCheck(this,Gb);_this107=_possibleConstructorReturn(this,_getPrototypeOf(Gb).call(this,e));_this107.isToggleable=true;_this107.toggleSwitchView=_this107._createToggleView();_this107.extendTemplate({attributes:{"class":"ck-switchbutton"}});return _this107;}_createClass(Gb,[{key:"render",value:function render(){_get(_getPrototypeOf(Gb.prototype),"render",this).call(this);this.children.add(this.toggleSwitchView);}},{key:"_createToggleView",value:function _createToggleView(){var e=new db();e.setTemplate({tag:"span",attributes:{"class":["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{"class":["ck","ck-button__toggle__inner"]}}]});return e;}}]);return Gb;}(Vb);function Jb(_ref32){var e=_ref32.emitter,t=_ref32.activator,i=_ref32.callback,n=_ref32.contextElements;e.listenTo(document,"mousedown",function(e,_ref33){var o=_ref33.target;if(!t()){return;}var _iteratorNormalCompletion261=true;var _didIteratorError261=false;var _iteratorError261=undefined;try{for(var _iterator261=n[Symbol.iterator](),_step261;!(_iteratorNormalCompletion261=(_step261=_iterator261.next()).done);_iteratorNormalCompletion261=true){var _e218=_step261.value;if(_e218.contains(o)){return;}}}catch(err){_didIteratorError261=true;_iteratorError261=err;}finally{try{if(!_iteratorNormalCompletion261&&_iterator261["return"]!=null){_iterator261["return"]();}}finally{if(_didIteratorError261){throw _iteratorError261;}}}i();});}var Xb=i(35);var Kb=i(37);function Qb(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:Hb;var i=new t(e);var n=new Mb(e);var o=new Rb(e,i,n);i.bind("isEnabled").to(o);if(i instanceof Hb){i.bind("isOn").to(o,"isOpen");}else{i.arrowView.bind("isOn").to(o,"isOpen");}tw(o);return o;}function Zb(e,t){var i=e.locale;var n=i.t;var o=e.toolbarView=new aw(i);o.set("ariaLabel",n("ca"));e.extendTemplate({attributes:{"class":["ck-toolbar-dropdown"]}});t.map(function(e){return o.items.add(e);});e.panelView.children.add(o);o.items.delegate("execute").to(e);}function ew(e,t){var i=e.locale;var n=e.listView=new Ub(i);n.items.bindTo(t).using(function(_ref34){var e=_ref34.type,t=_ref34.model;if(e==="separator"){return new qb(i);}else if(e==="button"||e==="switchbutton"){var _o65;var _n110=new $b(i);var _o64;if(e==="button"){_o64=new Vb(i);}else{_o64=new Gb(i);}(_o65=_o64).bind.apply(_o65,_toConsumableArray(Object.keys(t))).to(t);_o64.delegate("execute").to(_n110);_n110.children.add(_o64);return _n110;}});e.panelView.children.add(n);n.items.delegate("execute").to(e);}function tw(e){iw(e);nw(e);ow(e);}function iw(e){e.on("render",function(){Jb({emitter:e,activator:function activator(){return e.isOpen;},callback:function callback(){e.isOpen=false;},contextElements:[e.element]});});}function nw(e){e.on("execute",function(t){if(t.source instanceof Gb){return;}e.isOpen=false;});}function ow(e){e.keystrokes.set("arrowdown",function(t,i){if(e.isOpen){e.panelView.focus();i();}});e.keystrokes.set("arrowup",function(t,i){if(e.isOpen){e.panelView.focusLast();i();}});}var sw='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>';var rw=i(39);var aw=/*#__PURE__*/function(_db12){_inherits(aw,_db12);function aw(e,t){var _this108;_classCallCheck(this,aw);_this108=_possibleConstructorReturn(this,_getPrototypeOf(aw).call(this,e));var i=_this108.bindTemplate;var n=_this108.t;_this108.options=t||{};_this108.set("ariaLabel",n("eb"));_this108.set("maxWidth","auto");_this108.items=_this108.createCollection();_this108.focusTracker=new _p();_this108.keystrokes=new dp();_this108.set("class");_this108.set("isCompact",false);_this108.itemsView=new cw(e);_this108.children=_this108.createCollection();_this108.children.add(_this108.itemsView);_this108.focusables=_this108.createCollection();_this108._focusCycler=new vb({focusables:_this108.focusables,focusTracker:_this108.focusTracker,keystrokeHandler:_this108.keystrokes,actions:{focusPrevious:["arrowleft","arrowup"],focusNext:["arrowright","arrowdown"]}});_this108.setTemplate({tag:"div",attributes:{"class":["ck","ck-toolbar",i.to("class"),i["if"]("isCompact","ck-toolbar_compact")],role:"toolbar","aria-label":i.to("ariaLabel"),style:{maxWidth:i.to("maxWidth")}},children:_this108.children,on:{mousedown:Tb(_assertThisInitialized(_this108))}});_this108._behavior=_this108.options.shouldGroupWhenFull?new dw(_assertThisInitialized(_this108)):new lw(_assertThisInitialized(_this108));return _this108;}_createClass(aw,[{key:"render",value:function render(){var _this109=this;_get(_getPrototypeOf(aw.prototype),"render",this).call(this);var _iteratorNormalCompletion262=true;var _didIteratorError262=false;var _iteratorError262=undefined;try{for(var _iterator262=this.items[Symbol.iterator](),_step262;!(_iteratorNormalCompletion262=(_step262=_iterator262.next()).done);_iteratorNormalCompletion262=true){var _e219=_step262.value;this.focusTracker.add(_e219.element);}}catch(err){_didIteratorError262=true;_iteratorError262=err;}finally{try{if(!_iteratorNormalCompletion262&&_iterator262["return"]!=null){_iterator262["return"]();}}finally{if(_didIteratorError262){throw _iteratorError262;}}}this.items.on("add",function(e,t){_this109.focusTracker.add(t.element);});this.items.on("remove",function(e,t){_this109.focusTracker.remove(t.element);});this.keystrokes.listenTo(this.element);this._behavior.render(this);}},{key:"destroy",value:function destroy(){this._behavior.destroy();return _get(_getPrototypeOf(aw.prototype),"destroy",this).call(this);}},{key:"focus",value:function focus(){this._focusCycler.focusFirst();}},{key:"focusLast",value:function focusLast(){this._focusCycler.focusLast();}},{key:"fillFromConfig",value:function fillFromConfig(e,t){var _this110=this;e.map(function(e){if(e=="|"){_this110.items.add(new yb());}else if(t.has(e)){_this110.items.add(t.create(e));}else{console.warn(Object(rr["a"])("toolbarview-item-unavailable: The requested toolbar item is unavailable."),{name:e});}});}}]);return aw;}(db);var cw=/*#__PURE__*/function(_db13){_inherits(cw,_db13);function cw(e){var _this111;_classCallCheck(this,cw);_this111=_possibleConstructorReturn(this,_getPrototypeOf(cw).call(this,e));_this111.children=_this111.createCollection();_this111.setTemplate({tag:"div",attributes:{"class":["ck","ck-toolbar__items"]},children:_this111.children});return _this111;}return cw;}(db);var lw=/*#__PURE__*/function(){function lw(e){_classCallCheck(this,lw);var t=e.bindTemplate;e.set("isVertical",false);e.itemsView.children.bindTo(e.items).using(function(e){return e;});e.focusables.bindTo(e.items).using(function(e){return e;});e.extendTemplate({attributes:{"class":[t["if"]("isVertical","ck-toolbar_vertical")]}});}_createClass(lw,[{key:"render",value:function render(){}},{key:"destroy",value:function destroy(){}}]);return lw;}();var dw=/*#__PURE__*/function(){function dw(e){var _this112=this;_classCallCheck(this,dw);this.viewChildren=e.children;this.viewFocusables=e.focusables;this.viewItemsView=e.itemsView;this.viewFocusTracker=e.focusTracker;this.viewLocale=e.locale;this.ungroupedItems=e.createCollection();this.groupedItems=e.createCollection();this.groupedItemsDropdown=this._createGroupedItemsDropdown();this.resizeObserver=null;this.cachedPadding=null;e.itemsView.children.bindTo(this.ungroupedItems).using(function(e){return e;});this.ungroupedItems.on("add",this._updateFocusCycleableItems.bind(this));this.ungroupedItems.on("remove",this._updateFocusCycleableItems.bind(this));e.children.on("add",this._updateFocusCycleableItems.bind(this));e.children.on("remove",this._updateFocusCycleableItems.bind(this));e.items.on("add",function(e,t,i){if(i>_this112.ungroupedItems.length){_this112.groupedItems.add(t,i-_this112.ungroupedItems.length);}else{_this112.ungroupedItems.add(t,i);}_this112._updateGrouping();});e.items.on("remove",function(e,t,i){if(i>_this112.ungroupedItems.length){_this112.groupedItems.remove(t);}else{_this112.ungroupedItems.remove(t);}_this112._updateGrouping();});e.extendTemplate({attributes:{"class":["ck-toolbar_grouping"]}});}_createClass(dw,[{key:"render",value:function render(e){this.viewElement=e.element;this._enableGroupingOnResize();this._enableGroupingOnMaxWidthChange(e);}},{key:"destroy",value:function destroy(){this.groupedItemsDropdown.destroy();this.resizeObserver.destroy();}},{key:"_updateGrouping",value:function _updateGrouping(){if(!this.viewElement.ownerDocument.body.contains(this.viewElement)){return;}var e;while(this._areItemsOverflowing){this._groupLastItem();e=true;}if(!e&&this.groupedItems.length){while(this.groupedItems.length&&!this._areItemsOverflowing){this._ungroupFirstItem();}if(this._areItemsOverflowing){this._groupLastItem();}}}},{key:"_enableGroupingOnResize",value:function _enableGroupingOnResize(){var _this113=this;var e;this.resizeObserver=new Ab(this.viewElement,function(t){if(!e||e!==t.contentRect.width){_this113._updateGrouping();e=t.contentRect.width;}});this._updateGrouping();}},{key:"_enableGroupingOnMaxWidthChange",value:function _enableGroupingOnMaxWidthChange(e){var _this114=this;e.on("change:maxWidth",function(){_this114._updateGrouping();});}},{key:"_groupLastItem",value:function _groupLastItem(){if(!this.groupedItems.length){this.viewChildren.add(new yb());this.viewChildren.add(this.groupedItemsDropdown);this.viewFocusTracker.add(this.groupedItemsDropdown.element);}this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0);}},{key:"_ungroupFirstItem",value:function _ungroupFirstItem(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first));if(!this.groupedItems.length){this.viewChildren.remove(this.groupedItemsDropdown);this.viewChildren.remove(this.viewChildren.last);this.viewFocusTracker.remove(this.groupedItemsDropdown.element);}}},{key:"_createGroupedItemsDropdown",value:function _createGroupedItemsDropdown(){var e=this.viewLocale;var t=e.t;var i=Qb(e);i["class"]="ck-toolbar__grouped-dropdown";i.panelPosition=e.uiLanguageDirection==="ltr"?"sw":"se";Zb(i,[]);i.buttonView.set({label:t("ec"),tooltip:true,icon:sw});i.toolbarView.items.bindTo(this.groupedItems).using(function(e){return e;});return i;}},{key:"_updateFocusCycleableItems",value:function _updateFocusCycleableItems(){var _this115=this;this.viewFocusables.clear();this.ungroupedItems.map(function(e){_this115.viewFocusables.add(e);});if(this.groupedItems.length){this.viewFocusables.add(this.groupedItemsDropdown);}}},{key:"_areItemsOverflowing",get:function get(){if(!this.ungroupedItems.length){return false;}var e=this.viewElement;var t=this.viewLocale.uiLanguageDirection;var i=new kh(e.lastChild);var n=new kh(e);if(!this.cachedPadding){var _i215=Nd.window.getComputedStyle(e);var _n111=t==="ltr"?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(_i215[_n111]);}if(t==="ltr"){return i.right>n.right-this.cachedPadding;}else{return i.left<n.left+this.cachedPadding;}}}]);return dw;}();var uw=/*#__PURE__*/function(_bb){_inherits(uw,_bb);function uw(e,t){var _this116;var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,uw);_this116=_possibleConstructorReturn(this,_getPrototypeOf(uw).call(this,e));_this116.toolbar=new aw(e,{shouldGroupWhenFull:i.shouldToolbarGroupWhenFull});_this116.editable=new _b(e,t,i.editableElement);_this116.toolbar.extendTemplate({attributes:{"class":["ck-reset_all","ck-rounded-corners"],dir:e.uiLanguageDirection}});return _this116;}_createClass(uw,[{key:"render",value:function render(){_get(_getPrototypeOf(uw.prototype),"render",this).call(this);this.registerChild([this.toolbar,this.editable]);}}]);return uw;}(bb);function hw(e){if(e instanceof HTMLTextAreaElement){return e.value;}return e.innerHTML;}function fw(e,t){if(e instanceof HTMLTextAreaElement){e.value=t;}e.innerHTML=t;}function mw(e){var t=e.sourceElement;if(!t){return;}if(t.ckeditorInstance){throw new rr["b"]("editor-source-element-already-used: "+"The DOM element cannot be used to create multiple editor instances.",e);}t.ckeditorInstance=e;e.once("destroy",function(){delete t.ckeditorInstance;});}var gw=/*#__PURE__*/function(_hp){_inherits(gw,_hp);function gw(e,t){var _this117;_classCallCheck(this,gw);_this117=_possibleConstructorReturn(this,_getPrototypeOf(gw).call(this,t));if(Gs(e)){_this117.sourceElement=e;mw(_assertThisInitialized(_this117));}_this117.data.processor=new pp(_this117.data.viewDocument);_this117.model.document.createRoot();var i=!_this117.config.get("toolbar.shouldNotGroupWhenFull");var n=new uw(_this117.locale,_this117.editing.view,{editableElement:_this117.sourceElement,shouldToolbarGroupWhenFull:i});_this117.ui=new Op(_assertThisInitialized(_this117),n);return _this117;}_createClass(gw,[{key:"destroy",value:function destroy(){var _this118=this;var e=this.getData();this.ui.destroy();return _get(_getPrototypeOf(gw.prototype),"destroy",this).call(this).then(function(){if(_this118.sourceElement){fw(_this118.sourceElement,e);}});}}],[{key:"create",value:function create(e){var _this119=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return new Promise(function(i){var n=Gs(e);if(n&&e.tagName==="TEXTAREA"){throw new rr["b"]("editor-wrong-element: This type of editor cannot be initialized inside <textarea> element.",null);}var o=new _this119(e,t);i(o.initPlugins().then(function(){o.ui.init();}).then(function(){if(!n&&t.initialData){throw new rr["b"]("editor-create-initial-data: "+"The config.initialData option cannot be used together with initial data passed in Editor.create().",null);}var i=t.initialData||pw(e);return o.data.init(i);}).then(function(){return o.fire("ready");}).then(function(){return o;}));});}}]);return gw;}(hp);kr(gw,mp);function pw(e){return Gs(e)?hw(e):e;}var bw=/*#__PURE__*/function(){function bw(e){_classCallCheck(this,bw);this.editor=e;this.set("isEnabled",true);this._disableStack=new Set();}_createClass(bw,[{key:"forceDisabled",value:function forceDisabled(e){this._disableStack.add(e);if(this._disableStack.size==1){this.on("set:isEnabled",ww,{priority:"highest"});this.isEnabled=false;}}},{key:"clearForceDisabled",value:function clearForceDisabled(e){this._disableStack["delete"](e);if(this._disableStack.size==0){this.off("set:isEnabled",ww);this.isEnabled=true;}}},{key:"destroy",value:function destroy(){this.stopListening();}}],[{key:"isContextPlugin",get:function get(){return false;}}]);return bw;}();kr(bw,Jc);function ww(e){e["return"]=false;e.stop();}var _w=/*#__PURE__*/function(){function _w(e){var _this120=this;_classCallCheck(this,_w);this.editor=e;this.set("value",undefined);this.set("isEnabled",false);this._disableStack=new Set();this.decorate("execute");this.listenTo(this.editor.model.document,"change",function(){_this120.refresh();});this.on("execute",function(e){if(!_this120.isEnabled){e.stop();}},{priority:"high"});this.listenTo(e,"change:isReadOnly",function(e,t,i){if(i){_this120.forceDisabled("readOnlyMode");}else{_this120.clearForceDisabled("readOnlyMode");}});}_createClass(_w,[{key:"refresh",value:function refresh(){this.isEnabled=true;}},{key:"forceDisabled",value:function forceDisabled(e){this._disableStack.add(e);if(this._disableStack.size==1){this.on("set:isEnabled",vw,{priority:"highest"});this.isEnabled=false;}}},{key:"clearForceDisabled",value:function clearForceDisabled(e){this._disableStack["delete"](e);if(this._disableStack.size==0){this.off("set:isEnabled",vw);this.refresh();}}},{key:"execute",value:function execute(){}},{key:"destroy",value:function destroy(){this.stopListening();}}]);return _w;}();kr(_w,Jc);function vw(e){e["return"]=false;e.stop();}function kw(e){var t=e.next();if(t.done){return null;}return t.value;}var yw=["left","right","center","justify"];function xw(e){return yw.includes(e);}function Aw(e,t){if(t.contentLanguageDirection=="rtl"){return e==="right";}else{return e==="left";}}var Cw="alignment";var Tw=/*#__PURE__*/function(_w2){_inherits(Tw,_w2);function Tw(){_classCallCheck(this,Tw);return _possibleConstructorReturn(this,_getPrototypeOf(Tw).apply(this,arguments));}_createClass(Tw,[{key:"refresh",value:function refresh(){var e=this.editor;var t=e.locale;var i=kw(this.editor.model.document.selection.getSelectedBlocks());this.isEnabled=!!i&&this._canBeAligned(i);if(this.isEnabled&&i.hasAttribute("alignment")){this.value=i.getAttribute("alignment");}else{this.value=t.contentLanguageDirection==="rtl"?"right":"left";}}},{key:"execute",value:function execute(){var _this121=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor;var i=t.locale;var n=t.model;var o=n.document;var s=e.value;n.change(function(e){var t=Array.from(o.selection.getSelectedBlocks()).filter(function(e){return _this121._canBeAligned(e);});var n=t[0].getAttribute("alignment");var r=Aw(s,i)||n===s||!s;if(r){Mw(t,e);}else{Ew(t,e,s);}});}},{key:"_canBeAligned",value:function _canBeAligned(e){return this.editor.model.schema.checkAttribute(e,Cw);}}]);return Tw;}(_w);function Mw(e,t){var _iteratorNormalCompletion263=true;var _didIteratorError263=false;var _iteratorError263=undefined;try{for(var _iterator263=e[Symbol.iterator](),_step263;!(_iteratorNormalCompletion263=(_step263=_iterator263.next()).done);_iteratorNormalCompletion263=true){var _i216=_step263.value;t.removeAttribute(Cw,_i216);}}catch(err){_didIteratorError263=true;_iteratorError263=err;}finally{try{if(!_iteratorNormalCompletion263&&_iterator263["return"]!=null){_iterator263["return"]();}}finally{if(_didIteratorError263){throw _iteratorError263;}}}}function Ew(e,t,i){var _iteratorNormalCompletion264=true;var _didIteratorError264=false;var _iteratorError264=undefined;try{for(var _iterator264=e[Symbol.iterator](),_step264;!(_iteratorNormalCompletion264=(_step264=_iterator264.next()).done);_iteratorNormalCompletion264=true){var _n112=_step264.value;t.setAttribute(Cw,i,_n112);}}catch(err){_didIteratorError264=true;_iteratorError264=err;}finally{try{if(!_iteratorNormalCompletion264&&_iterator264["return"]!=null){_iterator264["return"]();}}finally{if(_didIteratorError264){throw _iteratorError264;}}}}var Pw=/*#__PURE__*/function(_bw){_inherits(Pw,_bw);_createClass(Pw,null,[{key:"pluginName",get:function get(){return"AlignmentEditing";}}]);function Pw(e){var _this122;_classCallCheck(this,Pw);_this122=_possibleConstructorReturn(this,_getPrototypeOf(Pw).call(this,e));e.config.define("alignment",{options:[].concat(yw)});return _this122;}_createClass(Pw,[{key:"init",value:function init(){var e=this.editor;var t=e.locale;var i=e.model.schema;var n=e.config.get("alignment.options").filter(xw);i.extend("$block",{allowAttributes:"alignment"});e.model.schema.setAttributeProperties("alignment",{isFormatting:true});var o=Sw(n.filter(function(e){return!Aw(e,t);}));e.conversion.attributeToAttribute(o);e.commands.add("alignment",new Tw(e));}}]);return Pw;}(bw);function Sw(e){var t={model:{key:"alignment",values:e.slice()},view:{}};var _iteratorNormalCompletion265=true;var _didIteratorError265=false;var _iteratorError265=undefined;try{for(var _iterator265=e[Symbol.iterator](),_step265;!(_iteratorNormalCompletion265=(_step265=_iterator265.next()).done);_iteratorNormalCompletion265=true){var _i217=_step265.value;t.view[_i217]={key:"style",value:{"text-align":_i217}};}}catch(err){_didIteratorError265=true;_iteratorError265=err;}finally{try{if(!_iteratorNormalCompletion265&&_iterator265["return"]!=null){_iterator265["return"]();}}finally{if(_didIteratorError265){throw _iteratorError265;}}}return t;}var Iw='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>';var Nw='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M18 3.75a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 8a.75.75 0 0 1-.75.75H2.75a.75.75 0 1 1 0-1.5h14.5a.75.75 0 0 1 .75.75zm0 4a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75zm0-8a.75.75 0 0 1-.75.75H7.321a.75.75 0 1 1 0-1.5h9.929a.75.75 0 0 1 .75.75z"/></svg>';var Ow='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm2.286 4c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.928a.75.75 0 1 0 0-1.5H5.036a.75.75 0 0 0-.75.75z"/></svg>';var Rw='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>';var Lw=new Map([["left",Iw],["right",Nw],["center",Ow],["justify",Rw]]);var zw=/*#__PURE__*/function(_bw2){_inherits(zw,_bw2);function zw(){_classCallCheck(this,zw);return _possibleConstructorReturn(this,_getPrototypeOf(zw).apply(this,arguments));}_createClass(zw,[{key:"init",value:function init(){var _this123=this;var e=this.editor;var t=e.ui.componentFactory;var i=e.t;var n=e.config.get("alignment.options");n.filter(xw).forEach(function(e){return _this123._addButton(e);});t.add("alignment",function(e){var o=Qb(e);var s=n.map(function(e){return t.create("alignment:".concat(e));});Zb(o,s);o.buttonView.set({label:i("k"),tooltip:true});o.toolbarView.isVertical=true;o.toolbarView.ariaLabel=i("l");o.extendTemplate({attributes:{"class":"ck-alignment-dropdown"}});var r=e.contentLanguageDirection==="rtl"?Nw:Iw;o.buttonView.bind("icon").toMany(s,"isOn",function(){for(var _len18=arguments.length,e=new Array(_len18),_key18=0;_key18<_len18;_key18++){e[_key18]=arguments[_key18];}var t=e.findIndex(function(e){return e;});if(t<0){return r;}return s[t].icon;});o.bind("isEnabled").toMany(s,"isEnabled",function(){for(var _len19=arguments.length,e=new Array(_len19),_key19=0;_key19<_len19;_key19++){e[_key19]=arguments[_key19];}return e.some(function(e){return e;});});return o;});}},{key:"_addButton",value:function _addButton(e){var _this124=this;var t=this.editor;t.ui.componentFactory.add("alignment:".concat(e),function(i){var n=t.commands.get("alignment");var o=new Vb(i);o.set({label:_this124.localizedOptionTitles[e],icon:Lw.get(e),tooltip:true,isToggleable:true});o.bind("isEnabled").to(n);o.bind("isOn").to(n,"value",function(t){return t===e;});_this124.listenTo(o,"execute",function(){t.execute("alignment",{value:e});t.editing.view.focus();});return o;});}},{key:"localizedOptionTitles",get:function get(){var e=this.editor.t;return{left:e("g"),right:e("h"),center:e("i"),justify:e("j")};}}],[{key:"pluginName",get:function get(){return"AlignmentUI";}}]);return zw;}(bw);var Dw=/*#__PURE__*/function(_bw3){_inherits(Dw,_bw3);function Dw(){_classCallCheck(this,Dw);return _possibleConstructorReturn(this,_getPrototypeOf(Dw).apply(this,arguments));}_createClass(Dw,null,[{key:"requires",get:function get(){return[Pw,zw];}},{key:"pluginName",get:function get(){return"Alignment";}}]);return Dw;}(bw);var jw=/*#__PURE__*/function(){_createClass(jw,null,[{key:"pluginName",get:function get(){return"BlockAutoformatEditing";}}]);function jw(e,t,i){_classCallCheck(this,jw);var n;var o=null;if(typeof i=="function"){n=i;}else{o=e.commands.get(i);n=function n(){e.execute(i);};}e.model.document.on("change",function(i,s){if(o&&!o.isEnabled){return;}if(s.type=="transparent"){return;}var r=Array.from(e.model.document.differ.getChanges());var a=r[0];if(r.length!=1||a.type!=="insert"||a.name!="$text"||a.length!=1){return;}var c=a.position.parent;if(!c.is("paragraph")||c.childCount!==1){return;}var l=t.exec(c.getChild(0).data);if(!l){return;}e.model.enqueueChange(function(e){var t=e.createPositionAt(c,0);var i=e.createPositionAt(c,l[0].length);var o=new sf(t,i);var s=n({match:l});if(s!==false){e.remove(o);}o.detach();});});}return jw;}();function Bw(e,t){var i=e.start;var n=Array.from(e.getItems()).reduce(function(e,n){if(!(n.is("text")||n.is("textProxy"))){i=t.createPositionAfter(n);return"";}return e+n.data;},"");return{text:n,range:t.createRange(i,e.end)};}var Vw=/*#__PURE__*/function(){_createClass(Vw,null,[{key:"pluginName",get:function get(){return"InlineAutoformatEditing";}}]);function Vw(e,t,i){_classCallCheck(this,Vw);var n;var o;var s;var r;if(t instanceof RegExp){n=t;}else{s=t;}if(typeof i=="string"){o=i;}else{r=i;}s=s||function(e){var t;var i=[];var o=[];while((t=n.exec(e))!==null){if(t&&t.length<4){break;}var _t207=t,_e220=_t207.index,_n113=_t207[1],_s32=_t207[2],_r20=_t207[3];var _a12=_n113+_s32+_r20;_e220+=t[0].length-_a12.length;var _c6=[_e220,_e220+_n113.length];var _l3=[_e220+_n113.length+_s32.length,_e220+_n113.length+_s32.length+_r20.length];i.push(_c6);i.push(_l3);o.push([_e220+_n113.length,_e220+_n113.length+_s32.length]);}return{remove:i,format:o};};r=r||function(t,i){var n=e.model.schema.getValidRanges(i,o);var _iteratorNormalCompletion266=true;var _didIteratorError266=false;var _iteratorError266=undefined;try{for(var _iterator266=n[Symbol.iterator](),_step266;!(_iteratorNormalCompletion266=(_step266=_iterator266.next()).done);_iteratorNormalCompletion266=true){var _e221=_step266.value;t.setAttribute(o,true,_e221);}}catch(err){_didIteratorError266=true;_iteratorError266=err;}finally{try{if(!_iteratorNormalCompletion266&&_iterator266["return"]!=null){_iterator266["return"]();}}finally{if(_didIteratorError266){throw _iteratorError266;}}}t.removeSelectionAttribute(o);};e.model.document.on("change",function(t,i){if(i.type=="transparent"){return;}var n=e.model;var o=n.document.selection;if(!o.isCollapsed){return;}var a=Array.from(n.document.differ.getChanges());var c=a[0];if(a.length!=1||c.type!=="insert"||c.name!="$text"||c.length!=1){return;}var l=o.focus;var d=l.parent;var _Bw=Bw(n.createRange(n.createPositionAt(d,0),l),n),u=_Bw.text,h=_Bw.range;var f=s(u);var m=Fw(h.start,f.format,n);var g=Fw(h.start,f.remove,n);if(!(m.length&&g.length)){return;}n.enqueueChange(function(e){var t=r(e,m);if(t===false){return;}var _iteratorNormalCompletion267=true;var _didIteratorError267=false;var _iteratorError267=undefined;try{for(var _iterator267=g.reverse()[Symbol.iterator](),_step267;!(_iteratorNormalCompletion267=(_step267=_iterator267.next()).done);_iteratorNormalCompletion267=true){var _t208=_step267.value;e.remove(_t208);}}catch(err){_didIteratorError267=true;_iteratorError267=err;}finally{try{if(!_iteratorNormalCompletion267&&_iterator267["return"]!=null){_iterator267["return"]();}}finally{if(_didIteratorError267){throw _iteratorError267;}}}});});}return Vw;}();function Fw(e,t,i){return t.filter(function(e){return e[0]!==undefined&&e[1]!==undefined;}).map(function(t){return i.createRange(e.getShiftedBy(t[0]),e.getShiftedBy(t[1]));});}var Hw=/*#__PURE__*/function(_bw4){_inherits(Hw,_bw4);function Hw(){_classCallCheck(this,Hw);return _possibleConstructorReturn(this,_getPrototypeOf(Hw).apply(this,arguments));}_createClass(Hw,[{key:"afterInit",value:function afterInit(){this._addListAutoformats();this._addBasicStylesAutoformats();this._addHeadingAutoformats();this._addBlockQuoteAutoformats();this._addCodeBlockAutoformats();}},{key:"_addListAutoformats",value:function _addListAutoformats(){var e=this.editor.commands;if(e.get("bulletedList")){new jw(this.editor,/^[*-]\s$/,"bulletedList");}if(e.get("numberedList")){new jw(this.editor,/^1[.|)]\s$/,"numberedList");}}},{key:"_addBasicStylesAutoformats",value:function _addBasicStylesAutoformats(){var e=this.editor.commands;if(e.get("bold")){var _e222=Ww(this.editor,"bold");new Vw(this.editor,/(\*\*)([^*]+)(\*\*)$/g,_e222);new Vw(this.editor,/(__)([^_]+)(__)$/g,_e222);}if(e.get("italic")){var _e223=Ww(this.editor,"italic");new Vw(this.editor,/(?:^|[^*])(\*)([^*_]+)(\*)$/g,_e223);new Vw(this.editor,/(?:^|[^_])(_)([^_]+)(_)$/g,_e223);}if(e.get("code")){var _e224=Ww(this.editor,"code");new Vw(this.editor,/(`)([^`]+)(`)$/g,_e224);}}},{key:"_addHeadingAutoformats",value:function _addHeadingAutoformats(){var _this125=this;var e=this.editor.commands.get("heading");if(e){e.modelElements.filter(function(e){return e.match(/^heading[1-6]$/);}).forEach(function(t){var i=t[7];var n=new RegExp("^(#{".concat(i,"})\\s$"));new jw(_this125.editor,n,function(){if(!e.isEnabled){return false;}_this125.editor.execute("heading",{value:t});});});}}},{key:"_addBlockQuoteAutoformats",value:function _addBlockQuoteAutoformats(){if(this.editor.commands.get("blockQuote")){new jw(this.editor,/^>\s$/,"blockQuote");}}},{key:"_addCodeBlockAutoformats",value:function _addCodeBlockAutoformats(){if(this.editor.commands.get("codeBlock")){new jw(this.editor,/^```$/,"codeBlock");}}}],[{key:"pluginName",get:function get(){return"Autoformat";}}]);return Hw;}(bw);function Ww(e,t){return function(i,n){var o=e.commands.get(t);if(!o.isEnabled){return false;}var s=e.model.schema.getValidRanges(n,t);var _iteratorNormalCompletion268=true;var _didIteratorError268=false;var _iteratorError268=undefined;try{for(var _iterator268=s[Symbol.iterator](),_step268;!(_iteratorNormalCompletion268=(_step268=_iterator268.next()).done);_iteratorNormalCompletion268=true){var _e225=_step268.value;i.setAttribute(t,true,_e225);}}catch(err){_didIteratorError268=true;_iteratorError268=err;}finally{try{if(!_iteratorNormalCompletion268&&_iterator268["return"]!=null){_iterator268["return"]();}}finally{if(_didIteratorError268){throw _iteratorError268;}}}i.removeSelectionAttribute(t);};}var Uw=/*#__PURE__*/function(_w3){_inherits(Uw,_w3);function Uw(){_classCallCheck(this,Uw);return _possibleConstructorReturn(this,_getPrototypeOf(Uw).apply(this,arguments));}_createClass(Uw,[{key:"refresh",value:function refresh(){this.value=this._getValue();this.isEnabled=this._checkEnabled();}},{key:"execute",value:function execute(){var _this126=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor.model;var i=t.schema;var n=t.document.selection;var o=Array.from(n.getSelectedBlocks());var s=e.forceValue===undefined?!this.value:e.forceValue;t.change(function(e){if(!s){_this126._removeQuote(e,o.filter($w));}else{var _t209=o.filter(function(e){return $w(e)||Yw(i,e);});_this126._applyQuote(e,_t209);}});}},{key:"_getValue",value:function _getValue(){var e=this.editor.model.document.selection;var t=kw(e.getSelectedBlocks());return!!(t&&$w(t));}},{key:"_checkEnabled",value:function _checkEnabled(){if(this.value){return true;}var e=this.editor.model.document.selection;var t=this.editor.model.schema;var i=kw(e.getSelectedBlocks());if(!i){return false;}return Yw(t,i);}},{key:"_removeQuote",value:function _removeQuote(e,t){qw(e,t).reverse().forEach(function(t){if(t.start.isAtStart&&t.end.isAtEnd){e.unwrap(t.start.parent);return;}if(t.start.isAtStart){var _i218=e.createPositionBefore(t.start.parent);e.move(t,_i218);return;}if(!t.end.isAtEnd){e.split(t.end);}var i=e.createPositionAfter(t.end.parent);e.move(t,i);});}},{key:"_applyQuote",value:function _applyQuote(e,t){var i=[];qw(e,t).reverse().forEach(function(t){var n=$w(t.start);if(!n){n=e.createElement("blockQuote");e.wrap(t,n);}i.push(n);});i.reverse().reduce(function(t,i){if(t.nextSibling==i){e.merge(e.createPositionAfter(t));return t;}return i;});}}]);return Uw;}(_w);function $w(e){return e.parent.name=="blockQuote"?e.parent:null;}function qw(e,t){var i;var n=0;var o=[];while(n<t.length){var _s33=t[n];var _r21=t[n+1];if(!i){i=e.createPositionBefore(_s33);}if(!_r21||_s33.nextSibling!=_r21){o.push(e.createRange(i,e.createPositionAfter(_s33)));i=null;}n++;}return o;}function Yw(e,t){var i=e.checkChild(t.parent,"blockQuote");var n=e.checkChild(["$root","blockQuote"],t);return i&&n;}var Gw=/*#__PURE__*/function(_bw5){_inherits(Gw,_bw5);function Gw(){_classCallCheck(this,Gw);return _possibleConstructorReturn(this,_getPrototypeOf(Gw).apply(this,arguments));}_createClass(Gw,[{key:"init",value:function init(){var e=this.editor;var t=e.model.schema;e.commands.add("blockQuote",new Uw(e));t.register("blockQuote",{allowWhere:"$block",allowContentOf:"$root"});t.addChildCheck(function(e,t){if(e.endsWith("blockQuote")&&t.name=="blockQuote"){return false;}});e.conversion.elementToElement({model:"blockQuote",view:"blockquote"});e.model.document.registerPostFixer(function(i){var n=e.model.document.differ.getChanges();var _iteratorNormalCompletion269=true;var _didIteratorError269=false;var _iteratorError269=undefined;try{for(var _iterator269=n[Symbol.iterator](),_step269;!(_iteratorNormalCompletion269=(_step269=_iterator269.next()).done);_iteratorNormalCompletion269=true){var _e226=_step269.value;if(_e226.type=="insert"){var _n114=_e226.position.nodeAfter;if(!_n114){continue;}if(_n114.is("blockQuote")&&_n114.isEmpty){i.remove(_n114);return true;}else if(_n114.is("blockQuote")&&!t.checkChild(_e226.position,_n114)){i.unwrap(_n114);return true;}else if(_n114.is("element")){var _e227=i.createRangeIn(_n114);var _iteratorNormalCompletion270=true;var _didIteratorError270=false;var _iteratorError270=undefined;try{for(var _iterator270=_e227.getItems()[Symbol.iterator](),_step270;!(_iteratorNormalCompletion270=(_step270=_iterator270.next()).done);_iteratorNormalCompletion270=true){var _n115=_step270.value;if(_n115.is("blockQuote")&&!t.checkChild(i.createPositionBefore(_n115),_n115)){i.unwrap(_n115);return true;}}}catch(err){_didIteratorError270=true;_iteratorError270=err;}finally{try{if(!_iteratorNormalCompletion270&&_iterator270["return"]!=null){_iterator270["return"]();}}finally{if(_didIteratorError270){throw _iteratorError270;}}}}}else if(_e226.type=="remove"){var _t210=_e226.position.parent;if(_t210.is("blockQuote")&&_t210.isEmpty){i.remove(_t210);return true;}}}}catch(err){_didIteratorError269=true;_iteratorError269=err;}finally{try{if(!_iteratorNormalCompletion269&&_iterator269["return"]!=null){_iterator269["return"]();}}finally{if(_didIteratorError269){throw _iteratorError269;}}}return false;});}},{key:"afterInit",value:function afterInit(){var _this127=this;var e=this.editor;var t=e.commands.get("blockQuote");this.listenTo(this.editor.editing.view.document,"enter",function(e,i){var n=_this127.editor.model.document;var o=n.selection.getLastPosition().parent;if(n.selection.isCollapsed&&o.isEmpty&&t.value){_this127.editor.execute("blockQuote");_this127.editor.editing.view.scrollToTheSelection();i.preventDefault();e.stop();}});}}],[{key:"pluginName",get:function get(){return"BlockQuoteEditing";}}]);return Gw;}(bw);var Jw='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z"/></svg>';var Xw=i(41);var Kw=/*#__PURE__*/function(_bw6){_inherits(Kw,_bw6);function Kw(){_classCallCheck(this,Kw);return _possibleConstructorReturn(this,_getPrototypeOf(Kw).apply(this,arguments));}_createClass(Kw,[{key:"init",value:function init(){var _this128=this;var e=this.editor;var t=e.t;e.ui.componentFactory.add("blockQuote",function(i){var n=e.commands.get("blockQuote");var o=new Vb(i);o.set({label:t("m"),icon:Jw,tooltip:true,isToggleable:true});o.bind("isOn","isEnabled").to(n,"value","isEnabled");_this128.listenTo(o,"execute",function(){e.execute("blockQuote");e.editing.view.focus();});return o;});}}]);return Kw;}(bw);var Qw=/*#__PURE__*/function(_bw7){_inherits(Qw,_bw7);function Qw(){_classCallCheck(this,Qw);return _possibleConstructorReturn(this,_getPrototypeOf(Qw).apply(this,arguments));}_createClass(Qw,null,[{key:"requires",get:function get(){return[Gw,Kw];}},{key:"pluginName",get:function get(){return"BlockQuote";}}]);return Qw;}(bw);var Zw=/*#__PURE__*/function(_w4){_inherits(Zw,_w4);function Zw(e,t){var _this129;_classCallCheck(this,Zw);_this129=_possibleConstructorReturn(this,_getPrototypeOf(Zw).call(this,e));_this129.attributeKey=t;return _this129;}_createClass(Zw,[{key:"refresh",value:function refresh(){var e=this.editor.model;var t=e.document;this.value=this._getValueFromFirstAllowedNode();this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey);}},{key:"execute",value:function execute(){var _this130=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor.model;var i=t.document;var n=i.selection;var o=e.forceValue===undefined?!this.value:e.forceValue;t.change(function(e){if(n.isCollapsed){if(o){e.setSelectionAttribute(_this130.attributeKey,true);}else{e.removeSelectionAttribute(_this130.attributeKey);}}else{var _i219=t.schema.getValidRanges(n.getRanges(),_this130.attributeKey);var _iteratorNormalCompletion271=true;var _didIteratorError271=false;var _iteratorError271=undefined;try{for(var _iterator271=_i219[Symbol.iterator](),_step271;!(_iteratorNormalCompletion271=(_step271=_iterator271.next()).done);_iteratorNormalCompletion271=true){var _t211=_step271.value;if(o){e.setAttribute(_this130.attributeKey,o,_t211);}else{e.removeAttribute(_this130.attributeKey,_t211);}}}catch(err){_didIteratorError271=true;_iteratorError271=err;}finally{try{if(!_iteratorNormalCompletion271&&_iterator271["return"]!=null){_iterator271["return"]();}}finally{if(_didIteratorError271){throw _iteratorError271;}}}}});}},{key:"_getValueFromFirstAllowedNode",value:function _getValueFromFirstAllowedNode(){var e=this.editor.model;var t=e.schema;var i=e.document.selection;if(i.isCollapsed){return i.hasAttribute(this.attributeKey);}var _iteratorNormalCompletion272=true;var _didIteratorError272=false;var _iteratorError272=undefined;try{for(var _iterator272=i.getRanges()[Symbol.iterator](),_step272;!(_iteratorNormalCompletion272=(_step272=_iterator272.next()).done);_iteratorNormalCompletion272=true){var _e228=_step272.value;var _iteratorNormalCompletion273=true;var _didIteratorError273=false;var _iteratorError273=undefined;try{for(var _iterator273=_e228.getItems()[Symbol.iterator](),_step273;!(_iteratorNormalCompletion273=(_step273=_iterator273.next()).done);_iteratorNormalCompletion273=true){var _i220=_step273.value;if(t.checkAttribute(_i220,this.attributeKey)){return _i220.hasAttribute(this.attributeKey);}}}catch(err){_didIteratorError273=true;_iteratorError273=err;}finally{try{if(!_iteratorNormalCompletion273&&_iterator273["return"]!=null){_iterator273["return"]();}}finally{if(_didIteratorError273){throw _iteratorError273;}}}}}catch(err){_didIteratorError272=true;_iteratorError272=err;}finally{try{if(!_iteratorNormalCompletion272&&_iterator272["return"]!=null){_iterator272["return"]();}}finally{if(_didIteratorError272){throw _iteratorError272;}}}return false;}}]);return Zw;}(_w);var e_="bold";var t_=/*#__PURE__*/function(_bw8){_inherits(t_,_bw8);function t_(){_classCallCheck(this,t_);return _possibleConstructorReturn(this,_getPrototypeOf(t_).apply(this,arguments));}_createClass(t_,[{key:"init",value:function init(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:e_});e.model.schema.setAttributeProperties(e_,{isFormatting:true,copyOnEnter:true});e.conversion.attributeToElement({model:e_,view:"strong",upcastAlso:["b",function(e){var t=e.getStyle("font-weight");if(!t){return null;}if(t=="bold"||Number(t)>=600){return{name:true,styles:["font-weight"]};}}]});e.commands.add(e_,new Zw(e,e_));e.keystrokes.set("CTRL+B",e_);}}],[{key:"pluginName",get:function get(){return"BoldEditing";}}]);return t_;}(bw);var i_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>';var n_="bold";var o_=/*#__PURE__*/function(_bw9){_inherits(o_,_bw9);function o_(){_classCallCheck(this,o_);return _possibleConstructorReturn(this,_getPrototypeOf(o_).apply(this,arguments));}_createClass(o_,[{key:"init",value:function init(){var _this131=this;var e=this.editor;var t=e.t;e.ui.componentFactory.add(n_,function(i){var n=e.commands.get(n_);var o=new Vb(i);o.set({label:t("z"),icon:i_,keystroke:"CTRL+B",tooltip:true,isToggleable:true});o.bind("isOn","isEnabled").to(n,"value","isEnabled");_this131.listenTo(o,"execute",function(){e.execute(n_);e.editing.view.focus();});return o;});}}]);return o_;}(bw);var s_=/*#__PURE__*/function(_bw10){_inherits(s_,_bw10);function s_(){_classCallCheck(this,s_);return _possibleConstructorReturn(this,_getPrototypeOf(s_).apply(this,arguments));}_createClass(s_,null,[{key:"requires",get:function get(){return[t_,o_];}},{key:"pluginName",get:function get(){return"Bold";}}]);return s_;}(bw);var r_=/*#__PURE__*/function(_w5){_inherits(r_,_w5);function r_(e,t){var _this132;_classCallCheck(this,r_);_this132=_possibleConstructorReturn(this,_getPrototypeOf(r_).call(this,e));_this132.attributeKey=t;return _this132;}_createClass(r_,[{key:"refresh",value:function refresh(){var e=this.editor.model;var t=e.document;this.value=t.selection.getAttribute(this.attributeKey);this.isEnabled=e.schema.checkAttributeInSelection(t.selection,this.attributeKey);}},{key:"execute",value:function execute(){var _this133=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor.model;var i=t.document;var n=i.selection;var o=e.value;t.change(function(e){if(n.isCollapsed){if(o){e.setSelectionAttribute(_this133.attributeKey,o);}else{e.removeSelectionAttribute(_this133.attributeKey);}}else{var _i221=t.schema.getValidRanges(n.getRanges(),_this133.attributeKey);var _iteratorNormalCompletion274=true;var _didIteratorError274=false;var _iteratorError274=undefined;try{for(var _iterator274=_i221[Symbol.iterator](),_step274;!(_iteratorNormalCompletion274=(_step274=_iterator274.next()).done);_iteratorNormalCompletion274=true){var _t212=_step274.value;if(o){e.setAttribute(_this133.attributeKey,o,_t212);}else{e.removeAttribute(_this133.attributeKey,_t212);}}}catch(err){_didIteratorError274=true;_iteratorError274=err;}finally{try{if(!_iteratorNormalCompletion274&&_iterator274["return"]!=null){_iterator274["return"]();}}finally{if(_didIteratorError274){throw _iteratorError274;}}}}});}}]);return r_;}(_w);var a_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M16.935 5.328a2 2 0 0 1 0 2.829l-7.778 7.778a2 2 0 0 1-2.829 0L3.5 13.107a1.999 1.999 0 1 1 2.828-2.829l.707.707a1 1 0 0 0 1.414 0l5.658-5.657a2 2 0 0 1 2.828 0z"/><path d="M14.814 6.035L8.448 12.4a1 1 0 0 1-1.414 0l-1.413-1.415A1 1 0 1 0 4.207 12.4l2.829 2.829a1 1 0 0 0 1.414 0l7.778-7.778a1 1 0 1 0-1.414-1.415z"/></svg>';var c_=/*#__PURE__*/function(_Vb3){_inherits(c_,_Vb3);function c_(e){var _this134;_classCallCheck(this,c_);_this134=_possibleConstructorReturn(this,_getPrototypeOf(c_).call(this,e));var t=_this134.bindTemplate;_this134.set("color");_this134.set("hasBorder");_this134.icon=a_;_this134.extendTemplate({attributes:{style:{backgroundColor:t.to("color")},"class":["ck","ck-color-grid__tile",t["if"]("hasBorder","ck-color-table__color-tile_bordered")]}});return _this134;}_createClass(c_,[{key:"render",value:function render(){_get(_getPrototypeOf(c_.prototype),"render",this).call(this);this.iconView.fillColor="hsl(0, 0%, 100%)";}}]);return c_;}(Vb);var l_=i(43);var d_=/*#__PURE__*/function(_db14){_inherits(d_,_db14);function d_(e,t){var _this135;_classCallCheck(this,d_);_this135=_possibleConstructorReturn(this,_getPrototypeOf(d_).call(this,e));var i=t&&t.colorDefinitions||[];var n={};if(t&&t.columns){n.gridTemplateColumns="repeat( ".concat(t.columns,", 1fr)");}_this135.set("selectedColor");_this135.items=_this135.createCollection();_this135.focusTracker=new _p();_this135.keystrokes=new dp();_this135._focusCycler=new vb({focusables:_this135.items,focusTracker:_this135.focusTracker,keystrokeHandler:_this135.keystrokes,actions:{focusPrevious:"arrowleft",focusNext:"arrowright"}});_this135.items.on("add",function(e,t){t.isOn=t.color===_this135.selectedColor;});i.forEach(function(e){var t=new c_();t.set({color:e.color,label:e.label,tooltip:true,hasBorder:e.options.hasBorder});t.on("execute",function(){_this135.fire("execute",{value:e.color,hasBorder:e.options.hasBorder,label:e.label});});_this135.items.add(t);});_this135.setTemplate({tag:"div",children:_this135.items,attributes:{"class":["ck","ck-color-grid"],style:n}});_this135.on("change:selectedColor",function(e,t,i){var _iteratorNormalCompletion275=true;var _didIteratorError275=false;var _iteratorError275=undefined;try{for(var _iterator275=_this135.items[Symbol.iterator](),_step275;!(_iteratorNormalCompletion275=(_step275=_iterator275.next()).done);_iteratorNormalCompletion275=true){var _e229=_step275.value;_e229.isOn=_e229.color===i;}}catch(err){_didIteratorError275=true;_iteratorError275=err;}finally{try{if(!_iteratorNormalCompletion275&&_iterator275["return"]!=null){_iterator275["return"]();}}finally{if(_didIteratorError275){throw _iteratorError275;}}}});return _this135;}_createClass(d_,[{key:"focus",value:function focus(){if(this.items.length){this.items.first.focus();}}},{key:"focusLast",value:function focusLast(){if(this.items.length){this.items.last.focus();}}},{key:"render",value:function render(){var _this136=this;_get(_getPrototypeOf(d_.prototype),"render",this).call(this);var _iteratorNormalCompletion276=true;var _didIteratorError276=false;var _iteratorError276=undefined;try{for(var _iterator276=this.items[Symbol.iterator](),_step276;!(_iteratorNormalCompletion276=(_step276=_iterator276.next()).done);_iteratorNormalCompletion276=true){var _e230=_step276.value;this.focusTracker.add(_e230.element);}}catch(err){_didIteratorError276=true;_iteratorError276=err;}finally{try{if(!_iteratorNormalCompletion276&&_iterator276["return"]!=null){_iterator276["return"]();}}finally{if(_didIteratorError276){throw _iteratorError276;}}}this.items.on("add",function(e,t){_this136.focusTracker.add(t.element);});this.items.on("remove",function(e,t){_this136.focusTracker.remove(t.element);});this.keystrokes.listenTo(this.element);}}]);return d_;}(db);var u_=i(45);var h_=/*#__PURE__*/function(_db15){_inherits(h_,_db15);function h_(e){var _this137;_classCallCheck(this,h_);_this137=_possibleConstructorReturn(this,_getPrototypeOf(h_).call(this,e));_this137.set("text");_this137.set("for");_this137.id="ck-editor__label_".concat(ir());var t=_this137.bindTemplate;_this137.setTemplate({tag:"label",attributes:{"class":["ck","ck-label"],id:_this137.id,"for":t.to("for")},children:[{text:t.to("text")}]});return _this137;}return h_;}(db);var f_=/*#__PURE__*/function(_yr2){_inherits(f_,_yr2);function f_(e){var _this138;_classCallCheck(this,f_);_this138=_possibleConstructorReturn(this,_getPrototypeOf(f_).call(this,e));_this138.set("isEmpty",true);return _this138;}_createClass(f_,[{key:"add",value:function add(e,t){if(this.find(function(t){return t.color===e.color;})){return;}_get(_getPrototypeOf(f_.prototype),"add",this).call(this,e,t);this.set("isEmpty",false);}},{key:"remove",value:function remove(e){var t=_get(_getPrototypeOf(f_.prototype),"remove",this).call(this,e);if(this.length===0){this.set("isEmpty",true);}return t;}},{key:"hasColor",value:function hasColor(e){return!!this.find(function(t){return t.color===e;});}}]);return f_;}(yr);kr(f_,Jc);var m_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.636 9.531l-2.758 3.94a.5.5 0 0 0 .122.696l3.224 2.284h1.314l2.636-3.736L8.636 9.53zm.288 8.451L5.14 15.396a2 2 0 0 1-.491-2.786l6.673-9.53a2 2 0 0 1 2.785-.49l3.742 2.62a2 2 0 0 1 .491 2.785l-7.269 10.053-2.147-.066z"/><path d="M4 18h5.523v-1H4zm-2 0h1v-1H2z"/></svg>';var g_=i(47);var p_=/*#__PURE__*/function(_db16){_inherits(p_,_db16);function p_(e,_ref35){var _this139;var t=_ref35.colors,i=_ref35.columns,n=_ref35.removeButtonLabel,o=_ref35.documentColorsLabel,s=_ref35.documentColorsCount;_classCallCheck(this,p_);_this139=_possibleConstructorReturn(this,_getPrototypeOf(p_).call(this,e));_this139.items=_this139.createCollection();_this139.colorDefinitions=t;_this139.focusTracker=new _p();_this139.keystrokes=new dp();_this139.set("selectedColor");_this139.removeButtonLabel=n;_this139.columns=i;_this139.documentColors=new f_();_this139.documentColorsCount=s;_this139._focusCycler=new vb({focusables:_this139.items,focusTracker:_this139.focusTracker,keystrokeHandler:_this139.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}});_this139._documentColorsLabel=o;_this139.setTemplate({tag:"div",attributes:{"class":["ck","ck-color-table"]},children:_this139.items});_this139.items.add(_this139._removeColorButton());return _this139;}_createClass(p_,[{key:"updateDocumentColors",value:function updateDocumentColors(e,t){var i=e.document;var n=this.documentColorsCount;this.documentColors.clear();var _iteratorNormalCompletion277=true;var _didIteratorError277=false;var _iteratorError277=undefined;try{for(var _iterator277=i.getRootNames()[Symbol.iterator](),_step277;!(_iteratorNormalCompletion277=(_step277=_iterator277.next()).done);_iteratorNormalCompletion277=true){var _o66=_step277.value;var _s34=i.getRoot(_o66);var _r22=e.createRangeIn(_s34);var _iteratorNormalCompletion278=true;var _didIteratorError278=false;var _iteratorError278=undefined;try{for(var _iterator278=_r22.getItems()[Symbol.iterator](),_step278;!(_iteratorNormalCompletion278=(_step278=_iterator278.next()).done);_iteratorNormalCompletion278=true){var _e231=_step278.value;if(_e231.is("textProxy")&&_e231.hasAttribute(t)){this._addColorToDocumentColors(_e231.getAttribute(t));if(this.documentColors.length>=n){return;}}}}catch(err){_didIteratorError278=true;_iteratorError278=err;}finally{try{if(!_iteratorNormalCompletion278&&_iterator278["return"]!=null){_iterator278["return"]();}}finally{if(_didIteratorError278){throw _iteratorError278;}}}}}catch(err){_didIteratorError277=true;_iteratorError277=err;}finally{try{if(!_iteratorNormalCompletion277&&_iterator277["return"]!=null){_iterator277["return"]();}}finally{if(_didIteratorError277){throw _iteratorError277;}}}}},{key:"updateSelectedColors",value:function updateSelectedColors(){var e=this.documentColorsGrid;var t=this.staticColorsGrid;var i=this.selectedColor;t.selectedColor=i;if(e){e.selectedColor=i;}}},{key:"render",value:function render(){_get(_getPrototypeOf(p_.prototype),"render",this).call(this);var _iteratorNormalCompletion279=true;var _didIteratorError279=false;var _iteratorError279=undefined;try{for(var _iterator279=this.items[Symbol.iterator](),_step279;!(_iteratorNormalCompletion279=(_step279=_iterator279.next()).done);_iteratorNormalCompletion279=true){var _e232=_step279.value;this.focusTracker.add(_e232.element);}}catch(err){_didIteratorError279=true;_iteratorError279=err;}finally{try{if(!_iteratorNormalCompletion279&&_iterator279["return"]!=null){_iterator279["return"]();}}finally{if(_didIteratorError279){throw _iteratorError279;}}}this.keystrokes.listenTo(this.element);}},{key:"appendGrids",value:function appendGrids(){if(this.staticColorsGrid){return;}this.staticColorsGrid=this._createStaticColorsGrid();this.items.add(this.staticColorsGrid);if(this.documentColorsCount){var _e233=Dp.bind(this.documentColors,this.documentColors);var _t213=new h_(this.locale);_t213.text=this._documentColorsLabel;_t213.extendTemplate({attributes:{"class":["ck","ck-color-grid__label",_e233["if"]("isEmpty","ck-hidden")]}});this.items.add(_t213);this.documentColorsGrid=this._createDocumentColorsGrid();this.items.add(this.documentColorsGrid);}}},{key:"focus",value:function focus(){this._focusCycler.focusFirst();}},{key:"focusLast",value:function focusLast(){this._focusCycler.focusLast();}},{key:"_removeColorButton",value:function _removeColorButton(){var _this140=this;var e=new Vb();e.set({withText:true,icon:m_,tooltip:true,label:this.removeButtonLabel});e["class"]="ck-color-table__remove-color";e.on("execute",function(){_this140.fire("execute",{value:null});});return e;}},{key:"_createStaticColorsGrid",value:function _createStaticColorsGrid(){var e=new d_(this.locale,{colorDefinitions:this.colorDefinitions,columns:this.columns});e.delegate("execute").to(this);return e;}},{key:"_createDocumentColorsGrid",value:function _createDocumentColorsGrid(){var _this141=this;var e=Dp.bind(this.documentColors,this.documentColors);var t=new d_(this.locale,{columns:this.columns});t.delegate("execute").to(this);t.extendTemplate({attributes:{"class":e["if"]("isEmpty","ck-hidden")}});t.items.bindTo(this.documentColors).using(function(e){var t=new c_();t.set({color:e.color,hasBorder:e.options&&e.options.hasBorder});if(e.label){t.set({label:e.label,tooltip:true});}t.on("execute",function(){_this141.fire("execute",{value:e.color});});return t;});this.documentColors.on("change:isEmpty",function(e,i,n){if(n){t.selectedColor=null;}});return t;}},{key:"_addColorToDocumentColors",value:function _addColorToDocumentColors(e){var t=this.colorDefinitions.find(function(t){return t.color===e;});if(!t){this.documentColors.add({color:e,label:e,options:{hasBorder:false}});}else{this.documentColors.add(Object.assign({},t));}}}]);return p_;}(db);var b_="fontSize";var w_="fontFamily";var __="fontColor";var v_="fontBackgroundColor";function k_(e,t){var i={model:{key:e,values:[]},view:{},upcastAlso:{}};var _iteratorNormalCompletion280=true;var _didIteratorError280=false;var _iteratorError280=undefined;try{for(var _iterator280=t[Symbol.iterator](),_step280;!(_iteratorNormalCompletion280=(_step280=_iterator280.next()).done);_iteratorNormalCompletion280=true){var _e234=_step280.value;i.model.values.push(_e234.model);i.view[_e234.model]=_e234.view;if(_e234.upcastAlso){i.upcastAlso[_e234.model]=_e234.upcastAlso;}}}catch(err){_didIteratorError280=true;_iteratorError280=err;}finally{try{if(!_iteratorNormalCompletion280&&_iterator280["return"]!=null){_iterator280["return"]();}}finally{if(_didIteratorError280){throw _iteratorError280;}}}return i;}function y_(e){return function(t){return C_(t.getStyle(e));};}function x_(e){return function(t,i){return i.createAttributeElement("span",{style:"".concat(e,":").concat(t)},{priority:7});};}function A_(_ref36){var e=_ref36.dropdownView,t=_ref36.colors,i=_ref36.columns,n=_ref36.removeButtonLabel,o=_ref36.documentColorsLabel,s=_ref36.documentColorsCount;var r=e.locale;var a=new p_(r,{colors:t,columns:i,removeButtonLabel:n,documentColorsLabel:o,documentColorsCount:s});e.colorTableView=a;e.panelView.children.add(a);a.delegate("execute").to(e,"execute");return a;}function C_(e){return e.replace(/\s/g,"");}var T_=/*#__PURE__*/function(_r_){_inherits(T_,_r_);function T_(e){_classCallCheck(this,T_);return _possibleConstructorReturn(this,_getPrototypeOf(T_).call(this,e,w_));}return T_;}(r_);function M_(e){return e.map(E_).filter(function(e){return!!e;});}function E_(e){if(_typeof(e)==="object"){return e;}if(e==="default"){return{title:"Default",model:undefined};}if(typeof e!=="string"){return;}return P_(e);}function P_(e){var t=e.replace(/"|'/g,"").split(",");var i=t[0];var n=t.map(S_).join(", ");return{title:i,model:i,view:{name:"span",styles:{"font-family":n},priority:7}};}function S_(e){e=e.trim();if(e.indexOf(" ")>0){e="'".concat(e,"'");}return e;}var I_=/*#__PURE__*/function(_bw11){_inherits(I_,_bw11);_createClass(I_,null,[{key:"pluginName",get:function get(){return"FontFamilyEditing";}}]);function I_(e){var _this142;_classCallCheck(this,I_);_this142=_possibleConstructorReturn(this,_getPrototypeOf(I_).call(this,e));e.config.define(w_,{options:["default","Arial, Helvetica, sans-serif","Courier New, Courier, monospace","Georgia, serif","Lucida Sans Unicode, Lucida Grande, sans-serif","Tahoma, Geneva, sans-serif","Times New Roman, Times, serif","Trebuchet MS, Helvetica, sans-serif","Verdana, Geneva, sans-serif"]});return _this142;}_createClass(I_,[{key:"init",value:function init(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:w_});e.model.schema.setAttributeProperties(w_,{isFormatting:true,copyOnEnter:true});var t=M_(e.config.get("fontFamily.options")).filter(function(e){return e.model;});var i=k_(w_,t);e.conversion.attributeToElement(i);e.commands.add(w_,new T_(e));}}]);return I_;}(bw);var N_=function N_(e,t){_classCallCheck(this,N_);if(t){Uc(this,t);}if(e){this.set(e);}};kr(N_,Jc);var O_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.03 3h6.149a.75.75 0 1 1 0 1.5h-5.514L11.03 3zm1.27 3h4.879a.75.75 0 1 1 0 1.5h-4.244L12.3 6zm1.27 3h3.609a.75.75 0 1 1 0 1.5h-2.973L13.57 9zm-2.754 2.5L8.038 4.785 5.261 11.5h5.555zm.62 1.5H4.641l-1.666 4.028H1.312l5.789-14h1.875l5.789 14h-1.663L11.436 13z"/></svg>';var R_=/*#__PURE__*/function(_bw12){_inherits(R_,_bw12);function R_(){_classCallCheck(this,R_);return _possibleConstructorReturn(this,_getPrototypeOf(R_).apply(this,arguments));}_createClass(R_,[{key:"init",value:function init(){var _this143=this;var e=this.editor;var t=e.t;var i=this._getLocalizedOptions();var n=e.commands.get(w_);e.ui.componentFactory.add(w_,function(o){var s=Qb(o);ew(s,L_(i,n));s.buttonView.set({label:t("ag"),icon:O_,tooltip:true});s.extendTemplate({attributes:{"class":"ck-font-family-dropdown"}});s.bind("isEnabled").to(n);_this143.listenTo(s,"execute",function(t){e.execute(t.source.commandName,{value:t.source.commandParam});e.editing.view.focus();});return s;});}},{key:"_getLocalizedOptions",value:function _getLocalizedOptions(){var e=this.editor;var t=e.t;var i=M_(e.config.get(w_).options);return i.map(function(e){if(e.title==="Default"){e.title=t("ah");}return e;});}}]);return R_;}(bw);function L_(e,t){var i=new yr();var _iteratorNormalCompletion281=true;var _didIteratorError281=false;var _iteratorError281=undefined;try{var _loop6=function _loop6(){var n=_step281.value;var e={type:"button",model:new N_({commandName:w_,commandParam:n.model,label:n.title,withText:true})};e.model.bind("isOn").to(t,"value",function(e){return e===n.model;});if(n.view&&n.view.styles){e.model.set("labelStyle","font-family: ".concat(n.view.styles["font-family"]));}i.add(e);};for(var _iterator281=e[Symbol.iterator](),_step281;!(_iteratorNormalCompletion281=(_step281=_iterator281.next()).done);_iteratorNormalCompletion281=true){_loop6();}}catch(err){_didIteratorError281=true;_iteratorError281=err;}finally{try{if(!_iteratorNormalCompletion281&&_iterator281["return"]!=null){_iterator281["return"]();}}finally{if(_didIteratorError281){throw _iteratorError281;}}}return i;}var z_=/*#__PURE__*/function(_bw13){_inherits(z_,_bw13);function z_(){_classCallCheck(this,z_);return _possibleConstructorReturn(this,_getPrototypeOf(z_).apply(this,arguments));}_createClass(z_,null,[{key:"requires",get:function get(){return[I_,R_];}},{key:"pluginName",get:function get(){return"FontFamily";}}]);return z_;}(bw);var D_=/*#__PURE__*/function(_r_2){_inherits(D_,_r_2);function D_(e){_classCallCheck(this,D_);return _possibleConstructorReturn(this,_getPrototypeOf(D_).call(this,e,b_));}return D_;}(r_);function j_(e){return e.map(V_).filter(function(e){return!!e;});}var B_={tiny:{title:"Tiny",model:"tiny",view:{name:"span",classes:"text-tiny",priority:7}},small:{title:"Small",model:"small",view:{name:"span",classes:"text-small",priority:7}},big:{title:"Big",model:"big",view:{name:"span",classes:"text-big",priority:7}},huge:{title:"Huge",model:"huge",view:{name:"span",classes:"text-huge",priority:7}}};function V_(e){if(_typeof(e)==="object"){return e;}if(B_[e]){return B_[e];}if(e==="default"){return{model:undefined,title:"Default"};}var t=parseFloat(e);if(isNaN(t)){return;}return F_(t);}function F_(e){var t=String(e);return{title:t,model:e,view:{name:"span",styles:{"font-size":"".concat(e,"px")},priority:7}};}var H_=/*#__PURE__*/function(_bw14){_inherits(H_,_bw14);_createClass(H_,null,[{key:"pluginName",get:function get(){return"FontSizeEditing";}}]);function H_(e){var _this144;_classCallCheck(this,H_);_this144=_possibleConstructorReturn(this,_getPrototypeOf(H_).call(this,e));e.config.define(b_,{options:["tiny","small","default","big","huge"]});var t=j_(_this144.editor.config.get("fontSize.options")).filter(function(e){return e.model;});var i=k_(b_,t);e.conversion.attributeToElement(i);e.commands.add(b_,new D_(e));return _this144;}_createClass(H_,[{key:"init",value:function init(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:b_});e.model.schema.setAttributeProperties(b_,{isFormatting:true,copyOnEnter:true});}}]);return H_;}(bw);var W_='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5L7.038 4.785 4.261 11.5h5.555zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13zm7.55 2.279l.779-.779.707.707-2.265 2.265-2.193-2.265.707-.707.765.765V4.825c0-.042 0-.083.002-.123l-.77.77-.707-.707L17.207 2.5l2.265 2.265-.707.707-.782-.782c.002.043.003.089.003.135v10.454z"/></svg>';var U_=i(49);var $_=/*#__PURE__*/function(_bw15){_inherits($_,_bw15);function $_(){_classCallCheck(this,$_);return _possibleConstructorReturn(this,_getPrototypeOf($_).apply(this,arguments));}_createClass($_,[{key:"init",value:function init(){var _this145=this;var e=this.editor;var t=e.t;var i=this._getLocalizedOptions();var n=e.commands.get(b_);e.ui.componentFactory.add(b_,function(o){var s=Qb(o);ew(s,q_(i,n));s.buttonView.set({label:t("ai"),icon:W_,tooltip:true});s.extendTemplate({attributes:{"class":["ck-font-size-dropdown"]}});s.bind("isEnabled").to(n);_this145.listenTo(s,"execute",function(t){e.execute(t.source.commandName,{value:t.source.commandParam});e.editing.view.focus();});return s;});}},{key:"_getLocalizedOptions",value:function _getLocalizedOptions(){var e=this.editor;var t=e.t;var i={Default:t("ah"),Tiny:t("aj"),Small:t("ak"),Big:t("al"),Huge:t("am")};var n=j_(e.config.get(b_).options);return n.map(function(e){var t=i[e.title];if(t&&t!=e.title){e=Object.assign({},e,{title:t});}return e;});}}]);return $_;}(bw);function q_(e,t){var i=new yr();var _iteratorNormalCompletion282=true;var _didIteratorError282=false;var _iteratorError282=undefined;try{var _loop7=function _loop7(){var n=_step282.value;var e={type:"button",model:new N_({commandName:b_,commandParam:n.model,label:n.title,"class":"ck-fontsize-option",withText:true})};if(n.view&&n.view.styles){e.model.set("labelStyle","font-size:".concat(n.view.styles["font-size"]));}if(n.view&&n.view.classes){e.model.set("class","".concat(e.model["class"]," ").concat(n.view.classes));}e.model.bind("isOn").to(t,"value",function(e){return e===n.model;});i.add(e);};for(var _iterator282=e[Symbol.iterator](),_step282;!(_iteratorNormalCompletion282=(_step282=_iterator282.next()).done);_iteratorNormalCompletion282=true){_loop7();}}catch(err){_didIteratorError282=true;_iteratorError282=err;}finally{try{if(!_iteratorNormalCompletion282&&_iterator282["return"]!=null){_iterator282["return"]();}}finally{if(_didIteratorError282){throw _iteratorError282;}}}return i;}var Y_=/*#__PURE__*/function(_bw16){_inherits(Y_,_bw16);function Y_(){_classCallCheck(this,Y_);return _possibleConstructorReturn(this,_getPrototypeOf(Y_).apply(this,arguments));}_createClass(Y_,null,[{key:"requires",get:function get(){return[H_,$_];}},{key:"pluginName",get:function get(){return"FontSize";}}]);return Y_;}(bw);var G_=/*#__PURE__*/function(_w6){_inherits(G_,_w6);function G_(){_classCallCheck(this,G_);return _possibleConstructorReturn(this,_getPrototypeOf(G_).apply(this,arguments));}_createClass(G_,[{key:"refresh",value:function refresh(){var e=this.editor.model;var t=e.document;var i=kw(t.selection.getSelectedBlocks());this.value=!!i&&i.is("paragraph");this.isEnabled=!!i&&J_(i,e.schema);}},{key:"execute",value:function execute(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor.model;var i=t.document;t.change(function(n){var o=(e.selection||i.selection).getSelectedBlocks();var _iteratorNormalCompletion283=true;var _didIteratorError283=false;var _iteratorError283=undefined;try{for(var _iterator283=o[Symbol.iterator](),_step283;!(_iteratorNormalCompletion283=(_step283=_iterator283.next()).done);_iteratorNormalCompletion283=true){var _e235=_step283.value;if(!_e235.is("paragraph")&&J_(_e235,t.schema)){n.rename(_e235,"paragraph");}}}catch(err){_didIteratorError283=true;_iteratorError283=err;}finally{try{if(!_iteratorNormalCompletion283&&_iterator283["return"]!=null){_iterator283["return"]();}}finally{if(_didIteratorError283){throw _iteratorError283;}}}});}}]);return G_;}(_w);function J_(e,t){return t.checkChild(e.parent,"paragraph")&&!t.isObject(e);}var X_=/*#__PURE__*/function(_bw17){_inherits(X_,_bw17);function X_(){_classCallCheck(this,X_);return _possibleConstructorReturn(this,_getPrototypeOf(X_).apply(this,arguments));}_createClass(X_,[{key:"init",value:function init(){var _this146=this;var e=this.editor;var t=e.model;var i=e.data;e.commands.add("paragraph",new G_(e));t.schema.register("paragraph",{inheritAllFrom:"$block"});e.conversion.elementToElement({model:"paragraph",view:"p"});e.conversion["for"]("upcast").elementToElement({model:function model(e,t){if(!X_.paragraphLikeElements.has(e.name)){return null;}if(e.isEmpty){return null;}return t.createElement("paragraph");},converterPriority:"low"});i.upcastDispatcher.on("element",function(e,t,i){if(!i.consumable.test(t.viewItem,{name:t.viewItem.name})){return;}if(Q_(t.viewItem,t.modelCursor,i.schema)){Object.assign(t,K_(t.viewItem,t.modelCursor,i));}},{priority:"low"});i.upcastDispatcher.on("text",function(e,t,i){if(t.modelRange){return;}if(Q_(t.viewItem,t.modelCursor,i.schema)){Object.assign(t,K_(t.viewItem,t.modelCursor,i));}},{priority:"lowest"});t.document.registerPostFixer(function(e){return _this146._autoparagraphEmptyRoots(e);});e.data.on("ready",function(){t.enqueueChange("transparent",function(e){return _this146._autoparagraphEmptyRoots(e);});},{priority:"lowest"});}},{key:"_autoparagraphEmptyRoots",value:function _autoparagraphEmptyRoots(e){var t=this.editor.model;var _iteratorNormalCompletion284=true;var _didIteratorError284=false;var _iteratorError284=undefined;try{for(var _iterator284=t.document.getRootNames()[Symbol.iterator](),_step284;!(_iteratorNormalCompletion284=(_step284=_iterator284.next()).done);_iteratorNormalCompletion284=true){var _i222=_step284.value;var _n116=t.document.getRoot(_i222);if(_n116.isEmpty&&_n116.rootName!="$graveyard"){if(t.schema.checkChild(_n116,"paragraph")){e.insertElement("paragraph",_n116);return true;}}}}catch(err){_didIteratorError284=true;_iteratorError284=err;}finally{try{if(!_iteratorNormalCompletion284&&_iterator284["return"]!=null){_iterator284["return"]();}}finally{if(_didIteratorError284){throw _iteratorError284;}}}}}],[{key:"pluginName",get:function get(){return"Paragraph";}}]);return X_;}(bw);X_.paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td"]);function K_(e,t,i){var n=i.writer.createElement("paragraph");i.writer.insert(n,t);return i.convertItem(e,i.writer.createPositionAt(n,0));}function Q_(e,t,i){var n=i.createContext(t);if(!i.checkChild(n,"paragraph")){return false;}if(!i.checkChild(n.push("paragraph"),e)){return false;}return true;}var Z_=/*#__PURE__*/function(_w7){_inherits(Z_,_w7);function Z_(e,t){var _this147;_classCallCheck(this,Z_);_this147=_possibleConstructorReturn(this,_getPrototypeOf(Z_).call(this,e));_this147.modelElements=t;return _this147;}_createClass(Z_,[{key:"refresh",value:function refresh(){var _this148=this;var e=kw(this.editor.model.document.selection.getSelectedBlocks());this.value=!!e&&this.modelElements.includes(e.name)&&e.name;this.isEnabled=!!e&&this.modelElements.some(function(t){return ev(e,t,_this148.editor.model.schema);});}},{key:"execute",value:function execute(e){var t=this.editor.model;var i=t.document;var n=e.value;t.change(function(e){var o=Array.from(i.selection.getSelectedBlocks()).filter(function(e){return ev(e,n,t.schema);});var _iteratorNormalCompletion285=true;var _didIteratorError285=false;var _iteratorError285=undefined;try{for(var _iterator285=o[Symbol.iterator](),_step285;!(_iteratorNormalCompletion285=(_step285=_iterator285.next()).done);_iteratorNormalCompletion285=true){var _t214=_step285.value;if(!_t214.is(n)){e.rename(_t214,n);}}}catch(err){_didIteratorError285=true;_iteratorError285=err;}finally{try{if(!_iteratorNormalCompletion285&&_iterator285["return"]!=null){_iterator285["return"]();}}finally{if(_didIteratorError285){throw _iteratorError285;}}}});}}]);return Z_;}(_w);function ev(e,t,i){return i.checkChild(e.parent,t)&&!i.isObject(e);}var tv="paragraph";var iv=/*#__PURE__*/function(_bw18){_inherits(iv,_bw18);_createClass(iv,null,[{key:"pluginName",get:function get(){return"HeadingEditing";}}]);function iv(e){var _this149;_classCallCheck(this,iv);_this149=_possibleConstructorReturn(this,_getPrototypeOf(iv).call(this,e));e.config.define("heading",{options:[{model:"paragraph",title:"Paragraph","class":"ck-heading_paragraph"},{model:"heading1",view:"h2",title:"Heading 1","class":"ck-heading_heading1"},{model:"heading2",view:"h3",title:"Heading 2","class":"ck-heading_heading2"},{model:"heading3",view:"h4",title:"Heading 3","class":"ck-heading_heading3"}]});return _this149;}_createClass(iv,[{key:"init",value:function init(){var e=this.editor;var t=e.config.get("heading.options");var i=[];var _iteratorNormalCompletion286=true;var _didIteratorError286=false;var _iteratorError286=undefined;try{for(var _iterator286=t[Symbol.iterator](),_step286;!(_iteratorNormalCompletion286=(_step286=_iterator286.next()).done);_iteratorNormalCompletion286=true){var _n117=_step286.value;if(_n117.model!==tv){e.model.schema.register(_n117.model,{inheritAllFrom:"$block"});e.conversion.elementToElement(_n117);i.push(_n117.model);}}}catch(err){_didIteratorError286=true;_iteratorError286=err;}finally{try{if(!_iteratorNormalCompletion286&&_iterator286["return"]!=null){_iterator286["return"]();}}finally{if(_didIteratorError286){throw _iteratorError286;}}}this._addDefaultH1Conversion(e);e.commands.add("heading",new Z_(e,i));}},{key:"afterInit",value:function afterInit(){var e=this.editor;var t=e.commands.get("enter");var i=e.config.get("heading.options");if(t){this.listenTo(t,"afterExecute",function(t,n){var o=e.model.document.selection.getFirstPosition().parent;var s=i.some(function(e){return o.is(e.model);});if(s&&!o.is(tv)&&o.childCount===0){n.writer.rename(o,tv);}});}}},{key:"_addDefaultH1Conversion",value:function _addDefaultH1Conversion(e){e.conversion["for"]("upcast").elementToElement({model:"heading1",view:"h1",converterPriority:or.get("low")+1});}}],[{key:"requires",get:function get(){return[X_];}}]);return iv;}(bw);function nv(e){var t=e.t;var i={Paragraph:t("ei"),"Heading 1":t("ej"),"Heading 2":t("ek"),"Heading 3":t("el"),"Heading 4":t("em"),"Heading 5":t("en"),"Heading 6":t("eo")};return e.config.get("heading.options").map(function(e){var t=i[e.title];if(t&&t!=e.title){e.title=t;}return e;});}var ov=i(11);var sv=/*#__PURE__*/function(_bw19){_inherits(sv,_bw19);function sv(){_classCallCheck(this,sv);return _possibleConstructorReturn(this,_getPrototypeOf(sv).apply(this,arguments));}_createClass(sv,[{key:"init",value:function init(){var _this150=this;var e=this.editor;var t=e.t;var i=nv(e);var n=t("n");var o=t("o");e.ui.componentFactory.add("heading",function(t){var s={};var r=new yr();var a=e.commands.get("heading");var c=e.commands.get("paragraph");var l=[a];var _iteratorNormalCompletion287=true;var _didIteratorError287=false;var _iteratorError287=undefined;try{var _loop8=function _loop8(){var e=_step287.value;var t={type:"button",model:new N_({label:e.title,"class":e["class"],withText:true})};if(e.model==="paragraph"){t.model.bind("isOn").to(c,"value");t.model.set("commandName","paragraph");l.push(c);}else{t.model.bind("isOn").to(a,"value",function(t){return t===e.model;});t.model.set({commandName:"heading",commandValue:e.model});}r.add(t);s[e.model]=e.title;};for(var _iterator287=i[Symbol.iterator](),_step287;!(_iteratorNormalCompletion287=(_step287=_iterator287.next()).done);_iteratorNormalCompletion287=true){_loop8();}}catch(err){_didIteratorError287=true;_iteratorError287=err;}finally{try{if(!_iteratorNormalCompletion287&&_iterator287["return"]!=null){_iterator287["return"]();}}finally{if(_didIteratorError287){throw _iteratorError287;}}}var d=Qb(t);ew(d,r);d.buttonView.set({isOn:false,withText:true,tooltip:o});d.extendTemplate({attributes:{"class":["ck-heading-dropdown"]}});d.bind("isEnabled").toMany(l,"isEnabled",function(){for(var _len20=arguments.length,e=new Array(_len20),_key20=0;_key20<_len20;_key20++){e[_key20]=arguments[_key20];}return e.some(function(e){return e;});});d.buttonView.bind("label").to(a,"value",c,"value",function(e,t){var i=e||t&&"paragraph";return s[i]?s[i]:n;});_this150.listenTo(d,"execute",function(t){e.execute(t.source.commandName,t.source.commandValue?{value:t.source.commandValue}:undefined);e.editing.view.focus();});return d;});}}]);return sv;}(bw);var rv=/*#__PURE__*/function(_bw20){_inherits(rv,_bw20);function rv(){_classCallCheck(this,rv);return _possibleConstructorReturn(this,_getPrototypeOf(rv).apply(this,arguments));}_createClass(rv,null,[{key:"requires",get:function get(){return[iv,sv];}},{key:"pluginName",get:function get(){return"Heading";}}]);return rv;}(bw);var av=/*#__PURE__*/function(_w8){_inherits(av,_w8);function av(){_classCallCheck(this,av);return _possibleConstructorReturn(this,_getPrototypeOf(av).apply(this,arguments));}_createClass(av,[{key:"refresh",value:function refresh(){var e=this.editor.model;var t=e.document;this.value=t.selection.getAttribute("highlight");this.isEnabled=e.schema.checkAttributeInSelection(t.selection,"highlight");}},{key:"execute",value:function execute(){var _this151=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor.model;var i=t.document;var n=i.selection;var o=e.value;t.change(function(e){var i=t.schema.getValidRanges(n.getRanges(),"highlight");if(n.isCollapsed){var _t215=n.getFirstPosition();if(n.hasAttribute("highlight")){var _i223=function _i223(e){return e.item.hasAttribute("highlight")&&e.item.getAttribute("highlight")===_this151.value;};var _n118=_t215.getLastMatchingPosition(_i223,{direction:"backward"});var _s35=_t215.getLastMatchingPosition(_i223);var _r23=e.createRange(_n118,_s35);if(!o||_this151.value===o){e.removeAttribute("highlight",_r23);e.removeSelectionAttribute("highlight");}else{e.setAttribute("highlight",o,_r23);e.setSelectionAttribute("highlight",o);}}else if(o){e.setSelectionAttribute("highlight",o);}}else{var _iteratorNormalCompletion288=true;var _didIteratorError288=false;var _iteratorError288=undefined;try{for(var _iterator288=i[Symbol.iterator](),_step288;!(_iteratorNormalCompletion288=(_step288=_iterator288.next()).done);_iteratorNormalCompletion288=true){var _t216=_step288.value;if(o){e.setAttribute("highlight",o,_t216);}else{e.removeAttribute("highlight",_t216);}}}catch(err){_didIteratorError288=true;_iteratorError288=err;}finally{try{if(!_iteratorNormalCompletion288&&_iterator288["return"]!=null){_iterator288["return"]();}}finally{if(_didIteratorError288){throw _iteratorError288;}}}}});}}]);return av;}(_w);var cv=/*#__PURE__*/function(_bw21){_inherits(cv,_bw21);_createClass(cv,null,[{key:"pluginName",get:function get(){return"HighlightEditing";}}]);function cv(e){var _this152;_classCallCheck(this,cv);_this152=_possibleConstructorReturn(this,_getPrototypeOf(cv).call(this,e));e.config.define("highlight",{options:[{model:"yellowMarker","class":"marker-yellow",title:"Yellow marker",color:"var(--ck-highlight-marker-yellow)",type:"marker"},{model:"greenMarker","class":"marker-green",title:"Green marker",color:"var(--ck-highlight-marker-green)",type:"marker"},{model:"pinkMarker","class":"marker-pink",title:"Pink marker",color:"var(--ck-highlight-marker-pink)",type:"marker"},{model:"blueMarker","class":"marker-blue",title:"Blue marker",color:"var(--ck-highlight-marker-blue)",type:"marker"},{model:"redPen","class":"pen-red",title:"Red pen",color:"var(--ck-highlight-pen-red)",type:"pen"},{model:"greenPen","class":"pen-green",title:"Green pen",color:"var(--ck-highlight-pen-green)",type:"pen"}]});return _this152;}_createClass(cv,[{key:"init",value:function init(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:"highlight"});var t=e.config.get("highlight.options");e.conversion.attributeToElement(lv(t));e.commands.add("highlight",new av(e));}}]);return cv;}(bw);function lv(e){var t={model:{key:"highlight",values:[]},view:{}};var _iteratorNormalCompletion289=true;var _didIteratorError289=false;var _iteratorError289=undefined;try{for(var _iterator289=e[Symbol.iterator](),_step289;!(_iteratorNormalCompletion289=(_step289=_iterator289.next()).done);_iteratorNormalCompletion289=true){var _i224=_step289.value;t.model.values.push(_i224.model);t.view[_i224.model]={name:"mark",classes:_i224["class"]};}}catch(err){_didIteratorError289=true;_iteratorError289=err;}finally{try{if(!_iteratorNormalCompletion289&&_iterator289["return"]!=null){_iterator289["return"]();}}finally{if(_didIteratorError289){throw _iteratorError289;}}}return t;}var dv='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.798 1.59L3.002 12.875l1.895 1.852 2.521 1.402 6.997-12.194z"/><path d="M2.556 16.727l.234-.348c-.297-.151-.462-.293-.498-.426-.036-.137.002-.416.115-.837.094-.25.15-.449.169-.595a4.495 4.495 0 0 0 0-.725c-.209-.621-.303-1.041-.284-1.26.02-.218.178-.506.475-.862l6.77-9.414c.539-.91 1.605-.85 3.199.18 1.594 1.032 2.188 1.928 1.784 2.686l-5.877 10.36c-.158.412-.333.673-.526.782-.193.108-.604.179-1.232.21-.362.131-.608.237-.738.318-.13.081-.305.238-.526.47-.293.265-.504.397-.632.397-.096 0-.27-.075-.524-.226l-.31.41-1.6-1.12zm-.279.415l1.575 1.103-.392.515H1.19l1.087-1.618zm8.1-13.656l-4.953 6.9L8.75 12.57l4.247-7.574c.175-.25-.188-.647-1.092-1.192-.903-.546-1.412-.652-1.528-.32zM8.244 18.5L9.59 17h9.406v1.5H8.245z"/></svg>';var uv='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path class="ck-icon__fill" d="M10.126 2.268L2.002 13.874l1.895 1.852 2.521 1.402L14.47 5.481l-1.543-2.568-2.801-.645z"/><path d="M4.5 18.088l-2.645-1.852-.04-2.95-.006-.005.006-.008v-.025l.011.008L8.73 2.97c.165-.233.356-.417.567-.557l-1.212.308L4.604 7.9l-.83-.558 3.694-5.495 2.708-.69 1.65 1.145.046.018.85-1.216 2.16 1.512-.856 1.222c.828.967 1.144 2.141.432 3.158L7.55 17.286l.006.005-3.055.797H4.5zm-.634.166l-1.976.516-.026-1.918 2.002 1.402zM9.968 3.817l-.006-.004-6.123 9.184 3.277 2.294 6.108-9.162.005.003c.317-.452-.16-1.332-1.064-1.966-.891-.624-1.865-.776-2.197-.349zM8.245 18.5L9.59 17h9.406v1.5H8.245z"/></svg>';var hv=i(52);var fv=/*#__PURE__*/function(_db17){_inherits(fv,_db17);function fv(e){var _this153;_classCallCheck(this,fv);_this153=_possibleConstructorReturn(this,_getPrototypeOf(fv).call(this,e));var t=_this153.bindTemplate;_this153.set("icon");_this153.set("isEnabled",true);_this153.set("isOn",false);_this153.set("isToggleable",false);_this153.set("isVisible",true);_this153.set("keystroke");_this153.set("label");_this153.set("tabindex",-1);_this153.set("tooltip");_this153.set("tooltipPosition","s");_this153.set("type","button");_this153.set("withText",false);_this153.children=_this153.createCollection();_this153.actionView=_this153._createActionView();_this153.arrowView=_this153._createArrowView();_this153.keystrokes=new dp();_this153.focusTracker=new _p();_this153.setTemplate({tag:"div",attributes:{"class":["ck","ck-splitbutton",t["if"]("isVisible","ck-hidden",function(e){return!e;}),_this153.arrowView.bindTemplate["if"]("isOn","ck-splitbutton_open")]},children:_this153.children});return _this153;}_createClass(fv,[{key:"render",value:function render(){var _this154=this;_get(_getPrototypeOf(fv.prototype),"render",this).call(this);this.children.add(this.actionView);this.children.add(this.arrowView);this.focusTracker.add(this.actionView.element);this.focusTracker.add(this.arrowView.element);this.keystrokes.listenTo(this.element);this.keystrokes.set("arrowright",function(e,t){if(_this154.focusTracker.focusedElement===_this154.actionView.element){_this154.arrowView.focus();t();}});this.keystrokes.set("arrowleft",function(e,t){if(_this154.focusTracker.focusedElement===_this154.arrowView.element){_this154.actionView.focus();t();}});}},{key:"focus",value:function focus(){this.actionView.focus();}},{key:"_createActionView",value:function _createActionView(){var e=new Vb();e.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this);e.extendTemplate({attributes:{"class":"ck-splitbutton__action"}});e.delegate("execute").to(this);return e;}},{key:"_createArrowView",value:function _createArrowView(){var e=new Vb();var t=e.bindTemplate;e.icon=Fb;e.extendTemplate({attributes:{"class":"ck-splitbutton__arrow","aria-haspopup":true,"aria-expanded":t.to("isOn",function(e){return String(e);})}});e.bind("isEnabled").to(this);e.delegate("execute").to(this,"open");return e;}}]);return fv;}(db);var mv=i(54);var gv=/*#__PURE__*/function(_bw22){_inherits(gv,_bw22);function gv(){_classCallCheck(this,gv);return _possibleConstructorReturn(this,_getPrototypeOf(gv).apply(this,arguments));}_createClass(gv,[{key:"init",value:function init(){var e=this.editor.config.get("highlight.options");var _iteratorNormalCompletion290=true;var _didIteratorError290=false;var _iteratorError290=undefined;try{for(var _iterator290=e[Symbol.iterator](),_step290;!(_iteratorNormalCompletion290=(_step290=_iterator290.next()).done);_iteratorNormalCompletion290=true){var _t217=_step290.value;this._addHighlighterButton(_t217);}}catch(err){_didIteratorError290=true;_iteratorError290=err;}finally{try{if(!_iteratorNormalCompletion290&&_iterator290["return"]!=null){_iterator290["return"]();}}finally{if(_didIteratorError290){throw _iteratorError290;}}}this._addRemoveHighlightButton();this._addDropdown(e);}},{key:"_addRemoveHighlightButton",value:function _addRemoveHighlightButton(){var e=this.editor.t;this._addButton("removeHighlight",e("v"),m_);}},{key:"_addHighlighterButton",value:function _addHighlighterButton(e){var t=this.editor.commands.get("highlight");this._addButton("highlight:"+e.model,e.title,bv(e.type),e.model,i);function i(i){i.bind("isEnabled").to(t,"isEnabled");i.bind("isOn").to(t,"value",function(t){return t===e.model;});i.iconView.fillColor=e.color;i.isToggleable=true;}}},{key:"_addButton",value:function _addButton(e,t,i,n){var _this155=this;var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:function(){};var s=this.editor;s.ui.componentFactory.add(e,function(e){var r=new Vb(e);var a=_this155.localizedOptionTitles[t]?_this155.localizedOptionTitles[t]:t;r.set({label:a,icon:i,tooltip:true});r.on("execute",function(){s.execute("highlight",{value:n});s.editing.view.focus();});o(r);return r;});}},{key:"_addDropdown",value:function _addDropdown(e){var _this156=this;var t=this.editor;var i=t.t;var n=t.ui.componentFactory;var o=e[0];var s=e.reduce(function(e,t){e[t.model]=t;return e;},{});n.add("highlight",function(r){var a=t.commands.get("highlight");var c=Qb(r,fv);var l=c.buttonView;l.set({tooltip:i("w"),lastExecuted:o.model,commandValue:o.model,isToggleable:true});l.bind("icon").to(a,"value",function(e){return bv(u(e,"type"));});l.bind("color").to(a,"value",function(e){return u(e,"color");});l.bind("commandValue").to(a,"value",function(e){return u(e,"model");});l.bind("isOn").to(a,"value",function(e){return!!e;});l.delegate("execute").to(c);var d=e.map(function(e){var t=n.create("highlight:"+e.model);_this156.listenTo(t,"execute",function(){return c.buttonView.set({lastExecuted:e.model});});return t;});c.bind("isEnabled").toMany(d,"isEnabled",function(){for(var _len21=arguments.length,e=new Array(_len21),_key21=0;_key21<_len21;_key21++){e[_key21]=arguments[_key21];}return e.some(function(e){return e;});});d.push(new yb());d.push(n.create("removeHighlight"));Zb(c,d);pv(c);c.toolbarView.ariaLabel=i("x");l.on("execute",function(){t.execute("highlight",{value:l.commandValue});t.editing.view.focus();});function u(e,t){var i=!e||e===l.lastExecuted?l.lastExecuted:e;return s[i][t];}return c;});}},{key:"localizedOptionTitles",get:function get(){var e=this.editor.t;return{"Yellow marker":e("p"),"Green marker":e("q"),"Pink marker":e("r"),"Blue marker":e("s"),"Red pen":e("t"),"Green pen":e("u")};}}],[{key:"pluginName",get:function get(){return"HighlightUI";}}]);return gv;}(bw);function pv(e){var t=e.buttonView.actionView;t.iconView.bind("fillColor").to(e.buttonView,"color");}function bv(e){return e==="marker"?dv:uv;}var wv=/*#__PURE__*/function(_bw23){_inherits(wv,_bw23);function wv(){_classCallCheck(this,wv);return _possibleConstructorReturn(this,_getPrototypeOf(wv).apply(this,arguments));}_createClass(wv,null,[{key:"requires",get:function get(){return[cv,gv];}},{key:"pluginName",get:function get(){return"Highlight";}}]);return wv;}(bw);var _v=/*#__PURE__*/function(_Yd5){_inherits(_v,_Yd5);function _v(){_classCallCheck(this,_v);return _possibleConstructorReturn(this,_getPrototypeOf(_v).apply(this,arguments));}_createClass(_v,[{key:"observe",value:function observe(e){var _this157=this;this.listenTo(e,"load",function(e,t){var i=t.target;if(i.tagName=="IMG"){_this157._fireEvents(t);}},{useCapture:true});}},{key:"_fireEvents",value:function _fireEvents(e){if(this.isEnabled){this.document.fire("layoutChanged");this.document.fire("imageLoaded",e);}}}]);return _v;}(Yd);var vv=/*#__PURE__*/function(){function vv(){_classCallCheck(this,vv);this._stack=[];}_createClass(vv,[{key:"add",value:function add(e,t){var i=this._stack;var n=i[0];this._insertDescriptor(e);var o=i[0];if(n!==o&&!kv(n,o)){this.fire("change:top",{oldDescriptor:n,newDescriptor:o,writer:t});}}},{key:"remove",value:function remove(e,t){var i=this._stack;var n=i[0];this._removeDescriptor(e);var o=i[0];if(n!==o&&!kv(n,o)){this.fire("change:top",{oldDescriptor:n,newDescriptor:o,writer:t});}}},{key:"_insertDescriptor",value:function _insertDescriptor(e){var t=this._stack;var i=t.findIndex(function(t){return t.id===e.id;});if(kv(e,t[i])){return;}if(i>-1){t.splice(i,1);}var n=0;while(t[n]&&yv(t[n],e)){n++;}t.splice(n,0,e);}},{key:"_removeDescriptor",value:function _removeDescriptor(e){var t=this._stack;var i=t.findIndex(function(t){return t.id===e;});if(i>-1){t.splice(i,1);}}}]);return vv;}();kr(vv,dr);function kv(e,t){return e&&t&&e.priority==t.priority&&xv(e.classes)==xv(t.classes);}function yv(e,t){if(e.priority>t.priority){return true;}else if(e.priority<t.priority){return false;}return xv(e.classes)>xv(t.classes);}function xv(e){return Array.isArray(e)?e.sort().join(","):e;}var Av='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z"/><path fill-opacity=".256" d="M1 1h14v14H1z"/><g class="ck-icon__selected-indicator"><path d="M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z"/><path fill-opacity=".254" d="M1 1h14v14H1z"/></g></svg>';var Cv="ck-widget";var Tv="ck-widget_selected";function Mv(e){if(!e.is("element")){return false;}return!!e.getCustomProperty("widget");}function Ev(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(!Cl.isEdge){t.setAttribute("contenteditable","false",e);}t.addClass(Cv,e);t.setCustomProperty("widget",true,e);e.getFillerOffset=Lv;if(i.label){Sv(e,i.label,t);}if(i.hasSelectionHandle){zv(e,t);}Pv(e,t,function(e,t,i){return i.addClass(n(t.classes),e);},function(e,t,i){return i.removeClass(n(t.classes),e);});return e;function n(e){return Array.isArray(e)?e:[e];}}function Pv(e,t,i,n){var o=new vv();o.on("change:top",function(t,o){if(o.oldDescriptor){n(e,o.oldDescriptor,o.writer);}if(o.newDescriptor){i(e,o.newDescriptor,o.writer);}});t.setCustomProperty("addHighlight",function(e,t,i){return o.add(t,i);},e);t.setCustomProperty("removeHighlight",function(e,t,i){return o.remove(t,i);},e);}function Sv(e,t,i){i.setCustomProperty("widgetLabel",t,e);}function Iv(e){var t=e.getCustomProperty("widgetLabel");if(!t){return"";}return typeof t=="function"?t():t;}function Nv(e,t){t.addClass(["ck-editor__editable","ck-editor__nested-editable"],e);if(!Cl.isEdge){t.setAttribute("contenteditable",e.isReadOnly?"false":"true",e);e.on("change:isReadOnly",function(i,n,o){t.setAttribute("contenteditable",o?"false":"true",e);});}e.on("change:isFocused",function(i,n,o){if(o){t.addClass("ck-editor__nested-editable_focused",e);}else{t.removeClass("ck-editor__nested-editable_focused",e);}});return e;}function Ov(e,t){var i=e.getSelectedElement();if(i&&t.schema.isBlock(i)){return t.createPositionAfter(i);}var n=e.getSelectedBlocks().next().value;if(n){if(n.isEmpty){return t.createPositionAt(n,0);}var _i225=t.createPositionAfter(n);if(e.focus.isTouching(_i225)){return _i225;}return t.createPositionBefore(n);}return e.focus;}function Rv(e,t){return function(i,n){var o=n.mapper,s=n.viewPosition;var r=o.findMappedViewAncestor(s);if(!t(r)){return;}var a=o.toModelElement(r);n.modelPosition=e.createPositionAt(a,s.isAtStart?"before":"after");};}function Lv(){return null;}function zv(e,t){var i=t.createUIElement("div",{"class":"ck ck-widget__selection-handle"},function(e){var t=this.toDomElement(e);var i=new zb();i.set("content",Av);i.render();t.appendChild(i.element);return t;});t.insert(t.createPositionAt(e,0),i);t.addClass(["ck-widget_with-selection-handle"],e);}function Dv(e,t,i){t.setCustomProperty("image",true,e);return Ev(e,t,{label:n});function n(){var t=Wv(e);var n=t.getAttribute("alt");return n?"".concat(n," ").concat(i):i;}}function jv(e){return!!e.getCustomProperty("image")&&Mv(e);}function Bv(e){var t=e.getSelectedElement();if(t&&jv(t)){return t;}return null;}function Vv(e){return!!e&&e.is("image");}function Fv(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=e.createElement("image",i);var o=Ov(t.document.selection,t);t.insertContent(n,o);if(n.parent){e.setSelection(n,"on");}}function Hv(e){var t=e.schema;var i=e.document.selection;return Uv(i,t,e)&&!$v(i,t)&&qv(i);}function Wv(e){return Array.from(e.getChildren()).find(function(e){return e.is("img");});}function Uv(e,t,i){var n=Yv(e,i);return t.checkChild(n,"image");}function $v(e,t){var i=e.getSelectedElement();return i&&t.isObject(i);}function qv(e){return _toConsumableArray(e.focus.getAncestors()).every(function(e){return!e.is("image");});}function Yv(e,t){var i=Ov(e,t);var n=i.parent;if(n.isEmpty&&!n.is("$root")){return n.parent;}return n;}function Gv(){return function(t){t.on("element:figure",e);};function e(e,t,i){if(!i.consumable.test(t.viewItem,{name:true,classes:"image"})){return;}var n=Wv(t.viewItem);if(!n||!n.hasAttribute("src")||!i.consumable.test(n,{name:true})){return;}var o=i.convertItem(n,t.modelCursor);var s=kw(o.modelRange.getItems());if(!s){return;}i.convertChildren(t.viewItem,i.writer.createPositionAt(s,0));t.modelRange=o.modelRange;t.modelCursor=o.modelCursor;}}function Jv(){return function(t){t.on("attribute:srcset:image",e);};function e(e,t,i){if(!i.consumable.consume(t.item,e.name)){return;}var n=i.writer;var o=i.mapper.toViewElement(t.item);var s=Wv(o);if(t.attributeNewValue===null){var _e236=t.attributeOldValue;if(_e236.data){n.removeAttribute("srcset",s);n.removeAttribute("sizes",s);if(_e236.width){n.removeAttribute("width",s);}}}else{var _e237=t.attributeNewValue;if(_e237.data){n.setAttribute("srcset",_e237.data,s);n.setAttribute("sizes","100vw",s);if(_e237.width){n.setAttribute("width",_e237.width,s);}}}}}function Xv(e){return function(i){i.on("attribute:".concat(e,":image"),t);};function t(e,t,i){if(!i.consumable.consume(t.item,e.name)){return;}var n=i.writer;var o=i.mapper.toViewElement(t.item);var s=Wv(o);if(t.attributeNewValue!==null){n.setAttribute(t.attributeKey,t.attributeNewValue,s);}else{n.removeAttribute(t.attributeKey,s);}}}var Kv=/*#__PURE__*/function(_w9){_inherits(Kv,_w9);function Kv(){_classCallCheck(this,Kv);return _possibleConstructorReturn(this,_getPrototypeOf(Kv).apply(this,arguments));}_createClass(Kv,[{key:"refresh",value:function refresh(){this.isEnabled=Hv(this.editor.model);}},{key:"execute",value:function execute(e){var t=this.editor.model;t.change(function(i){var n=Array.isArray(e.source)?e.source:[e.source];var _iteratorNormalCompletion291=true;var _didIteratorError291=false;var _iteratorError291=undefined;try{for(var _iterator291=n[Symbol.iterator](),_step291;!(_iteratorNormalCompletion291=(_step291=_iterator291.next()).done);_iteratorNormalCompletion291=true){var _e238=_step291.value;Fv(i,t,{src:_e238});}}catch(err){_didIteratorError291=true;_iteratorError291=err;}finally{try{if(!_iteratorNormalCompletion291&&_iterator291["return"]!=null){_iterator291["return"]();}}finally{if(_didIteratorError291){throw _iteratorError291;}}}});}}]);return Kv;}(_w);var Qv=/*#__PURE__*/function(_bw24){_inherits(Qv,_bw24);function Qv(){_classCallCheck(this,Qv);return _possibleConstructorReturn(this,_getPrototypeOf(Qv).apply(this,arguments));}_createClass(Qv,[{key:"init",value:function init(){var e=this.editor;var t=e.model.schema;var i=e.t;var n=e.conversion;e.editing.view.addObserver(_v);t.register("image",{isObject:true,isBlock:true,allowWhere:"$block",allowAttributes:["alt","src","srcset"]});n["for"]("dataDowncast").elementToElement({model:"image",view:function view(e,t){return Zv(t);}});n["for"]("editingDowncast").elementToElement({model:"image",view:function view(e,t){return Dv(Zv(t),t,i("ap"));}});n["for"]("downcast").add(Xv("src")).add(Xv("alt")).add(Jv());n["for"]("upcast").elementToElement({view:{name:"img",attributes:{src:true}},model:function model(e,t){return t.createElement("image",{src:e.getAttribute("src")});}}).attributeToAttribute({view:{name:"img",key:"alt"},model:"alt"}).attributeToAttribute({view:{name:"img",key:"srcset"},model:{key:"srcset",value:function value(e){var t={data:e.getAttribute("srcset")};if(e.hasAttribute("width")){t.width=e.getAttribute("width");}return t;}}}).add(Gv());e.commands.add("imageInsert",new Kv(e));}}],[{key:"pluginName",get:function get(){return"ImageEditing";}}]);return Qv;}(bw);function Zv(e){var t=e.createEmptyElement("img");var i=e.createContainerElement("figure",{"class":"image"});e.insert(e.createPositionAt(i,0),t);return i;}var ek=/*#__PURE__*/function(_Ju5){_inherits(ek,_Ju5);function ek(e){var _this158;_classCallCheck(this,ek);_this158=_possibleConstructorReturn(this,_getPrototypeOf(ek).call(this,e));_this158.domEventType="mousedown";return _this158;}_createClass(ek,[{key:"onDomEvent",value:function onDomEvent(e){this.fire(e.type,e);}}]);return ek;}(Ju);var tk=i(56);var ik=zl("Ctrl+A");var nk=/*#__PURE__*/function(_bw25){_inherits(nk,_bw25);function nk(){_classCallCheck(this,nk);return _possibleConstructorReturn(this,_getPrototypeOf(nk).apply(this,arguments));}_createClass(nk,[{key:"init",value:function init(){var _this159=this;var e=this.editor.editing.view;var t=e.document;this._previouslySelected=new Set();this.editor.editing.downcastDispatcher.on("selection",function(e,t,i){_this159._clearPreviouslySelectedWidgets(i.writer);var n=i.writer;var o=n.document.selection;var s=o.getSelectedElement();var r=null;var _iteratorNormalCompletion292=true;var _didIteratorError292=false;var _iteratorError292=undefined;try{for(var _iterator292=o.getRanges()[Symbol.iterator](),_step292;!(_iteratorNormalCompletion292=(_step292=_iterator292.next()).done);_iteratorNormalCompletion292=true){var _e239=_step292.value;var _iteratorNormalCompletion293=true;var _didIteratorError293=false;var _iteratorError293=undefined;try{for(var _iterator293=_e239[Symbol.iterator](),_step293;!(_iteratorNormalCompletion293=(_step293=_iterator293.next()).done);_iteratorNormalCompletion293=true){var _t218=_step293.value;var _e240=_t218.item;if(Mv(_e240)&&!ak(_e240,r)){n.addClass(Tv,_e240);_this159._previouslySelected.add(_e240);r=_e240;if(_e240==s){n.setSelection(o.getRanges(),{fake:true,label:Iv(s)});}}}}catch(err){_didIteratorError293=true;_iteratorError293=err;}finally{try{if(!_iteratorNormalCompletion293&&_iterator293["return"]!=null){_iterator293["return"]();}}finally{if(_didIteratorError293){throw _iteratorError293;}}}}}catch(err){_didIteratorError292=true;_iteratorError292=err;}finally{try{if(!_iteratorNormalCompletion292&&_iterator292["return"]!=null){_iterator292["return"]();}}finally{if(_didIteratorError292){throw _iteratorError292;}}}},{priority:"low"});e.addObserver(ek);this.listenTo(t,"mousedown",function(){return _this159._onMousedown.apply(_this159,arguments);});this.listenTo(t,"keydown",function(){return _this159._onKeydown.apply(_this159,arguments);},{priority:"high"});this.listenTo(t,"delete",function(e,t){if(_this159._handleDelete(t.direction=="forward")){t.preventDefault();e.stop();}},{priority:"high"});}},{key:"_onMousedown",value:function _onMousedown(e,t){var i=this.editor;var n=i.editing.view;var o=n.document;var s=t.target;if(rk(s)){if(Cl.isSafari&&t.domEvent.detail>=3){var _e241=i.editing.mapper;var _n119=_e241.toModelElement(s);this.editor.model.change(function(e){t.preventDefault();e.setSelection(_n119,"in");});}return;}if(!Mv(s)){s=s.findAncestor(Mv);if(!s){return;}}t.preventDefault();if(!o.isFocused){n.focus();}var r=i.editing.mapper.toModelElement(s);this._setSelectionOverElement(r);}},{key:"_onKeydown",value:function _onKeydown(e,t){var i=t.keyCode;var n=this.editor.locale.contentLanguageDirection==="ltr";var o=i==Rl.arrowdown||i==Rl[n?"arrowright":"arrowleft"];var s=false;if(ok(i)){s=this._handleArrowKeys(o);}else if(sk(t)){s=this._selectAllNestedEditableContent()||this._selectAllContent();}else if(i===Rl.enter){s=this._handleEnterKey(t.shiftKey);}if(s){t.preventDefault();e.stop();}}},{key:"_handleDelete",value:function _handleDelete(e){var _this160=this;if(this.editor.isReadOnly){return;}var t=this.editor.model.document;var i=t.selection;if(!i.isCollapsed){return;}var n=this._getObjectElementNextToSelection(e);if(n){this.editor.model.change(function(e){var t=i.anchor.parent;while(t.isEmpty){var _i226=t;t=_i226.parent;e.remove(_i226);}_this160._setSelectionOverElement(n);});return true;}}},{key:"_handleArrowKeys",value:function _handleArrowKeys(e){var t=this.editor.model;var i=t.schema;var n=t.document;var o=n.selection;var s=o.getSelectedElement();if(s&&i.isObject(s)){var _n120=e?o.getLastPosition():o.getFirstPosition();var _s36=i.getNearestSelectionRange(_n120,e?"forward":"backward");if(_s36){t.change(function(e){e.setSelection(_s36);});}return true;}if(!o.isCollapsed){return;}var r=this._getObjectElementNextToSelection(e);if(!!r&&i.isObject(r)){this._setSelectionOverElement(r);return true;}}},{key:"_handleEnterKey",value:function _handleEnterKey(e){var t=this.editor.model;var i=t.document.selection;var n=i.getSelectedElement();if(ck(n,t.schema)){t.change(function(i){var o=i.createPositionAt(n,e?"before":"after");var s=i.createElement("paragraph");if(t.schema.isBlock(n.parent)){var _e242=t.schema.findAllowedParent(o,s);o=i.split(o,_e242).position;}i.insert(s,o);i.setSelection(s,"in");});return true;}}},{key:"_selectAllNestedEditableContent",value:function _selectAllNestedEditableContent(){var e=this.editor.model;var t=e.document.selection;var i=e.schema.getLimitElement(t);if(t.getFirstRange().root==i){return false;}e.change(function(e){e.setSelection(e.createRangeIn(i));});return true;}},{key:"_selectAllContent",value:function _selectAllContent(){var e=this.editor.model;var t=this.editor.editing;var i=t.view;var n=i.document;var o=n.selection;var s=o.getSelectedElement();if(s&&Mv(s)){var _i227=t.mapper.toModelElement(s.parent);e.change(function(e){e.setSelection(e.createRangeIn(_i227));});return true;}return false;}},{key:"_setSelectionOverElement",value:function _setSelectionOverElement(e){this.editor.model.change(function(t){t.setSelection(t.createRangeOn(e));});}},{key:"_getObjectElementNextToSelection",value:function _getObjectElementNextToSelection(e){var t=this.editor.model;var i=t.schema;var n=t.document.selection;var o=t.createSelection(n);t.modifySelection(o,{direction:e?"forward":"backward"});var s=e?o.focus.nodeBefore:o.focus.nodeAfter;if(!!s&&i.isObject(s)){return s;}return null;}},{key:"_clearPreviouslySelectedWidgets",value:function _clearPreviouslySelectedWidgets(e){var _iteratorNormalCompletion294=true;var _didIteratorError294=false;var _iteratorError294=undefined;try{for(var _iterator294=this._previouslySelected[Symbol.iterator](),_step294;!(_iteratorNormalCompletion294=(_step294=_iterator294.next()).done);_iteratorNormalCompletion294=true){var _t219=_step294.value;e.removeClass(Tv,_t219);}}catch(err){_didIteratorError294=true;_iteratorError294=err;}finally{try{if(!_iteratorNormalCompletion294&&_iterator294["return"]!=null){_iterator294["return"]();}}finally{if(_didIteratorError294){throw _iteratorError294;}}}this._previouslySelected.clear();}}],[{key:"pluginName",get:function get(){return"Widget";}}]);return nk;}(bw);function ok(e){return e==Rl.arrowright||e==Rl.arrowleft||e==Rl.arrowup||e==Rl.arrowdown;}function sk(e){return Ll(e)==ik;}function rk(e){while(e){if(e.is("editableElement")&&!e.is("rootElement")){return true;}if(Mv(e)){return false;}e=e.parent;}return false;}function ak(e,t){if(!t){return false;}return Array.from(e.getAncestors()).includes(t);}function ck(e,t){return e&&t.isObject(e)&&!t.isInline(e);}var lk=/*#__PURE__*/function(_w10){_inherits(lk,_w10);function lk(){_classCallCheck(this,lk);return _possibleConstructorReturn(this,_getPrototypeOf(lk).apply(this,arguments));}_createClass(lk,[{key:"refresh",value:function refresh(){var e=this.editor.model.document.selection.getSelectedElement();this.isEnabled=Vv(e);if(Vv(e)&&e.hasAttribute("alt")){this.value=e.getAttribute("alt");}else{this.value=false;}}},{key:"execute",value:function execute(e){var t=this.editor.model;var i=t.document.selection.getSelectedElement();t.change(function(t){t.setAttribute("alt",e.newValue,i);});}}]);return lk;}(_w);var dk=/*#__PURE__*/function(_bw26){_inherits(dk,_bw26);function dk(){_classCallCheck(this,dk);return _possibleConstructorReturn(this,_getPrototypeOf(dk).apply(this,arguments));}_createClass(dk,[{key:"init",value:function init(){this.editor.commands.add("imageTextAlternative",new lk(this.editor));}}],[{key:"pluginName",get:function get(){return"ImageTextAlternativeEditing";}}]);return dk;}(bw);var uk=i(58);var hk=/*#__PURE__*/function(_db18){_inherits(hk,_db18);function hk(e,t){var _this161;_classCallCheck(this,hk);_this161=_possibleConstructorReturn(this,_getPrototypeOf(hk).call(this,e));var i="ck-input-".concat(ir());var n="ck-status-".concat(ir());_this161.set("label");_this161.set("value");_this161.set("isReadOnly",false);_this161.set("errorText",null);_this161.set("infoText",null);_this161.labelView=_this161._createLabelView(i);_this161.inputView=_this161._createInputView(t,i,n);_this161.statusView=_this161._createStatusView(n);_this161.bind("_statusText").to(_assertThisInitialized(_this161),"errorText",_assertThisInitialized(_this161),"infoText",function(e,t){return e||t;});var o=_this161.bindTemplate;_this161.setTemplate({tag:"div",attributes:{"class":["ck","ck-labeled-input",o["if"]("isReadOnly","ck-disabled")]},children:[_this161.labelView,_this161.inputView,_this161.statusView]});return _this161;}_createClass(hk,[{key:"_createLabelView",value:function _createLabelView(e){var t=new h_(this.locale);t["for"]=e;t.bind("text").to(this,"label");return t;}},{key:"_createInputView",value:function _createInputView(e,t,i){var _this162=this;var n=new e(this.locale,i);n.id=t;n.ariaDescribedById=i;n.bind("value").to(this);n.bind("isReadOnly").to(this);n.bind("hasError").to(this,"errorText",function(e){return!!e;});n.on("input",function(){_this162.errorText=null;});return n;}},{key:"_createStatusView",value:function _createStatusView(e){var t=new db(this.locale);var i=this.bindTemplate;t.setTemplate({tag:"div",attributes:{"class":["ck","ck-labeled-input__status",i["if"]("errorText","ck-labeled-input__status_error"),i["if"]("_statusText","ck-hidden",function(e){return!e;})],id:e,role:i["if"]("errorText","alert")},children:[{text:i.to("_statusText")}]});return t;}},{key:"select",value:function select(){this.inputView.select();}},{key:"focus",value:function focus(){this.inputView.focus();}}]);return hk;}(db);var fk=i(60);var mk=/*#__PURE__*/function(_db19){_inherits(mk,_db19);function mk(e){var _this163;_classCallCheck(this,mk);_this163=_possibleConstructorReturn(this,_getPrototypeOf(mk).call(this,e));_this163.set("value");_this163.set("id");_this163.set("placeholder");_this163.set("isReadOnly",false);_this163.set("hasError",false);_this163.set("ariaDescribedById");var t=_this163.bindTemplate;_this163.setTemplate({tag:"input",attributes:{type:"text","class":["ck","ck-input","ck-input-text",t["if"]("hasError","ck-error")],id:t.to("id"),placeholder:t.to("placeholder"),readonly:t.to("isReadOnly"),"aria-invalid":t["if"]("hasError",true),"aria-describedby":t.to("ariaDescribedById")},on:{input:t.to("input")}});return _this163;}_createClass(mk,[{key:"render",value:function render(){var _this164=this;_get(_getPrototypeOf(mk.prototype),"render",this).call(this);var e=function(_e243){function e(_x4){return _e243.apply(this,arguments);}e.toString=function(){return _e243.toString();};return e;}(function(e){_this164.element.value=!e&&e!==0?"":e;});e(this.value);this.on("change:value",function(t,i,n){e(n);});}},{key:"select",value:function select(){this.element.select();}},{key:"focus",value:function focus(){this.element.focus();}}]);return mk;}(db);function gk(_ref37){var e=_ref37.view;e.listenTo(e.element,"submit",function(t,i){i.preventDefault();e.fire("submit");},{useCapture:true});}var pk='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z"/></svg>';var bk='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.591 10.177l4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>';var wk=i(62);var _k=/*#__PURE__*/function(_db20){_inherits(_k,_db20);function _k(e){var _this165;_classCallCheck(this,_k);_this165=_possibleConstructorReturn(this,_getPrototypeOf(_k).call(this,e));var t=_this165.locale.t;_this165.focusTracker=new _p();_this165.keystrokes=new dp();_this165.labeledInput=_this165._createLabeledInputView();_this165.saveButtonView=_this165._createButton(t("dg"),pk,"ck-button-save");_this165.saveButtonView.type="submit";_this165.cancelButtonView=_this165._createButton(t("dh"),bk,"ck-button-cancel","cancel");_this165._focusables=new Rp();_this165._focusCycler=new vb({focusables:_this165._focusables,focusTracker:_this165.focusTracker,keystrokeHandler:_this165.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});_this165.setTemplate({tag:"form",attributes:{"class":["ck","ck-text-alternative-form"],tabindex:"-1"},children:[_this165.labeledInput,_this165.saveButtonView,_this165.cancelButtonView]});return _this165;}_createClass(_k,[{key:"render",value:function render(){var _this166=this;_get(_getPrototypeOf(_k.prototype),"render",this).call(this);this.keystrokes.listenTo(this.element);gk({view:this});[this.labeledInput,this.saveButtonView,this.cancelButtonView].forEach(function(e){_this166._focusables.add(e);_this166.focusTracker.add(e.element);});}},{key:"_createButton",value:function _createButton(e,t,i,n){var o=new Vb(this.locale);o.set({label:e,icon:t,tooltip:true});o.extendTemplate({attributes:{"class":i}});if(n){o.delegate("execute").to(this,n);}return o;}},{key:"_createLabeledInputView",value:function _createLabeledInputView(){var e=this.locale.t;var t=new hk(this.locale,mk);t.label=e("di");t.inputView.placeholder=e("di");return t;}}]);return _k;}(db);function vk(e){return function(t){return t+e;};}var kk=i(64);var yk=vk("px");var xk=Nd.document.body;var Ak=/*#__PURE__*/function(_db21){_inherits(Ak,_db21);function Ak(e){var _this167;_classCallCheck(this,Ak);_this167=_possibleConstructorReturn(this,_getPrototypeOf(Ak).call(this,e));var t=_this167.bindTemplate;_this167.set("top",0);_this167.set("left",0);_this167.set("position","arrow_nw");_this167.set("isVisible",false);_this167.set("withArrow",true);_this167.set("class");_this167.content=_this167.createCollection();_this167.setTemplate({tag:"div",attributes:{"class":["ck","ck-balloon-panel",t.to("position",function(e){return"ck-balloon-panel_".concat(e);}),t["if"]("isVisible","ck-balloon-panel_visible"),t["if"]("withArrow","ck-balloon-panel_with-arrow"),t.to("class")],style:{top:t.to("top",yk),left:t.to("left",yk)}},children:_this167.content});return _this167;}_createClass(Ak,[{key:"show",value:function show(){this.isVisible=true;}},{key:"hide",value:function hide(){this.isVisible=false;}},{key:"attachTo",value:function attachTo(e){this.show();var t=Ak.defaultPositions;var i=Object.assign({},{element:this.element,positions:[t.southArrowNorth,t.southArrowNorthMiddleWest,t.southArrowNorthMiddleEast,t.southArrowNorthWest,t.southArrowNorthEast,t.northArrowSouth,t.northArrowSouthMiddleWest,t.northArrowSouthMiddleEast,t.northArrowSouthWest,t.northArrowSouthEast],limiter:xk,fitInViewport:true},e);var n=Ak._getOptimalPosition(i);var o=parseInt(n.left);var s=parseInt(n.top);var r=n.name;Object.assign(this,{top:s,left:o,position:r});}},{key:"pin",value:function pin(e){var _this168=this;this.unpin();this._pinWhenIsVisibleCallback=function(){if(_this168.isVisible){_this168._startPinning(e);}else{_this168._stopPinning();}};this._startPinning(e);this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback);}},{key:"unpin",value:function unpin(){if(this._pinWhenIsVisibleCallback){this._stopPinning();this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback);this._pinWhenIsVisibleCallback=null;this.hide();}}},{key:"_startPinning",value:function _startPinning(e){var _this169=this;this.attachTo(e);var t=Ck(e.target);var i=e.limiter?Ck(e.limiter):xk;this.listenTo(Nd.document,"scroll",function(n,o){var s=o.target;var r=t&&s.contains(t);var a=i&&s.contains(i);if(r||a||!t||!i){_this169.attachTo(e);}},{useCapture:true});this.listenTo(Nd.window,"resize",function(){_this169.attachTo(e);});}},{key:"_stopPinning",value:function _stopPinning(){this.stopListening(Nd.document,"scroll");this.stopListening(Nd.window,"resize");}}]);return Ak;}(db);function Ck(e){if(Gs(e)){return e;}if(wh(e)){return e.commonAncestorContainer;}if(typeof e=="function"){return Ck(e());}return null;}Ak.arrowHorizontalOffset=25;Ak.arrowVerticalOffset=10;Ak._getOptimalPosition=Sb;Ak.defaultPositions={northWestArrowSouthWest:function northWestArrowSouthWest(e,t){return{top:Tk(e,t),left:e.left-Ak.arrowHorizontalOffset,name:"arrow_sw"};},northWestArrowSouthMiddleWest:function northWestArrowSouthMiddleWest(e,t){return{top:Tk(e,t),left:e.left-t.width*.25-Ak.arrowHorizontalOffset,name:"arrow_smw"};},northWestArrowSouth:function northWestArrowSouth(e,t){return{top:Tk(e,t),left:e.left-t.width/2,name:"arrow_s"};},northWestArrowSouthMiddleEast:function northWestArrowSouthMiddleEast(e,t){return{top:Tk(e,t),left:e.left-t.width*.75+Ak.arrowHorizontalOffset,name:"arrow_sme"};},northWestArrowSouthEast:function northWestArrowSouthEast(e,t){return{top:Tk(e,t),left:e.left-t.width+Ak.arrowHorizontalOffset,name:"arrow_se"};},northArrowSouthWest:function northArrowSouthWest(e,t){return{top:Tk(e,t),left:e.left+e.width/2-Ak.arrowHorizontalOffset,name:"arrow_sw"};},northArrowSouthMiddleWest:function northArrowSouthMiddleWest(e,t){return{top:Tk(e,t),left:e.left+e.width/2-t.width*.25-Ak.arrowHorizontalOffset,name:"arrow_smw"};},northArrowSouth:function northArrowSouth(e,t){return{top:Tk(e,t),left:e.left+e.width/2-t.width/2,name:"arrow_s"};},northArrowSouthMiddleEast:function northArrowSouthMiddleEast(e,t){return{top:Tk(e,t),left:e.left+e.width/2-t.width*.75+Ak.arrowHorizontalOffset,name:"arrow_sme"};},northArrowSouthEast:function northArrowSouthEast(e,t){return{top:Tk(e,t),left:e.left+e.width/2-t.width+Ak.arrowHorizontalOffset,name:"arrow_se"};},northEastArrowSouthWest:function northEastArrowSouthWest(e,t){return{top:Tk(e,t),left:e.right-Ak.arrowHorizontalOffset,name:"arrow_sw"};},northEastArrowSouthMiddleWest:function northEastArrowSouthMiddleWest(e,t){return{top:Tk(e,t),left:e.right-t.width*.25-Ak.arrowHorizontalOffset,name:"arrow_smw"};},northEastArrowSouth:function northEastArrowSouth(e,t){return{top:Tk(e,t),left:e.right-t.width/2,name:"arrow_s"};},northEastArrowSouthMiddleEast:function northEastArrowSouthMiddleEast(e,t){return{top:Tk(e,t),left:e.right-t.width*.75+Ak.arrowHorizontalOffset,name:"arrow_sme"};},northEastArrowSouthEast:function northEastArrowSouthEast(e,t){return{top:Tk(e,t),left:e.right-t.width+Ak.arrowHorizontalOffset,name:"arrow_se"};},southWestArrowNorthWest:function southWestArrowNorthWest(e,t){return{top:Mk(e,t),left:e.left-Ak.arrowHorizontalOffset,name:"arrow_nw"};},southWestArrowNorthMiddleWest:function southWestArrowNorthMiddleWest(e,t){return{top:Mk(e,t),left:e.left-t.width*.25-Ak.arrowHorizontalOffset,name:"arrow_nmw"};},southWestArrowNorth:function southWestArrowNorth(e,t){return{top:Mk(e,t),left:e.left-t.width/2,name:"arrow_n"};},southWestArrowNorthMiddleEast:function southWestArrowNorthMiddleEast(e,t){return{top:Mk(e,t),left:e.left-t.width*.75+Ak.arrowHorizontalOffset,name:"arrow_nme"};},southWestArrowNorthEast:function southWestArrowNorthEast(e,t){return{top:Mk(e,t),left:e.left-t.width+Ak.arrowHorizontalOffset,name:"arrow_ne"};},southArrowNorthWest:function southArrowNorthWest(e,t){return{top:Mk(e,t),left:e.left+e.width/2-Ak.arrowHorizontalOffset,name:"arrow_nw"};},southArrowNorthMiddleWest:function southArrowNorthMiddleWest(e,t){return{top:Mk(e,t),left:e.left+e.width/2-t.width*.25-Ak.arrowHorizontalOffset,name:"arrow_nmw"};},southArrowNorth:function southArrowNorth(e,t){return{top:Mk(e,t),left:e.left+e.width/2-t.width/2,name:"arrow_n"};},southArrowNorthMiddleEast:function southArrowNorthMiddleEast(e,t){return{top:Mk(e,t),left:e.left+e.width/2-t.width*.75+Ak.arrowHorizontalOffset,name:"arrow_nme"};},southArrowNorthEast:function southArrowNorthEast(e,t){return{top:Mk(e,t),left:e.left+e.width/2-t.width+Ak.arrowHorizontalOffset,name:"arrow_ne"};},southEastArrowNorthWest:function southEastArrowNorthWest(e,t){return{top:Mk(e,t),left:e.right-Ak.arrowHorizontalOffset,name:"arrow_nw"};},southEastArrowNorthMiddleWest:function southEastArrowNorthMiddleWest(e,t){return{top:Mk(e,t),left:e.right-t.width*.25-Ak.arrowHorizontalOffset,name:"arrow_nmw"};},southEastArrowNorth:function southEastArrowNorth(e,t){return{top:Mk(e,t),left:e.right-t.width/2,name:"arrow_n"};},southEastArrowNorthMiddleEast:function southEastArrowNorthMiddleEast(e,t){return{top:Mk(e,t),left:e.right-t.width*.75+Ak.arrowHorizontalOffset,name:"arrow_nme"};},southEastArrowNorthEast:function southEastArrowNorthEast(e,t){return{top:Mk(e,t),left:e.right-t.width+Ak.arrowHorizontalOffset,name:"arrow_ne"};}};function Tk(e,t){return e.top-t.height-Ak.arrowVerticalOffset;}function Mk(e){return e.bottom+Ak.arrowVerticalOffset;}var Ek='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>';var Pk='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>';var Sk=i(66);var Ik=i(68);var Nk=vk("px");var Ok=/*#__PURE__*/function(_bw27){_inherits(Ok,_bw27);_createClass(Ok,null,[{key:"pluginName",get:function get(){return"ContextualBalloon";}}]);function Ok(e){var _this170;_classCallCheck(this,Ok);_this170=_possibleConstructorReturn(this,_getPrototypeOf(Ok).call(this,e));_this170.positionLimiter=function(){var e=_this170.editor.editing.view;var t=e.document;var i=t.selection.editableElement;if(i){return e.domConverter.mapViewToDom(i.root);}return null;};_this170.set("visibleView",null);_this170.view=new Ak(e.locale);e.ui.view.body.add(_this170.view);e.ui.focusTracker.add(_this170.view.element);_this170._viewToStack=new Map();_this170._idToStack=new Map();_this170.set("_numberOfStacks",0);_this170.set("_singleViewMode",false);_this170._rotatorView=_this170._createRotatorView();_this170._fakePanelsView=_this170._createFakePanelsView();return _this170;}_createClass(Ok,[{key:"hasView",value:function hasView(e){return Array.from(this._viewToStack.keys()).includes(e);}},{key:"add",value:function add(e){if(this.hasView(e.view)){throw new rr["b"]("contextualballoon-add-view-exist: Cannot add configuration of the same view twice.",[this,e]);}var t=e.stackId||"main";if(!this._idToStack.has(t)){this._idToStack.set(t,new Map([[e.view,e]]));this._viewToStack.set(e.view,this._idToStack.get(t));this._numberOfStacks=this._idToStack.size;if(!this._visibleStack||e.singleViewMode){this.showStack(t);}return;}var i=this._idToStack.get(t);if(e.singleViewMode){this.showStack(t);}i.set(e.view,e);this._viewToStack.set(e.view,i);if(i===this._visibleStack){this._showView(e);}}},{key:"remove",value:function remove(e){if(!this.hasView(e)){throw new rr["b"]("contextualballoon-remove-view-not-exist: Cannot remove the configuration of a non-existent view.",[this,e]);}var t=this._viewToStack.get(e);if(this._singleViewMode&&this.visibleView===e){this._singleViewMode=false;}if(this.visibleView===e){if(t.size===1){if(this._idToStack.size>1){this._showNextStack();}else{this.view.hide();this.visibleView=null;this._rotatorView.hideView();}}else{this._showView(Array.from(t.values())[t.size-2]);}}if(t.size===1){this._idToStack["delete"](this._getStackId(t));this._numberOfStacks=this._idToStack.size;}else{t["delete"](e);}this._viewToStack["delete"](e);}},{key:"updatePosition",value:function updatePosition(e){if(e){this._visibleStack.get(this.visibleView).position=e;}this.view.pin(this._getBalloonPosition());this._fakePanelsView.updatePosition();}},{key:"showStack",value:function showStack(e){this.visibleStack=e;var t=this._idToStack.get(e);if(!t){throw new rr["b"]("contextualballoon-showstack-stack-not-exist: Cannot show a stack that does not exist.",this);}if(this._visibleStack===t){return;}this._showView(Array.from(t.values()).pop());}},{key:"_getStackId",value:function _getStackId(e){var t=Array.from(this._idToStack.entries()).find(function(t){return t[1]===e;});return t[0];}},{key:"_showNextStack",value:function _showNextStack(){var e=Array.from(this._idToStack.values());var t=e.indexOf(this._visibleStack)+1;if(!e[t]){t=0;}this.showStack(this._getStackId(e[t]));}},{key:"_showPrevStack",value:function _showPrevStack(){var e=Array.from(this._idToStack.values());var t=e.indexOf(this._visibleStack)-1;if(!e[t]){t=e.length-1;}this.showStack(this._getStackId(e[t]));}},{key:"_createRotatorView",value:function _createRotatorView(){var _this171=this;var e=new Rk(this.editor.locale);var t=this.editor.locale.t;this.view.content.add(e);e.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",function(e,t){return!t&&e>1;});e.on("change:isNavigationVisible",function(){return _this171.updatePosition();},{priority:"low"});e.bind("counter").to(this,"visibleView",this,"_numberOfStacks",function(e,i){if(i<2){return"";}var n=Array.from(_this171._idToStack.values()).indexOf(_this171._visibleStack)+1;return t("cb",[n,i]);});e.buttonNextView.on("execute",function(){if(e.focusTracker.isFocused){_this171.editor.editing.view.focus();}_this171._showNextStack();});e.buttonPrevView.on("execute",function(){if(e.focusTracker.isFocused){_this171.editor.editing.view.focus();}_this171._showPrevStack();});return e;}},{key:"_createFakePanelsView",value:function _createFakePanelsView(){var e=new Lk(this.editor.locale,this.view);e.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",function(e,t){var i=!t&&e>=2;return i?Math.min(e-1,2):0;});e.listenTo(this.view,"change:top",function(){return e.updatePosition();});e.listenTo(this.view,"change:left",function(){return e.updatePosition();});this.editor.ui.view.body.add(e);return e;}},{key:"_showView",value:function _showView(_ref38){var e=_ref38.view,_ref38$balloonClassNa=_ref38.balloonClassName,t=_ref38$balloonClassNa===void 0?"":_ref38$balloonClassNa,_ref38$withArrow=_ref38.withArrow,i=_ref38$withArrow===void 0?true:_ref38$withArrow,_ref38$singleViewMode=_ref38.singleViewMode,n=_ref38$singleViewMode===void 0?false:_ref38$singleViewMode;this.view["class"]=t;this.view.withArrow=i;this._rotatorView.showView(e);this.visibleView=e;this.view.pin(this._getBalloonPosition());this._fakePanelsView.updatePosition();if(n){this._singleViewMode=true;}}},{key:"_getBalloonPosition",value:function _getBalloonPosition(){var e=Array.from(this._visibleStack.values()).pop().position;if(e&&!e.limiter){e=Object.assign({},e,{limiter:this.positionLimiter});}return e;}},{key:"_visibleStack",get:function get(){return this._viewToStack.get(this.visibleView);}}]);return Ok;}(bw);var Rk=/*#__PURE__*/function(_db22){_inherits(Rk,_db22);function Rk(e){var _this172;_classCallCheck(this,Rk);_this172=_possibleConstructorReturn(this,_getPrototypeOf(Rk).call(this,e));var t=e.t;var i=_this172.bindTemplate;_this172.set("isNavigationVisible",true);_this172.focusTracker=new _p();_this172.buttonPrevView=_this172._createButtonView(t("cc"),Ek);_this172.buttonNextView=_this172._createButtonView(t("cd"),Pk);_this172.content=_this172.createCollection();_this172.setTemplate({tag:"div",attributes:{"class":["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{"class":["ck-balloon-rotator__navigation",i.to("isNavigationVisible",function(e){return e?"":"ck-hidden";})]},children:[_this172.buttonPrevView,{tag:"span",attributes:{"class":["ck-balloon-rotator__counter"]},children:[{text:i.to("counter")}]},_this172.buttonNextView]},{tag:"div",attributes:{"class":"ck-balloon-rotator__content"},children:_this172.content}]});return _this172;}_createClass(Rk,[{key:"render",value:function render(){_get(_getPrototypeOf(Rk.prototype),"render",this).call(this);this.focusTracker.add(this.element);}},{key:"showView",value:function showView(e){this.hideView();this.content.add(e);}},{key:"hideView",value:function hideView(){this.content.clear();}},{key:"_createButtonView",value:function _createButtonView(e,t){var i=new Vb(this.locale);i.set({label:e,icon:t,tooltip:true});return i;}}]);return Rk;}(db);var Lk=/*#__PURE__*/function(_db23){_inherits(Lk,_db23);function Lk(e,t){var _this173;_classCallCheck(this,Lk);_this173=_possibleConstructorReturn(this,_getPrototypeOf(Lk).call(this,e));var i=_this173.bindTemplate;_this173.set("top",0);_this173.set("left",0);_this173.set("height",0);_this173.set("width",0);_this173.set("numberOfPanels",0);_this173.content=_this173.createCollection();_this173._balloonPanelView=t;_this173.setTemplate({tag:"div",attributes:{"class":["ck-fake-panel",i.to("numberOfPanels",function(e){return e?"":"ck-hidden";})],style:{top:i.to("top",Nk),left:i.to("left",Nk),width:i.to("width",Nk),height:i.to("height",Nk)}},children:_this173.content});_this173.on("change:numberOfPanels",function(e,t,i,n){if(i>n){_this173._addPanels(i-n);}else{_this173._removePanels(n-i);}_this173.updatePosition();});return _this173;}_createClass(Lk,[{key:"_addPanels",value:function _addPanels(e){while(e--){var _e244=new db();_e244.setTemplate({tag:"div"});this.content.add(_e244);this.registerChild(_e244);}}},{key:"_removePanels",value:function _removePanels(e){while(e--){var _e245=this.content.last;this.content.remove(_e245);this.deregisterChild(_e245);_e245.destroy();}}},{key:"updatePosition",value:function updatePosition(){if(this.numberOfPanels){var _this$_balloonPanelVi=this._balloonPanelView,_e246=_this$_balloonPanelVi.top,_t220=_this$_balloonPanelVi.left;var _ref39=new kh(this._balloonPanelView.element),_i228=_ref39.width,_n121=_ref39.height;Object.assign(this,{top:_e246,left:_t220,width:_i228,height:_n121});}}}]);return Lk;}(db);var zk='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.085 6.22L2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21l-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z"/></svg>';function Dk(e){var t=e.plugins.get("ContextualBalloon");if(Bv(e.editing.view.document.selection)){var _i229=jk(e);t.updatePosition(_i229);}}function jk(e){var t=e.editing.view;var i=Ak.defaultPositions;return{target:t.domConverter.viewToDom(t.document.selection.getSelectedElement()),positions:[i.northArrowSouth,i.northArrowSouthWest,i.northArrowSouthEast,i.southArrowNorth,i.southArrowNorthWest,i.southArrowNorthEast]};}var Bk=/*#__PURE__*/function(_bw28){_inherits(Bk,_bw28);function Bk(){_classCallCheck(this,Bk);return _possibleConstructorReturn(this,_getPrototypeOf(Bk).apply(this,arguments));}_createClass(Bk,[{key:"init",value:function init(){this._createButton();this._createForm();}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(Bk.prototype),"destroy",this).call(this);this._form.destroy();}},{key:"_createButton",value:function _createButton(){var _this174=this;var e=this.editor;var t=e.t;e.ui.componentFactory.add("imageTextAlternative",function(i){var n=e.commands.get("imageTextAlternative");var o=new Vb(i);o.set({label:t("bv"),icon:zk,tooltip:true});o.bind("isEnabled").to(n,"isEnabled");_this174.listenTo(o,"execute",function(){_this174._showForm();});return o;});}},{key:"_createForm",value:function _createForm(){var _this175=this;var e=this.editor;var t=e.editing.view;var i=t.document;this._balloon=this.editor.plugins.get("ContextualBalloon");this._form=new _k(e.locale);this._form.render();this.listenTo(this._form,"submit",function(){e.execute("imageTextAlternative",{newValue:_this175._form.labeledInput.inputView.element.value});_this175._hideForm(true);});this.listenTo(this._form,"cancel",function(){_this175._hideForm(true);});this._form.keystrokes.set("Esc",function(e,t){_this175._hideForm(true);t();});this.listenTo(e.ui,"update",function(){if(!Bv(i.selection)){_this175._hideForm(true);}else if(_this175._isVisible){Dk(e);}});Jb({emitter:this._form,activator:function activator(){return _this175._isVisible;},contextElements:[this._balloon.view.element],callback:function callback(){return _this175._hideForm();}});}},{key:"_showForm",value:function _showForm(){if(this._isVisible){return;}var e=this.editor;var t=e.commands.get("imageTextAlternative");var i=this._form.labeledInput;if(!this._isInBalloon){this._balloon.add({view:this._form,position:jk(e)});}i.value=i.inputView.element.value=t.value||"";this._form.labeledInput.select();}},{key:"_hideForm",value:function _hideForm(e){if(!this._isInBalloon){return;}if(this._form.focusTracker.isFocused){this._form.saveButtonView.focus();}this._balloon.remove(this._form);if(e){this.editor.editing.view.focus();}}},{key:"_isVisible",get:function get(){return this._balloon.visibleView===this._form;}},{key:"_isInBalloon",get:function get(){return this._balloon.hasView(this._form);}}],[{key:"requires",get:function get(){return[Ok];}},{key:"pluginName",get:function get(){return"ImageTextAlternativeUI";}}]);return Bk;}(bw);var Vk=/*#__PURE__*/function(_bw29){_inherits(Vk,_bw29);function Vk(){_classCallCheck(this,Vk);return _possibleConstructorReturn(this,_getPrototypeOf(Vk).apply(this,arguments));}_createClass(Vk,null,[{key:"requires",get:function get(){return[dk,Bk];}},{key:"pluginName",get:function get(){return"ImageTextAlternative";}}]);return Vk;}(bw);var Fk=i(70);var Hk=/*#__PURE__*/function(_bw30){_inherits(Hk,_bw30);function Hk(){_classCallCheck(this,Hk);return _possibleConstructorReturn(this,_getPrototypeOf(Hk).apply(this,arguments));}_createClass(Hk,null,[{key:"requires",get:function get(){return[Qv,nk,Vk];}},{key:"pluginName",get:function get(){return"Image";}}]);return Hk;}(bw);function Wk(e,t){return function(i){var n=i.createEditableElement("figcaption");i.setCustomProperty("imageCaption",true,n);Cp({view:e,element:n,text:t});return Nv(n,i);};}function Uk(e){return!!e.getCustomProperty("imageCaption");}function $k(e){var _iteratorNormalCompletion295=true;var _didIteratorError295=false;var _iteratorError295=undefined;try{for(var _iterator295=e.getChildren()[Symbol.iterator](),_step295;!(_iteratorNormalCompletion295=(_step295=_iterator295.next()).done);_iteratorNormalCompletion295=true){var _t221=_step295.value;if(!!_t221&&_t221.is("caption")){return _t221;}}}catch(err){_didIteratorError295=true;_iteratorError295=err;}finally{try{if(!_iteratorNormalCompletion295&&_iterator295["return"]!=null){_iterator295["return"]();}}finally{if(_didIteratorError295){throw _iteratorError295;}}}return null;}function qk(e){var t=e.parent;if(e.name=="figcaption"&&t&&t.name=="figure"&&t.hasClass("image")){return{name:true};}return null;}var Yk=/*#__PURE__*/function(_bw31){_inherits(Yk,_bw31);function Yk(){_classCallCheck(this,Yk);return _possibleConstructorReturn(this,_getPrototypeOf(Yk).apply(this,arguments));}_createClass(Yk,[{key:"init",value:function init(){var _this176=this;var e=this.editor;var t=e.editing.view;var i=e.model.schema;var n=e.data;var o=e.editing;var s=e.t;i.register("caption",{allowIn:"image",allowContentOf:"$block",isLimit:true});e.model.document.registerPostFixer(function(e){return _this176._insertMissingModelCaptionElement(e);});e.conversion["for"]("upcast").elementToElement({view:qk,model:"caption"});var r=function r(e){return e.createContainerElement("figcaption");};n.downcastDispatcher.on("insert:caption",Gk(r,false));var a=Wk(t,s("aq"));o.downcastDispatcher.on("insert:caption",Gk(a));o.downcastDispatcher.on("insert",this._fixCaptionVisibility(function(e){return e.item;}),{priority:"high"});o.downcastDispatcher.on("remove",this._fixCaptionVisibility(function(e){return e.position.parent;}),{priority:"high"});t.document.registerPostFixer(function(e){return _this176._updateCaptionVisibility(e);});}},{key:"_updateCaptionVisibility",value:function _updateCaptionVisibility(e){var t=this.editor.editing.mapper;var i=this._lastSelectedCaption;var n;var o=this.editor.model.document.selection;var s=o.getSelectedElement();if(s&&s.is("image")){var _e247=$k(s);n=t.toViewElement(_e247);}var r=o.getFirstPosition();var a=Xk(r.parent);if(a){n=t.toViewElement(a);}if(n){if(i){if(i===n){return Qk(n,e);}else{Kk(i,e);this._lastSelectedCaption=n;return Qk(n,e);}}else{this._lastSelectedCaption=n;return Qk(n,e);}}else{if(i){var _t222=Kk(i,e);this._lastSelectedCaption=null;return _t222;}else{return false;}}}},{key:"_fixCaptionVisibility",value:function _fixCaptionVisibility(e){var _this177=this;return function(t,i,n){var o=e(i);var s=Xk(o);var r=_this177.editor.editing.mapper;var a=n.writer;if(s){var _e248=r.toViewElement(s);if(_e248){if(s.childCount){a.removeClass("ck-hidden",_e248);}else{a.addClass("ck-hidden",_e248);}}}};}},{key:"_insertMissingModelCaptionElement",value:function _insertMissingModelCaptionElement(e){var t=this.editor.model;var i=t.document.differ.getChanges();var n=[];var _iteratorNormalCompletion296=true;var _didIteratorError296=false;var _iteratorError296=undefined;try{for(var _iterator296=i[Symbol.iterator](),_step296;!(_iteratorNormalCompletion296=(_step296=_iterator296.next()).done);_iteratorNormalCompletion296=true){var _e249=_step296.value;if(_e249.type=="insert"&&_e249.name!="$text"){var _i231=_e249.position.nodeAfter;if(_i231.is("image")&&!$k(_i231)){n.push(_i231);}if(!_i231.is("image")&&_i231.childCount){var _iteratorNormalCompletion297=true;var _didIteratorError297=false;var _iteratorError297=undefined;try{for(var _iterator297=t.createRangeIn(_i231).getItems()[Symbol.iterator](),_step297;!(_iteratorNormalCompletion297=(_step297=_iterator297.next()).done);_iteratorNormalCompletion297=true){var _e250=_step297.value;if(_e250.is("image")&&!$k(_e250)){n.push(_e250);}}}catch(err){_didIteratorError297=true;_iteratorError297=err;}finally{try{if(!_iteratorNormalCompletion297&&_iterator297["return"]!=null){_iterator297["return"]();}}finally{if(_didIteratorError297){throw _iteratorError297;}}}}}}}catch(err){_didIteratorError296=true;_iteratorError296=err;}finally{try{if(!_iteratorNormalCompletion296&&_iterator296["return"]!=null){_iterator296["return"]();}}finally{if(_didIteratorError296){throw _iteratorError296;}}}for(var _i230=0,_n122=n;_i230<_n122.length;_i230++){var _t223=_n122[_i230];e.appendElement("caption",_t223);}return!!n.length;}}],[{key:"pluginName",get:function get(){return"ImageCaptionEditing";}}]);return Yk;}(bw);function Gk(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;return function(i,n,o){var s=n.item;if(!s.childCount&&!t){return;}if(Vv(s.parent)){if(!o.consumable.consume(n.item,"insert")){return;}var _t224=o.mapper.toViewElement(n.range.start.parent);var _i232=e(o.writer);var _r24=o.writer;if(!s.childCount){_r24.addClass("ck-hidden",_i232);}Jk(_i232,n.item,_t224,o);}};}function Jk(e,t,i,n){var o=n.writer.createPositionAt(i,"end");n.writer.insert(o,e);n.mapper.bindElements(t,e);}function Xk(e){var t=e.getAncestors({includeSelf:true});var i=t.find(function(e){return e.name=="caption";});if(i&&i.parent&&i.parent.name=="image"){return i;}return null;}function Kk(e,t){if(!e.childCount&&!e.hasClass("ck-hidden")){t.addClass("ck-hidden",e);return true;}return false;}function Qk(e,t){if(e.hasClass("ck-hidden")){t.removeClass("ck-hidden",e);return true;}return false;}var Zk=i(72);var ey=/*#__PURE__*/function(_bw32){_inherits(ey,_bw32);function ey(){_classCallCheck(this,ey);return _possibleConstructorReturn(this,_getPrototypeOf(ey).apply(this,arguments));}_createClass(ey,null,[{key:"requires",get:function get(){return[Yk];}},{key:"pluginName",get:function get(){return"ImageCaption";}}]);return ey;}(bw);var ty=/*#__PURE__*/function(_w11){_inherits(ty,_w11);function ty(e,t){var _this178;_classCallCheck(this,ty);_this178=_possibleConstructorReturn(this,_getPrototypeOf(ty).call(this,e));_this178.defaultStyle=false;_this178.styles=t.reduce(function(e,t){e[t.name]=t;if(t.isDefault){_this178.defaultStyle=t.name;}return e;},{});return _this178;}_createClass(ty,[{key:"refresh",value:function refresh(){var e=this.editor.model.document.selection.getSelectedElement();this.isEnabled=Vv(e);if(!e){this.value=false;}else if(e.hasAttribute("imageStyle")){var _t225=e.getAttribute("imageStyle");this.value=this.styles[_t225]?_t225:false;}else{this.value=this.defaultStyle;}}},{key:"execute",value:function execute(e){var _this179=this;var t=e.value;var i=this.editor.model;var n=i.document.selection.getSelectedElement();i.change(function(e){if(_this179.styles[t].isDefault){e.removeAttribute("imageStyle",n);}else{e.setAttribute("imageStyle",t,n);}});}}]);return ty;}(_w);function iy(e){return function(t,i,n){if(!n.consumable.consume(i.item,t.name)){return;}var o=oy(i.attributeNewValue,e);var s=oy(i.attributeOldValue,e);var r=n.mapper.toViewElement(i.item);var a=n.writer;if(s){a.removeClass(s.className,r);}if(o){a.addClass(o.className,r);}};}function ny(e){var t=e.filter(function(e){return!e.isDefault;});return function(e,i,n){if(!i.modelRange){return;}var o=i.viewItem;var s=kw(i.modelRange.getItems());if(!n.schema.checkAttribute(s,"imageStyle")){return;}var _iteratorNormalCompletion298=true;var _didIteratorError298=false;var _iteratorError298=undefined;try{for(var _iterator298=t[Symbol.iterator](),_step298;!(_iteratorNormalCompletion298=(_step298=_iterator298.next()).done);_iteratorNormalCompletion298=true){var _e251=_step298.value;if(n.consumable.consume(o,{classes:_e251.className})){n.writer.setAttribute("imageStyle",_e251.name,s);}}}catch(err){_didIteratorError298=true;_iteratorError298=err;}finally{try{if(!_iteratorNormalCompletion298&&_iterator298["return"]!=null){_iterator298["return"]();}}finally{if(_didIteratorError298){throw _iteratorError298;}}}};}function oy(e,t){var _iteratorNormalCompletion299=true;var _didIteratorError299=false;var _iteratorError299=undefined;try{for(var _iterator299=t[Symbol.iterator](),_step299;!(_iteratorNormalCompletion299=(_step299=_iterator299.next()).done);_iteratorNormalCompletion299=true){var _i233=_step299.value;if(_i233.name===e){return _i233;}}}catch(err){_didIteratorError299=true;_iteratorError299=err;}finally{try{if(!_iteratorNormalCompletion299&&_iterator299["return"]!=null){_iterator299["return"]();}}finally{if(_didIteratorError299){throw _iteratorError299;}}}}var sy='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 4.5V3h16v1.5zm2.5 3V12h11V7.5h-11zM4.061 6H15.94c.586 0 1.061.407 1.061.91v5.68c0 .503-.475.91-1.061.91H4.06c-.585 0-1.06-.407-1.06-.91V6.91C3 6.406 3.475 6 4.061 6zM2 16.5V15h16v1.5z"/></svg>';var ry='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M18 4.5V3H2v1.5h16zm0 3V6h-5.674v1.5H18zm0 3V9h-5.674v1.5H18zm0 3V12h-5.674v1.5H18zm-8.5-6V12h-6V7.5h6zm.818-1.5H2.682C2.305 6 2 6.407 2 6.91v5.68c0 .503.305.91.682.91h7.636c.377 0 .682-.407.682-.91V6.91c0-.503-.305-.91-.682-.91zM18 16.5V15H2v1.5h16z"/></svg>';var ay='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 4.5V3h16v1.5zm4.5 3V12h7V7.5h-7zM5.758 6h8.484c.419 0 .758.407.758.91v5.681c0 .502-.34.909-.758.909H5.758c-.419 0-.758-.407-.758-.91V6.91c0-.503.34-.91.758-.91zM2 16.5V15h16v1.5z"/></svg>';var cy='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 4.5V3h16v1.5zm0 3V6h5.674v1.5zm0 3V9h5.674v1.5zm0 3V12h5.674v1.5zm8.5-6V12h6V7.5h-6zM9.682 6h7.636c.377 0 .682.407.682.91v5.68c0 .503-.305.91-.682.91H9.682c-.377 0-.682-.407-.682-.91V6.91c0-.503.305-.91.682-.91zM2 16.5V15h16v1.5z"/></svg>';var ly={full:{name:"full",title:"Full size image",icon:sy,isDefault:true},side:{name:"side",title:"Side image",icon:cy,className:"image-style-side"},alignLeft:{name:"alignLeft",title:"Left aligned image",icon:ry,className:"image-style-align-left"},alignCenter:{name:"alignCenter",title:"Centered image",icon:ay,className:"image-style-align-center"},alignRight:{name:"alignRight",title:"Right aligned image",icon:cy,className:"image-style-align-right"}};var dy={full:sy,left:ry,right:cy,center:ay};function uy(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];return e.map(hy);}function hy(e){if(typeof e=="string"){var _t226=e;if(ly[_t226]){e=Object.assign({},ly[_t226]);}else{console.warn(Object(rr["a"])("image-style-not-found: There is no such image style of given name."),{name:_t226});e={name:_t226};}}else if(ly[e.name]){var _t227=ly[e.name];var _i234=Object.assign({},e);for(var _n123 in _t227){if(!e.hasOwnProperty(_n123)){_i234[_n123]=_t227[_n123];}}e=_i234;}if(typeof e.icon=="string"&&dy[e.icon]){e.icon=dy[e.icon];}return e;}var fy=/*#__PURE__*/function(_bw33){_inherits(fy,_bw33);function fy(){_classCallCheck(this,fy);return _possibleConstructorReturn(this,_getPrototypeOf(fy).apply(this,arguments));}_createClass(fy,[{key:"init",value:function init(){var e=this.editor;var t=e.model.schema;var i=e.data;var n=e.editing;e.config.define("image.styles",["full","side"]);var o=uy(e.config.get("image.styles"));t.extend("image",{allowAttributes:"imageStyle"});var s=iy(o);n.downcastDispatcher.on("attribute:imageStyle:image",s);i.downcastDispatcher.on("attribute:imageStyle:image",s);i.upcastDispatcher.on("element:figure",ny(o),{priority:"low"});e.commands.add("imageStyle",new ty(e,o));}}],[{key:"pluginName",get:function get(){return"ImageStyleEditing";}}]);return fy;}(bw);var my=i(74);var gy=/*#__PURE__*/function(_bw34){_inherits(gy,_bw34);function gy(){_classCallCheck(this,gy);return _possibleConstructorReturn(this,_getPrototypeOf(gy).apply(this,arguments));}_createClass(gy,[{key:"init",value:function init(){var e=this.editor;var t=e.config.get("image.styles");var i=py(uy(t),this.localizedDefaultStylesTitles);var _iteratorNormalCompletion300=true;var _didIteratorError300=false;var _iteratorError300=undefined;try{for(var _iterator300=i[Symbol.iterator](),_step300;!(_iteratorNormalCompletion300=(_step300=_iterator300.next()).done);_iteratorNormalCompletion300=true){var _e252=_step300.value;this._createButton(_e252);}}catch(err){_didIteratorError300=true;_iteratorError300=err;}finally{try{if(!_iteratorNormalCompletion300&&_iterator300["return"]!=null){_iterator300["return"]();}}finally{if(_didIteratorError300){throw _iteratorError300;}}}}},{key:"_createButton",value:function _createButton(e){var _this180=this;var t=this.editor;var i="imageStyle:".concat(e.name);t.ui.componentFactory.add(i,function(i){var n=t.commands.get("imageStyle");var o=new Vb(i);o.set({label:e.title,icon:e.icon,tooltip:true,isToggleable:true});o.bind("isEnabled").to(n,"isEnabled");o.bind("isOn").to(n,"value",function(t){return t===e.name;});_this180.listenTo(o,"execute",function(){t.execute("imageStyle",{value:e.name});t.editing.view.focus();});return o;});}},{key:"localizedDefaultStylesTitles",get:function get(){var e=this.editor.t;return{"Full size image":e("ar"),"Side image":e("as"),"Left aligned image":e("at"),"Centered image":e("au"),"Right aligned image":e("av")};}}],[{key:"pluginName",get:function get(){return"ImageStyleUI";}}]);return gy;}(bw);function py(e,t){var _iteratorNormalCompletion301=true;var _didIteratorError301=false;var _iteratorError301=undefined;try{for(var _iterator301=e[Symbol.iterator](),_step301;!(_iteratorNormalCompletion301=(_step301=_iterator301.next()).done);_iteratorNormalCompletion301=true){var _i235=_step301.value;if(t[_i235.title]){_i235.title=t[_i235.title];}}}catch(err){_didIteratorError301=true;_iteratorError301=err;}finally{try{if(!_iteratorNormalCompletion301&&_iterator301["return"]!=null){_iterator301["return"]();}}finally{if(_didIteratorError301){throw _iteratorError301;}}}return e;}var by=/*#__PURE__*/function(_bw35){_inherits(by,_bw35);function by(){_classCallCheck(this,by);return _possibleConstructorReturn(this,_getPrototypeOf(by).apply(this,arguments));}_createClass(by,null,[{key:"requires",get:function get(){return[fy,gy];}},{key:"pluginName",get:function get(){return"ImageStyle";}}]);return by;}(bw);var wy=/*#__PURE__*/function(_bw36){_inherits(wy,_bw36);function wy(){_classCallCheck(this,wy);return _possibleConstructorReturn(this,_getPrototypeOf(wy).apply(this,arguments));}_createClass(wy,[{key:"init",value:function init(){var _this181=this;var e=this.editor;if(e.plugins.has("BalloonToolbar")){var _t228=e.plugins.get("BalloonToolbar");this.listenTo(_t228,"show",function(t){if(ky(e.editing.view.document.selection)){t.stop();}},{priority:"high"});}this._toolbarDefinitions=new Map();this._balloon=this.editor.plugins.get("ContextualBalloon");this.on("change:isEnabled",function(){_this181._updateToolbarsVisibility();});this.listenTo(e.ui,"update",function(){_this181._updateToolbarsVisibility();});this.listenTo(e.ui.focusTracker,"change:isFocused",function(){_this181._updateToolbarsVisibility();},{priority:"low"});}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(wy.prototype),"destroy",this).call(this);var _iteratorNormalCompletion302=true;var _didIteratorError302=false;var _iteratorError302=undefined;try{for(var _iterator302=this._toolbarDefinitions.values()[Symbol.iterator](),_step302;!(_iteratorNormalCompletion302=(_step302=_iterator302.next()).done);_iteratorNormalCompletion302=true){var _e253=_step302.value;_e253.view.destroy();}}catch(err){_didIteratorError302=true;_iteratorError302=err;}finally{try{if(!_iteratorNormalCompletion302&&_iterator302["return"]!=null){_iterator302["return"]();}}finally{if(_didIteratorError302){throw _iteratorError302;}}}}},{key:"register",value:function register(e,_ref40){var t=_ref40.ariaLabel,i=_ref40.items,n=_ref40.getRelatedElement,_ref40$balloonClassNa=_ref40.balloonClassName,o=_ref40$balloonClassNa===void 0?"ck-toolbar-container":_ref40$balloonClassNa;var s=this.editor;var r=s.t;var a=new aw(s.locale);a.ariaLabel=t||r("ay");if(this._toolbarDefinitions.has(e)){throw new rr["b"]("widget-toolbar-duplicated: Toolbar with the given id was already added.",this,{toolbarId:e});}a.fillFromConfig(i,s.ui.componentFactory);this._toolbarDefinitions.set(e,{view:a,getRelatedElement:n,balloonClassName:o});}},{key:"_updateToolbarsVisibility",value:function _updateToolbarsVisibility(){var e=0;var t=null;var i=null;var _iteratorNormalCompletion303=true;var _didIteratorError303=false;var _iteratorError303=undefined;try{for(var _iterator303=this._toolbarDefinitions.values()[Symbol.iterator](),_step303;!(_iteratorNormalCompletion303=(_step303=_iterator303.next()).done);_iteratorNormalCompletion303=true){var _n124=_step303.value;var _o67=_n124.getRelatedElement(this.editor.editing.view.document.selection);if(!this.isEnabled||!_o67){if(this._isToolbarInBalloon(_n124)){this._hideToolbar(_n124);}}else if(!this.editor.ui.focusTracker.isFocused){if(this._isToolbarVisible(_n124)){this._hideToolbar(_n124);}}else{var _s37=_o67.getAncestors().length;if(_s37>e){e=_s37;t=_o67;i=_n124;}}}}catch(err){_didIteratorError303=true;_iteratorError303=err;}finally{try{if(!_iteratorNormalCompletion303&&_iterator303["return"]!=null){_iterator303["return"]();}}finally{if(_didIteratorError303){throw _iteratorError303;}}}if(i){this._showToolbar(i,t);}}},{key:"_hideToolbar",value:function _hideToolbar(e){this._balloon.remove(e.view);this.stopListening(this._balloon,"change:visibleView");}},{key:"_showToolbar",value:function _showToolbar(e,t){var _this182=this;if(this._isToolbarVisible(e)){_y(this.editor,t);}else if(!this._isToolbarInBalloon(e)){this._balloon.add({view:e.view,position:vy(this.editor,t),balloonClassName:e.balloonClassName});this.listenTo(this._balloon,"change:visibleView",function(){var _iteratorNormalCompletion304=true;var _didIteratorError304=false;var _iteratorError304=undefined;try{for(var _iterator304=_this182._toolbarDefinitions.values()[Symbol.iterator](),_step304;!(_iteratorNormalCompletion304=(_step304=_iterator304.next()).done);_iteratorNormalCompletion304=true){var _e254=_step304.value;if(_this182._isToolbarVisible(_e254)){var _t229=_e254.getRelatedElement(_this182.editor.editing.view.document.selection);_y(_this182.editor,_t229);}}}catch(err){_didIteratorError304=true;_iteratorError304=err;}finally{try{if(!_iteratorNormalCompletion304&&_iterator304["return"]!=null){_iterator304["return"]();}}finally{if(_didIteratorError304){throw _iteratorError304;}}}});}}},{key:"_isToolbarVisible",value:function _isToolbarVisible(e){return this._balloon.visibleView===e.view;}},{key:"_isToolbarInBalloon",value:function _isToolbarInBalloon(e){return this._balloon.hasView(e.view);}}],[{key:"requires",get:function get(){return[Ok];}},{key:"pluginName",get:function get(){return"WidgetToolbarRepository";}}]);return wy;}(bw);function _y(e,t){var i=e.plugins.get("ContextualBalloon");var n=vy(e,t);i.updatePosition(n);}function vy(e,t){var i=e.editing.view;var n=Ak.defaultPositions;return{target:i.domConverter.mapViewToDom(t),positions:[n.northArrowSouth,n.northArrowSouthWest,n.northArrowSouthEast,n.southArrowNorth,n.southArrowNorthWest,n.southArrowNorthEast]};}function ky(e){var t=e.getSelectedElement();return!!(t&&Mv(t));}var yy=/*#__PURE__*/function(_bw37){_inherits(yy,_bw37);function yy(){_classCallCheck(this,yy);return _possibleConstructorReturn(this,_getPrototypeOf(yy).apply(this,arguments));}_createClass(yy,[{key:"afterInit",value:function afterInit(){var e=this.editor;var t=e.t;var i=e.plugins.get(wy);i.register("image",{ariaLabel:t("a"),items:e.config.get("image.toolbar")||[],getRelatedElement:Bv});}}],[{key:"requires",get:function get(){return[wy];}},{key:"pluginName",get:function get(){return"ImageToolbar";}}]);return yy;}(bw);var xy=/*#__PURE__*/function(_db24){_inherits(xy,_db24);function xy(e){var _this183;_classCallCheck(this,xy);_this183=_possibleConstructorReturn(this,_getPrototypeOf(xy).call(this,e));_this183.buttonView=new Vb(e);_this183._fileInputView=new Ay(e);_this183._fileInputView.bind("acceptedType").to(_assertThisInitialized(_this183));_this183._fileInputView.bind("allowMultipleFiles").to(_assertThisInitialized(_this183));_this183._fileInputView.delegate("done").to(_assertThisInitialized(_this183));_this183.setTemplate({tag:"span",attributes:{"class":"ck-file-dialog-button"},children:[_this183.buttonView,_this183._fileInputView]});_this183.buttonView.on("execute",function(){_this183._fileInputView.open();});return _this183;}_createClass(xy,[{key:"focus",value:function focus(){this.buttonView.focus();}}]);return xy;}(db);var Ay=/*#__PURE__*/function(_db25){_inherits(Ay,_db25);function Ay(e){var _this184;_classCallCheck(this,Ay);_this184=_possibleConstructorReturn(this,_getPrototypeOf(Ay).call(this,e));_this184.set("acceptedType");_this184.set("allowMultipleFiles",false);var t=_this184.bindTemplate;_this184.setTemplate({tag:"input",attributes:{"class":["ck-hidden"],type:"file",tabindex:"-1",accept:t.to("acceptedType"),multiple:t.to("allowMultipleFiles")},on:{change:t.to(function(){if(_this184.element&&_this184.element.files&&_this184.element.files.length){_this184.fire("done",_this184.element.files);}_this184.element.value="";})}});return _this184;}_createClass(Ay,[{key:"open",value:function open(){this.element.click();}}]);return Ay;}(db);var Cy='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.91 10.54c.26-.23.64-.21.88.03l3.36 3.14 2.23-2.06a.64.64 0 0 1 .87 0l2.52 2.97V4.5H3.2v10.12l3.71-4.08zm10.27-7.51c.6 0 1.09.47 1.09 1.05v11.84c0 .59-.49 1.06-1.09 1.06H2.79c-.6 0-1.09-.47-1.09-1.06V4.08c0-.58.49-1.05 1.1-1.05h14.38zm-5.22 5.56a1.96 1.96 0 1 1 3.4-1.96 1.96 1.96 0 0 1-3.4 1.96z"/></svg>';function Ty(e){var t=e.map(function(e){return e.replace("+","\\+");});return new RegExp("^image\\/(".concat(t.join("|"),")$"));}function My(e){return new Promise(function(t,i){var n=e.getAttribute("src");fetch(n).then(function(e){return e.blob();}).then(function(e){var o=Py(e,n);var s=o.replace("image/","");var r="image.".concat(s);var a=Sy(e,r,o);a?t(a):i();})["catch"](i);});}function Ey(e){if(!e.is("element","img")||!e.getAttribute("src")){return false;}return e.getAttribute("src").match(/^data:image\/\w+;base64,/g)||e.getAttribute("src").match(/^blob:/g);}function Py(e,t){if(e.type){return e.type;}else if(t.match(/data:(image\/\w+);base64/)){return t.match(/data:(image\/\w+);base64/)[1].toLowerCase();}else{return"image/jpeg";}}function Sy(e,t,i){try{return new File([e],t,{type:i});}catch(e){return null;}}var Iy=/*#__PURE__*/function(_bw38){_inherits(Iy,_bw38);function Iy(){_classCallCheck(this,Iy);return _possibleConstructorReturn(this,_getPrototypeOf(Iy).apply(this,arguments));}_createClass(Iy,[{key:"init",value:function init(){var e=this.editor;var t=e.t;e.ui.componentFactory.add("imageUpload",function(i){var n=new xy(i);var o=e.commands.get("imageUpload");var s=e.config.get("image.upload.types");var r=Ty(s);n.set({acceptedType:s.map(function(e){return"image/".concat(e);}).join(","),allowMultipleFiles:true});n.buttonView.set({label:t("aw"),icon:Cy,tooltip:true});n.buttonView.bind("isEnabled").to(o);n.on("done",function(t,i){var n=Array.from(i).filter(function(e){return r.test(e.type);});if(n.length){e.execute("imageUpload",{file:n});}});return n;});}}]);return Iy;}(bw);var Ny=/*#__PURE__*/function(){function Ny(e){_classCallCheck(this,Ny);this.context=e;}_createClass(Ny,[{key:"destroy",value:function destroy(){this.stopListening();}}],[{key:"isContextPlugin",get:function get(){return true;}}]);return Ny;}();kr(Ny,Jc);var Oy=/*#__PURE__*/function(_Ny){_inherits(Oy,_Ny);function Oy(){_classCallCheck(this,Oy);return _possibleConstructorReturn(this,_getPrototypeOf(Oy).apply(this,arguments));}_createClass(Oy,[{key:"init",value:function init(){this.set("hasAny",false);this._actions=new yr({idProperty:"_id"});this._actions.delegate("add","remove").to(this);}},{key:"add",value:function add(e){if(typeof e!=="string"){throw new rr["b"]("pendingactions-add-invalid-message: The message must be a string.",this);}var t=Object.create(Jc);t.set("message",e);this._actions.add(t);this.hasAny=true;return t;}},{key:"remove",value:function remove(e){this._actions.remove(e);this.hasAny=!!this._actions.length;}},{key:Symbol.iterator,value:function value(){return this._actions[Symbol.iterator]();}},{key:"first",get:function get(){return this._actions.get(0);}}],[{key:"pluginName",get:function get(){return"PendingActions";}}]);return Oy;}(Ny);var Ry=/*#__PURE__*/function(){function Ry(){var _this185=this;_classCallCheck(this,Ry);var e=new window.FileReader();this._reader=e;this._data=undefined;this.set("loaded",0);e.onprogress=function(e){_this185.loaded=e.loaded;};}_createClass(Ry,[{key:"read",value:function read(e){var _this186=this;var t=this._reader;this.total=e.size;return new Promise(function(i,n){t.onload=function(){var e=t.result;_this186._data=e;i(e);};t.onerror=function(){n("error");};t.onabort=function(){n("aborted");};_this186._reader.readAsDataURL(e);});}},{key:"abort",value:function abort(){this._reader.abort();}},{key:"error",get:function get(){return this._reader.error;}},{key:"data",get:function get(){return this._data;}}]);return Ry;}();kr(Ry,Jc);var Ly=/*#__PURE__*/function(_bw39){_inherits(Ly,_bw39);function Ly(){_classCallCheck(this,Ly);return _possibleConstructorReturn(this,_getPrototypeOf(Ly).apply(this,arguments));}_createClass(Ly,[{key:"init",value:function init(){var _this187=this;this.loaders=new yr();this.loaders.on("add",function(){return _this187._updatePendingAction();});this.loaders.on("remove",function(){return _this187._updatePendingAction();});this._loadersMap=new Map();this._pendingAction=null;this.set("uploaded",0);this.set("uploadTotal",null);this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",function(e,t){return t?e/t*100:0;});}},{key:"getLoader",value:function getLoader(e){return this._loadersMap.get(e)||null;}},{key:"createLoader",value:function createLoader(e){var _this188=this;if(!this.createUploadAdapter){console.warn(Object(rr["a"])("filerepository-no-upload-adapter: Upload adapter is not defined."));return null;}var t=new zy(Promise.resolve(e),this.createUploadAdapter);this.loaders.add(t);this._loadersMap.set(e,t);if(e instanceof Promise){t.file.then(function(e){_this188._loadersMap.set(e,t);})["catch"](function(){});}t.on("change:uploaded",function(){var e=0;var _iteratorNormalCompletion305=true;var _didIteratorError305=false;var _iteratorError305=undefined;try{for(var _iterator305=_this188.loaders[Symbol.iterator](),_step305;!(_iteratorNormalCompletion305=(_step305=_iterator305.next()).done);_iteratorNormalCompletion305=true){var _t230=_step305.value;e+=_t230.uploaded;}}catch(err){_didIteratorError305=true;_iteratorError305=err;}finally{try{if(!_iteratorNormalCompletion305&&_iterator305["return"]!=null){_iterator305["return"]();}}finally{if(_didIteratorError305){throw _iteratorError305;}}}_this188.uploaded=e;});t.on("change:uploadTotal",function(){var e=0;var _iteratorNormalCompletion306=true;var _didIteratorError306=false;var _iteratorError306=undefined;try{for(var _iterator306=_this188.loaders[Symbol.iterator](),_step306;!(_iteratorNormalCompletion306=(_step306=_iterator306.next()).done);_iteratorNormalCompletion306=true){var _t231=_step306.value;if(_t231.uploadTotal){e+=_t231.uploadTotal;}}}catch(err){_didIteratorError306=true;_iteratorError306=err;}finally{try{if(!_iteratorNormalCompletion306&&_iterator306["return"]!=null){_iterator306["return"]();}}finally{if(_didIteratorError306){throw _iteratorError306;}}}_this188.uploadTotal=e;});return t;}},{key:"destroyLoader",value:function destroyLoader(e){var _this189=this;var t=e instanceof zy?e:this.getLoader(e);t._destroy();this.loaders.remove(t);this._loadersMap.forEach(function(e,i){if(e===t){_this189._loadersMap["delete"](i);}});}},{key:"_updatePendingAction",value:function _updatePendingAction(){var e=this.editor.plugins.get(Oy);if(this.loaders.length){if(!this._pendingAction){var _t232=this.editor.t;var _i236=function _i236(e){return"".concat(_t232("by")," ").concat(parseInt(e),"%.");};this._pendingAction=e.add(_i236(this.uploadedPercent));this._pendingAction.bind("message").to(this,"uploadedPercent",_i236);}}else{e.remove(this._pendingAction);this._pendingAction=null;}}}],[{key:"pluginName",get:function get(){return"FileRepository";}},{key:"requires",get:function get(){return[Oy];}}]);return Ly;}(bw);kr(Ly,Jc);var zy=/*#__PURE__*/function(){function zy(e,t){_classCallCheck(this,zy);this.id=ir();this._filePromiseWrapper=this._createFilePromiseWrapper(e);this._adapter=t(this);this._reader=new Ry();this.set("status","idle");this.set("uploaded",0);this.set("uploadTotal",null);this.bind("uploadedPercent").to(this,"uploaded",this,"uploadTotal",function(e,t){return t?e/t*100:0;});this.set("uploadResponse",null);}_createClass(zy,[{key:"read",value:function read(){var _this190=this;if(this.status!="idle"){throw new rr["b"]("filerepository-read-wrong-status: You cannot call read if the status is different than idle.",this);}this.status="reading";return this.file.then(function(e){return _this190._reader.read(e);}).then(function(e){_this190.status="idle";return e;})["catch"](function(e){if(e==="aborted"){_this190.status="aborted";throw"aborted";}_this190.status="error";throw _this190._reader.error?_this190._reader.error:e;});}},{key:"upload",value:function upload(){var _this191=this;if(this.status!="idle"){throw new rr["b"]("filerepository-upload-wrong-status: You cannot call upload if the status is different than idle.",this);}this.status="uploading";return this.file.then(function(){return _this191._adapter.upload();}).then(function(e){_this191.uploadResponse=e;_this191.status="idle";return e;})["catch"](function(e){if(_this191.status==="aborted"){throw"aborted";}_this191.status="error";throw e;});}},{key:"abort",value:function abort(){var e=this.status;this.status="aborted";if(!this._filePromiseWrapper.isFulfilled){this._filePromiseWrapper.promise["catch"](function(){});this._filePromiseWrapper.rejecter("aborted");}else if(e=="reading"){this._reader.abort();}else if(e=="uploading"&&this._adapter.abort){this._adapter.abort();}this._destroy();}},{key:"_destroy",value:function _destroy(){this._filePromiseWrapper=undefined;this._reader=undefined;this._adapter=undefined;this.uploadResponse=undefined;}},{key:"_createFilePromiseWrapper",value:function _createFilePromiseWrapper(e){var t={};t.promise=new Promise(function(i,n){t.rejecter=n;t.isFulfilled=false;e.then(function(e){t.isFulfilled=true;i(e);})["catch"](function(e){t.isFulfilled=true;n(e);});});return t;}},{key:"file",get:function get(){var _this192=this;if(!this._filePromiseWrapper){return Promise.resolve(null);}else{return this._filePromiseWrapper.promise.then(function(e){return _this192._filePromiseWrapper?e:null;});}}},{key:"data",get:function get(){return this._reader.data;}}]);return zy;}();kr(zy,Jc);var Dy='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 250"><rect rx="4"/></svg>';var jy=i(76);var By=i(78);var Vy=i(80);var Fy=/*#__PURE__*/function(_bw40){_inherits(Fy,_bw40);function Fy(e){var _this193;_classCallCheck(this,Fy);_this193=_possibleConstructorReturn(this,_getPrototypeOf(Fy).call(this,e));_this193.placeholder="data:image/svg+xml;utf8,"+encodeURIComponent(Dy);return _this193;}_createClass(Fy,[{key:"init",value:function init(){var _this194=this;var e=this.editor;e.editing.downcastDispatcher.on("attribute:uploadStatus:image",function(){return _this194.uploadStatusChange.apply(_this194,arguments);});}},{key:"uploadStatusChange",value:function uploadStatusChange(e,t,i){var n=this.editor;var o=t.item;var s=o.getAttribute("uploadId");if(!i.consumable.consume(t.item,e.name)){return;}var r=n.plugins.get(Ly);var a=s?t.attributeNewValue:null;var c=this.placeholder;var l=n.editing.mapper.toViewElement(o);var d=i.writer;if(a=="reading"){Hy(l,d);Uy(c,l,d);return;}if(a=="uploading"){var _e255=r.loaders.get(s);Hy(l,d);if(!_e255){Uy(c,l,d);}else{$y(l,d);qy(l,d,_e255,n.editing.view);Zy(l,d,_e255);}return;}if(a=="complete"&&r.loaders.get(s)&&!Cl.isEdge){Gy(l,d,n.editing.view);}Yy(l,d);$y(l,d);Wy(l,d);}}]);return Fy;}(bw);function Hy(e,t){if(!e.hasClass("ck-appear")){t.addClass("ck-appear",e);}}function Wy(e,t){t.removeClass("ck-appear",e);}function Uy(e,t,i){if(!t.hasClass("ck-image-upload-placeholder")){i.addClass("ck-image-upload-placeholder",t);}var n=Wv(t);if(n.getAttribute("src")!==e){i.setAttribute("src",e,n);}if(!Ky(t,"placeholder")){i.insert(i.createPositionAfter(n),Xy(i));}}function $y(e,t){if(e.hasClass("ck-image-upload-placeholder")){t.removeClass("ck-image-upload-placeholder",e);}Qy(e,t,"placeholder");}function qy(e,t,i,n){var o=Jy(t);t.insert(t.createPositionAt(e,"end"),o);i.on("change:uploadedPercent",function(e,t,i){n.change(function(e){e.setStyle("width",i+"%",o);});});}function Yy(e,t){Qy(e,t,"progressBar");}function Gy(e,t,i){var n=t.createUIElement("div",{"class":"ck-image-upload-complete-icon"});t.insert(t.createPositionAt(e,"end"),n);setTimeout(function(){i.change(function(e){return e.remove(e.createRangeOn(n));});},3e3);}function Jy(e){var t=e.createUIElement("div",{"class":"ck-progress-bar"});e.setCustomProperty("progressBar",true,t);return t;}function Xy(e){var t=e.createUIElement("div",{"class":"ck-upload-placeholder-loader"});e.setCustomProperty("placeholder",true,t);return t;}function Ky(e,t){var _iteratorNormalCompletion307=true;var _didIteratorError307=false;var _iteratorError307=undefined;try{for(var _iterator307=e.getChildren()[Symbol.iterator](),_step307;!(_iteratorNormalCompletion307=(_step307=_iterator307.next()).done);_iteratorNormalCompletion307=true){var _i237=_step307.value;if(_i237.getCustomProperty(t)){return _i237;}}}catch(err){_didIteratorError307=true;_iteratorError307=err;}finally{try{if(!_iteratorNormalCompletion307&&_iterator307["return"]!=null){_iterator307["return"]();}}finally{if(_didIteratorError307){throw _iteratorError307;}}}}function Qy(e,t,i){var n=Ky(e,i);if(n){t.remove(t.createRangeOn(n));}}function Zy(e,t,i){if(i.data){var _n125=Wv(e);t.setAttribute("src",i.data,_n125);}}var ex=/*#__PURE__*/function(_Ny2){_inherits(ex,_Ny2);function ex(){_classCallCheck(this,ex);return _possibleConstructorReturn(this,_getPrototypeOf(ex).apply(this,arguments));}_createClass(ex,[{key:"init",value:function init(){this.on("show:warning",function(e,t){window.alert(t.message);},{priority:"lowest"});}},{key:"showSuccess",value:function showSuccess(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this._showNotification({message:e,type:"success",namespace:t.namespace,title:t.title});}},{key:"showInfo",value:function showInfo(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this._showNotification({message:e,type:"info",namespace:t.namespace,title:t.title});}},{key:"showWarning",value:function showWarning(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this._showNotification({message:e,type:"warning",namespace:t.namespace,title:t.title});}},{key:"_showNotification",value:function _showNotification(e){var t="show:".concat(e.type)+(e.namespace?":".concat(e.namespace):"");this.fire(t,{message:e.message,type:e.type,title:e.title||""});}}],[{key:"pluginName",get:function get(){return"Notification";}}]);return ex;}(Ny);var tx=/*#__PURE__*/function(){function tx(e){_classCallCheck(this,tx);this.files=ix(e);this._native=e;}_createClass(tx,[{key:"getData",value:function getData(e){return this._native.getData(e);}},{key:"setData",value:function setData(e,t){this._native.setData(e,t);}},{key:"types",get:function get(){return this._native.types;}}]);return tx;}();function ix(e){var t=e.files?Array.from(e.files):[];var i=e.items?Array.from(e.items):[];if(t.length){return t;}return i.filter(function(e){return e.kind==="file";}).map(function(e){return e.getAsFile();});}var nx=/*#__PURE__*/function(_Ju6){_inherits(nx,_Ju6);function nx(e){var _this195;_classCallCheck(this,nx);_this195=_possibleConstructorReturn(this,_getPrototypeOf(nx).call(this,e));var t=_this195.document;_this195.domEventType=["paste","copy","cut","drop","dragover"];_this195.listenTo(t,"paste",i,{priority:"low"});_this195.listenTo(t,"drop",i,{priority:"low"});function i(e,i){i.preventDefault();var n=i.dropRange?[i.dropRange]:Array.from(t.selection.getRanges());var o=new er(t,"clipboardInput");t.fire(o,{dataTransfer:i.dataTransfer,targetRanges:n});if(o.stop.called){i.stopPropagation();}}return _this195;}_createClass(nx,[{key:"onDomEvent",value:function onDomEvent(e){var t={dataTransfer:new tx(e.clipboardData?e.clipboardData:e.dataTransfer)};if(e.type=="drop"){t.dropRange=ox(this.view,e);}this.fire(e.type,e,t);}}]);return nx;}(Ju);function ox(e,t){var i=t.target.ownerDocument;var n=t.clientX;var o=t.clientY;var s;if(i.caretRangeFromPoint&&i.caretRangeFromPoint(n,o)){s=i.caretRangeFromPoint(n,o);}else if(t.rangeParent){s=i.createRange();s.setStart(t.rangeParent,t.rangeOffset);s.collapse(true);}if(s){return e.domConverter.domRangeToView(s);}else{return e.document.selection.getFirstRange();}}function sx(e){e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"</p><p>").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;");if(e.indexOf("</p><p>")>-1){e="<p>".concat(e,"</p>");}return e;}function rx(e){return e.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,function(e,t){if(t.length==1){return" ";}return t;});}var ax=["figcaption","li"];function cx(e){var t="";if(e.is("text")||e.is("textProxy")){t=e.data;}else if(e.is("img")&&e.hasAttribute("alt")){t=e.getAttribute("alt");}else{var _i238=null;var _iteratorNormalCompletion308=true;var _didIteratorError308=false;var _iteratorError308=undefined;try{for(var _iterator308=e.getChildren()[Symbol.iterator](),_step308;!(_iteratorNormalCompletion308=(_step308=_iterator308.next()).done);_iteratorNormalCompletion308=true){var _n126=_step308.value;var _e256=cx(_n126);if(_i238&&(_i238.is("containerElement")||_n126.is("containerElement"))){if(ax.includes(_i238.name)||ax.includes(_n126.name)){t+="\n";}else{t+="\n\n";}}t+=_e256;_i238=_n126;}}catch(err){_didIteratorError308=true;_iteratorError308=err;}finally{try{if(!_iteratorNormalCompletion308&&_iterator308["return"]!=null){_iterator308["return"]();}}finally{if(_didIteratorError308){throw _iteratorError308;}}}}return t;}var lx=/*#__PURE__*/function(_bw41){_inherits(lx,_bw41);function lx(){_classCallCheck(this,lx);return _possibleConstructorReturn(this,_getPrototypeOf(lx).apply(this,arguments));}_createClass(lx,[{key:"init",value:function init(){var _this196=this;var e=this.editor;var t=e.model.document;var i=e.editing.view;var n=i.document;this._htmlDataProcessor=new pp(n);i.addObserver(nx);this.listenTo(n,"clipboardInput",function(t){if(e.isReadOnly){t.stop();}},{priority:"highest"});this.listenTo(n,"clipboardInput",function(e,t){var n=t.dataTransfer;var o="";if(n.getData("text/html")){o=rx(n.getData("text/html"));}else if(n.getData("text/plain")){o=sx(n.getData("text/plain"));}o=_this196._htmlDataProcessor.toView(o);_this196.fire("inputTransformation",{content:o,dataTransfer:n});i.scrollToTheSelection();},{priority:"low"});this.listenTo(this,"inputTransformation",function(e,t){if(!t.content.isEmpty){var _e257=_this196.editor.data;var _i239=_this196.editor.model;var _n127=_e257.toModel(t.content,"$clipboardHolder");if(_n127.childCount==0){return;}_i239.insertContent(_n127);}},{priority:"low"});function o(i,o){var s=o.dataTransfer;o.preventDefault();var r=e.data.toView(e.model.getSelectedContent(t.selection));n.fire("clipboardOutput",{dataTransfer:s,content:r,method:i.name});}this.listenTo(n,"copy",o,{priority:"low"});this.listenTo(n,"cut",function(t,i){if(e.isReadOnly){i.preventDefault();}else{o(t,i);}},{priority:"low"});this.listenTo(n,"clipboardOutput",function(i,n){if(!n.content.isEmpty){n.dataTransfer.setData("text/html",_this196._htmlDataProcessor.toData(n.content));n.dataTransfer.setData("text/plain",cx(n.content));}if(n.method=="cut"){e.model.deleteContent(t.selection);}},{priority:"low"});}}],[{key:"pluginName",get:function get(){return"Clipboard";}}]);return lx;}(bw);var dx=/*#__PURE__*/function(){function dx(e){_classCallCheck(this,dx);this.document=e;}_createClass(dx,[{key:"createDocumentFragment",value:function createDocumentFragment(e){return new Ul(this.document,e);}},{key:"createElement",value:function createElement(e,t,i){return new Dc(this.document,e,t,i);}},{key:"createText",value:function createText(e){return new jr(this.document,e);}},{key:"clone",value:function clone(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;return e._clone(t);}},{key:"appendChild",value:function appendChild(e,t){return t._appendChild(e);}},{key:"insertChild",value:function insertChild(e,t,i){return i._insertChild(e,t);}},{key:"removeChildren",value:function removeChildren(e,t,i){return i._removeChildren(e,t);}},{key:"remove",value:function remove(e){var t=e.parent;if(t){return this.removeChildren(t.getChildIndex(e),1,t);}return[];}},{key:"replace",value:function replace(e,t){var i=e.parent;if(i){var _n128=i.getChildIndex(e);this.removeChildren(_n128,1,i);this.insertChild(_n128,t,i);return true;}return false;}},{key:"unwrapElement",value:function unwrapElement(e){var t=e.parent;if(t){var _i240=t.getChildIndex(e);this.remove(e);this.insertChild(_i240,e.getChildren(),t);}}},{key:"rename",value:function rename(e,t){var i=new Dc(this.document,e,t.getAttributes(),t.getChildren());return this.replace(t,i)?i:null;}},{key:"setAttribute",value:function setAttribute(e,t,i){i._setAttribute(e,t);}},{key:"removeAttribute",value:function removeAttribute(e,t){t._removeAttribute(e);}},{key:"addClass",value:function addClass(e,t){t._addClass(e);}},{key:"removeClass",value:function removeClass(e,t){t._removeClass(e);}},{key:"setStyle",value:function setStyle(e,t,i){if(R(e)&&i===undefined){i=t;}i._setStyle(e,t);}},{key:"removeStyle",value:function removeStyle(e,t){t._removeStyle(e);}},{key:"setCustomProperty",value:function setCustomProperty(e,t,i){i._setCustomProperty(e,t);}},{key:"removeCustomProperty",value:function removeCustomProperty(e,t){return t._removeCustomProperty(e);}},{key:"createPositionAt",value:function createPositionAt(e,t){return dl._createAt(e,t);}},{key:"createPositionAfter",value:function createPositionAfter(e){return dl._createAfter(e);}},{key:"createPositionBefore",value:function createPositionBefore(e){return dl._createBefore(e);}},{key:"createRange",value:function createRange(e,t){return new ul(e,t);}},{key:"createRangeOn",value:function createRangeOn(e){return ul._createOn(e);}},{key:"createRangeIn",value:function createRangeIn(e){return ul._createIn(e);}},{key:"createSelection",value:function createSelection(e,t,i){return new ml(e,t,i);}}]);return dx;}();var ux=/*#__PURE__*/function(_w12){_inherits(ux,_w12);function ux(){_classCallCheck(this,ux);return _possibleConstructorReturn(this,_getPrototypeOf(ux).apply(this,arguments));}_createClass(ux,[{key:"refresh",value:function refresh(){this.isEnabled=Hv(this.editor.model);}},{key:"execute",value:function execute(e){var t=this.editor;var i=t.model;var n=t.plugins.get(Ly);i.change(function(t){var o=Array.isArray(e.file)?e.file:[e.file];var _iteratorNormalCompletion309=true;var _didIteratorError309=false;var _iteratorError309=undefined;try{for(var _iterator309=o[Symbol.iterator](),_step309;!(_iteratorNormalCompletion309=(_step309=_iterator309.next()).done);_iteratorNormalCompletion309=true){var _e258=_step309.value;hx(t,i,n,_e258);}}catch(err){_didIteratorError309=true;_iteratorError309=err;}finally{try{if(!_iteratorNormalCompletion309&&_iterator309["return"]!=null){_iterator309["return"]();}}finally{if(_didIteratorError309){throw _iteratorError309;}}}});}}]);return ux;}(_w);function hx(e,t,i,n){var o=i.createLoader(n);if(!o){return;}Fv(e,t,{uploadId:o.id});}var fx=/*#__PURE__*/function(_bw42){_inherits(fx,_bw42);_createClass(fx,null,[{key:"requires",get:function get(){return[Ly,ex,lx];}},{key:"pluginName",get:function get(){return"ImageUploadEditing";}}]);function fx(e){var _this197;_classCallCheck(this,fx);_this197=_possibleConstructorReturn(this,_getPrototypeOf(fx).call(this,e));e.config.define("image",{upload:{types:["jpeg","png","gif","bmp","webp","tiff"]}});return _this197;}_createClass(fx,[{key:"init",value:function init(){var _this198=this;var e=this.editor;var t=e.model.document;var i=e.model.schema;var n=e.conversion;var o=e.plugins.get(Ly);var s=Ty(e.config.get("image.upload.types"));i.extend("image",{allowAttributes:["uploadId","uploadStatus"]});e.commands.add("imageUpload",new ux(e));n["for"]("upcast").attributeToAttribute({view:{name:"img",key:"uploadId"},model:"uploadId"});this.listenTo(e.editing.view.document,"clipboardInput",function(t,i){if(mx(i.dataTransfer)){return;}var n=Array.from(i.dataTransfer.files).filter(function(e){if(!e){return false;}return s.test(e.type);});var o=i.targetRanges.map(function(t){return e.editing.mapper.toModelRange(t);});e.model.change(function(i){i.setSelection(o);if(n.length){t.stop();e.model.enqueueChange("default",function(){e.execute("imageUpload",{file:n});});}});});this.listenTo(e.plugins.get(lx),"inputTransformation",function(t,i){var n=Array.from(e.editing.view.createRangeIn(i.content)).filter(function(e){return Ey(e.item)&&!e.item.getAttribute("uploadProcessed");}).map(function(e){return{promise:My(e.item),imageElement:e.item};});if(!n.length){return;}var s=new dx(e.editing.view.document);var _iteratorNormalCompletion310=true;var _didIteratorError310=false;var _iteratorError310=undefined;try{for(var _iterator310=n[Symbol.iterator](),_step310;!(_iteratorNormalCompletion310=(_step310=_iterator310.next()).done);_iteratorNormalCompletion310=true){var _e259=_step310.value;s.setAttribute("uploadProcessed",true,_e259.imageElement);var _t233=o.createLoader(_e259.promise);if(_t233){s.setAttribute("src","",_e259.imageElement);s.setAttribute("uploadId",_t233.id,_e259.imageElement);}}}catch(err){_didIteratorError310=true;_iteratorError310=err;}finally{try{if(!_iteratorNormalCompletion310&&_iterator310["return"]!=null){_iterator310["return"]();}}finally{if(_didIteratorError310){throw _iteratorError310;}}}});e.editing.view.document.on("dragover",function(e,t){t.preventDefault();});t.on("change",function(){var i=t.differ.getChanges({includeChangesInGraveyard:true});var _iteratorNormalCompletion311=true;var _didIteratorError311=false;var _iteratorError311=undefined;try{for(var _iterator311=i[Symbol.iterator](),_step311;!(_iteratorNormalCompletion311=(_step311=_iterator311.next()).done);_iteratorNormalCompletion311=true){var _t234=_step311.value;if(_t234.type=="insert"&&_t234.name!="$text"){var _i241=_t234.position.nodeAfter;var _n129=_t234.position.root.rootName=="$graveyard";var _iteratorNormalCompletion312=true;var _didIteratorError312=false;var _iteratorError312=undefined;try{for(var _iterator312=gx(e,_i241)[Symbol.iterator](),_step312;!(_iteratorNormalCompletion312=(_step312=_iterator312.next()).done);_iteratorNormalCompletion312=true){var _t235=_step312.value;var _e260=_t235.getAttribute("uploadId");if(!_e260){continue;}var _i242=o.loaders.get(_e260);if(!_i242){continue;}if(_n129){_i242.abort();}else if(_i242.status=="idle"){_this198._readAndUpload(_i242,_t235);}}}catch(err){_didIteratorError312=true;_iteratorError312=err;}finally{try{if(!_iteratorNormalCompletion312&&_iterator312["return"]!=null){_iterator312["return"]();}}finally{if(_didIteratorError312){throw _iteratorError312;}}}}}}catch(err){_didIteratorError311=true;_iteratorError311=err;}finally{try{if(!_iteratorNormalCompletion311&&_iterator311["return"]!=null){_iterator311["return"]();}}finally{if(_didIteratorError311){throw _iteratorError311;}}}});}},{key:"_readAndUpload",value:function _readAndUpload(e,t){var _this199=this;var i=this.editor;var n=i.model;var o=i.locale.t;var s=i.plugins.get(Ly);var r=i.plugins.get(ex);n.enqueueChange("transparent",function(e){e.setAttribute("uploadStatus","reading",t);});return e.read().then(function(){var o=e.upload();if(Cl.isSafari){var _e261=i.editing.mapper.toViewElement(t);var _n130=Wv(_e261);i.editing.view.once("render",function(){if(!_n130.parent){return;}var e=i.editing.view.domConverter.mapViewToDom(_n130.parent);if(!e){return;}var t=e.style.display;e.style.display="none";e._ckHack=e.offsetHeight;e.style.display=t;});}n.enqueueChange("transparent",function(e){e.setAttribute("uploadStatus","uploading",t);});return o;}).then(function(e){n.enqueueChange("transparent",function(i){i.setAttributes({uploadStatus:"complete",src:e["default"]},t);_this199._parseAndSetSrcsetAttributeOnImage(e,t,i);});a();})["catch"](function(i){if(e.status!=="error"&&e.status!=="aborted"){throw i;}if(e.status=="error"&&i){r.showWarning(i,{title:o("ax"),namespace:"upload"});}a();n.enqueueChange("transparent",function(e){e.remove(t);});});function a(){n.enqueueChange("transparent",function(e){e.removeAttribute("uploadId",t);e.removeAttribute("uploadStatus",t);});s.destroyLoader(e);}}},{key:"_parseAndSetSrcsetAttributeOnImage",value:function _parseAndSetSrcsetAttributeOnImage(e,t,i){var n=0;var o=Object.keys(e).filter(function(e){var t=parseInt(e,10);if(!isNaN(t)){n=Math.max(n,t);return true;}}).map(function(t){return"".concat(e[t]," ").concat(t,"w");}).join(", ");if(o!=""){i.setAttribute("srcset",{data:o,width:n},t);}}}]);return fx;}(bw);function mx(e){return Array.from(e.types).includes("text/html")&&e.getData("text/html")!=="";}function gx(e,t){return Array.from(e.model.createRangeOn(t)).filter(function(e){return e.item.is("image");}).map(function(e){return e.item;});}var px=/*#__PURE__*/function(_bw43){_inherits(px,_bw43);function px(){_classCallCheck(this,px);return _possibleConstructorReturn(this,_getPrototypeOf(px).apply(this,arguments));}_createClass(px,null,[{key:"pluginName",get:function get(){return"ImageUpload";}},{key:"requires",get:function get(){return[fx,Iy,Fy];}}]);return px;}(bw);var bx=/*#__PURE__*/function(_w13){_inherits(bx,_w13);function bx(e){var _this200;_classCallCheck(this,bx);_this200=_possibleConstructorReturn(this,_getPrototypeOf(bx).call(this,e));_this200._childCommands=[];return _this200;}_createClass(bx,[{key:"refresh",value:function refresh(){}},{key:"execute",value:function execute(){var t=this._getFirstEnabledCommand();for(var _len22=arguments.length,e=new Array(_len22),_key22=0;_key22<_len22;_key22++){e[_key22]=arguments[_key22];}t.execute(e);}},{key:"registerChildCommand",value:function registerChildCommand(e){var _this201=this;this._childCommands.push(e);e.on("change:isEnabled",function(){return _this201._checkEnabled();});this._checkEnabled();}},{key:"_checkEnabled",value:function _checkEnabled(){this.isEnabled=!!this._getFirstEnabledCommand();}},{key:"_getFirstEnabledCommand",value:function _getFirstEnabledCommand(){return this._childCommands.find(function(e){return e.isEnabled;});}}]);return bx;}(_w);var wx=/*#__PURE__*/function(_bw44){_inherits(wx,_bw44);function wx(){_classCallCheck(this,wx);return _possibleConstructorReturn(this,_getPrototypeOf(wx).apply(this,arguments));}_createClass(wx,[{key:"init",value:function init(){var e=this.editor;e.commands.add("indent",new bx(e));e.commands.add("outdent",new bx(e));}}],[{key:"pluginName",get:function get(){return"IndentEditing";}}]);return wx;}(bw);var _x='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95L5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z"/></svg>';var vx='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z"/></svg>';var kx=/*#__PURE__*/function(_bw45){_inherits(kx,_bw45);function kx(){_classCallCheck(this,kx);return _possibleConstructorReturn(this,_getPrototypeOf(kx).apply(this,arguments));}_createClass(kx,[{key:"init",value:function init(){var e=this.editor;var t=e.locale;var i=e.t;var n=t.uiLanguageDirection=="ltr"?_x:vx;var o=t.uiLanguageDirection=="ltr"?vx:_x;this._defineButton("indent",i("ew"),n);this._defineButton("outdent",i("ex"),o);}},{key:"_defineButton",value:function _defineButton(e,t,i){var _this202=this;var n=this.editor;n.ui.componentFactory.add(e,function(o){var s=n.commands.get(e);var r=new Vb(o);r.set({label:t,icon:i,tooltip:true});r.bind("isOn","isEnabled").to(s,"value","isEnabled");_this202.listenTo(r,"execute",function(){n.execute(e);n.editing.view.focus();});return r;});}}],[{key:"pluginName",get:function get(){return"IndentUI";}}]);return kx;}(bw);var yx=/*#__PURE__*/function(_bw46){_inherits(yx,_bw46);function yx(){_classCallCheck(this,yx);return _possibleConstructorReturn(this,_getPrototypeOf(yx).apply(this,arguments));}_createClass(yx,null,[{key:"pluginName",get:function get(){return"Indent";}},{key:"requires",get:function get(){return[wx,kx];}}]);return yx;}(bw);var xx=/*#__PURE__*/function(_w14){_inherits(xx,_w14);function xx(e,t){var _this203;_classCallCheck(this,xx);_this203=_possibleConstructorReturn(this,_getPrototypeOf(xx).call(this,e));_this203._indentBehavior=t;return _this203;}_createClass(xx,[{key:"refresh",value:function refresh(){var e=this.editor;var t=e.model;var i=kw(t.document.selection.getSelectedBlocks());if(!i||!t.schema.checkAttribute(i,"blockIndent")){this.isEnabled=false;return;}this.isEnabled=this._indentBehavior.checkEnabled(i.getAttribute("blockIndent"));}},{key:"execute",value:function execute(){var _this204=this;var e=this.editor.model;var t=Ax(e);e.change(function(e){var _iteratorNormalCompletion313=true;var _didIteratorError313=false;var _iteratorError313=undefined;try{for(var _iterator313=t[Symbol.iterator](),_step313;!(_iteratorNormalCompletion313=(_step313=_iterator313.next()).done);_iteratorNormalCompletion313=true){var _i243=_step313.value;var _t236=_i243.getAttribute("blockIndent");var _n131=_this204._indentBehavior.getNextIndent(_t236);if(_n131){e.setAttribute("blockIndent",_n131,_i243);}else{e.removeAttribute("blockIndent",_i243);}}}catch(err){_didIteratorError313=true;_iteratorError313=err;}finally{try{if(!_iteratorNormalCompletion313&&_iterator313["return"]!=null){_iterator313["return"]();}}finally{if(_didIteratorError313){throw _iteratorError313;}}}});}}]);return xx;}(_w);function Ax(e){var t=e.document.selection;var i=e.schema;var n=Array.from(t.getSelectedBlocks());return n.filter(function(e){return i.checkAttribute(e,"blockIndent");});}var Cx=/*#__PURE__*/function(){function Cx(e){_classCallCheck(this,Cx);this.isForward=e.direction==="forward";this.offset=e.offset;this.unit=e.unit;}_createClass(Cx,[{key:"checkEnabled",value:function checkEnabled(e){var t=parseFloat(e||0);return this.isForward||t>0;}},{key:"getNextIndent",value:function getNextIndent(e){var t=parseFloat(e||0);var i=!e||e.endsWith(this.unit);if(!i){return this.isForward?this.offset+this.unit:undefined;}var n=this.isForward?this.offset:-this.offset;var o=t+n;return o>0?o+this.unit:undefined;}}]);return Cx;}();var Tx=/*#__PURE__*/function(){function Tx(e){_classCallCheck(this,Tx);this.isForward=e.direction==="forward";this.classes=e.classes;}_createClass(Tx,[{key:"checkEnabled",value:function checkEnabled(e){var t=this.classes.indexOf(e);if(this.isForward){return t<this.classes.length-1;}else{return t>=0;}}},{key:"getNextIndent",value:function getNextIndent(e){var t=this.classes.indexOf(e);var i=this.isForward?1:-1;return this.classes[t+i];}}]);return Tx;}();var Mx=/^#([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i;var Ex=/^rgb\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}[0-9]{1,3}[ %]?\)$/i;var Px=/^rgba\([ ]?([0-9]{1,3}[ %]?,[ ]?){3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i;var Sx=/^hsl\([ ]?([0-9]{1,3}[ %]?[,]?[ ]*){3}(1|[0-9]+%|[0]?\.?[0-9]+)?\)$/i;var Ix=/^hsla\([ ]?([0-9]{1,3}[ %]?,[ ]?){2,3}(1|[0-9]+%|[0]?\.?[0-9]+)\)$/i;var Nx=new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","rebeccapurple","currentcolor","transparent"]);function Ox(e){if(e.startsWith("#")){return Mx.test(e);}if(e.startsWith("rgb")){return Ex.test(e)||Px.test(e);}if(e.startsWith("hsl")){return Sx.test(e)||Ix.test(e);}return Nx.has(e.toLowerCase());}var Rx=["none","hidden","dotted","dashed","solid","double","groove","ridge","inset","outset"];function Lx(e){return Rx.includes(e);}var zx=/^([+-]?[0-9]*[.]?[0-9]+(px|cm|mm|in|pc|pt|ch|em|ex|rem|vh|vw|vmin|vmax)|0)$/;function Dx(e){return zx.test(e);}var jx=/^[+-]?[0-9]*[.]?[0-9]+%$/;function Bx(e){return jx.test(e);}var Vx=["repeat-x","repeat-y","repeat","space","round","no-repeat"];function Fx(e){return Vx.includes(e);}var Hx=["center","top","bottom","left","right"];function Wx(e){return Hx.includes(e);}var Ux=["fixed","scroll","local"];function $x(e){return Ux.includes(e);}var qx=/^url\(/;function Yx(e){return qx.test(e);}function Gx(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";if(e===""){return{top:undefined,right:undefined,bottom:undefined,left:undefined};}var t=Qx(e);var i=t[0];var n=t[2]||i;var o=t[1]||i;var s=t[3]||o;return{top:i,bottom:n,right:o,left:s};}function Jx(e){return function(t){var i=t.top,n=t.right,o=t.bottom,s=t.left;var r=[];if(![i,n,s,o].every(function(e){return!!e;})){if(i){r.push([e+"-top",i]);}if(n){r.push([e+"-right",n]);}if(o){r.push([e+"-bottom",o]);}if(s){r.push([e+"-left",s]);}}else{r.push([e,Xx(t)]);}return r;};}function Xx(_ref41){var e=_ref41.top,t=_ref41.right,i=_ref41.bottom,n=_ref41.left;var o=[];if(n!==t){o.push(e,t,i,n);}else if(i!==e){o.push(e,t,i);}else if(t!==e){o.push(e,t);}else{o.push(e);}return o.join(" ");}function Kx(e){return function(t){return{path:e,value:Gx(t)};};}function Qx(e){return e.replace(/, /g,",").split(" ").map(function(e){return e.replace(/,/g,", ");});}function Zx(e){e.setNormalizer("margin",Kx("margin"));e.setNormalizer("margin-top",function(e){return{path:"margin.top",value:e};});e.setNormalizer("margin-right",function(e){return{path:"margin.right",value:e};});e.setNormalizer("margin-bottom",function(e){return{path:"margin.bottom",value:e};});e.setNormalizer("margin-left",function(e){return{path:"margin.left",value:e};});e.setReducer("margin",Jx("margin"));e.setStyleRelation("margin",["margin-top","margin-right","margin-bottom","margin-left"]);}var eA=/*#__PURE__*/function(_bw47){_inherits(eA,_bw47);function eA(e){var _this205;_classCallCheck(this,eA);_this205=_possibleConstructorReturn(this,_getPrototypeOf(eA).call(this,e));e.config.define("indentBlock",{offset:40,unit:"px"});return _this205;}_createClass(eA,[{key:"init",value:function init(){var e=this.editor;var t=e.config.get("indentBlock");var i=!t.classes||!t.classes.length;var n=Object.assign({direction:"forward"},t);var o=Object.assign({direction:"backward"},t);if(i){e.data.addStyleProcessorRules(Zx);this._setupConversionUsingOffset(e.conversion);e.commands.add("indentBlock",new xx(e,new Cx(n)));e.commands.add("outdentBlock",new xx(e,new Cx(o)));}else{this._setupConversionUsingClasses(t.classes);e.commands.add("indentBlock",new xx(e,new Tx(n)));e.commands.add("outdentBlock",new xx(e,new Tx(o)));}}},{key:"afterInit",value:function afterInit(){var e=this.editor;var t=e.model.schema;var i=e.commands.get("indent");var n=e.commands.get("outdent");var o=["paragraph","heading1","heading2","heading3","heading4","heading5","heading6"];o.forEach(function(e){if(t.isRegistered(e)){t.extend(e,{allowAttributes:"blockIndent"});}});i.registerChildCommand(e.commands.get("indentBlock"));n.registerChildCommand(e.commands.get("outdentBlock"));}},{key:"_setupConversionUsingOffset",value:function _setupConversionUsingOffset(){var e=this.editor.conversion;var t=this.editor.locale;var i=t.contentLanguageDirection==="rtl"?"margin-right":"margin-left";e["for"]("upcast").attributeToAttribute({view:{styles:_defineProperty({},i,/[\s\S]+/)},model:{key:"blockIndent",value:function value(e){return e.getStyle(i);}}});e["for"]("downcast").attributeToAttribute({model:"blockIndent",view:function view(e){return{key:"style",value:_defineProperty({},i,e)};}});}},{key:"_setupConversionUsingClasses",value:function _setupConversionUsingClasses(e){var t={model:{key:"blockIndent",values:[]},view:{}};var _iteratorNormalCompletion314=true;var _didIteratorError314=false;var _iteratorError314=undefined;try{for(var _iterator314=e[Symbol.iterator](),_step314;!(_iteratorNormalCompletion314=(_step314=_iterator314.next()).done);_iteratorNormalCompletion314=true){var _i244=_step314.value;t.model.values.push(_i244);t.view[_i244]={key:"class",value:[_i244]};}}catch(err){_didIteratorError314=true;_iteratorError314=err;}finally{try{if(!_iteratorNormalCompletion314&&_iterator314["return"]!=null){_iterator314["return"]();}}finally{if(_didIteratorError314){throw _iteratorError314;}}}this.editor.conversion.attributeToAttribute(t);}}],[{key:"pluginName",get:function get(){return"IndentBlock";}}]);return eA;}(bw);var tA="italic";var iA=/*#__PURE__*/function(_bw48){_inherits(iA,_bw48);function iA(){_classCallCheck(this,iA);return _possibleConstructorReturn(this,_getPrototypeOf(iA).apply(this,arguments));}_createClass(iA,[{key:"init",value:function init(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:tA});e.model.schema.setAttributeProperties(tA,{isFormatting:true,copyOnEnter:true});e.conversion.attributeToElement({model:tA,view:"i",upcastAlso:["em",{styles:{"font-style":"italic"}}]});e.commands.add(tA,new Zw(e,tA));e.keystrokes.set("CTRL+I",tA);}}],[{key:"pluginName",get:function get(){return"ItalicEditing";}}]);return iA;}(bw);var nA='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.586 14.633l.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z"/></svg>';var oA="italic";var sA=/*#__PURE__*/function(_bw49){_inherits(sA,_bw49);function sA(){_classCallCheck(this,sA);return _possibleConstructorReturn(this,_getPrototypeOf(sA).apply(this,arguments));}_createClass(sA,[{key:"init",value:function init(){var _this206=this;var e=this.editor;var t=e.t;e.ui.componentFactory.add(oA,function(i){var n=e.commands.get(oA);var o=new Vb(i);o.set({label:t("aa"),icon:nA,keystroke:"CTRL+I",tooltip:true,isToggleable:true});o.bind("isOn","isEnabled").to(n,"value","isEnabled");_this206.listenTo(o,"execute",function(){e.execute(oA);e.editing.view.focus();});return o;});}}]);return sA;}(bw);var rA=/*#__PURE__*/function(_bw50){_inherits(rA,_bw50);function rA(){_classCallCheck(this,rA);return _possibleConstructorReturn(this,_getPrototypeOf(rA).apply(this,arguments));}_createClass(rA,null,[{key:"requires",get:function get(){return[iA,sA];}},{key:"pluginName",get:function get(){return"Italic";}}]);return rA;}(bw);function aA(e,t,i){return i.createRange(cA(e,t,true,i),cA(e,t,false,i));}function cA(e,t,i,n){var o=e.textNode||(i?e.nodeBefore:e.nodeAfter);var s=null;while(o&&o.getAttribute("linkHref")==t){s=o;o=i?o.previousSibling:o.nextSibling;}return s?n.createPositionAt(s,i?"before":"after"):e;}var lA=/*#__PURE__*/function(_w15){_inherits(lA,_w15);function lA(e){var _this207;_classCallCheck(this,lA);_this207=_possibleConstructorReturn(this,_getPrototypeOf(lA).call(this,e));_this207.manualDecorators=new yr();return _this207;}_createClass(lA,[{key:"restoreManualDecoratorStates",value:function restoreManualDecoratorStates(){var _iteratorNormalCompletion315=true;var _didIteratorError315=false;var _iteratorError315=undefined;try{for(var _iterator315=this.manualDecorators[Symbol.iterator](),_step315;!(_iteratorNormalCompletion315=(_step315=_iterator315.next()).done);_iteratorNormalCompletion315=true){var _e262=_step315.value;_e262.value=this._getDecoratorStateFromModel(_e262.id);}}catch(err){_didIteratorError315=true;_iteratorError315=err;}finally{try{if(!_iteratorNormalCompletion315&&_iterator315["return"]!=null){_iterator315["return"]();}}finally{if(_didIteratorError315){throw _iteratorError315;}}}}},{key:"refresh",value:function refresh(){var e=this.editor.model;var t=e.document;this.value=t.selection.getAttribute("linkHref");var _iteratorNormalCompletion316=true;var _didIteratorError316=false;var _iteratorError316=undefined;try{for(var _iterator316=this.manualDecorators[Symbol.iterator](),_step316;!(_iteratorNormalCompletion316=(_step316=_iterator316.next()).done);_iteratorNormalCompletion316=true){var _e263=_step316.value;_e263.value=this._getDecoratorStateFromModel(_e263.id);}}catch(err){_didIteratorError316=true;_iteratorError316=err;}finally{try{if(!_iteratorNormalCompletion316&&_iterator316["return"]!=null){_iterator316["return"]();}}finally{if(_didIteratorError316){throw _iteratorError316;}}}this.isEnabled=e.schema.checkAttributeInSelection(t.selection,"linkHref");}},{key:"execute",value:function execute(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=this.editor.model;var n=i.document.selection;var o=[];var s=[];for(var _e264 in t){if(t[_e264]){o.push(_e264);}else{s.push(_e264);}}i.change(function(t){if(n.isCollapsed){var _r25=n.getFirstPosition();if(n.hasAttribute("linkHref")){var _a13=aA(_r25,n.getAttribute("linkHref"),i);t.setAttribute("linkHref",e,_a13);o.forEach(function(e){t.setAttribute(e,true,_a13);});s.forEach(function(e){t.removeAttribute(e,_a13);});t.setSelection(_a13);}else if(e!==""){var _s38=Hr(n.getAttributes());_s38.set("linkHref",e);o.forEach(function(e){_s38.set(e,true);});var _a14=t.createText(e,_s38);i.insertContent(_a14,_r25);t.setSelection(t.createRangeOn(_a14));}}else{var _r26=i.schema.getValidRanges(n.getRanges(),"linkHref");var _iteratorNormalCompletion317=true;var _didIteratorError317=false;var _iteratorError317=undefined;try{var _loop9=function _loop9(){var i=_step317.value;t.setAttribute("linkHref",e,i);o.forEach(function(e){t.setAttribute(e,true,i);});s.forEach(function(e){t.removeAttribute(e,i);});};for(var _iterator317=_r26[Symbol.iterator](),_step317;!(_iteratorNormalCompletion317=(_step317=_iterator317.next()).done);_iteratorNormalCompletion317=true){_loop9();}}catch(err){_didIteratorError317=true;_iteratorError317=err;}finally{try{if(!_iteratorNormalCompletion317&&_iterator317["return"]!=null){_iterator317["return"]();}}finally{if(_didIteratorError317){throw _iteratorError317;}}}}});}},{key:"_getDecoratorStateFromModel",value:function _getDecoratorStateFromModel(e){var t=this.editor.model.document;return t.selection.getAttribute(e)||false;}}]);return lA;}(_w);var dA=/*#__PURE__*/function(_w16){_inherits(dA,_w16);function dA(){_classCallCheck(this,dA);return _possibleConstructorReturn(this,_getPrototypeOf(dA).apply(this,arguments));}_createClass(dA,[{key:"refresh",value:function refresh(){this.isEnabled=this.editor.model.document.selection.hasAttribute("linkHref");}},{key:"execute",value:function execute(){var e=this.editor;var t=this.editor.model;var i=t.document.selection;var n=e.commands.get("link");t.change(function(e){var o=i.isCollapsed?[aA(i.getFirstPosition(),i.getAttribute("linkHref"),t)]:i.getRanges();var _iteratorNormalCompletion318=true;var _didIteratorError318=false;var _iteratorError318=undefined;try{for(var _iterator318=o[Symbol.iterator](),_step318;!(_iteratorNormalCompletion318=(_step318=_iterator318.next()).done);_iteratorNormalCompletion318=true){var _t237=_step318.value;e.removeAttribute("linkHref",_t237);if(n){var _iteratorNormalCompletion319=true;var _didIteratorError319=false;var _iteratorError319=undefined;try{for(var _iterator319=n.manualDecorators[Symbol.iterator](),_step319;!(_iteratorNormalCompletion319=(_step319=_iterator319.next()).done);_iteratorNormalCompletion319=true){var _i245=_step319.value;e.removeAttribute(_i245.id,_t237);}}catch(err){_didIteratorError319=true;_iteratorError319=err;}finally{try{if(!_iteratorNormalCompletion319&&_iterator319["return"]!=null){_iterator319["return"]();}}finally{if(_didIteratorError319){throw _iteratorError319;}}}}}}catch(err){_didIteratorError318=true;_iteratorError318=err;}finally{try{if(!_iteratorNormalCompletion318&&_iterator318["return"]!=null){_iterator318["return"]();}}finally{if(_didIteratorError318){throw _iteratorError318;}}}});}}]);return dA;}(_w);function uA(e,t,i){var n=e.length;i=i===undefined?n:i;return!t&&i>=n?e:Ia(e,t,i);}var hA=uA;var fA="\\ud800-\\udfff",mA="\\u0300-\\u036f",gA="\\ufe20-\\ufe2f",pA="\\u20d0-\\u20ff",bA=mA+gA+pA,wA="\\ufe0e\\ufe0f";var _A="\\u200d";var vA=RegExp("["+_A+fA+bA+wA+"]");function kA(e){return vA.test(e);}var yA=kA;function xA(e){return e.split("");}var AA=xA;var CA="\\ud800-\\udfff",TA="\\u0300-\\u036f",MA="\\ufe20-\\ufe2f",EA="\\u20d0-\\u20ff",PA=TA+MA+EA,SA="\\ufe0e\\ufe0f";var IA="["+CA+"]",NA="["+PA+"]",OA="\\ud83c[\\udffb-\\udfff]",RA="(?:"+NA+"|"+OA+")",LA="[^"+CA+"]",zA="(?:\\ud83c[\\udde6-\\uddff]){2}",DA="[\\ud800-\\udbff][\\udc00-\\udfff]",jA="\\u200d";var BA=RA+"?",VA="["+SA+"]?",FA="(?:"+jA+"(?:"+[LA,zA,DA].join("|")+")"+VA+BA+")*",HA=VA+BA+FA,WA="(?:"+[LA+NA+"?",NA,zA,DA,IA].join("|")+")";var UA=RegExp(OA+"(?="+OA+")|"+WA+HA,"g");function $A(e){return e.match(UA)||[];}var qA=$A;function YA(e){return yA(e)?qA(e):AA(e);}var GA=YA;function JA(e){return function(t){t=va(t);var i=yA(t)?GA(t):undefined;var n=i?i[0]:t.charAt(0);var o=i?hA(i,1).join(""):t.slice(1);return n[e]()+o;};}var XA=JA;var KA=XA("toUpperCase");var QA=KA;var ZA=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g;var eC=/^(?:(?:https?|ftps?|mailto):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))/i;function tC(e){return e.is("attributeElement")&&!!e.getCustomProperty("link");}function iC(e,t){var i=t.createAttributeElement("a",{href:e},{priority:5});t.setCustomProperty("link",true,i);return i;}function nC(e){e=String(e);return oC(e)?e:"#";}function oC(e){var t=e.replace(ZA,"");return t.match(eC);}function sC(e,t){var i={"Open in a new tab":e("ey"),Downloadable:e("ez")};t.forEach(function(e){if(e.label&&i[e.label]){e.label=i[e.label];}return e;});return t;}function rC(e){var t=[];if(e){for(var _i246=0,_Object$entries2=Object.entries(e);_i246<_Object$entries2.length;_i246++){var _Object$entries2$_i=_slicedToArray(_Object$entries2[_i246],2),_i247=_Object$entries2$_i[0],_n132=_Object$entries2$_i[1];var _e265=Object.assign({},_n132,{id:"link".concat(QA(_i247))});t.push(_e265);}}return t;}var aC=/*#__PURE__*/function(){function aC(){_classCallCheck(this,aC);this._definitions=new Set();}_createClass(aC,[{key:"add",value:function add(e){var _this208=this;if(Array.isArray(e)){e.forEach(function(e){return _this208._definitions.add(e);});}else{this._definitions.add(e);}}},{key:"getDispatcher",value:function getDispatcher(){var _this209=this;return function(e){e.on("attribute:linkHref",function(e,t,i){if(!i.consumable.test(t.item,"attribute:linkHref")){return;}var n=i.writer;var o=n.document.selection;var _iteratorNormalCompletion320=true;var _didIteratorError320=false;var _iteratorError320=undefined;try{for(var _iterator320=_this209._definitions[Symbol.iterator](),_step320;!(_iteratorNormalCompletion320=(_step320=_iterator320.next()).done);_iteratorNormalCompletion320=true){var _e266=_step320.value;var _s39=n.createAttributeElement("a",_e266.attributes,{priority:5});n.setCustomProperty("link",true,_s39);if(_e266.callback(t.attributeNewValue)){if(t.item.is("selection")){n.wrap(o.getFirstRange(),_s39);}else{n.wrap(i.mapper.toViewRange(t.range),_s39);}}else{n.unwrap(i.mapper.toViewRange(t.range),_s39);}}}catch(err){_didIteratorError320=true;_iteratorError320=err;}finally{try{if(!_iteratorNormalCompletion320&&_iterator320["return"]!=null){_iterator320["return"]();}}finally{if(_didIteratorError320){throw _iteratorError320;}}}},{priority:"high"});};}},{key:"length",get:function get(){return this._definitions.size;}}]);return aC;}();var cC=function cC(_ref42){var e=_ref42.id,t=_ref42.label,i=_ref42.attributes;_classCallCheck(this,cC);this.id=e;this.set("value");this.label=t;this.attributes=i;};kr(cC,Jc);function lC(_ref43){var e=_ref43.view,t=_ref43.model,i=_ref43.emitter,n=_ref43.attribute,o=_ref43.locale;var s=new dC(t,i,n);var r=t.document.selection;i.listenTo(e.document,"keydown",function(e,t){if(!r.isCollapsed){return;}if(t.shiftKey||t.altKey||t.ctrlKey){return;}var i=t.keyCode==Rl.arrowright;var n=t.keyCode==Rl.arrowleft;if(!i&&!n){return;}var a=r.getFirstPosition();var c=o.contentLanguageDirection;var l;if(c==="ltr"&&i||c==="rtl"&&n){l=s.handleForwardMovement(a,t);}else{l=s.handleBackwardMovement(a,t);}if(l){e.stop();}},{priority:or.get("high")+1});}var dC=/*#__PURE__*/function(){function dC(e,t,i){var _this210=this;_classCallCheck(this,dC);this.model=e;this.attribute=i;this._modelSelection=e.document.selection;this._overrideUid=null;this._isNextGravityRestorationSkipped=false;t.listenTo(this._modelSelection,"change:range",function(e,t){if(_this210._isNextGravityRestorationSkipped){_this210._isNextGravityRestorationSkipped=false;return;}if(!_this210._isGravityOverridden){return;}if(!t.directChange&&uC(_this210._modelSelection.getFirstPosition(),i)){return;}_this210._restoreGravity();});}_createClass(dC,[{key:"handleForwardMovement",value:function handleForwardMovement(e,t){var i=this.attribute;if(this._isGravityOverridden){return;}if(e.isAtStart&&this._hasSelectionAttribute){return;}if(mC(e,i)&&this._hasSelectionAttribute){this._preventCaretMovement(t);this._removeSelectionAttribute();return true;}if(hC(e,i)){this._preventCaretMovement(t);this._overrideGravity();return true;}if(fC(e,i)&&this._hasSelectionAttribute){this._preventCaretMovement(t);this._overrideGravity();return true;}}},{key:"handleBackwardMovement",value:function handleBackwardMovement(e,t){var i=this.attribute;if(this._isGravityOverridden){if(mC(e,i)&&this._hasSelectionAttribute){this._preventCaretMovement(t);this._restoreGravity();this._removeSelectionAttribute();return true;}else{this._preventCaretMovement(t);this._restoreGravity();if(e.isAtStart){this._removeSelectionAttribute();}return true;}}else{if(mC(e,i)&&!this._hasSelectionAttribute){this._preventCaretMovement(t);this._setSelectionAttributeFromTheNodeBefore(e);return true;}if(e.isAtEnd&&fC(e,i)){if(this._hasSelectionAttribute){if(gC(e,i)){this._skipNextAutomaticGravityRestoration();this._overrideGravity();}return;}else{this._preventCaretMovement(t);this._setSelectionAttributeFromTheNodeBefore(e);return true;}}if(e.isAtStart){if(this._hasSelectionAttribute){this._removeSelectionAttribute();this._preventCaretMovement(t);return true;}return;}if(gC(e,i)){this._skipNextAutomaticGravityRestoration();this._overrideGravity();}}}},{key:"_overrideGravity",value:function _overrideGravity(){this._overrideUid=this.model.change(function(e){return e.overrideSelectionGravity();});}},{key:"_restoreGravity",value:function _restoreGravity(){var _this211=this;this.model.change(function(e){e.restoreSelectionGravity(_this211._overrideUid);_this211._overrideUid=null;});}},{key:"_preventCaretMovement",value:function _preventCaretMovement(e){e.preventDefault();}},{key:"_removeSelectionAttribute",value:function _removeSelectionAttribute(){var _this212=this;this.model.change(function(e){e.removeSelectionAttribute(_this212.attribute);});}},{key:"_setSelectionAttributeFromTheNodeBefore",value:function _setSelectionAttributeFromTheNodeBefore(e){var _this213=this;var t=this.attribute;this.model.change(function(i){i.setSelectionAttribute(_this213.attribute,e.nodeBefore.getAttribute(t));});}},{key:"_skipNextAutomaticGravityRestoration",value:function _skipNextAutomaticGravityRestoration(){this._isNextGravityRestorationSkipped=true;}},{key:"_isGravityOverridden",get:function get(){return!!this._overrideUid;}},{key:"_hasSelectionAttribute",get:function get(){return this._modelSelection.hasAttribute(this.attribute);}}]);return dC;}();function uC(e,t){return hC(e,t)||fC(e,t);}function hC(e,t){var i=e.nodeBefore,n=e.nodeAfter;var o=i?i.hasAttribute(t):false;var s=n?n.hasAttribute(t):false;return s&&(!o||i.getAttribute(t)!==n.getAttribute(t));}function fC(e,t){var i=e.nodeBefore,n=e.nodeAfter;var o=i?i.hasAttribute(t):false;var s=n?n.hasAttribute(t):false;return o&&(!s||i.getAttribute(t)!==n.getAttribute(t));}function mC(e,t){var i=e.nodeBefore,n=e.nodeAfter;var o=i?i.hasAttribute(t):false;var s=n?n.hasAttribute(t):false;if(!s||!o){return;}return n.getAttribute(t)!==i.getAttribute(t);}function gC(e,t){return uC(e.getShiftedBy(-1),t);}var pC=i(82);var bC="ck-link_selected";var wC="automatic";var _C="manual";var vC=/^(https?:)?\/\//;var kC=/*#__PURE__*/function(_bw51){_inherits(kC,_bw51);_createClass(kC,null,[{key:"pluginName",get:function get(){return"LinkEditing";}}]);function kC(e){var _this214;_classCallCheck(this,kC);_this214=_possibleConstructorReturn(this,_getPrototypeOf(kC).call(this,e));e.config.define("link",{addTargetToExternalLinks:false});return _this214;}_createClass(kC,[{key:"init",value:function init(){var e=this.editor;var t=e.locale;e.model.schema.extend("$text",{allowAttributes:"linkHref"});e.conversion["for"]("dataDowncast").attributeToElement({model:"linkHref",view:iC});e.conversion["for"]("editingDowncast").attributeToElement({model:"linkHref",view:function view(e,t){return iC(nC(e),t);}});e.conversion["for"]("upcast").elementToAttribute({view:{name:"a",attributes:{href:true}},model:{key:"linkHref",value:function value(e){return e.getAttribute("href");}}});e.commands.add("link",new lA(e));e.commands.add("unlink",new dA(e));var i=sC(e.t,rC(e.config.get("link.decorators")));this._enableAutomaticDecorators(i.filter(function(e){return e.mode===wC;}));this._enableManualDecorators(i.filter(function(e){return e.mode===_C;}));lC({view:e.editing.view,model:e.model,emitter:this,attribute:"linkHref",locale:t});this._setupLinkHighlight();}},{key:"_enableAutomaticDecorators",value:function _enableAutomaticDecorators(e){var t=this.editor;var i=new aC();if(t.config.get("link.addTargetToExternalLinks")){i.add({id:"linkIsExternal",mode:wC,callback:function callback(e){return vC.test(e);},attributes:{target:"_blank",rel:"noopener noreferrer"}});}i.add(e);if(i.length){t.conversion["for"]("downcast").add(i.getDispatcher());}}},{key:"_enableManualDecorators",value:function _enableManualDecorators(e){if(!e.length){return;}var t=this.editor;var i=t.commands.get("link");var n=i.manualDecorators;e.forEach(function(e){t.model.schema.extend("$text",{allowAttributes:e.id});n.add(new cC(e));t.conversion["for"]("downcast").attributeToElement({model:e.id,view:function view(t,i){if(t){var _t238=n.get(e.id).attributes;var _o68=i.createAttributeElement("a",_t238,{priority:5});i.setCustomProperty("link",true,_o68);return _o68;}}});t.conversion["for"]("upcast").elementToAttribute({view:{name:"a",attributes:n.get(e.id).attributes},model:{key:e.id}});});}},{key:"_setupLinkHighlight",value:function _setupLinkHighlight(){var e=this.editor;var t=e.editing.view;var i=new Set();t.document.registerPostFixer(function(t){var n=e.model.document.selection;var o=false;if(n.hasAttribute("linkHref")){var _s40=aA(n.getFirstPosition(),n.getAttribute("linkHref"),e.model);var _r27=e.editing.mapper.toViewRange(_s40);var _iteratorNormalCompletion321=true;var _didIteratorError321=false;var _iteratorError321=undefined;try{for(var _iterator321=_r27.getItems()[Symbol.iterator](),_step321;!(_iteratorNormalCompletion321=(_step321=_iterator321.next()).done);_iteratorNormalCompletion321=true){var _e267=_step321.value;if(_e267.is("a")&&!_e267.hasClass(bC)){t.addClass(bC,_e267);i.add(_e267);o=true;}}}catch(err){_didIteratorError321=true;_iteratorError321=err;}finally{try{if(!_iteratorNormalCompletion321&&_iterator321["return"]!=null){_iterator321["return"]();}}finally{if(_didIteratorError321){throw _iteratorError321;}}}}return o;});e.conversion["for"]("editingDowncast").add(function(e){e.on("insert",n,{priority:"highest"});e.on("remove",n,{priority:"highest"});e.on("attribute",n,{priority:"highest"});e.on("selection",n,{priority:"highest"});function n(){t.change(function(e){var _iteratorNormalCompletion322=true;var _didIteratorError322=false;var _iteratorError322=undefined;try{for(var _iterator322=i.values()[Symbol.iterator](),_step322;!(_iteratorNormalCompletion322=(_step322=_iterator322.next()).done);_iteratorNormalCompletion322=true){var _t239=_step322.value;e.removeClass(bC,_t239);i["delete"](_t239);}}catch(err){_didIteratorError322=true;_iteratorError322=err;}finally{try{if(!_iteratorNormalCompletion322&&_iterator322["return"]!=null){_iterator322["return"]();}}finally{if(_didIteratorError322){throw _iteratorError322;}}}});}});}}]);return kC;}(bw);var yC=/*#__PURE__*/function(_Ju7){_inherits(yC,_Ju7);function yC(e){var _this215;_classCallCheck(this,yC);_this215=_possibleConstructorReturn(this,_getPrototypeOf(yC).call(this,e));_this215.domEventType="click";return _this215;}_createClass(yC,[{key:"onDomEvent",value:function onDomEvent(e){this.fire(e.type,e);}}]);return yC;}(Ju);var xC=i(84);var AC=/*#__PURE__*/function(_db26){_inherits(AC,_db26);function AC(e){var _this216;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];_classCallCheck(this,AC);_this216=_possibleConstructorReturn(this,_getPrototypeOf(AC).call(this,e));var i=e.t;_this216.focusTracker=new _p();_this216.keystrokes=new dp();_this216.urlInputView=_this216._createUrlInput();_this216.saveButtonView=_this216._createButton(i("dg"),pk,"ck-button-save");_this216.saveButtonView.type="submit";_this216.cancelButtonView=_this216._createButton(i("dh"),bk,"ck-button-cancel","cancel");_this216._manualDecoratorSwitches=_this216._createManualDecoratorSwitches(t);_this216.children=_this216._createFormChildren(t);_this216._focusables=new Rp();_this216._focusCycler=new vb({focusables:_this216._focusables,focusTracker:_this216.focusTracker,keystrokeHandler:_this216.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});var n=["ck","ck-link-form"];if(t.length){n.push("ck-link-form_layout-vertical");}_this216.setTemplate({tag:"form",attributes:{"class":n,tabindex:"-1"},children:_this216.children});return _this216;}_createClass(AC,[{key:"getDecoratorSwitchesState",value:function getDecoratorSwitchesState(){return Array.from(this._manualDecoratorSwitches).reduce(function(e,t){e[t.name]=t.isOn;return e;},{});}},{key:"render",value:function render(){var _this217=this;_get(_getPrototypeOf(AC.prototype),"render",this).call(this);gk({view:this});var e=[this.urlInputView].concat(_toConsumableArray(this._manualDecoratorSwitches),[this.saveButtonView,this.cancelButtonView]);e.forEach(function(e){_this217._focusables.add(e);_this217.focusTracker.add(e.element);});this.keystrokes.listenTo(this.element);}},{key:"focus",value:function focus(){this._focusCycler.focusFirst();}},{key:"_createUrlInput",value:function _createUrlInput(){var e=this.locale.t;var t=new hk(this.locale,mk);t.label=e("fe");t.inputView.placeholder="https://example.com";return t;}},{key:"_createButton",value:function _createButton(e,t,i,n){var o=new Vb(this.locale);o.set({label:e,icon:t,tooltip:true});o.extendTemplate({attributes:{"class":i}});if(n){o.delegate("execute").to(this,n);}return o;}},{key:"_createManualDecoratorSwitches",value:function _createManualDecoratorSwitches(e){var _this218=this;var t=this.createCollection();var _iteratorNormalCompletion323=true;var _didIteratorError323=false;var _iteratorError323=undefined;try{var _loop10=function _loop10(){var i=_step323.value;var e=new Gb(_this218.locale);e.set({name:i.id,label:i.label,withText:true});e.bind("isOn").to(i,"value");e.on("execute",function(){i.set("value",!e.isOn);});t.add(e);};for(var _iterator323=e[Symbol.iterator](),_step323;!(_iteratorNormalCompletion323=(_step323=_iterator323.next()).done);_iteratorNormalCompletion323=true){_loop10();}}catch(err){_didIteratorError323=true;_iteratorError323=err;}finally{try{if(!_iteratorNormalCompletion323&&_iterator323["return"]!=null){_iterator323["return"]();}}finally{if(_didIteratorError323){throw _iteratorError323;}}}return t;}},{key:"_createFormChildren",value:function _createFormChildren(e){var t=this.createCollection();t.add(this.urlInputView);if(e.length){var _e268=new db();_e268.setTemplate({tag:"ul",children:this._manualDecoratorSwitches.map(function(e){return{tag:"li",children:[e],attributes:{"class":["ck","ck-list__item"]}};}),attributes:{"class":["ck","ck-reset","ck-list"]}});t.add(_e268);}t.add(this.saveButtonView);t.add(this.cancelButtonView);return t;}}]);return AC;}(db);var CC='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.077 15l.991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562l-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z"/></svg>';var TC='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7.3 17.37l-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506L13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5L9.375 17H19v1.5H8z"/></svg>';var MC=i(86);var EC=/*#__PURE__*/function(_db27){_inherits(EC,_db27);function EC(e){var _this219;_classCallCheck(this,EC);_this219=_possibleConstructorReturn(this,_getPrototypeOf(EC).call(this,e));var t=e.t;_this219.focusTracker=new _p();_this219.keystrokes=new dp();_this219.previewButtonView=_this219._createPreviewButton();_this219.unlinkButtonView=_this219._createButton(t("fa"),CC,"unlink");_this219.editButtonView=_this219._createButton(t("fb"),TC,"edit");_this219.set("href");_this219._focusables=new Rp();_this219._focusCycler=new vb({focusables:_this219._focusables,focusTracker:_this219.focusTracker,keystrokeHandler:_this219.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});_this219.setTemplate({tag:"div",attributes:{"class":["ck","ck-link-actions"],tabindex:"-1"},children:[_this219.previewButtonView,_this219.editButtonView,_this219.unlinkButtonView]});return _this219;}_createClass(EC,[{key:"render",value:function render(){var _this220=this;_get(_getPrototypeOf(EC.prototype),"render",this).call(this);var e=[this.previewButtonView,this.editButtonView,this.unlinkButtonView];e.forEach(function(e){_this220._focusables.add(e);_this220.focusTracker.add(e.element);});this.keystrokes.listenTo(this.element);}},{key:"focus",value:function focus(){this._focusCycler.focusFirst();}},{key:"_createButton",value:function _createButton(e,t,i){var n=new Vb(this.locale);n.set({label:e,icon:t,tooltip:true});n.delegate("execute").to(this,i);return n;}},{key:"_createPreviewButton",value:function _createPreviewButton(){var e=new Vb(this.locale);var t=this.bindTemplate;var i=this.t;e.set({withText:true,tooltip:i("fc")});e.extendTemplate({attributes:{"class":["ck","ck-link-actions__preview"],href:t.to("href",function(e){return e&&nC(e);}),target:"_blank",rel:"noopener noreferrer"}});e.bind("label").to(this,"href",function(e){return e||i("fd");});e.bind("isEnabled").to(this,"href",function(e){return!!e;});e.template.tag="a";e.template.eventListeners={};return e;}}]);return EC;}(db);var PC='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.077 15l.991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z"/></svg>';var SC="Ctrl+K";var IC=/*#__PURE__*/function(_bw52){_inherits(IC,_bw52);function IC(){_classCallCheck(this,IC);return _possibleConstructorReturn(this,_getPrototypeOf(IC).apply(this,arguments));}_createClass(IC,[{key:"init",value:function init(){var e=this.editor;e.editing.view.addObserver(yC);this.actionsView=this._createActionsView();this.formView=this._createFormView();this._balloon=e.plugins.get(Ok);this._createToolbarLinkButton();this._enableUserBalloonInteractions();}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(IC.prototype),"destroy",this).call(this);this.formView.destroy();}},{key:"_createActionsView",value:function _createActionsView(){var _this221=this;var e=this.editor;var t=new EC(e.locale);var i=e.commands.get("link");var n=e.commands.get("unlink");t.bind("href").to(i,"value");t.editButtonView.bind("isEnabled").to(i);t.unlinkButtonView.bind("isEnabled").to(n);this.listenTo(t,"edit",function(){_this221._addFormView();});this.listenTo(t,"unlink",function(){e.execute("unlink");_this221._hideUI();});t.keystrokes.set("Esc",function(e,t){_this221._hideUI();t();});t.keystrokes.set(SC,function(e,t){_this221._addFormView();t();});return t;}},{key:"_createFormView",value:function _createFormView(){var _this222=this;var e=this.editor;var t=e.commands.get("link");var i=new AC(e.locale,t.manualDecorators);i.urlInputView.bind("value").to(t,"value");i.urlInputView.bind("isReadOnly").to(t,"isEnabled",function(e){return!e;});i.saveButtonView.bind("isEnabled").to(t);this.listenTo(i,"submit",function(){e.execute("link",i.urlInputView.inputView.element.value,i.getDecoratorSwitchesState());_this222._closeFormView();});this.listenTo(i,"cancel",function(){_this222._closeFormView();});i.keystrokes.set("Esc",function(e,t){_this222._closeFormView();t();});return i;}},{key:"_createToolbarLinkButton",value:function _createToolbarLinkButton(){var _this223=this;var e=this.editor;var t=e.commands.get("link");var i=e.t;e.keystrokes.set(SC,function(e,t){t();_this223._showUI(true);});e.ui.componentFactory.add("link",function(e){var n=new Vb(e);n.isEnabled=true;n.label=i("ev");n.icon=PC;n.keystroke=SC;n.tooltip=true;n.isToggleable=true;n.bind("isEnabled").to(t,"isEnabled");n.bind("isOn").to(t,"value",function(e){return!!e;});_this223.listenTo(n,"execute",function(){return _this223._showUI(true);});return n;});}},{key:"_enableUserBalloonInteractions",value:function _enableUserBalloonInteractions(){var _this224=this;var e=this.editor.editing.view.document;this.listenTo(e,"click",function(){var e=_this224._getSelectedLinkElement();if(e){_this224._showUI();}});this.editor.keystrokes.set("Tab",function(e,t){if(_this224._areActionsVisible&&!_this224.actionsView.focusTracker.isFocused){_this224.actionsView.focus();t();}},{priority:"high"});this.editor.keystrokes.set("Esc",function(e,t){if(_this224._isUIVisible){_this224._hideUI();t();}});Jb({emitter:this.formView,activator:function activator(){return _this224._isUIInPanel;},contextElements:[this._balloon.view.element],callback:function callback(){return _this224._hideUI();}});}},{key:"_addActionsView",value:function _addActionsView(){if(this._areActionsInPanel){return;}this._balloon.add({view:this.actionsView,position:this._getBalloonPositionData()});}},{key:"_addFormView",value:function _addFormView(){if(this._isFormInPanel){return;}var e=this.editor;var t=e.commands.get("link");this._balloon.add({view:this.formView,position:this._getBalloonPositionData()});if(this._balloon.visibleView===this.formView){this.formView.urlInputView.select();}this.formView.urlInputView.inputView.element.value=t.value||"";}},{key:"_closeFormView",value:function _closeFormView(){var e=this.editor.commands.get("link");e.restoreManualDecoratorStates();if(e.value!==undefined){this._removeFormView();}else{this._hideUI();}}},{key:"_removeFormView",value:function _removeFormView(){if(this._isFormInPanel){this.formView.saveButtonView.focus();this._balloon.remove(this.formView);this.editor.editing.view.focus();}}},{key:"_showUI",value:function _showUI(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!this._getSelectedLinkElement()){this._addActionsView();if(e){this._balloon.showStack("main");}this._addFormView();}else{if(this._areActionsVisible){this._addFormView();}else{this._addActionsView();}if(e){this._balloon.showStack("main");}}this._startUpdatingUI();}},{key:"_hideUI",value:function _hideUI(){if(!this._isUIInPanel){return;}var e=this.editor;this.stopListening(e.ui,"update");this.stopListening(this._balloon,"change:visibleView");e.editing.view.focus();this._removeFormView();this._balloon.remove(this.actionsView);}},{key:"_startUpdatingUI",value:function _startUpdatingUI(){var _this225=this;var e=this.editor;var t=e.editing.view.document;var i=this._getSelectedLinkElement();var n=s();var o=function o(){var e=_this225._getSelectedLinkElement();var t=s();if(i&&!e||!i&&t!==n){_this225._hideUI();}else if(_this225._isUIVisible){_this225._balloon.updatePosition(_this225._getBalloonPositionData());}i=e;n=t;};function s(){return t.selection.focus.getAncestors().reverse().find(function(e){return e.is("element");});}this.listenTo(e.ui,"update",o);this.listenTo(this._balloon,"change:visibleView",o);}},{key:"_getBalloonPositionData",value:function _getBalloonPositionData(){var e=this.editor.editing.view;var t=e.document;var i=this._getSelectedLinkElement();var n=i?e.domConverter.mapViewToDom(i):e.domConverter.viewRangeToDom(t.selection.getFirstRange());return{target:n};}},{key:"_getSelectedLinkElement",value:function _getSelectedLinkElement(){var e=this.editor.editing.view;var t=e.document.selection;if(t.isCollapsed){return NC(t.getFirstPosition());}else{var _i248=t.getFirstRange().getTrimmed();var _n133=NC(_i248.start);var _o69=NC(_i248.end);if(!_n133||_n133!=_o69){return null;}if(e.createRangeIn(_n133).getTrimmed().isEqual(_i248)){return _n133;}else{return null;}}}},{key:"_isFormInPanel",get:function get(){return this._balloon.hasView(this.formView);}},{key:"_areActionsInPanel",get:function get(){return this._balloon.hasView(this.actionsView);}},{key:"_areActionsVisible",get:function get(){return this._balloon.visibleView===this.actionsView;}},{key:"_isUIInPanel",get:function get(){return this._isFormInPanel||this._areActionsInPanel;}},{key:"_isUIVisible",get:function get(){var e=this._balloon.visibleView;return e==this.formView||this._areActionsVisible;}}],[{key:"requires",get:function get(){return[Ok];}},{key:"pluginName",get:function get(){return"LinkUI";}}]);return IC;}(bw);function NC(e){return e.getAncestors().find(function(e){return tC(e);});}var OC=/*#__PURE__*/function(_bw53){_inherits(OC,_bw53);function OC(){_classCallCheck(this,OC);return _possibleConstructorReturn(this,_getPrototypeOf(OC).apply(this,arguments));}_createClass(OC,null,[{key:"requires",get:function get(){return[kC,IC];}},{key:"pluginName",get:function get(){return"Link";}}]);return OC;}(bw);var RC=/*#__PURE__*/function(_w17){_inherits(RC,_w17);function RC(e,t){var _this226;_classCallCheck(this,RC);_this226=_possibleConstructorReturn(this,_getPrototypeOf(RC).call(this,e));_this226.type=t;return _this226;}_createClass(RC,[{key:"refresh",value:function refresh(){this.value=this._getValue();this.isEnabled=this._checkEnabled();}},{key:"execute",value:function execute(){var _this227=this;var e=this.editor.model;var t=e.document;var i=Array.from(t.selection.getSelectedBlocks()).filter(function(t){return zC(t,e.schema);});var n=this.value===true;e.change(function(e){if(n){var _t240=i[i.length-1].nextSibling;var _n134=Number.POSITIVE_INFINITY;var _o70=[];while(_t240&&_t240.name=="listItem"&&_t240.getAttribute("listIndent")!==0){var _e269=_t240.getAttribute("listIndent");if(_e269<_n134){_n134=_e269;}var _i249=_e269-_n134;_o70.push({element:_t240,listIndent:_i249});_t240=_t240.nextSibling;}_o70=_o70.reverse();var _iteratorNormalCompletion324=true;var _didIteratorError324=false;var _iteratorError324=undefined;try{for(var _iterator324=_o70[Symbol.iterator](),_step324;!(_iteratorNormalCompletion324=(_step324=_iterator324.next()).done);_iteratorNormalCompletion324=true){var _t241=_step324.value;e.setAttribute("listIndent",_t241.listIndent,_t241.element);}}catch(err){_didIteratorError324=true;_iteratorError324=err;}finally{try{if(!_iteratorNormalCompletion324&&_iterator324["return"]!=null){_iterator324["return"]();}}finally{if(_didIteratorError324){throw _iteratorError324;}}}}if(!n){var _e270=Number.POSITIVE_INFINITY;var _iteratorNormalCompletion325=true;var _didIteratorError325=false;var _iteratorError325=undefined;try{for(var _iterator325=i[Symbol.iterator](),_step325;!(_iteratorNormalCompletion325=(_step325=_iterator325.next()).done);_iteratorNormalCompletion325=true){var _t242=_step325.value;if(_t242.is("listItem")&&_t242.getAttribute("listIndent")<_e270){_e270=_t242.getAttribute("listIndent");}}}catch(err){_didIteratorError325=true;_iteratorError325=err;}finally{try{if(!_iteratorNormalCompletion325&&_iterator325["return"]!=null){_iterator325["return"]();}}finally{if(_didIteratorError325){throw _iteratorError325;}}}_e270=_e270===0?1:_e270;LC(i,true,_e270);LC(i,false,_e270);}var _iteratorNormalCompletion326=true;var _didIteratorError326=false;var _iteratorError326=undefined;try{for(var _iterator326=i.reverse()[Symbol.iterator](),_step326;!(_iteratorNormalCompletion326=(_step326=_iterator326.next()).done);_iteratorNormalCompletion326=true){var _t243=_step326.value;if(n&&_t243.name=="listItem"){e.rename(_t243,"paragraph");}else if(!n&&_t243.name!="listItem"){e.setAttributes({listType:_this227.type,listIndent:0},_t243);e.rename(_t243,"listItem");}else if(!n&&_t243.name=="listItem"&&_t243.getAttribute("listType")!=_this227.type){e.setAttribute("listType",_this227.type,_t243);}}}catch(err){_didIteratorError326=true;_iteratorError326=err;}finally{try{if(!_iteratorNormalCompletion326&&_iterator326["return"]!=null){_iterator326["return"]();}}finally{if(_didIteratorError326){throw _iteratorError326;}}}});}},{key:"_getValue",value:function _getValue(){var e=kw(this.editor.model.document.selection.getSelectedBlocks());return!!e&&e.is("listItem")&&e.getAttribute("listType")==this.type;}},{key:"_checkEnabled",value:function _checkEnabled(){if(this.value){return true;}var e=this.editor.model.document.selection;var t=this.editor.model.schema;var i=kw(e.getSelectedBlocks());if(!i){return false;}return zC(i,t);}}]);return RC;}(_w);function LC(e,t,i){var n=t?e[0]:e[e.length-1];if(n.is("listItem")){var _o71=n[t?"previousSibling":"nextSibling"];var _s41=n.getAttribute("listIndent");while(_o71&&_o71.is("listItem")&&_o71.getAttribute("listIndent")>=i){if(_s41>_o71.getAttribute("listIndent")){_s41=_o71.getAttribute("listIndent");}if(_o71.getAttribute("listIndent")==_s41){e[t?"unshift":"push"](_o71);}_o71=_o71[t?"previousSibling":"nextSibling"];}}}function zC(e,t){return t.checkChild(e.parent,"listItem")&&!t.isObject(e);}var DC=/*#__PURE__*/function(_w18){_inherits(DC,_w18);function DC(e,t){var _this228;_classCallCheck(this,DC);_this228=_possibleConstructorReturn(this,_getPrototypeOf(DC).call(this,e));_this228._indentBy=t=="forward"?1:-1;return _this228;}_createClass(DC,[{key:"refresh",value:function refresh(){this.isEnabled=this._checkEnabled();}},{key:"execute",value:function execute(){var _this229=this;var e=this.editor.model;var t=e.document;var i=Array.from(t.selection.getSelectedBlocks());e.change(function(e){var t=i[i.length-1];var n=t.nextSibling;while(n&&n.name=="listItem"&&n.getAttribute("listIndent")>t.getAttribute("listIndent")){i.push(n);n=n.nextSibling;}if(_this229._indentBy<0){i=i.reverse();}var _iteratorNormalCompletion327=true;var _didIteratorError327=false;var _iteratorError327=undefined;try{for(var _iterator327=i[Symbol.iterator](),_step327;!(_iteratorNormalCompletion327=(_step327=_iterator327.next()).done);_iteratorNormalCompletion327=true){var _t244=_step327.value;var _i250=_t244.getAttribute("listIndent")+_this229._indentBy;if(_i250<0){e.rename(_t244,"paragraph");}else{e.setAttribute("listIndent",_i250,_t244);}}}catch(err){_didIteratorError327=true;_iteratorError327=err;}finally{try{if(!_iteratorNormalCompletion327&&_iterator327["return"]!=null){_iterator327["return"]();}}finally{if(_didIteratorError327){throw _iteratorError327;}}}});}},{key:"_checkEnabled",value:function _checkEnabled(){var e=kw(this.editor.model.document.selection.getSelectedBlocks());if(!e||!e.is("listItem")){return false;}if(this._indentBy>0){var _t245=e.getAttribute("listIndent");var _i251=e.getAttribute("listType");var _n135=e.previousSibling;while(_n135&&_n135.is("listItem")&&_n135.getAttribute("listIndent")>=_t245){if(_n135.getAttribute("listIndent")==_t245){return _n135.getAttribute("listType")==_i251;}_n135=_n135.previousSibling;}return false;}return true;}}]);return DC;}(_w);function jC(e){var t=e.createContainerElement("li");t.getFillerOffset=$C;return t;}function BC(e,t){var i=t.mapper;var n=t.writer;var o=e.getAttribute("listType")=="numbered"?"ol":"ul";var s=jC(n);var r=n.createContainerElement(o,null);n.insert(n.createPositionAt(r,0),s);i.bindElements(e,s);return s;}function VC(e,t,i,n){var o=t.parent;var s=i.mapper;var r=i.writer;var a=s.toViewPosition(n.createPositionBefore(e));var c=WC(e.previousSibling,{sameIndent:true,smallerIndent:true,listIndent:e.getAttribute("listIndent")});var l=e.previousSibling;if(c&&c.getAttribute("listIndent")==e.getAttribute("listIndent")){var _e271=s.toViewElement(c);a=r.breakContainer(r.createPositionAfter(_e271));}else{if(l&&l.name=="listItem"){a=s.toViewPosition(n.createPositionAt(l,"end"));}else{a=s.toViewPosition(n.createPositionBefore(e));}}a=HC(a);r.insert(a,o);if(l&&l.name=="listItem"){var _e272=s.toViewElement(l);var _i252=r.createRange(r.createPositionAt(_e272,0),a);var _n136=_i252.getWalker({ignoreElementEnd:true});var _iteratorNormalCompletion328=true;var _didIteratorError328=false;var _iteratorError328=undefined;try{for(var _iterator328=_n136[Symbol.iterator](),_step328;!(_iteratorNormalCompletion328=(_step328=_iterator328.next()).done);_iteratorNormalCompletion328=true){var _e273=_step328.value;if(_e273.item.is("li")){var _i253=r.breakContainer(r.createPositionBefore(_e273.item));var _o72=_e273.item.parent;var _s42=r.createPositionAt(t,"end");FC(r,_s42.nodeBefore,_s42.nodeAfter);r.move(r.createRangeOn(_o72),_s42);_n136.position=_i253;}}}catch(err){_didIteratorError328=true;_iteratorError328=err;}finally{try{if(!_iteratorNormalCompletion328&&_iterator328["return"]!=null){_iterator328["return"]();}}finally{if(_didIteratorError328){throw _iteratorError328;}}}}else{var _i254=o.nextSibling;if(_i254&&(_i254.is("ul")||_i254.is("ol"))){var _n137=null;var _iteratorNormalCompletion329=true;var _didIteratorError329=false;var _iteratorError329=undefined;try{for(var _iterator329=_i254.getChildren()[Symbol.iterator](),_step329;!(_iteratorNormalCompletion329=(_step329=_iterator329.next()).done);_iteratorNormalCompletion329=true){var _t246=_step329.value;var _i255=s.toModelElement(_t246);if(_i255&&_i255.getAttribute("listIndent")>e.getAttribute("listIndent")){_n137=_t246;}else{break;}}}catch(err){_didIteratorError329=true;_iteratorError329=err;}finally{try{if(!_iteratorNormalCompletion329&&_iterator329["return"]!=null){_iterator329["return"]();}}finally{if(_didIteratorError329){throw _iteratorError329;}}}if(_n137){r.breakContainer(r.createPositionAfter(_n137));r.move(r.createRangeOn(_n137.parent),r.createPositionAt(t,"end"));}}}FC(r,o,o.nextSibling);FC(r,o.previousSibling,o);}function FC(e,t,i){if(!t||!i||t.name!="ul"&&t.name!="ol"){return null;}if(t.name!=i.name||t.getAttribute("class")!==i.getAttribute("class")){return null;}return e.mergeContainers(e.createPositionAfter(t));}function HC(e){return e.getLastMatchingPosition(function(e){return e.item.is("uiElement");});}function WC(e,t){var i=!!t.sameIndent;var n=!!t.smallerIndent;var o=t.listIndent;var s=e;while(s&&s.name=="listItem"){var _e274=s.getAttribute("listIndent");if(i&&o==_e274||n&&o>_e274){return s;}s=s.previousSibling;}return null;}function UC(e,t,i,n){e.ui.componentFactory.add(t,function(o){var s=e.commands.get(t);var r=new Vb(o);r.set({label:i,icon:n,tooltip:true,isToggleable:true});r.bind("isOn","isEnabled").to(s,"value","isEnabled");r.on("execute",function(){e.execute(t);e.editing.view.focus();});return r;});}function $C(){var e=!this.isEmpty&&(this.getChild(0).name=="ul"||this.getChild(0).name=="ol");if(this.isEmpty||e){return 0;}return Hc.call(this);}function qC(e){return function(t,i,n){var o=n.consumable;if(!o.test(i.item,"insert")||!o.test(i.item,"attribute:listType")||!o.test(i.item,"attribute:listIndent")){return;}o.consume(i.item,"insert");o.consume(i.item,"attribute:listType");o.consume(i.item,"attribute:listIndent");var s=i.item;var r=BC(s,n);VC(s,r,n,e);};}function YC(e){return function(t,i,n){var o=n.mapper.toViewPosition(i.position).getLastMatchingPosition(function(e){return!e.item.is("li");});var s=o.nodeAfter;var r=n.writer;r.breakContainer(r.createPositionBefore(s));r.breakContainer(r.createPositionAfter(s));var a=s.parent;var c=a.previousSibling;var l=r.createRangeOn(a);var d=r.remove(l);if(c&&c.nextSibling){FC(r,c,c.nextSibling);}var u=n.mapper.toModelElement(s);cT(u.getAttribute("listIndent")+1,i.position,l.start,s,n,e);var _iteratorNormalCompletion330=true;var _didIteratorError330=false;var _iteratorError330=undefined;try{for(var _iterator330=r.createRangeIn(d).getItems()[Symbol.iterator](),_step330;!(_iteratorNormalCompletion330=(_step330=_iterator330.next()).done);_iteratorNormalCompletion330=true){var _e275=_step330.value;n.mapper.unbindViewElement(_e275);}}catch(err){_didIteratorError330=true;_iteratorError330=err;}finally{try{if(!_iteratorNormalCompletion330&&_iterator330["return"]!=null){_iterator330["return"]();}}finally{if(_didIteratorError330){throw _iteratorError330;}}}t.stop();};}function GC(e,t,i){if(!i.consumable.consume(t.item,"attribute:listType")){return;}var n=i.mapper.toViewElement(t.item);var o=i.writer;o.breakContainer(o.createPositionBefore(n));o.breakContainer(o.createPositionAfter(n));var s=n.parent;var r=t.attributeNewValue=="numbered"?"ol":"ul";o.rename(r,s);}function JC(e,t,i){var n=i.mapper.toViewElement(t.item);var o=n.parent;var s=i.writer;FC(s,o,o.nextSibling);FC(s,o.previousSibling,o);var _iteratorNormalCompletion331=true;var _didIteratorError331=false;var _iteratorError331=undefined;try{for(var _iterator331=t.item.getChildren()[Symbol.iterator](),_step331;!(_iteratorNormalCompletion331=(_step331=_iterator331.next()).done);_iteratorNormalCompletion331=true){var _e276=_step331.value;i.consumable.consume(_e276,"insert");}}catch(err){_didIteratorError331=true;_iteratorError331=err;}finally{try{if(!_iteratorNormalCompletion331&&_iterator331["return"]!=null){_iterator331["return"]();}}finally{if(_didIteratorError331){throw _iteratorError331;}}}}function XC(e){return function(t,i,n){if(!n.consumable.consume(i.item,"attribute:listIndent")){return;}var o=n.mapper.toViewElement(i.item);var s=n.writer;s.breakContainer(s.createPositionBefore(o));s.breakContainer(s.createPositionAfter(o));var r=o.parent;var a=r.previousSibling;var c=s.createRangeOn(r);s.remove(c);if(a&&a.nextSibling){FC(s,a,a.nextSibling);}cT(i.attributeOldValue+1,i.range.start,c.start,o,n,e);VC(i.item,o,n,e);var _iteratorNormalCompletion332=true;var _didIteratorError332=false;var _iteratorError332=undefined;try{for(var _iterator332=i.item.getChildren()[Symbol.iterator](),_step332;!(_iteratorNormalCompletion332=(_step332=_iterator332.next()).done);_iteratorNormalCompletion332=true){var _e277=_step332.value;n.consumable.consume(_e277,"insert");}}catch(err){_didIteratorError332=true;_iteratorError332=err;}finally{try{if(!_iteratorNormalCompletion332&&_iterator332["return"]!=null){_iterator332["return"]();}}finally{if(_didIteratorError332){throw _iteratorError332;}}}};}function KC(e,t,i){if(t.item.name!="listItem"){var _e278=i.mapper.toViewPosition(t.range.start);var _n138=i.writer;var _o73=[];while(_e278.parent.name=="ul"||_e278.parent.name=="ol"){_e278=_n138.breakContainer(_e278);if(_e278.parent.name!="li"){break;}var _t247=_e278;var _i256=_n138.createPositionAt(_e278.parent,"end");if(!_t247.isEqual(_i256)){var _e279=_n138.remove(_n138.createRange(_t247,_i256));_o73.push(_e279);}_e278=_n138.createPositionAfter(_e278.parent);}if(_o73.length>0){for(var _t248=0;_t248<_o73.length;_t248++){var _i257=_e278.nodeBefore;var _s43=_n138.insert(_e278,_o73[_t248]);_e278=_s43.end;if(_t248>0){var _t249=FC(_n138,_i257,_i257.nextSibling);if(_t249&&_t249.parent==_i257){_e278.offset--;}}}FC(_n138,_e278.nodeBefore,_e278.nodeAfter);}}}function QC(e,t,i){var n=i.mapper.toViewPosition(t.position);var o=n.nodeBefore;var s=n.nodeAfter;FC(i.writer,o,s);}function ZC(e,t,i){if(i.consumable.consume(t.viewItem,{name:true})){var _e280=i.writer;var _n139=_e280.createElement("listItem");var _o74=dT(t.viewItem);_e280.setAttribute("listIndent",_o74,_n139);var _s44=t.viewItem.parent&&t.viewItem.parent.name=="ol"?"numbered":"bulleted";_e280.setAttribute("listType",_s44,_n139);var _r28=i.splitToAllowedParent(_n139,t.modelCursor);if(!_r28){return;}_e280.insert(_n139,_r28.position);var _a15=rT(_n139,t.viewItem.getChildren(),i);t.modelRange=_e280.createRange(t.modelCursor,_a15);if(_r28.cursorParent){t.modelCursor=_e280.createPositionAt(_r28.cursorParent,0);}else{t.modelCursor=t.modelRange.end;}}}function eT(e,t,i){if(i.consumable.test(t.viewItem,{name:true})){var _e281=Array.from(t.viewItem.getChildren());for(var _i258=0,_e282=_e281;_i258<_e282.length;_i258++){var _t250=_e282[_i258];var _e283=!(_t250.is("li")||lT(_t250));if(_e283){_t250._remove();}}}}function tT(e,t,i){if(i.consumable.test(t.viewItem,{name:true})){if(t.viewItem.childCount===0){return;}var _e284=_toConsumableArray(t.viewItem.getChildren());var _i259=false;var _n140=true;var _iteratorNormalCompletion333=true;var _didIteratorError333=false;var _iteratorError333=undefined;try{for(var _iterator333=_e284[Symbol.iterator](),_step333;!(_iteratorNormalCompletion333=(_step333=_iterator333.next()).done);_iteratorNormalCompletion333=true){var _t251=_step333.value;if(_i259&&!lT(_t251)){_t251._remove();}if(_t251.is("text")){if(_n140){_t251._data=_t251.data.replace(/^\s+/,"");}if(!_t251.nextSibling||lT(_t251.nextSibling)){_t251._data=_t251.data.replace(/\s+$/,"");}}else if(lT(_t251)){_i259=true;}_n140=false;}}catch(err){_didIteratorError333=true;_iteratorError333=err;}finally{try{if(!_iteratorNormalCompletion333&&_iterator333["return"]!=null){_iterator333["return"]();}}finally{if(_didIteratorError333){throw _iteratorError333;}}}}}function iT(e){return function(t,i){if(i.isPhantom){return;}var n=i.modelPosition.nodeBefore;if(n&&n.is("listItem")){var _t252=i.mapper.toViewElement(n);var _o75=_t252.getAncestors().find(lT);var _s45=e.createPositionAt(_t252,0).getWalker();var _iteratorNormalCompletion334=true;var _didIteratorError334=false;var _iteratorError334=undefined;try{for(var _iterator334=_s45[Symbol.iterator](),_step334;!(_iteratorNormalCompletion334=(_step334=_iterator334.next()).done);_iteratorNormalCompletion334=true){var _e285=_step334.value;if(_e285.type=="elementStart"&&_e285.item.is("li")){i.viewPosition=_e285.previousPosition;break;}else if(_e285.type=="elementEnd"&&_e285.item==_o75){i.viewPosition=_e285.nextPosition;break;}}}catch(err){_didIteratorError334=true;_iteratorError334=err;}finally{try{if(!_iteratorNormalCompletion334&&_iterator334["return"]!=null){_iterator334["return"]();}}finally{if(_didIteratorError334){throw _iteratorError334;}}}}};}function nT(e){return function(t,i){var n=i.viewPosition;var o=n.parent;var s=i.mapper;if(o.name=="ul"||o.name=="ol"){if(!n.isAtEnd){var _t253=s.toModelElement(n.nodeAfter);i.modelPosition=e.createPositionBefore(_t253);}else{var _t254=s.toModelElement(n.nodeBefore);var _o76=s.getModelLength(n.nodeBefore);i.modelPosition=e.createPositionBefore(_t254).getShiftedBy(_o76);}t.stop();}else if(o.name=="li"&&n.nodeBefore&&(n.nodeBefore.name=="ul"||n.nodeBefore.name=="ol")){var _r29=s.toModelElement(o);var _a16=1;var _c7=n.nodeBefore;while(_c7&&lT(_c7)){_a16+=s.getModelLength(_c7);_c7=_c7.previousSibling;}i.modelPosition=e.createPositionBefore(_r29).getShiftedBy(_a16);t.stop();}};}function oT(e,t){var i=e.document.differ.getChanges();var n=new Map();var o=false;var _iteratorNormalCompletion335=true;var _didIteratorError335=false;var _iteratorError335=undefined;try{for(var _iterator335=i[Symbol.iterator](),_step335;!(_iteratorNormalCompletion335=(_step335=_iterator335.next()).done);_iteratorNormalCompletion335=true){var _n142=_step335.value;if(_n142.type=="insert"&&_n142.name=="listItem"){s(_n142.position);}else if(_n142.type=="insert"&&_n142.name!="listItem"){if(_n142.name!="$text"){var _i262=_n142.position.nodeAfter;if(_i262.hasAttribute("listIndent")){t.removeAttribute("listIndent",_i262);o=true;}if(_i262.hasAttribute("listType")){t.removeAttribute("listType",_i262);o=true;}var _iteratorNormalCompletion337=true;var _didIteratorError337=false;var _iteratorError337=undefined;try{for(var _iterator337=Array.from(e.createRangeIn(_i262)).filter(function(e){return e.item.is("listItem");})[Symbol.iterator](),_step337;!(_iteratorNormalCompletion337=(_step337=_iterator337.next()).done);_iteratorNormalCompletion337=true){var _t256=_step337.value;s(_t256.previousPosition);}}catch(err){_didIteratorError337=true;_iteratorError337=err;}finally{try{if(!_iteratorNormalCompletion337&&_iterator337["return"]!=null){_iterator337["return"]();}}finally{if(_didIteratorError337){throw _iteratorError337;}}}}var _i261=_n142.position.getShiftedBy(_n142.length);s(_i261);}else if(_n142.type=="remove"&&_n142.name=="listItem"){s(_n142.position);}else if(_n142.type=="attribute"&&_n142.attributeKey=="listIndent"){s(_n142.range.start);}else if(_n142.type=="attribute"&&_n142.attributeKey=="listType"){s(_n142.range.start);}}}catch(err){_didIteratorError335=true;_iteratorError335=err;}finally{try{if(!_iteratorNormalCompletion335&&_iterator335["return"]!=null){_iterator335["return"]();}}finally{if(_didIteratorError335){throw _iteratorError335;}}}var _iteratorNormalCompletion336=true;var _didIteratorError336=false;var _iteratorError336=undefined;try{for(var _iterator336=n.values()[Symbol.iterator](),_step336;!(_iteratorNormalCompletion336=(_step336=_iterator336.next()).done);_iteratorNormalCompletion336=true){var _e286=_step336.value;r(_e286);a(_e286);}}catch(err){_didIteratorError336=true;_iteratorError336=err;}finally{try{if(!_iteratorNormalCompletion336&&_iterator336["return"]!=null){_iterator336["return"]();}}finally{if(_didIteratorError336){throw _iteratorError336;}}}return o;function s(e){var t=e.nodeBefore;if(!t||!t.is("listItem")){var _t255=e.nodeAfter;if(_t255&&_t255.is("listItem")){n.set(_t255,_t255);}}else{var _i260=t;if(n.has(_i260)){return;}while(_i260.previousSibling&&_i260.previousSibling.is("listItem")){_i260=_i260.previousSibling;if(n.has(_i260)){return;}}n.set(e.nodeBefore,_i260);}}function r(e){var i=0;var n=null;while(e&&e.is("listItem")){var _s46=e.getAttribute("listIndent");if(_s46>i){var _r30=void 0;if(n===null){n=_s46-i;_r30=i;}else{if(n>_s46){n=_s46;}_r30=_s46-n;}t.setAttribute("listIndent",_r30,e);o=true;}else{n=null;i=e.getAttribute("listIndent")+1;}e=e.nextSibling;}}function a(e){var i=[];var n=null;while(e&&e.is("listItem")){var _s47=e.getAttribute("listIndent");if(n&&n.getAttribute("listIndent")>_s47){i=i.slice(0,_s47+1);}if(_s47!=0){if(i[_s47]){var _n141=i[_s47];if(e.getAttribute("listType")!=_n141){t.setAttribute("listType",_n141,e);o=true;}}else{i[_s47]=e.getAttribute("listType");}}n=e;e=e.nextSibling;}}}function sT(e,_ref44){var _ref45=_slicedToArray(_ref44,2),t=_ref45[0],i=_ref45[1];var n=t.is("documentFragment")?t.getChild(0):t;var o;if(!i){o=this.document.selection;}else{o=this.createSelection(i);}if(n&&n.is("listItem")){var _e287=o.getFirstPosition();var _t257=null;if(_e287.parent.is("listItem")){_t257=_e287.parent;}else if(_e287.nodeBefore&&_e287.nodeBefore.is("listItem")){_t257=_e287.nodeBefore;}if(_t257){var _e288=_t257.getAttribute("listIndent");if(_e288>0){while(n&&n.is("listItem")){n._setAttribute("listIndent",n.getAttribute("listIndent")+_e288);n=n.nextSibling;}}}}}function rT(e,t,i){var n=i.writer,o=i.schema;var s=n.createPositionAfter(e);var _iteratorNormalCompletion338=true;var _didIteratorError338=false;var _iteratorError338=undefined;try{for(var _iterator338=t[Symbol.iterator](),_step338;!(_iteratorNormalCompletion338=(_step338=_iterator338.next()).done);_iteratorNormalCompletion338=true){var _r31=_step338.value;if(_r31.name=="ul"||_r31.name=="ol"){s=i.convertItem(_r31,s).modelCursor;}else{var _t258=i.convertItem(_r31,n.createPositionAt(e,"end"));var _a17=_t258.modelRange.start.nodeAfter;var _c8=_a17&&_a17.is("element")&&!o.checkChild(e,_a17.name);if(_c8){if(_t258.modelCursor.parent.is("listItem")){e=_t258.modelCursor.parent;}else{e=aT(_t258.modelCursor);}s=n.createPositionAfter(e);}}}}catch(err){_didIteratorError338=true;_iteratorError338=err;}finally{try{if(!_iteratorNormalCompletion338&&_iterator338["return"]!=null){_iterator338["return"]();}}finally{if(_didIteratorError338){throw _iteratorError338;}}}return s;}function aT(e){var t=new Wh({startPosition:e});var i;do{i=t.next();}while(!i.value.item.is("listItem"));return i.value.item;}function cT(e,t,i,n,o,s){var r=WC(t.nodeBefore,{sameIndent:true,smallerIndent:true,listIndent:e,foo:"b"});var a=o.mapper;var c=o.writer;var l=r?r.getAttribute("listIndent"):null;var d;if(!r){d=i;}else if(l==e){var _e289=a.toViewElement(r).parent;d=c.createPositionAfter(_e289);}else{var _e290=s.createPositionAt(r,"end");d=a.toViewPosition(_e290);}d=HC(d);for(var _i263=0,_arr2=_toConsumableArray(n.getChildren());_i263<_arr2.length;_i263++){var _e291=_arr2[_i263];if(lT(_e291)){d=c.move(c.createRangeOn(_e291),d).end;FC(c,_e291,_e291.nextSibling);FC(c,_e291.previousSibling,_e291);}}}function lT(e){return e.is("ol")||e.is("ul");}function dT(e){var t=0;var i=e.parent;while(i){if(i.is("li")){t++;}else{var _e292=i.previousSibling;if(_e292&&_e292.is("li")){t++;}}i=i.parent;}return t;}var uT=/*#__PURE__*/function(_bw54){_inherits(uT,_bw54);function uT(){_classCallCheck(this,uT);return _possibleConstructorReturn(this,_getPrototypeOf(uT).apply(this,arguments));}_createClass(uT,[{key:"init",value:function init(){var _this230=this;var e=this.editor;e.model.schema.register("listItem",{inheritAllFrom:"$block",allowAttributes:["listType","listIndent"]});var t=e.data;var i=e.editing;e.model.document.registerPostFixer(function(t){return oT(e.model,t);});i.mapper.registerViewToModelLength("li",hT);t.mapper.registerViewToModelLength("li",hT);i.mapper.on("modelToViewPosition",iT(i.view));i.mapper.on("viewToModelPosition",nT(e.model));t.mapper.on("modelToViewPosition",iT(i.view));e.conversion["for"]("editingDowncast").add(function(t){t.on("insert",KC,{priority:"high"});t.on("insert:listItem",qC(e.model));t.on("attribute:listType:listItem",GC,{priority:"high"});t.on("attribute:listType:listItem",JC,{priority:"low"});t.on("attribute:listIndent:listItem",XC(e.model));t.on("remove:listItem",YC(e.model));t.on("remove",QC,{priority:"low"});});e.conversion["for"]("dataDowncast").add(function(t){t.on("insert",KC,{priority:"high"});t.on("insert:listItem",qC(e.model));});e.conversion["for"]("upcast").add(function(e){e.on("element:ul",eT,{priority:"high"});e.on("element:ol",eT,{priority:"high"});e.on("element:li",tT,{priority:"high"});e.on("element:li",ZC);});e.model.on("insertContent",sT,{priority:"high"});e.commands.add("numberedList",new RC(e,"numbered"));e.commands.add("bulletedList",new RC(e,"bulleted"));e.commands.add("indentList",new DC(e,"forward"));e.commands.add("outdentList",new DC(e,"backward"));var n=i.view.document;this.listenTo(n,"enter",function(e,t){var i=_this230.editor.model.document;var n=i.selection.getLastPosition().parent;if(i.selection.isCollapsed&&n.name=="listItem"&&n.isEmpty){_this230.editor.execute("outdentList");t.preventDefault();e.stop();}});this.listenTo(n,"delete",function(e,t){if(t.direction!=="backward"){return;}var i=_this230.editor.model.document.selection;if(!i.isCollapsed){return;}var n=i.getFirstPosition();if(!n.isAtStart){return;}var o=n.parent;if(o.name!=="listItem"){return;}var s=o.previousSibling&&o.previousSibling.name==="listItem";if(s){return;}_this230.editor.execute("outdentList");t.preventDefault();e.stop();},{priority:"high"});var o=function o(e){return function(t,i){var n=_this230.editor.commands.get(e);if(n.isEnabled){_this230.editor.execute(e);i();}};};e.keystrokes.set("Tab",o("indentList"));e.keystrokes.set("Shift+Tab",o("outdentList"));}},{key:"afterInit",value:function afterInit(){var e=this.editor.commands;var t=e.get("indent");var i=e.get("outdent");if(t){t.registerChildCommand(e.get("indentList"));}if(i){i.registerChildCommand(e.get("outdentList"));}}}],[{key:"pluginName",get:function get(){return"ListEditing";}},{key:"requires",get:function get(){return[X_];}}]);return uT;}(bw);function hT(e){var t=1;var _iteratorNormalCompletion339=true;var _didIteratorError339=false;var _iteratorError339=undefined;try{for(var _iterator339=e.getChildren()[Symbol.iterator](),_step339;!(_iteratorNormalCompletion339=(_step339=_iterator339.next()).done);_iteratorNormalCompletion339=true){var _i264=_step339.value;if(_i264.name=="ul"||_i264.name=="ol"){var _iteratorNormalCompletion340=true;var _didIteratorError340=false;var _iteratorError340=undefined;try{for(var _iterator340=_i264.getChildren()[Symbol.iterator](),_step340;!(_iteratorNormalCompletion340=(_step340=_iterator340.next()).done);_iteratorNormalCompletion340=true){var _e293=_step340.value;t+=hT(_e293);}}catch(err){_didIteratorError340=true;_iteratorError340=err;}finally{try{if(!_iteratorNormalCompletion340&&_iterator340["return"]!=null){_iterator340["return"]();}}finally{if(_didIteratorError340){throw _iteratorError340;}}}}}}catch(err){_didIteratorError339=true;_iteratorError339=err;}finally{try{if(!_iteratorNormalCompletion339&&_iterator339["return"]!=null){_iterator339["return"]();}}finally{if(_didIteratorError339){throw _iteratorError339;}}}return t;}var fT='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z"/></svg>';var mT='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z"/></svg>';var gT=/*#__PURE__*/function(_bw55){_inherits(gT,_bw55);function gT(){_classCallCheck(this,gT);return _possibleConstructorReturn(this,_getPrototypeOf(gT).apply(this,arguments));}_createClass(gT,[{key:"init",value:function init(){var e=this.editor.t;UC(this.editor,"numberedList",e("et"),fT);UC(this.editor,"bulletedList",e("eu"),mT);}}]);return gT;}(bw);var pT=/*#__PURE__*/function(_bw56){_inherits(pT,_bw56);function pT(){_classCallCheck(this,pT);return _possibleConstructorReturn(this,_getPrototypeOf(pT).apply(this,arguments));}_createClass(pT,null,[{key:"requires",get:function get(){return[uT,gT];}},{key:"pluginName",get:function get(){return"List";}}]);return pT;}(bw);function bT(e,t){return function(e){e.on("attribute:url:media",i);};function i(i,n,o){if(!o.consumable.consume(n.item,i.name)){return;}var s=n.attributeNewValue;var r=o.writer;var a=o.mapper.toViewElement(n.item);r.remove(r.createRangeIn(a));var c=e.getMediaViewElement(r,s,t);r.insert(r.createPositionAt(a,0),c);}}function wT(e,t,i){t.setCustomProperty("media",true,e);return Ev(e,t,{label:i});}function _T(e){var t=e.getSelectedElement();if(t&&vT(t)){return t;}return null;}function vT(e){return!!e.getCustomProperty("media")&&Mv(e);}function kT(e,t,i,n){var o=e.createContainerElement("figure",{"class":"media"});o.getFillerOffset=AT;e.insert(e.createPositionAt(o,0),t.getMediaViewElement(e,i,n));return o;}function yT(e){var t=e.getSelectedElement();if(t&&t.is("media")){return t;}return null;}function xT(e,t,i){e.change(function(n){var o=n.createElement("media",{url:t});e.insertContent(o,i);n.setSelection(o,"on");});}function AT(){return null;}var CT=/*#__PURE__*/function(_w19){_inherits(CT,_w19);function CT(){_classCallCheck(this,CT);return _possibleConstructorReturn(this,_getPrototypeOf(CT).apply(this,arguments));}_createClass(CT,[{key:"refresh",value:function refresh(){var e=this.editor.model;var t=e.document.selection;var i=e.schema;var n=t.getFirstPosition();var o=yT(t);var s=n.parent;if(s!=s.root){s=s.parent;}this.value=o?o.getAttribute("url"):null;this.isEnabled=i.checkChild(s,"media");}},{key:"execute",value:function execute(e){var t=this.editor.model;var i=t.document.selection;var n=yT(i);if(n){t.change(function(t){t.setAttribute("url",e,n);});}else{var _n143=Ov(i,t);xT(t,e,_n143);}}}]);return CT;}(_w);var TT='<svg viewBox="0 0 64 42" xmlns="http://www.w3.org/2000/svg"><path d="M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z"/></svg>';var MT="0 0 64 42";var ET=/*#__PURE__*/function(){function ET(e,t){_classCallCheck(this,ET);var i=t.providers;var n=t.extraProviders||[];var o=new Set(t.removeProviders);var s=i.concat(n).filter(function(e){var t=e.name;if(!t){console.warn(Object(rr["a"])("media-embed-no-provider-name: The configured media provider has no name and cannot be used."),{provider:e});return false;}return!o.has(t);});this.locale=e;this.providerDefinitions=s;}_createClass(ET,[{key:"hasMedia",value:function hasMedia(e){return!!this._getMedia(e);}},{key:"getMediaViewElement",value:function getMediaViewElement(e,t,i){return this._getMedia(t).getViewElement(e,i);}},{key:"_getMedia",value:function _getMedia(e){if(!e){return new PT(this.locale);}e=e.trim();var _iteratorNormalCompletion341=true;var _didIteratorError341=false;var _iteratorError341=undefined;try{for(var _iterator341=this.providerDefinitions[Symbol.iterator](),_step341;!(_iteratorNormalCompletion341=(_step341=_iterator341.next()).done);_iteratorNormalCompletion341=true){var _t259=_step341.value;var _i265=_t259.html;var _n144=_t259.url;if(!Array.isArray(_n144)){_n144=[_n144];}var _iteratorNormalCompletion342=true;var _didIteratorError342=false;var _iteratorError342=undefined;try{for(var _iterator342=_n144[Symbol.iterator](),_step342;!(_iteratorNormalCompletion342=(_step342=_iterator342.next()).done);_iteratorNormalCompletion342=true){var _t260=_step342.value;var _n145=this._getUrlMatches(e,_t260);if(_n145){return new PT(this.locale,e,_n145,_i265);}}}catch(err){_didIteratorError342=true;_iteratorError342=err;}finally{try{if(!_iteratorNormalCompletion342&&_iterator342["return"]!=null){_iterator342["return"]();}}finally{if(_didIteratorError342){throw _iteratorError342;}}}}}catch(err){_didIteratorError341=true;_iteratorError341=err;}finally{try{if(!_iteratorNormalCompletion341&&_iterator341["return"]!=null){_iterator341["return"]();}}finally{if(_didIteratorError341){throw _iteratorError341;}}}return null;}},{key:"_getUrlMatches",value:function _getUrlMatches(e,t){var i=e.match(t);if(i){return i;}var n=e.replace(/^https?:\/\//,"");i=n.match(t);if(i){return i;}n=n.replace(/^www\./,"");i=n.match(t);if(i){return i;}return null;}}]);return ET;}();var PT=/*#__PURE__*/function(){function PT(e,t,i,n){_classCallCheck(this,PT);this.url=this._getValidUrl(t);this._t=e.t;this._match=i;this._previewRenderer=n;}_createClass(PT,[{key:"getViewElement",value:function getViewElement(e,t){var i={};if(t.renderForEditingView||t.renderMediaPreview&&this.url&&this._previewRenderer){if(this.url){i["data-oembed-url"]=this.url;}if(t.renderForEditingView){i["class"]="ck-media__wrapper";}var _n146=this._getPreviewHtml(t);return e.createUIElement("div",i,function(e){var t=this.toDomElement(e);t.innerHTML=_n146;return t;});}else{if(this.url){i.url=this.url;}return e.createEmptyElement("oembed",i);}}},{key:"_getPreviewHtml",value:function _getPreviewHtml(e){if(this._previewRenderer){return this._previewRenderer(this._match);}else{if(this.url&&e.renderForEditingView){return this._getPlaceholderHtml();}return"";}}},{key:"_getPlaceholderHtml",value:function _getPlaceholderHtml(){var e=new jb();var t=new zb();e.text=this._t("Open media in new tab");t.content=TT;t.viewBox=MT;var i=new Dp({tag:"div",attributes:{"class":"ck ck-reset_all ck-media__placeholder"},children:[{tag:"div",attributes:{"class":"ck-media__placeholder__icon"},children:[t]},{tag:"a",attributes:{"class":"ck-media__placeholder__url",target:"_blank",rel:"noopener noreferrer",href:this.url},children:[{tag:"span",attributes:{"class":"ck-media__placeholder__url__text"},children:[this.url]},e]}]}).render();return i.outerHTML;}},{key:"_getValidUrl",value:function _getValidUrl(e){if(!e){return null;}if(e.match(/^https?/)){return e;}return"https://"+e;}}]);return PT;}();var ST=i(88);var IT=/*#__PURE__*/function(_bw57){_inherits(IT,_bw57);_createClass(IT,null,[{key:"pluginName",get:function get(){return"MediaEmbedEditing";}}]);function IT(e){var _this231;_classCallCheck(this,IT);_this231=_possibleConstructorReturn(this,_getPrototypeOf(IT).call(this,e));e.config.define("mediaEmbed",{providers:[{name:"dailymotion",url:/^dailymotion\.com\/video\/(\w+)/,html:function html(e){var t=e[1];return'<div style="position: relative; padding-bottom: 100%; height: 0; ">'+"<iframe src=\"https://www.dailymotion.com/embed/video/".concat(t,"\" ")+'style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" '+'frameborder="0" width="480" height="270" allowfullscreen allow="autoplay">'+"</iframe>"+"</div>";}},{name:"spotify",url:[/^open\.spotify\.com\/(artist\/\w+)/,/^open\.spotify\.com\/(album\/\w+)/,/^open\.spotify\.com\/(track\/\w+)/],html:function html(e){var t=e[1];return'<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;">'+"<iframe src=\"https://open.spotify.com/embed/".concat(t,"\" ")+'style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" '+'frameborder="0" allowtransparency="true" allow="encrypted-media">'+"</iframe>"+"</div>";}},{name:"youtube",url:[/^(?:m\.)?youtube\.com\/watch\?v=([\w-]+)/,/^(?:m\.)?youtube\.com\/v\/([\w-]+)/,/^youtube\.com\/embed\/([\w-]+)/,/^youtu\.be\/([\w-]+)/],html:function html(e){var t=e[1];return'<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;">'+"<iframe src=\"https://www.youtube.com/embed/".concat(t,"\" ")+'style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" '+'frameborder="0" allow="autoplay; encrypted-media" allowfullscreen>'+"</iframe>"+"</div>";}},{name:"vimeo",url:[/^vimeo\.com\/(\d+)/,/^vimeo\.com\/[^/]+\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/album\/[^/]+\/video\/(\d+)/,/^vimeo\.com\/channels\/[^/]+\/(\d+)/,/^vimeo\.com\/groups\/[^/]+\/videos\/(\d+)/,/^vimeo\.com\/ondemand\/[^/]+\/(\d+)/,/^player\.vimeo\.com\/video\/(\d+)/],html:function html(e){var t=e[1];return'<div style="position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;">'+"<iframe src=\"https://player.vimeo.com/video/".concat(t,"\" ")+'style="position: absolute; width: 100%; height: 100%; top: 0; left: 0;" '+'frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen>'+"</iframe>"+"</div>";}},{name:"instagram",url:/^instagram\.com\/p\/(\w+)/},{name:"twitter",url:/^twitter\.com/},{name:"googleMaps",url:/^google\.com\/maps/},{name:"flickr",url:/^flickr\.com/},{name:"facebook",url:/^facebook\.com/}]});_this231.registry=new ET(e.locale,e.config.get("mediaEmbed"));return _this231;}_createClass(IT,[{key:"init",value:function init(){var e=this.editor;var t=e.model.schema;var i=e.t;var n=e.conversion;var o=e.config.get("mediaEmbed.previewsInData");var s=this.registry;e.commands.add("mediaEmbed",new CT(e));t.register("media",{isObject:true,isBlock:true,allowWhere:"$block",allowAttributes:["url"]});n["for"]("dataDowncast").elementToElement({model:"media",view:function view(e,t){var i=e.getAttribute("url");return kT(t,s,i,{renderMediaPreview:i&&o});}});n["for"]("dataDowncast").add(bT(s,{renderMediaPreview:o}));n["for"]("editingDowncast").elementToElement({model:"media",view:function view(e,t){var n=e.getAttribute("url");var o=kT(t,s,n,{renderForEditingView:true});return wT(o,t,i("y"));}});n["for"]("editingDowncast").add(bT(s,{renderForEditingView:true}));n["for"]("upcast").elementToElement({view:{name:"oembed",attributes:{url:true}},model:function model(e,t){var i=e.getAttribute("url");if(s.hasMedia(i)){return t.createElement("media",{url:i});}}}).elementToElement({view:{name:"div",attributes:{"data-oembed-url":true}},model:function model(e,t){var i=e.getAttribute("data-oembed-url");if(s.hasMedia(i)){return t.createElement("media",{url:i});}}});}}]);return IT;}(bw);var NT=new Map();function OT(e,t,i){var n=NT.get(e);if(!n){n=new Map();NT.set(e,n);}n.set(t,i);}function RT(e,t){var i=NT.get(e);if(i&&i.has(t)){return i.get(t);}return LT;}function LT(e){return[e];}function zT(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=RT(e.constructor,t.constructor);try{e=e.clone();return n(e,t,i);}catch(e){throw e;}}function DT(e,t,i){e=e.slice();t=t.slice();var n=new jT(i.document,i.useRelations,i.forceWeakRemove);n.setOriginalOperations(e);n.setOriginalOperations(t);var o=n.originalOperations;if(e.length==0||t.length==0){return{operationsA:e,operationsB:t,originalOperations:o};}var s=new WeakMap();var _iteratorNormalCompletion343=true;var _didIteratorError343=false;var _iteratorError343=undefined;try{for(var _iterator343=e[Symbol.iterator](),_step343;!(_iteratorNormalCompletion343=(_step343=_iterator343.next()).done);_iteratorNormalCompletion343=true){var _t262=_step343.value;s.set(_t262,0);}}catch(err){_didIteratorError343=true;_iteratorError343=err;}finally{try{if(!_iteratorNormalCompletion343&&_iterator343["return"]!=null){_iterator343["return"]();}}finally{if(_didIteratorError343){throw _iteratorError343;}}}var r={nextBaseVersionA:e[e.length-1].baseVersion+1,nextBaseVersionB:t[t.length-1].baseVersion+1,originalOperationsACount:e.length,originalOperationsBCount:t.length};var a=0;while(a<e.length){var _e294,_t261;var _i266=e[a];var _o77=s.get(_i266);if(_o77==t.length){a++;continue;}var _r32=t[_o77];var _c9=zT(_i266,_r32,n.getContext(_i266,_r32,true));var _l4=zT(_r32,_i266,n.getContext(_r32,_i266,false));n.updateRelation(_i266,_r32);n.setOriginalOperations(_c9,_i266);n.setOriginalOperations(_l4,_r32);var _iteratorNormalCompletion344=true;var _didIteratorError344=false;var _iteratorError344=undefined;try{for(var _iterator344=_c9[Symbol.iterator](),_step344;!(_iteratorNormalCompletion344=(_step344=_iterator344.next()).done);_iteratorNormalCompletion344=true){var _e295=_step344.value;s.set(_e295,_o77+_l4.length);}}catch(err){_didIteratorError344=true;_iteratorError344=err;}finally{try{if(!_iteratorNormalCompletion344&&_iterator344["return"]!=null){_iterator344["return"]();}}finally{if(_didIteratorError344){throw _iteratorError344;}}}(_e294=e).splice.apply(_e294,[a,1].concat(_toConsumableArray(_c9)));(_t261=t).splice.apply(_t261,[_o77,1].concat(_toConsumableArray(_l4)));}if(i.padWithNoOps){var _i267=e.length-r.originalOperationsACount;var _n147=t.length-r.originalOperationsBCount;VT(e,_n147-_i267);VT(t,_i267-_n147);}BT(e,r.nextBaseVersionB);BT(t,r.nextBaseVersionA);return{operationsA:e,operationsB:t,originalOperations:o};}var jT=/*#__PURE__*/function(){function jT(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;_classCallCheck(this,jT);this.originalOperations=new Map();this._history=e.history;this._useRelations=t;this._forceWeakRemove=!!i;this._relations=new Map();}_createClass(jT,[{key:"setOriginalOperations",value:function setOriginalOperations(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;var i=t?this.originalOperations.get(t):null;var _iteratorNormalCompletion345=true;var _didIteratorError345=false;var _iteratorError345=undefined;try{for(var _iterator345=e[Symbol.iterator](),_step345;!(_iteratorNormalCompletion345=(_step345=_iterator345.next()).done);_iteratorNormalCompletion345=true){var _t263=_step345.value;this.originalOperations.set(_t263,i||_t263);}}catch(err){_didIteratorError345=true;_iteratorError345=err;}finally{try{if(!_iteratorNormalCompletion345&&_iterator345["return"]!=null){_iterator345["return"]();}}finally{if(_didIteratorError345){throw _iteratorError345;}}}}},{key:"updateRelation",value:function updateRelation(e,t){switch(e.constructor){case Zm:{switch(t.constructor){case og:{if(e.targetPosition.isEqual(t.sourcePosition)||t.movedRange.containsPosition(e.targetPosition)){this._setRelation(e,t,"insertAtSource");}else if(e.targetPosition.isEqual(t.deletionPosition)){this._setRelation(e,t,"insertBetween");}else if(e.targetPosition.isAfter(t.sourcePosition)){this._setRelation(e,t,"moveTargetAfter");}break;}case Zm:{if(e.targetPosition.isEqual(t.sourcePosition)||e.targetPosition.isBefore(t.sourcePosition)){this._setRelation(e,t,"insertBefore");}else{this._setRelation(e,t,"insertAfter");}break;}}break;}case sg:{switch(t.constructor){case og:{if(e.splitPosition.isBefore(t.sourcePosition)){this._setRelation(e,t,"splitBefore");}break;}case Zm:{if(e.splitPosition.isEqual(t.sourcePosition)||e.splitPosition.isBefore(t.sourcePosition)){this._setRelation(e,t,"splitBefore");}break;}}break;}case og:{switch(t.constructor){case og:{if(!e.targetPosition.isEqual(t.sourcePosition)){this._setRelation(e,t,"mergeTargetNotMoved");}if(e.sourcePosition.isEqual(t.targetPosition)){this._setRelation(e,t,"mergeSourceNotMoved");}if(e.sourcePosition.isEqual(t.sourcePosition)){this._setRelation(e,t,"mergeSameElement");}break;}case sg:{if(e.sourcePosition.isEqual(t.splitPosition)){this._setRelation(e,t,"splitAtSource");}}}break;}case tg:{var _i268=e.newRange;if(!_i268){return;}switch(t.constructor){case Zm:{var _n148=qh._createFromPositionAndShift(t.sourcePosition,t.howMany);var _o78=_n148.containsPosition(_i268.start)||_n148.start.isEqual(_i268.start);var _s48=_n148.containsPosition(_i268.end)||_n148.end.isEqual(_i268.end);if((_o78||_s48)&&!_n148.containsRange(_i268)){this._setRelation(e,t,{side:_o78?"left":"right",path:_o78?_i268.start.path.slice():_i268.end.path.slice()});}break;}case og:{var _n149=_i268.start.isEqual(t.targetPosition);var _o79=_i268.start.isEqual(t.deletionPosition);var _s49=_i268.end.isEqual(t.deletionPosition);var _r33=_i268.end.isEqual(t.sourcePosition);if(_n149||_o79||_s49||_r33){this._setRelation(e,t,{wasInLeftElement:_n149,wasStartBeforeMergedElement:_o79,wasEndBeforeMergedElement:_s49,wasInRightElement:_r33});}break;}}break;}}}},{key:"getContext",value:function getContext(e,t,i){return{aIsStrong:i,aWasUndone:this._wasUndone(e),bWasUndone:this._wasUndone(t),abRelation:this._useRelations?this._getRelation(e,t):null,baRelation:this._useRelations?this._getRelation(t,e):null,forceWeakRemove:this._forceWeakRemove};}},{key:"_wasUndone",value:function _wasUndone(e){var t=this.originalOperations.get(e);return t.wasUndone||this._history.isUndoneOperation(t);}},{key:"_getRelation",value:function _getRelation(e,t){var i=this.originalOperations.get(t);var n=this._history.getUndoneOperation(i);if(!n){return null;}var o=this.originalOperations.get(e);var s=this._relations.get(o);if(s){return s.get(n)||null;}return null;}},{key:"_setRelation",value:function _setRelation(e,t,i){var n=this.originalOperations.get(e);var o=this.originalOperations.get(t);var s=this._relations.get(n);if(!s){s=new Map();this._relations.set(n,s);}s.set(o,i);}}]);return jT;}();function BT(e,t){var _iteratorNormalCompletion346=true;var _didIteratorError346=false;var _iteratorError346=undefined;try{for(var _iterator346=e[Symbol.iterator](),_step346;!(_iteratorNormalCompletion346=(_step346=_iterator346.next()).done);_iteratorNormalCompletion346=true){var _i269=_step346.value;_i269.baseVersion=t++;}}catch(err){_didIteratorError346=true;_iteratorError346=err;}finally{try{if(!_iteratorNormalCompletion346&&_iterator346["return"]!=null){_iterator346["return"]();}}finally{if(_didIteratorError346){throw _iteratorError346;}}}}function VT(e,t){for(var _i270=0;_i270<t;_i270++){e.push(new Eg(0));}}OT(Km,Km,function(e,t,i){if(e.key===t.key){var _n150=e.range.getDifference(t.range).map(function(t){return new Km(t,e.key,e.oldValue,e.newValue,0);});var _o80=e.range.getIntersection(t.range);if(_o80){if(i.aIsStrong){_n150.push(new Km(_o80,t.key,t.newValue,e.newValue,0));}}if(_n150.length==0){return[new Eg(0)];}return _n150;}else{return[e];}});OT(Km,eg,function(e,t){if(e.range.start.hasSameParentAs(t.position)&&e.range.containsPosition(t.position)){var _i271=e.range._getTransformedByInsertion(t.position,t.howMany,!t.shouldReceiveAttributes);var _n151=_i271.map(function(t){return new Km(t,e.key,e.oldValue,e.newValue,e.baseVersion);});if(t.shouldReceiveAttributes){var _i272=FT(t,e.key,e.oldValue);if(_i272){_n151.unshift(_i272);}}return _n151;}e.range=e.range._getTransformedByInsertion(t.position,t.howMany,false)[0];return[e];});function FT(e,t,i){var n=e.nodes;var o=n.getNode(0).getAttribute(t);if(o==i){return null;}var s=new qh(e.position,e.position.getShiftedBy(e.howMany));return new Km(s,t,o,i,0);}OT(Km,og,function(e,t){var i=[];if(e.range.start.hasSameParentAs(t.deletionPosition)){if(e.range.containsPosition(t.deletionPosition)||e.range.start.isEqual(t.deletionPosition)){i.push(qh._createFromPositionAndShift(t.graveyardPosition,1));}}var n=e.range._getTransformedByMergeOperation(t);if(!n.isCollapsed){i.push(n);}return i.map(function(t){return new Km(t,e.key,e.oldValue,e.newValue,e.baseVersion);});});OT(Km,Zm,function(e,t){var i=HT(e.range,t);return i.map(function(t){return new Km(t,e.key,e.oldValue,e.newValue,e.baseVersion);});});function HT(e,t){var i=qh._createFromPositionAndShift(t.sourcePosition,t.howMany);var n=null;var o=[];if(i.containsRange(e,true)){n=e;}else if(e.start.hasSameParentAs(i.start)){o=e.getDifference(i);n=e.getIntersection(i);}else{o=[e];}var s=[];var _iteratorNormalCompletion347=true;var _didIteratorError347=false;var _iteratorError347=undefined;try{for(var _iterator347=o[Symbol.iterator](),_step347;!(_iteratorNormalCompletion347=(_step347=_iterator347.next()).done);_iteratorNormalCompletion347=true){var _e296=_step347.value;_e296=_e296._getTransformedByDeletion(t.sourcePosition,t.howMany);var _i273=t.getMovedRangeStart();var _n152=_e296.start.hasSameParentAs(_i273);_e296=_e296._getTransformedByInsertion(_i273,t.howMany,_n152);s.push.apply(s,_toConsumableArray(_e296));}}catch(err){_didIteratorError347=true;_iteratorError347=err;}finally{try{if(!_iteratorNormalCompletion347&&_iterator347["return"]!=null){_iterator347["return"]();}}finally{if(_didIteratorError347){throw _iteratorError347;}}}if(n){s.push(n._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany,false)[0]);}return s;}OT(Km,sg,function(e,t){if(e.range.end.isEqual(t.insertionPosition)){if(!t.graveyardPosition){e.range.end.offset++;}return[e];}if(e.range.start.hasSameParentAs(t.splitPosition)&&e.range.containsPosition(t.splitPosition)){var _i274=e.clone();_i274.range=new qh(t.moveTargetPosition.clone(),e.range.end._getCombined(t.splitPosition,t.moveTargetPosition));e.range.end=t.splitPosition.clone();e.range.end.stickiness="toPrevious";return[e,_i274];}e.range=e.range._getTransformedBySplitOperation(t);return[e];});OT(eg,Km,function(e,t){var i=[e];if(e.shouldReceiveAttributes&&e.position.hasSameParentAs(t.range.start)&&t.range.containsPosition(e.position)){var _n153=FT(e,t.key,t.newValue);if(_n153){i.push(_n153);}}return i;});OT(eg,eg,function(e,t,i){if(e.position.isEqual(t.position)&&i.aIsStrong){return[e];}e.position=e.position._getTransformedByInsertOperation(t);return[e];});OT(eg,Zm,function(e,t){e.position=e.position._getTransformedByMoveOperation(t);return[e];});OT(eg,sg,function(e,t){e.position=e.position._getTransformedBySplitOperation(t);return[e];});OT(eg,og,function(e,t){e.position=e.position._getTransformedByMergeOperation(t);return[e];});OT(tg,eg,function(e,t){if(e.oldRange){e.oldRange=e.oldRange._getTransformedByInsertOperation(t)[0];}if(e.newRange){e.newRange=e.newRange._getTransformedByInsertOperation(t)[0];}return[e];});OT(tg,tg,function(e,t,i){if(e.name==t.name){if(i.aIsStrong){e.oldRange=t.newRange?t.newRange.clone():null;}else{return[new Eg(0)];}}return[e];});OT(tg,og,function(e,t){if(e.oldRange){e.oldRange=e.oldRange._getTransformedByMergeOperation(t);}if(e.newRange){e.newRange=e.newRange._getTransformedByMergeOperation(t);}return[e];});OT(tg,Zm,function(e,t,i){if(e.oldRange){e.oldRange=qh._createFromRanges(e.oldRange._getTransformedByMoveOperation(t));}if(e.newRange){if(i.abRelation){var _n154=qh._createFromRanges(e.newRange._getTransformedByMoveOperation(t));if(i.abRelation.side=="left"&&t.targetPosition.isEqual(e.newRange.start)){e.newRange.start.path=i.abRelation.path;e.newRange.end=_n154.end;return[e];}else if(i.abRelation.side=="right"&&t.targetPosition.isEqual(e.newRange.end)){e.newRange.start=_n154.start;e.newRange.end.path=i.abRelation.path;return[e];}}e.newRange=qh._createFromRanges(e.newRange._getTransformedByMoveOperation(t));}return[e];});OT(tg,sg,function(e,t,i){if(e.oldRange){e.oldRange=e.oldRange._getTransformedBySplitOperation(t);}if(e.newRange){if(i.abRelation){var _n155=e.newRange._getTransformedBySplitOperation(t);if(e.newRange.start.isEqual(t.splitPosition)&&i.abRelation.wasStartBeforeMergedElement){e.newRange.start=$h._createAt(t.insertionPosition);}else if(e.newRange.start.isEqual(t.splitPosition)&&!i.abRelation.wasInLeftElement){e.newRange.start=$h._createAt(t.moveTargetPosition);}if(e.newRange.end.isEqual(t.splitPosition)&&i.abRelation.wasInRightElement){e.newRange.end=$h._createAt(t.moveTargetPosition);}else if(e.newRange.end.isEqual(t.splitPosition)&&i.abRelation.wasEndBeforeMergedElement){e.newRange.end=$h._createAt(t.insertionPosition);}else{e.newRange.end=_n155.end;}return[e];}e.newRange=e.newRange._getTransformedBySplitOperation(t);}return[e];});OT(og,eg,function(e,t){if(e.sourcePosition.hasSameParentAs(t.position)){e.howMany+=t.howMany;}e.sourcePosition=e.sourcePosition._getTransformedByInsertOperation(t);e.targetPosition=e.targetPosition._getTransformedByInsertOperation(t);return[e];});OT(og,og,function(e,t,i){if(e.sourcePosition.isEqual(t.sourcePosition)&&e.targetPosition.isEqual(t.targetPosition)){if(!i.bWasUndone){return[new Eg(0)];}else{var _i275=t.graveyardPosition.path.slice();_i275.push(0);e.sourcePosition=new $h(t.graveyardPosition.root,_i275);e.howMany=0;return[e];}}if(e.sourcePosition.isEqual(t.sourcePosition)&&!e.targetPosition.isEqual(t.targetPosition)&&!i.bWasUndone&&i.abRelation!="splitAtSource"){var _n156=e.targetPosition.root.rootName=="$graveyard";var _o81=t.targetPosition.root.rootName=="$graveyard";var _s50=_n156&&!_o81;var _r34=_o81&&!_n156;var _a18=_r34||!_s50&&i.aIsStrong;if(_a18){var _i276=t.targetPosition._getTransformedByMergeOperation(t);var _n157=e.targetPosition._getTransformedByMergeOperation(t);return[new Zm(_i276,e.howMany,_n157,0)];}else{return[new Eg(0)];}}if(e.sourcePosition.hasSameParentAs(t.targetPosition)){e.howMany+=t.howMany;}e.sourcePosition=e.sourcePosition._getTransformedByMergeOperation(t);e.targetPosition=e.targetPosition._getTransformedByMergeOperation(t);if(!e.graveyardPosition.isEqual(t.graveyardPosition)||!i.aIsStrong){e.graveyardPosition=e.graveyardPosition._getTransformedByMergeOperation(t);}return[e];});OT(og,Zm,function(e,t,i){var n=qh._createFromPositionAndShift(t.sourcePosition,t.howMany);if(t.type=="remove"&&!i.bWasUndone&&!i.forceWeakRemove){if(e.deletionPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(e.sourcePosition)){return[new Eg(0)];}}if(e.sourcePosition.hasSameParentAs(t.targetPosition)){e.howMany+=t.howMany;}if(e.sourcePosition.hasSameParentAs(t.sourcePosition)){e.howMany-=t.howMany;}e.sourcePosition=e.sourcePosition._getTransformedByMoveOperation(t);e.targetPosition=e.targetPosition._getTransformedByMoveOperation(t);if(!e.graveyardPosition.isEqual(t.targetPosition)){e.graveyardPosition=e.graveyardPosition._getTransformedByMoveOperation(t);}return[e];});OT(og,sg,function(e,t,i){if(t.graveyardPosition){e.graveyardPosition=e.graveyardPosition._getTransformedByDeletion(t.graveyardPosition,1);if(e.deletionPosition.isEqual(t.graveyardPosition)){e.howMany=t.howMany;}}if(e.targetPosition.isEqual(t.splitPosition)){var _n158=t.howMany!=0;var _o82=t.graveyardPosition&&e.deletionPosition.isEqual(t.graveyardPosition);if(_n158||_o82||i.abRelation=="mergeTargetNotMoved"){e.sourcePosition=e.sourcePosition._getTransformedBySplitOperation(t);return[e];}}if(e.sourcePosition.isEqual(t.splitPosition)){if(i.abRelation=="mergeSourceNotMoved"){e.howMany=0;e.targetPosition=e.targetPosition._getTransformedBySplitOperation(t);return[e];}if(i.abRelation=="mergeSameElement"||e.sourcePosition.offset>0){e.sourcePosition=t.moveTargetPosition.clone();e.targetPosition=e.targetPosition._getTransformedBySplitOperation(t);return[e];}}if(e.sourcePosition.hasSameParentAs(t.splitPosition)){e.howMany=t.splitPosition.offset;}e.sourcePosition=e.sourcePosition._getTransformedBySplitOperation(t);e.targetPosition=e.targetPosition._getTransformedBySplitOperation(t);return[e];});OT(Zm,eg,function(e,t){var i=qh._createFromPositionAndShift(e.sourcePosition,e.howMany);var n=i._getTransformedByInsertOperation(t,false)[0];e.sourcePosition=n.start;e.howMany=n.end.offset-n.start.offset;if(!e.targetPosition.isEqual(t.position)){e.targetPosition=e.targetPosition._getTransformedByInsertOperation(t);}return[e];});OT(Zm,Zm,function(e,t,i){var n=qh._createFromPositionAndShift(e.sourcePosition,e.howMany);var o=qh._createFromPositionAndShift(t.sourcePosition,t.howMany);var s=i.aIsStrong;var r=!i.aIsStrong;if(i.abRelation=="insertBefore"||i.baRelation=="insertAfter"){r=true;}else if(i.abRelation=="insertAfter"||i.baRelation=="insertBefore"){r=false;}var a;if(e.targetPosition.isEqual(t.targetPosition)&&r){a=e.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany);}else{a=e.targetPosition._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany);}if(WT(e,t)&&WT(t,e)){return[t.getReversed()];}var c=n.containsPosition(t.targetPosition);if(c&&n.containsRange(o,true)){n.start=n.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany);n.end=n.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany);return UT([n],a);}var l=o.containsPosition(e.targetPosition);if(l&&o.containsRange(n,true)){n.start=n.start._getCombined(t.sourcePosition,t.getMovedRangeStart());n.end=n.end._getCombined(t.sourcePosition,t.getMovedRangeStart());return UT([n],a);}var d=Or(e.sourcePosition.getParentPath(),t.sourcePosition.getParentPath());if(d=="prefix"||d=="extension"){n.start=n.start._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany);n.end=n.end._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany);return UT([n],a);}if(e.type=="remove"&&t.type!="remove"&&!i.aWasUndone&&!i.forceWeakRemove){s=true;}else if(e.type!="remove"&&t.type=="remove"&&!i.bWasUndone&&!i.forceWeakRemove){s=false;}var u=[];var h=n.getDifference(o);var _iteratorNormalCompletion348=true;var _didIteratorError348=false;var _iteratorError348=undefined;try{for(var _iterator348=h[Symbol.iterator](),_step348;!(_iteratorNormalCompletion348=(_step348=_iterator348.next()).done);_iteratorNormalCompletion348=true){var _e297=_step348.value;_e297.start=_e297.start._getTransformedByDeletion(t.sourcePosition,t.howMany);_e297.end=_e297.end._getTransformedByDeletion(t.sourcePosition,t.howMany);var _i277=Or(_e297.start.getParentPath(),t.getMovedRangeStart().getParentPath())=="same";var _n159=_e297._getTransformedByInsertion(t.getMovedRangeStart(),t.howMany,_i277);u.push.apply(u,_toConsumableArray(_n159));}}catch(err){_didIteratorError348=true;_iteratorError348=err;}finally{try{if(!_iteratorNormalCompletion348&&_iterator348["return"]!=null){_iterator348["return"]();}}finally{if(_didIteratorError348){throw _iteratorError348;}}}var f=n.getIntersection(o);if(f!==null&&s){f.start=f.start._getCombined(t.sourcePosition,t.getMovedRangeStart());f.end=f.end._getCombined(t.sourcePosition,t.getMovedRangeStart());if(u.length===0){u.push(f);}else if(u.length==1){if(o.start.isBefore(n.start)||o.start.isEqual(n.start)){u.unshift(f);}else{u.push(f);}}else{u.splice(1,0,f);}}if(u.length===0){return[new Eg(e.baseVersion)];}return UT(u,a);});OT(Zm,sg,function(e,t,i){var n=e.targetPosition.clone();if(!e.targetPosition.isEqual(t.insertionPosition)||!t.graveyardPosition||i.abRelation=="moveTargetAfter"){n=e.targetPosition._getTransformedBySplitOperation(t);}var o=qh._createFromPositionAndShift(e.sourcePosition,e.howMany);if(o.end.isEqual(t.insertionPosition)){if(!t.graveyardPosition){e.howMany++;}e.targetPosition=n;return[e];}if(o.start.hasSameParentAs(t.splitPosition)&&o.containsPosition(t.splitPosition)){var _e298=new qh(t.splitPosition,o.end);_e298=_e298._getTransformedBySplitOperation(t);var _i278=[new qh(o.start,t.splitPosition),_e298];return UT(_i278,n);}if(e.targetPosition.isEqual(t.splitPosition)&&i.abRelation=="insertAtSource"){n=t.moveTargetPosition;}if(e.targetPosition.isEqual(t.insertionPosition)&&i.abRelation=="insertBetween"){n=e.targetPosition;}var s=o._getTransformedBySplitOperation(t);var r=[s];if(t.graveyardPosition){var _n160=o.start.isEqual(t.graveyardPosition)||o.containsPosition(t.graveyardPosition);if(e.howMany>1&&_n160&&!i.aWasUndone){r.push(qh._createFromPositionAndShift(t.insertionPosition,1));}}return UT(r,n);});OT(Zm,og,function(e,t,i){var n=qh._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.deletionPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(t.sourcePosition)){if(e.type=="remove"&&!i.forceWeakRemove){if(!i.aWasUndone){var _i279=[];var _n161=t.graveyardPosition.clone();var _o83=t.targetPosition._getTransformedByMergeOperation(t);if(e.howMany>1){_i279.push(new Zm(e.sourcePosition,e.howMany-1,e.targetPosition,0));_n161=_n161._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany-1);_o83=_o83._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany-1);}var _s51=t.deletionPosition._getCombined(e.sourcePosition,e.targetPosition);var _r35=new Zm(_n161,1,_s51,0);var _a19=_r35.getMovedRangeStart().path.slice();_a19.push(0);var _c10=new $h(_r35.targetPosition.root,_a19);_o83=_o83._getTransformedByMove(_n161,_s51,1);var _l5=new Zm(_o83,t.howMany,_c10,0);_i279.push(_r35);_i279.push(_l5);return _i279;}}else{if(e.howMany==1){if(!i.bWasUndone){return[new Eg(0)];}else{e.sourcePosition=t.graveyardPosition.clone();e.targetPosition=e.targetPosition._getTransformedByMergeOperation(t);return[e];}}}}var o=qh._createFromPositionAndShift(e.sourcePosition,e.howMany);var s=o._getTransformedByMergeOperation(t);e.sourcePosition=s.start;e.howMany=s.end.offset-s.start.offset;e.targetPosition=e.targetPosition._getTransformedByMergeOperation(t);return[e];});OT(ig,eg,function(e,t){e.position=e.position._getTransformedByInsertOperation(t);return[e];});OT(ig,og,function(e,t){if(e.position.isEqual(t.deletionPosition)){e.position=t.graveyardPosition.clone();e.position.stickiness="toNext";return[e];}e.position=e.position._getTransformedByMergeOperation(t);return[e];});OT(ig,Zm,function(e,t){e.position=e.position._getTransformedByMoveOperation(t);return[e];});OT(ig,ig,function(e,t,i){if(e.position.isEqual(t.position)){if(i.aIsStrong){e.oldName=t.newName;}else{return[new Eg(0)];}}return[e];});OT(ig,sg,function(e,t){var i=e.position.path;var n=t.splitPosition.getParentPath();if(Or(i,n)=="same"&&!t.graveyardPosition){var _t264=new ig(e.position.getShiftedBy(1),e.oldName,e.newName,0);return[e,_t264];}e.position=e.position._getTransformedBySplitOperation(t);return[e];});OT(ng,ng,function(e,t,i){if(e.root===t.root&&e.key===t.key){if(!i.aIsStrong||e.newValue===t.newValue){return[new Eg(0)];}else{e.oldValue=t.newValue;}}return[e];});OT(sg,eg,function(e,t){if(e.splitPosition.hasSameParentAs(t.position)&&e.splitPosition.offset<t.position.offset){e.howMany+=t.howMany;}e.splitPosition=e.splitPosition._getTransformedByInsertOperation(t);e.insertionPosition=sg.getInsertionPosition(e.splitPosition);return[e];});OT(sg,og,function(e,t,i){if(!e.graveyardPosition&&!i.bWasUndone&&e.splitPosition.hasSameParentAs(t.sourcePosition)){var _i280=t.graveyardPosition.path.slice();_i280.push(0);var _n162=new $h(t.graveyardPosition.root,_i280);var _o84=sg.getInsertionPosition(new $h(t.graveyardPosition.root,_i280));var _s52=new sg(_n162,0,null,0);_s52.insertionPosition=_o84;e.splitPosition=e.splitPosition._getTransformedByMergeOperation(t);e.insertionPosition=sg.getInsertionPosition(e.splitPosition);e.graveyardPosition=_s52.insertionPosition.clone();e.graveyardPosition.stickiness="toNext";return[_s52,e];}if(e.splitPosition.hasSameParentAs(t.deletionPosition)&&!e.splitPosition.isAfter(t.deletionPosition)){e.howMany--;}if(e.splitPosition.hasSameParentAs(t.targetPosition)){e.howMany+=t.howMany;}e.splitPosition=e.splitPosition._getTransformedByMergeOperation(t);e.insertionPosition=sg.getInsertionPosition(e.splitPosition);if(e.graveyardPosition){e.graveyardPosition=e.graveyardPosition._getTransformedByMergeOperation(t);}return[e];});OT(sg,Zm,function(e,t,i){var n=qh._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.graveyardPosition){var _o85=n.start.isEqual(e.graveyardPosition)||n.containsPosition(e.graveyardPosition);if(!i.bWasUndone&&_o85){var _i281=e.splitPosition._getTransformedByMoveOperation(t);var _n163=e.graveyardPosition._getTransformedByMoveOperation(t);var _o86=_n163.path.slice();_o86.push(0);var _s53=new $h(_n163.root,_o86);var _r36=new Zm(_i281,e.howMany,_s53,0);return[_r36];}e.graveyardPosition=e.graveyardPosition._getTransformedByMoveOperation(t);}if(e.splitPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(e.splitPosition)){var _i282=t.howMany-(e.splitPosition.offset-t.sourcePosition.offset);e.howMany-=_i282;if(e.splitPosition.hasSameParentAs(t.targetPosition)&&e.splitPosition.offset<t.targetPosition.offset){e.howMany+=t.howMany;}e.splitPosition=t.sourcePosition.clone();e.insertionPosition=sg.getInsertionPosition(e.splitPosition);return[e];}var o=e.splitPosition.isEqual(t.targetPosition);if(o&&(i.baRelation=="insertAtSource"||i.abRelation=="splitBefore")){e.howMany+=t.howMany;e.splitPosition=e.splitPosition._getTransformedByDeletion(t.sourcePosition,t.howMany);e.insertionPosition=sg.getInsertionPosition(e.splitPosition);return[e];}if(!t.sourcePosition.isEqual(t.targetPosition)){if(e.splitPosition.hasSameParentAs(t.sourcePosition)&&e.splitPosition.offset<=t.sourcePosition.offset){e.howMany-=t.howMany;}if(e.splitPosition.hasSameParentAs(t.targetPosition)&&e.splitPosition.offset<t.targetPosition.offset){e.howMany+=t.howMany;}}e.splitPosition.stickiness="toNone";e.splitPosition=e.splitPosition._getTransformedByMoveOperation(t);e.splitPosition.stickiness="toNext";if(e.graveyardPosition){e.insertionPosition=e.insertionPosition._getTransformedByMoveOperation(t);}else{e.insertionPosition=sg.getInsertionPosition(e.splitPosition);}return[e];});OT(sg,sg,function(e,t,i){if(e.splitPosition.isEqual(t.splitPosition)){if(!e.graveyardPosition&&!t.graveyardPosition){return[new Eg(0)];}if(e.graveyardPosition&&t.graveyardPosition&&e.graveyardPosition.isEqual(t.graveyardPosition)){return[new Eg(0)];}if(i.abRelation=="splitBefore"){e.howMany=0;e.graveyardPosition=e.graveyardPosition._getTransformedBySplitOperation(t);return[e];}}if(e.graveyardPosition&&t.graveyardPosition&&e.graveyardPosition.isEqual(t.graveyardPosition)){var _n164=e.splitPosition.root.rootName=="$graveyard";var _o87=t.splitPosition.root.rootName=="$graveyard";var _s54=_n164&&!_o87;var _r37=_o87&&!_n164;var _a20=_r37||!_s54&&i.aIsStrong;if(_a20){var _i283=[];if(t.howMany){_i283.push(new Zm(t.moveTargetPosition,t.howMany,t.splitPosition,0));}if(e.howMany){_i283.push(new Zm(e.splitPosition,e.howMany,e.moveTargetPosition,0));}return _i283;}else{return[new Eg(0)];}}if(e.graveyardPosition){e.graveyardPosition=e.graveyardPosition._getTransformedBySplitOperation(t);}if(e.splitPosition.isEqual(t.insertionPosition)&&i.abRelation=="splitBefore"){e.howMany++;return[e];}if(t.splitPosition.isEqual(e.insertionPosition)&&i.baRelation=="splitBefore"){var _i284=t.insertionPosition.path.slice();_i284.push(0);var _n165=new $h(t.insertionPosition.root,_i284);var _o88=new Zm(e.insertionPosition,1,_n165,0);return[e,_o88];}if(e.splitPosition.hasSameParentAs(t.splitPosition)&&e.splitPosition.offset<t.splitPosition.offset){e.howMany-=t.howMany;}e.splitPosition=e.splitPosition._getTransformedBySplitOperation(t);e.insertionPosition=sg.getInsertionPosition(e.splitPosition);return[e];});function WT(e,t){return e.targetPosition._getTransformedByDeletion(t.sourcePosition,t.howMany)===null;}function UT(e,t){var i=[];for(var _n166=0;_n166<e.length;_n166++){var _o89=e[_n166];var _s55=new Zm(_o89.start,_o89.end.offset-_o89.start.offset,t,0);i.push(_s55);for(var _t265=_n166+1;_t265<e.length;_t265++){e[_t265]=e[_t265]._getTransformedByMove(_s55.sourcePosition,_s55.targetPosition,_s55.howMany)[0];}t=t._getTransformedByMove(_s55.sourcePosition,_s55.targetPosition,_s55.howMany);}return i;}var $T=/*#__PURE__*/function(_w20){_inherits($T,_w20);function $T(e){var _this232;_classCallCheck(this,$T);_this232=_possibleConstructorReturn(this,_getPrototypeOf($T).call(this,e));_this232._stack=[];_this232._createdBatches=new WeakSet();_this232.refresh();return _this232;}_createClass($T,[{key:"refresh",value:function refresh(){this.isEnabled=this._stack.length>0;}},{key:"addBatch",value:function addBatch(e){var t=this.editor.model.document.selection;var i={ranges:t.hasOwnRange?Array.from(t.getRanges()):[],isBackward:t.isBackward};this._stack.push({batch:e,selection:i});this.refresh();}},{key:"clearStack",value:function clearStack(){this._stack=[];this.refresh();}},{key:"_restoreSelection",value:function _restoreSelection(e,t,i){var n=this.editor.model;var o=n.document;var s=[];var _iteratorNormalCompletion349=true;var _didIteratorError349=false;var _iteratorError349=undefined;try{for(var _iterator349=e[Symbol.iterator](),_step349;!(_iteratorNormalCompletion349=(_step349=_iterator349.next()).done);_iteratorNormalCompletion349=true){var _t266=_step349.value;var _e299=qT(_t266,i);var _n167=_e299.find(function(e){return e.start.root!=o.graveyard;});if(_n167){s.push(_n167);}}}catch(err){_didIteratorError349=true;_iteratorError349=err;}finally{try{if(!_iteratorNormalCompletion349&&_iterator349["return"]!=null){_iterator349["return"]();}}finally{if(_didIteratorError349){throw _iteratorError349;}}}if(s.length){n.change(function(e){e.setSelection(s,{backward:t});});}}},{key:"_undo",value:function _undo(e,t){var i=this.editor.model;var n=i.document;this._createdBatches.add(t);var o=e.operations.slice().filter(function(e){return e.isDocumentOperation;});o.reverse();var _iteratorNormalCompletion350=true;var _didIteratorError350=false;var _iteratorError350=undefined;try{for(var _iterator350=o[Symbol.iterator](),_step350;!(_iteratorNormalCompletion350=(_step350=_iterator350.next()).done);_iteratorNormalCompletion350=true){var _e300=_step350.value;var _o90=_e300.baseVersion+1;var _s56=Array.from(n.history.getOperations(_o90));var _r38=DT([_e300.getReversed()],_s56,{useRelations:true,document:this.editor.model.document,padWithNoOps:false,forceWeakRemove:true});var _a21=_r38.operationsA;var _iteratorNormalCompletion351=true;var _didIteratorError351=false;var _iteratorError351=undefined;try{for(var _iterator351=_a21[Symbol.iterator](),_step351;!(_iteratorNormalCompletion351=(_step351=_iterator351.next()).done);_iteratorNormalCompletion351=true){var _o91=_step351.value;t.addOperation(_o91);i.applyOperation(_o91);n.history.setOperationAsUndone(_e300,_o91);}}catch(err){_didIteratorError351=true;_iteratorError351=err;}finally{try{if(!_iteratorNormalCompletion351&&_iterator351["return"]!=null){_iterator351["return"]();}}finally{if(_didIteratorError351){throw _iteratorError351;}}}}}catch(err){_didIteratorError350=true;_iteratorError350=err;}finally{try{if(!_iteratorNormalCompletion350&&_iterator350["return"]!=null){_iterator350["return"]();}}finally{if(_didIteratorError350){throw _iteratorError350;}}}}}]);return $T;}(_w);function qT(e,t){var i=e.getTransformedByOperations(t);i.sort(function(e,t){return e.start.isBefore(t.start)?-1:1;});for(var _e301=1;_e301<i.length;_e301++){var _t267=i[_e301-1];var _n168=i[_e301];if(_t267.end.isTouching(_n168.start)){_t267.end=_n168.end;i.splice(_e301,1);_e301--;}}return i;}var YT=/*#__PURE__*/function(_$T){_inherits(YT,_$T);function YT(){_classCallCheck(this,YT);return _possibleConstructorReturn(this,_getPrototypeOf(YT).apply(this,arguments));}_createClass(YT,[{key:"execute",value:function execute(){var _this233=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var t=e?this._stack.findIndex(function(t){return t.batch==e;}):this._stack.length-1;var i=this._stack.splice(t,1)[0];var n=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(n,function(){_this233._undo(i.batch,n);var e=_this233.editor.model.document.history.getOperations(i.batch.baseVersion);_this233._restoreSelection(i.selection.ranges,i.selection.isBackward,e);_this233.fire("revert",i.batch,n);});this.refresh();}}]);return YT;}($T);var GT=/*#__PURE__*/function(_$T2){_inherits(GT,_$T2);function GT(){_classCallCheck(this,GT);return _possibleConstructorReturn(this,_getPrototypeOf(GT).apply(this,arguments));}_createClass(GT,[{key:"execute",value:function execute(){var _this234=this;var e=this._stack.pop();var t=this.editor.model.createBatch("transparent");this.editor.model.enqueueChange(t,function(){var i=e.batch.operations[e.batch.operations.length-1];var n=i.baseVersion+1;var o=_this234.editor.model.document.history.getOperations(n);_this234._restoreSelection(e.selection.ranges,e.selection.isBackward,o);_this234._undo(e.batch,t);});this.refresh();}}]);return GT;}($T);var JT=/*#__PURE__*/function(_bw58){_inherits(JT,_bw58);_createClass(JT,null,[{key:"pluginName",get:function get(){return"UndoEditing";}}]);function JT(e){var _this235;_classCallCheck(this,JT);_this235=_possibleConstructorReturn(this,_getPrototypeOf(JT).call(this,e));_this235._batchRegistry=new WeakSet();return _this235;}_createClass(JT,[{key:"init",value:function init(){var _this236=this;var e=this.editor;this._undoCommand=new YT(e);this._redoCommand=new GT(e);e.commands.add("undo",this._undoCommand);e.commands.add("redo",this._redoCommand);this.listenTo(e.model,"applyOperation",function(e,t){var i=t[0];if(!i.isDocumentOperation){return;}var n=i.batch;var o=_this236._redoCommand._createdBatches.has(n);var s=_this236._undoCommand._createdBatches.has(n);var r=_this236._batchRegistry.has(n);if(r||n.type=="transparent"&&!o&&!s){return;}else{if(o){_this236._undoCommand.addBatch(n);}else if(!s){_this236._undoCommand.addBatch(n);_this236._redoCommand.clearStack();}}_this236._batchRegistry.add(n);},{priority:"highest"});this.listenTo(this._undoCommand,"revert",function(e,t,i){_this236._redoCommand.addBatch(i);});e.keystrokes.set("CTRL+Z","undo");e.keystrokes.set("CTRL+Y","redo");e.keystrokes.set("CTRL+SHIFT+Z","redo");}}]);return JT;}(bw);var XT='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5.042 9.367l2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>';var KT='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M14.958 9.367l-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>';var QT=/*#__PURE__*/function(_bw59){_inherits(QT,_bw59);function QT(){_classCallCheck(this,QT);return _possibleConstructorReturn(this,_getPrototypeOf(QT).apply(this,arguments));}_createClass(QT,[{key:"init",value:function init(){var e=this.editor;var t=e.locale;var i=e.t;var n=t.uiLanguageDirection=="ltr"?XT:KT;var o=t.uiLanguageDirection=="ltr"?KT:XT;this._addButton("undo",i("ct"),"CTRL+Z",n);this._addButton("redo",i("cu"),"CTRL+Y",o);}},{key:"_addButton",value:function _addButton(e,t,i,n){var _this237=this;var o=this.editor;o.ui.componentFactory.add(e,function(s){var r=o.commands.get(e);var a=new Vb(s);a.set({label:t,icon:n,keystroke:i,tooltip:true});a.bind("isEnabled").to(r,"isEnabled");_this237.listenTo(a,"execute",function(){o.execute(e);o.editing.view.focus();});return a;});}}]);return QT;}(bw);var ZT=/*#__PURE__*/function(_bw60){_inherits(ZT,_bw60);function ZT(){_classCallCheck(this,ZT);return _possibleConstructorReturn(this,_getPrototypeOf(ZT).apply(this,arguments));}_createClass(ZT,null,[{key:"requires",get:function get(){return[JT,QT];}},{key:"pluginName",get:function get(){return"Undo";}}]);return ZT;}(bw);var eM=/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w.-]+)+[\w\-._~:/?#[\]@!$&'()*+,;=]+$/;var tM=/*#__PURE__*/function(_bw61){_inherits(tM,_bw61);_createClass(tM,null,[{key:"requires",get:function get(){return[lx,ZT];}},{key:"pluginName",get:function get(){return"AutoMediaEmbed";}}]);function tM(e){var _this238;_classCallCheck(this,tM);_this238=_possibleConstructorReturn(this,_getPrototypeOf(tM).call(this,e));_this238._timeoutId=null;_this238._positionToInsert=null;return _this238;}_createClass(tM,[{key:"init",value:function init(){var _this239=this;var e=this.editor;var t=e.model.document;this.listenTo(e.plugins.get(lx),"inputTransformation",function(){var e=t.selection.getFirstRange();var i=Ig.fromPosition(e.start);i.stickiness="toPrevious";var n=Ig.fromPosition(e.end);n.stickiness="toNext";t.once("change:data",function(){_this239._embedMediaBetweenPositions(i,n);i.detach();n.detach();},{priority:"high"});});e.commands.get("undo").on("execute",function(){if(_this239._timeoutId){Nd.window.clearTimeout(_this239._timeoutId);_this239._positionToInsert.detach();_this239._timeoutId=null;_this239._positionToInsert=null;}},{priority:"high"});}},{key:"_embedMediaBetweenPositions",value:function _embedMediaBetweenPositions(e,t){var _this240=this;var i=this.editor;var n=i.plugins.get(IT).registry;var o=new sf(e,t);var s=o.getWalker({ignoreElementEnd:true});var r="";var _iteratorNormalCompletion352=true;var _didIteratorError352=false;var _iteratorError352=undefined;try{for(var _iterator352=s[Symbol.iterator](),_step352;!(_iteratorNormalCompletion352=(_step352=_iterator352.next()).done);_iteratorNormalCompletion352=true){var _e302=_step352.value;if(_e302.item.is("textProxy")){r+=_e302.item.data;}}}catch(err){_didIteratorError352=true;_iteratorError352=err;}finally{try{if(!_iteratorNormalCompletion352&&_iterator352["return"]!=null){_iterator352["return"]();}}finally{if(_didIteratorError352){throw _iteratorError352;}}}r=r.trim();if(!r.match(eM)){return;}if(!n.hasMedia(r)){return;}var a=i.commands.get("mediaEmbed");if(!a.isEnabled){return;}this._positionToInsert=Ig.fromPosition(e);this._timeoutId=Nd.window.setTimeout(function(){i.model.change(function(e){_this240._timeoutId=null;e.remove(o);var t;if(_this240._positionToInsert.root.rootName!=="$graveyard"){t=_this240._positionToInsert;}xT(i.model,r,t);_this240._positionToInsert.detach();_this240._positionToInsert=null;});},100);}}]);return tM;}(bw);var iM=i(90);var nM=/*#__PURE__*/function(_db28){_inherits(nM,_db28);function nM(e,t){var _this241;_classCallCheck(this,nM);_this241=_possibleConstructorReturn(this,_getPrototypeOf(nM).call(this,t));var i=t.t;_this241.focusTracker=new _p();_this241.keystrokes=new dp();_this241.urlInputView=_this241._createUrlInput();_this241.saveButtonView=_this241._createButton(i("dg"),pk,"ck-button-save");_this241.saveButtonView.type="submit";_this241.cancelButtonView=_this241._createButton(i("dh"),bk,"ck-button-cancel","cancel");_this241._focusables=new Rp();_this241._focusCycler=new vb({focusables:_this241._focusables,focusTracker:_this241.focusTracker,keystrokeHandler:_this241.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});_this241._validators=e;_this241.setTemplate({tag:"form",attributes:{"class":["ck","ck-media-form"],tabindex:"-1"},children:[_this241.urlInputView,_this241.saveButtonView,_this241.cancelButtonView]});return _this241;}_createClass(nM,[{key:"render",value:function render(){var _this242=this;_get(_getPrototypeOf(nM.prototype),"render",this).call(this);gk({view:this});var e=[this.urlInputView,this.saveButtonView,this.cancelButtonView];e.forEach(function(e){_this242._focusables.add(e);_this242.focusTracker.add(e.element);});this.keystrokes.listenTo(this.element);var t=function t(e){return e.stopPropagation();};this.keystrokes.set("arrowright",t);this.keystrokes.set("arrowleft",t);this.keystrokes.set("arrowup",t);this.keystrokes.set("arrowdown",t);this.listenTo(this.urlInputView.element,"selectstart",function(e,t){t.stopPropagation();},{priority:"high"});}},{key:"focus",value:function focus(){this._focusCycler.focusFirst();}},{key:"isValid",value:function isValid(){this.resetFormStatus();var _iteratorNormalCompletion353=true;var _didIteratorError353=false;var _iteratorError353=undefined;try{for(var _iterator353=this._validators[Symbol.iterator](),_step353;!(_iteratorNormalCompletion353=(_step353=_iterator353.next()).done);_iteratorNormalCompletion353=true){var _e303=_step353.value;var _t268=_e303(this);if(_t268){this.urlInputView.errorText=_t268;return false;}}}catch(err){_didIteratorError353=true;_iteratorError353=err;}finally{try{if(!_iteratorNormalCompletion353&&_iterator353["return"]!=null){_iterator353["return"]();}}finally{if(_didIteratorError353){throw _iteratorError353;}}}return true;}},{key:"resetFormStatus",value:function resetFormStatus(){this.urlInputView.errorText=null;this.urlInputView.infoText=this._urlInputViewInfoDefault;}},{key:"_createUrlInput",value:function _createUrlInput(){var _this243=this;var e=this.locale.t;var t=new hk(this.locale,mk);var i=t.inputView;this._urlInputViewInfoDefault=e("ff");this._urlInputViewInfoTip=e("fg");t.label=e("fh");t.infoText=this._urlInputViewInfoDefault;i.placeholder="https://example.com";i.on("input",function(){t.infoText=i.element.value?_this243._urlInputViewInfoTip:_this243._urlInputViewInfoDefault;});return t;}},{key:"_createButton",value:function _createButton(e,t,i,n){var o=new Vb(this.locale);o.set({label:e,icon:t,tooltip:true});o.extendTemplate({attributes:{"class":i}});if(n){o.delegate("execute").to(this,n);}return o;}},{key:"url",get:function get(){return this.urlInputView.inputView.element.value.trim();},set:function set(e){this.urlInputView.inputView.element.value=e.trim();}}]);return nM;}(db);var oM='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M18.68 3.03c.6 0 .59-.03.59.55v12.84c0 .59.01.56-.59.56H1.29c-.6 0-.59.03-.59-.56V3.58c0-.58-.01-.55.6-.55h17.38zM15.77 15V5H4.2v10h11.57zM2 4v1h1V4H2zm0 2v1h1V6H2zm0 2v1h1V8H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zM17 4v1h1V4h-1zm0 2v1h1V6h-1zm0 2v1h1V8h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zM7.5 7.177a.4.4 0 01.593-.351l5.133 2.824a.4.4 0 010 .7l-5.133 2.824a.4.4 0 01-.593-.35V7.176v.001z"/></svg>\n';var sM=/*#__PURE__*/function(_bw62){_inherits(sM,_bw62);function sM(){_classCallCheck(this,sM);return _possibleConstructorReturn(this,_getPrototypeOf(sM).apply(this,arguments));}_createClass(sM,[{key:"init",value:function init(){var _this244=this;var e=this.editor;var t=e.commands.get("mediaEmbed");var i=e.plugins.get(IT).registry;this.form=new nM(rM(e.t,i),e.locale);e.ui.componentFactory.add("mediaEmbed",function(i){var n=Qb(i);_this244._setUpDropdown(n,_this244.form,t,e);_this244._setUpForm(_this244.form,n,t);return n;});}},{key:"_setUpDropdown",value:function _setUpDropdown(e,t,i){var n=this.editor;var o=n.t;var s=e.buttonView;e.bind("isEnabled").to(i);e.panelView.children.add(t);s.set({label:o("eq"),icon:oM,tooltip:true});s.on("open",function(){t.url=i.value||"";t.urlInputView.select();t.focus();},{priority:"low"});e.on("submit",function(){if(t.isValid()){n.execute("mediaEmbed",t.url);r();}});e.on("change:isOpen",function(){return t.resetFormStatus();});e.on("cancel",function(){return r();});function r(){n.editing.view.focus();e.isOpen=false;}}},{key:"_setUpForm",value:function _setUpForm(e,t,i){e.delegate("submit","cancel").to(t);e.urlInputView.bind("value").to(i,"value");e.urlInputView.bind("isReadOnly").to(i,"isEnabled",function(e){return!e;});e.saveButtonView.bind("isEnabled").to(i);}}],[{key:"requires",get:function get(){return[IT];}},{key:"pluginName",get:function get(){return"MediaEmbedUI";}}]);return sM;}(bw);function rM(e,t){return[function(t){if(!t.url.length){return e("er");}},function(i){if(!t.hasMedia(i.url)){return e("es");}}];}var aM=i(92);var cM=/*#__PURE__*/function(_bw63){_inherits(cM,_bw63);function cM(){_classCallCheck(this,cM);return _possibleConstructorReturn(this,_getPrototypeOf(cM).apply(this,arguments));}_createClass(cM,null,[{key:"requires",get:function get(){return[IT,sM,tM,nk];}},{key:"pluginName",get:function get(){return"MediaEmbed";}}]);return cM;}(bw);function lM(e,t){var _iteratorNormalCompletion354=true;var _didIteratorError354=false;var _iteratorError354=undefined;try{for(var _iterator354=e.getChildren()[Symbol.iterator](),_step354;!(_iteratorNormalCompletion354=(_step354=_iterator354.next()).done);_iteratorNormalCompletion354=true){var _i285=_step354.value;if(_i285.is("b")&&_i285.getStyle("font-weight")==="normal"){var _n169=e.getChildIndex(_i285);t.remove(_i285);t.insertChild(_n169,_i285.getChildren(),e);}}}catch(err){_didIteratorError354=true;_iteratorError354=err;}finally{try{if(!_iteratorNormalCompletion354&&_iterator354["return"]!=null){_iterator354["return"]();}}finally{if(_didIteratorError354){throw _iteratorError354;}}}}function dM(e,t){if(!e.childCount){return;}var i=new dx(e.document);var n=hM(e,i);if(!n.length){return;}var o=null;var s=1;n.forEach(function(e,r){var a=wM(n[r-1],e);var c=a?null:n[r-1];var l=vM(c,e);if(a){o=null;s=1;}if(!o||l!==0){var _n170=fM(e,t);if(!o){o=mM(_n170,e.element,i);}else if(e.indent>s){var _e304=o.getChild(o.childCount-1);var _t269=_e304.getChild(_e304.childCount-1);o=mM(_n170,_t269,i);s+=1;}else if(e.indent<s){var _t270=s-e.indent;o=kM(o,_t270);s=parseInt(e.indent);}if(e.indent<=s){if(!o.is(_n170.type)){o=i.rename(_n170.type,o);}}}var d=gM(e.element,i);i.appendChild(d,o);});}function uM(e,t){var _iteratorNormalCompletion355=true;var _didIteratorError355=false;var _iteratorError355=undefined;try{for(var _iterator355=t.createRangeIn(e)[Symbol.iterator](),_step355;!(_iteratorNormalCompletion355=(_step355=_iterator355.next()).done);_iteratorNormalCompletion355=true){var _i286=_step355.value;var _e305=_i286.item;if(_e305.is("li")){var _i287=_e305.getChild(0);if(_i287.is("p")){t.unwrapElement(_i287);}}}}catch(err){_didIteratorError355=true;_iteratorError355=err;}finally{try{if(!_iteratorNormalCompletion355&&_iterator355["return"]!=null){_iterator355["return"]();}}finally{if(_didIteratorError355){throw _iteratorError355;}}}}function hM(e,t){var i=t.createRangeIn(e);var n=new Wr({name:/^p|h\d+$/,styles:{"mso-list":/.*/}});var o=[];var _iteratorNormalCompletion356=true;var _didIteratorError356=false;var _iteratorError356=undefined;try{for(var _iterator356=i[Symbol.iterator](),_step356;!(_iteratorNormalCompletion356=(_step356=_iterator356.next()).done);_iteratorNormalCompletion356=true){var _e306=_step356.value;if(_e306.type==="elementStart"&&n.match(_e306.item)){var _t271=pM(_e306.item);o.push({element:_e306.item,id:_t271.id,order:_t271.order,indent:_t271.indent});}}}catch(err){_didIteratorError356=true;_iteratorError356=err;}finally{try{if(!_iteratorNormalCompletion356&&_iterator356["return"]!=null){_iterator356["return"]();}}finally{if(_didIteratorError356){throw _iteratorError356;}}}return o;}function fM(e,t){var i=new RegExp("@list l".concat(e.id,":level").concat(e.indent,"\\s*({[^}]*)"),"gi");var n=/mso-level-number-format:([^;]*);/gi;var o=i.exec(t);var s="decimal";if(o&&o[1]){var _e307=n.exec(o[1]);if(_e307&&_e307[1]){s=_e307[1].trim();}}return{type:s!=="bullet"&&s!=="image"?"ol":"ul",style:s};}function mM(e,t,i){var n=t.parent;var o=i.createElement(e.type);var s=n.getChildIndex(t)+1;i.insertChild(s,o,n);return o;}function gM(e,t){bM(e,t);return t.rename("li",e);}function pM(e){var t={};var i=e.getStyle("mso-list");if(i){var _e308=i.match(/(^|\s+)l(\d+)/i);var _n171=i.match(/\s*lfo(\d+)/i);var _o92=i.match(/\s*level(\d+)/i);if(_e308&&_n171&&_o92){t.id=_e308[2];t.order=_n171[1];t.indent=_o92[1];}}return t;}function bM(e,t){var i=new Wr({name:"span",styles:{"mso-list":"Ignore"}});var n=t.createRangeIn(e);var _iteratorNormalCompletion357=true;var _didIteratorError357=false;var _iteratorError357=undefined;try{for(var _iterator357=n[Symbol.iterator](),_step357;!(_iteratorNormalCompletion357=(_step357=_iterator357.next()).done);_iteratorNormalCompletion357=true){var _e309=_step357.value;if(_e309.type==="elementStart"&&i.match(_e309.item)){t.remove(_e309.item);}}}catch(err){_didIteratorError357=true;_iteratorError357=err;}finally{try{if(!_iteratorNormalCompletion357&&_iterator357["return"]!=null){_iterator357["return"]();}}finally{if(_didIteratorError357){throw _iteratorError357;}}}}function wM(e,t){if(!e){return true;}if(e.id!==t.id){return true;}var i=t.element.previousSibling;if(!i){return true;}return!_M(i);}function _M(e){return e.is("ol")||e.is("ul");}function vM(e,t){return e?t.indent-e.indent:t.indent-1;}function kM(e,t){var i=e.getAncestors({parentFirst:true});var n=null;var o=0;var _iteratorNormalCompletion358=true;var _didIteratorError358=false;var _iteratorError358=undefined;try{for(var _iterator358=i[Symbol.iterator](),_step358;!(_iteratorNormalCompletion358=(_step358=_iterator358.next()).done);_iteratorNormalCompletion358=true){var _e310=_step358.value;if(_e310.name==="ul"||_e310.name==="ol"){o++;}if(o===t){n=_e310;break;}}}catch(err){_didIteratorError358=true;_iteratorError358=err;}finally{try{if(!_iteratorNormalCompletion358&&_iterator358["return"]!=null){_iterator358["return"]();}}finally{if(_didIteratorError358){throw _iteratorError358;}}}return n;}var yM=/id=("|')docs-internal-guid-[-0-9a-f]+("|')/i;var xM=/*#__PURE__*/function(){function xM(e){_classCallCheck(this,xM);this.document=e;}_createClass(xM,[{key:"isActive",value:function isActive(e){return yM.test(e);}},{key:"execute",value:function execute(e){var t=new dx(this.document);lM(e.content,t);uM(e.content,t);}}]);return xM;}();function AM(e){return TM(TM(e)).replace(/(<span\s+style=['"]mso-spacerun:yes['"]>[\s]*?)[\r\n]+(\s*<\/span>)/g,"$1$2").replace(/<span\s+style=['"]mso-spacerun:yes['"]><\/span>/g,"").replace(/ <\//g," </").replace(/ <o:p><\/o:p>/g," <o:p></o:p>").replace(/<o:p>(&nbsp;|\u00A0)<\/o:p>/g,"").replace(/>(\s*[\r\n]\s*)</g,"><");}function CM(e){e.querySelectorAll("span[style*=spacerun]").forEach(function(e){var t=e.childNodes&&e.childNodes[0]&&e.childNodes[0].data&&e.childNodes[0].data.length||0;e.innerHTML=Array(t+1).join("  ").substr(0,t);});}function TM(e){return e.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,function(e,t){return t.length===1?" ":Array(t.length+1).join("  ").substr(0,t.length);});}function MM(e){var t=new DOMParser();e=e.replace(/<!--\[if gte vml 1]>/g,"");var i=AM(SM(e));var n=t.parseFromString(i,"text/html");CM(n);var o=n.body.innerHTML;var s=EM(n);var r=PM(n);return{body:s,bodyString:o,styles:r.styles,stylesString:r.stylesString};}function EM(e){var t=new pl(new Oc());var i=new Dd(t,{blockFillerMode:"nbsp"});var n=e.createDocumentFragment();var o=e.body.childNodes;while(o.length>0){n.appendChild(o[0]);}return i.domToView(n);}function PM(e){var t=[];var i=[];var n=Array.from(e.getElementsByTagName("style"));for(var _i288=0,_n172=n;_i288<_n172.length;_i288++){var _e311=_n172[_i288];if(_e311.sheet&&_e311.sheet.cssRules&&_e311.sheet.cssRules.length){t.push(_e311.sheet);i.push(_e311.innerHTML);}}return{styles:t,stylesString:i.join(" ")};}function SM(e){var t=/<\/body>(.*?)(<\/html>|$)/;var i=e.match(t);if(i&&i[1]){e=e.slice(0,i.index)+e.slice(i.index).replace(i[1],"");}return e;}function IM(e,t){if(!e.childCount){return;}var i=new dx();var n=OM(e,i);RM(n,e,i);LM(e,i);var o=zM(e,i);if(o.length){jM(o,DM(t),i);}}function NM(e){return btoa(e.match(/\w{2}/g).map(function(e){return String.fromCharCode(parseInt(e,16));}).join(""));}function OM(e,t){var i=t.createRangeIn(e);var n=new Wr({name:/v:(.+)/});var o=[];var _iteratorNormalCompletion359=true;var _didIteratorError359=false;var _iteratorError359=undefined;try{for(var _iterator359=i[Symbol.iterator](),_step359;!(_iteratorNormalCompletion359=(_step359=_iterator359.next()).done);_iteratorNormalCompletion359=true){var _e312=_step359.value;var _t272=_e312.item;var _i289=_t272.previousSibling&&_t272.previousSibling.name||null;if(n.match(_t272)&&_t272.getAttribute("o:gfxdata")&&_i289!=="v:shapetype"){o.push(_e312.item.getAttribute("id"));}}}catch(err){_didIteratorError359=true;_iteratorError359=err;}finally{try{if(!_iteratorNormalCompletion359&&_iterator359["return"]!=null){_iterator359["return"]();}}finally{if(_didIteratorError359){throw _iteratorError359;}}}return o;}function RM(e,t,i){var n=i.createRangeIn(t);var o=new Wr({name:"img"});var s=[];var _iteratorNormalCompletion360=true;var _didIteratorError360=false;var _iteratorError360=undefined;try{for(var _iterator360=n[Symbol.iterator](),_step360;!(_iteratorNormalCompletion360=(_step360=_iterator360.next()).done);_iteratorNormalCompletion360=true){var _t273=_step360.value;if(o.match(_t273.item)){var _i291=_t273.item;var _n173=_i291.getAttribute("v:shapes")?_i291.getAttribute("v:shapes").split(" "):[];if(_n173.length&&_n173.every(function(t){return e.indexOf(t)>-1;})){s.push(_i291);}else if(!_i291.getAttribute("src")){s.push(_i291);}}}}catch(err){_didIteratorError360=true;_iteratorError360=err;}finally{try{if(!_iteratorNormalCompletion360&&_iterator360["return"]!=null){_iterator360["return"]();}}finally{if(_didIteratorError360){throw _iteratorError360;}}}for(var _i290=0,_s57=s;_i290<_s57.length;_i290++){var _e313=_s57[_i290];i.remove(_e313);}}function LM(e,t){var i=t.createRangeIn(e);var n=new Wr({name:/v:(.+)/});var o=[];var _iteratorNormalCompletion361=true;var _didIteratorError361=false;var _iteratorError361=undefined;try{for(var _iterator361=i[Symbol.iterator](),_step361;!(_iteratorNormalCompletion361=(_step361=_iterator361.next()).done);_iteratorNormalCompletion361=true){var _e314=_step361.value;if(n.match(_e314.item)){o.push(_e314.item);}}}catch(err){_didIteratorError361=true;_iteratorError361=err;}finally{try{if(!_iteratorNormalCompletion361&&_iterator361["return"]!=null){_iterator361["return"]();}}finally{if(_didIteratorError361){throw _iteratorError361;}}}for(var _i292=0,_o93=o;_i292<_o93.length;_i292++){var _e315=_o93[_i292];t.remove(_e315);}}function zM(e,t){var i=t.createRangeIn(e);var n=new Wr({name:"img"});var o=[];var _iteratorNormalCompletion362=true;var _didIteratorError362=false;var _iteratorError362=undefined;try{for(var _iterator362=i[Symbol.iterator](),_step362;!(_iteratorNormalCompletion362=(_step362=_iterator362.next()).done);_iteratorNormalCompletion362=true){var _e316=_step362.value;if(n.match(_e316.item)){if(_e316.item.getAttribute("src").startsWith("file://")){o.push(_e316.item);}}}}catch(err){_didIteratorError362=true;_iteratorError362=err;}finally{try{if(!_iteratorNormalCompletion362&&_iterator362["return"]!=null){_iterator362["return"]();}}finally{if(_didIteratorError362){throw _iteratorError362;}}}return o;}function DM(e){if(!e){return[];}var t=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/;var i=new RegExp("(?:("+t.source+"))([\\da-fA-F\\s]+)\\}","g");var n=e.match(i);var o=[];if(n){var _iteratorNormalCompletion363=true;var _didIteratorError363=false;var _iteratorError363=undefined;try{for(var _iterator363=n[Symbol.iterator](),_step363;!(_iteratorNormalCompletion363=(_step363=_iterator363.next()).done);_iteratorNormalCompletion363=true){var _e317=_step363.value;var _i293=false;if(_e317.includes("\\pngblip")){_i293="image/png";}else if(_e317.includes("\\jpegblip")){_i293="image/jpeg";}if(_i293){o.push({hex:_e317.replace(t,"").replace(/[^\da-fA-F]/g,""),type:_i293});}}}catch(err){_didIteratorError363=true;_iteratorError363=err;}finally{try{if(!_iteratorNormalCompletion363&&_iterator363["return"]!=null){_iterator363["return"]();}}finally{if(_didIteratorError363){throw _iteratorError363;}}}}return o;}function jM(e,t,i){if(e.length===t.length){for(var _n174=0;_n174<e.length;_n174++){var _o94="data:".concat(t[_n174].type,";base64,").concat(NM(t[_n174].hex));i.setAttribute("src",_o94,e[_n174]);}}}var BM=/<meta\s*name="?generator"?\s*content="?microsoft\s*word\s*\d+"?\/?>/i;var VM=/xmlns:o="urn:schemas-microsoft-com/i;var FM=/*#__PURE__*/function(){function FM(){_classCallCheck(this,FM);}_createClass(FM,[{key:"isActive",value:function isActive(e){return BM.test(e)||VM.test(e);}},{key:"execute",value:function execute(e){var _MM=MM(e.dataTransfer.getData("text/html")),t=_MM.body,i=_MM.stylesString;dM(t,i);IM(t,e.dataTransfer.getData("text/rtf"));e.content=t;}}]);return FM;}();var HM=/*#__PURE__*/function(_bw64){_inherits(HM,_bw64);function HM(){_classCallCheck(this,HM);return _possibleConstructorReturn(this,_getPrototypeOf(HM).apply(this,arguments));}_createClass(HM,[{key:"init",value:function init(){var e=this.editor;var t=[];t.push(new FM());t.push(new xM(e.editing.view.document));e.plugins.get("Clipboard").on("inputTransformation",function(e,i){if(i.isTransformedWithPasteFromOffice){return;}var n=i.dataTransfer.getData("text/html");var o=t.find(function(e){return e.isActive(n);});if(o){o.execute(i);i.isTransformedWithPasteFromOffice=true;}},{priority:"high"});}}],[{key:"pluginName",get:function get(){return"PasteFromOffice";}},{key:"requires",get:function get(){return[lx];}}]);return HM;}(bw);var WM="strikethrough";var UM=/*#__PURE__*/function(_bw65){_inherits(UM,_bw65);function UM(){_classCallCheck(this,UM);return _possibleConstructorReturn(this,_getPrototypeOf(UM).apply(this,arguments));}_createClass(UM,[{key:"init",value:function init(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:WM});e.model.schema.setAttributeProperties(WM,{isFormatting:true,copyOnEnter:true});e.conversion.attributeToElement({model:WM,view:"s",upcastAlso:["del","strike",{styles:{"text-decoration":"line-through"}}]});e.commands.add(WM,new Zw(e,WM));e.keystrokes.set("CTRL+SHIFT+X","strikethrough");}}],[{key:"pluginName",get:function get(){return"StrikethroughEditing";}}]);return UM;}(bw);var $M='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7 16.4c-.8-.4-1.5-.9-2.2-1.5a.6.6 0 0 1-.2-.5l.3-.6h1c1 1.2 2.1 1.7 3.7 1.7 1 0 1.8-.3 2.3-.6.6-.4.6-1.2.6-1.3.2-1.2-.9-2.1-.9-2.1h2.1c.3.7.4 1.2.4 1.7v.8l-.6 1.2c-.6.8-1.1 1-1.6 1.2a6 6 0 0 1-2.4.6c-1 0-1.8-.3-2.5-.6zM6.8 9L6 8.3c-.4-.5-.5-.8-.5-1.6 0-.7.1-1.3.5-1.8.4-.6 1-1 1.6-1.3a6.3 6.3 0 0 1 4.7 0 4 4 0 0 1 1.7 1l.3.7c0 .1.2.4-.2.7-.4.2-.9.1-1 0a3 3 0 0 0-1.2-1c-.4-.2-1-.3-2-.4-.7 0-1.4.2-2 .6-.8.6-1 .8-1 1.5 0 .8.5 1 1.2 1.5.6.4 1.1.7 1.9 1H6.8z"/><path d="M3 10.5V9h14v1.5z"/></svg>';var qM="strikethrough";var YM=/*#__PURE__*/function(_bw66){_inherits(YM,_bw66);function YM(){_classCallCheck(this,YM);return _possibleConstructorReturn(this,_getPrototypeOf(YM).apply(this,arguments));}_createClass(YM,[{key:"init",value:function init(){var _this245=this;var e=this.editor;var t=e.t;e.ui.componentFactory.add(qM,function(i){var n=e.commands.get(qM);var o=new Vb(i);o.set({label:t("ab"),icon:$M,keystroke:"CTRL+SHIFT+X",tooltip:true,isToggleable:true});o.bind("isOn","isEnabled").to(n,"value","isEnabled");_this245.listenTo(o,"execute",function(){e.execute(qM);e.editing.view.focus();});return o;});}}]);return YM;}(bw);var GM=/*#__PURE__*/function(_bw67){_inherits(GM,_bw67);function GM(){_classCallCheck(this,GM);return _possibleConstructorReturn(this,_getPrototypeOf(GM).apply(this,arguments));}_createClass(GM,null,[{key:"requires",get:function get(){return[UM,YM];}},{key:"pluginName",get:function get(){return"Strikethrough";}}]);return GM;}(bw);function JM(e,t){var i=t.parent;while(i){if(i.name===e){return i;}i=i.parent;}}function XM(e,t,i,n){var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1;if(t>o){n.setAttribute(e,t,i);}else{n.removeAttribute(e,i);}}function KM(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var n=e.createElement("tableCell",i);e.insertElement("paragraph",n);e.insert(n,t);}function QM(e){if(!e||!ce(e)){return e;}var t=e.top,i=e.right,n=e.bottom,o=e.left;if(t==i&&i==n&&n==o){return t;}}function ZM(e,t){var i=parseFloat(e);if(Number.isNaN(i)){return e;}if(String(i)!==String(e)){return e;}return"".concat(i).concat(t);}function eE(e,t){var i=t.parent.parent;var n=parseInt(i.getAttribute("headingColumns")||0);var _e$getCellLocation=e.getCellLocation(t),o=_e$getCellLocation.column;return!!n&&o<n;}function tE(){return function(e){e.on("element:table",function(e,t,i){var n=t.viewItem;if(!i.consumable.test(n,{name:true})){return;}var _nE=nE(n),o=_nE.rows,s=_nE.headingRows,r=_nE.headingColumns;var a={};if(r){a.headingColumns=r;}if(s){a.headingRows=s;}var c=i.writer.createElement("table",a);var l=i.splitToAllowedParent(c,t.modelCursor);if(!l){return;}i.writer.insert(c,l.position);i.consumable.consume(n,{name:true});if(o.length){o.forEach(function(e){return i.convertItem(e,i.writer.createPositionAt(c,"end"));});}else{var _e318=i.writer.createElement("tableRow");i.writer.insert(_e318,i.writer.createPositionAt(c,"end"));KM(i.writer,i.writer.createPositionAt(_e318,"end"));}t.modelRange=i.writer.createRange(i.writer.createPositionBefore(c),i.writer.createPositionAfter(c));if(l.cursorParent){t.modelCursor=i.writer.createPositionAt(l.cursorParent,0);}else{t.modelCursor=t.modelRange.end;}});};}function iE(e){return function(t){t.on("element:".concat(e),function(e,t,i){var n=t.viewItem;if(!i.consumable.test(n,{name:true})){return;}var o=i.writer.createElement("tableCell");var s=i.splitToAllowedParent(o,t.modelCursor);if(!s){return;}i.writer.insert(o,s.position);i.consumable.consume(n,{name:true});var r=i.writer.createPositionAt(o,0);i.convertChildren(n,r);if(!o.childCount){i.writer.insertElement("paragraph",r);}t.modelRange=i.writer.createRange(i.writer.createPositionBefore(o),i.writer.createPositionAfter(o));t.modelCursor=t.modelRange.end;});};}function nE(e){var t={headingRows:0,headingColumns:0};var i=[];var n=[];var o;for(var _i294=0,_Array$from7=Array.from(e.getChildren());_i294<_Array$from7.length;_i294++){var _s58=_Array$from7[_i294];if(_s58.name==="tbody"||_s58.name==="thead"||_s58.name==="tfoot"){if(_s58.name==="thead"&&!o){o=_s58;}var _e319=Array.from(_s58.getChildren()).filter(function(e){return e.is("element","tr");});var _iteratorNormalCompletion364=true;var _didIteratorError364=false;var _iteratorError364=undefined;try{for(var _iterator364=_e319[Symbol.iterator](),_step364;!(_iteratorNormalCompletion364=(_step364=_iterator364.next()).done);_iteratorNormalCompletion364=true){var _s59=_step364.value;if(_s59.parent.name==="thead"&&_s59.parent===o){t.headingRows++;i.push(_s59);}else{n.push(_s59);var _e320=oE(_s59,t,o);if(_e320>t.headingColumns){t.headingColumns=_e320;}}}}catch(err){_didIteratorError364=true;_iteratorError364=err;}finally{try{if(!_iteratorNormalCompletion364&&_iterator364["return"]!=null){_iterator364["return"]();}}finally{if(_didIteratorError364){throw _iteratorError364;}}}}}t.rows=[].concat(i,n);return t;}function oE(e){var t=0;var i=0;var n=Array.from(e.getChildren()).filter(function(e){return e.name==="th"||e.name==="td";});while(i<n.length&&n[i].name==="th"){var _e321=n[i];var _o95=parseInt(_e321.getAttribute("colspan")||1);t=t+_o95;i++;}return t;}var sE=/*#__PURE__*/function(){function sE(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,sE);this.table=e;this.startRow=t.startRow||0;this.endRow=typeof t.endRow=="number"?t.endRow:undefined;this.includeSpanned=!!t.includeSpanned;this.column=typeof t.column=="number"?t.column:undefined;this._skipRows=new Set();this._row=0;this._column=0;this._cellIndex=0;this._spannedCells=new Map();this._nextCellAtColumn=-1;}_createClass(sE,[{key:Symbol.iterator,value:function value(){return this;}},{key:"next",value:function next(){var e=this.table.getChild(this._row);if(!e||this._isOverEndRow()){return{done:true};}var t,i,n;if(this._isSpanned(this._row,this._column)){t=this._getSpanned(this._row,this._column);i=!this.includeSpanned||this._shouldSkipRow()||this._shouldSkipColumn();n=this._formatOutValue(t,this._column,true);}else{t=e.getChild(this._cellIndex);if(!t){this._row++;this._column=0;this._cellIndex=0;this._nextCellAtColumn=-1;return this.next();}var _o96=parseInt(t.getAttribute("colspan")||1);var _s60=parseInt(t.getAttribute("rowspan")||1);if(_o96>1||_s60>1){this._recordSpans(this._row,this._column,_s60,_o96,t);}this._nextCellAtColumn=this._column+_o96;i=this._shouldSkipRow()||this._shouldSkipColumn();n=this._formatOutValue(t,this._column,false,_s60,_o96);}this._column++;if(this._column==this._nextCellAtColumn){this._cellIndex++;}return i?this.next():n;}},{key:"skipRow",value:function skipRow(e){this._skipRows.add(e);}},{key:"_isOverEndRow",value:function _isOverEndRow(){return this.endRow!==undefined&&this._row>this.endRow;}},{key:"_formatOutValue",value:function _formatOutValue(e,t,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1;return{done:false,value:{cell:e,row:this._row,column:t,isSpanned:i,rowspan:n,colspan:o,cellIndex:this._cellIndex}};}},{key:"_shouldSkipRow",value:function _shouldSkipRow(){var e=this._row<this.startRow;var t=this._skipRows.has(this._row);return e||t;}},{key:"_shouldSkipColumn",value:function _shouldSkipColumn(){if(this.column===undefined){return false;}return this.column!=this._column;}},{key:"_isSpanned",value:function _isSpanned(e,t){if(!this._spannedCells.has(e)){return false;}var i=this._spannedCells.get(e);return i.has(t);}},{key:"_getSpanned",value:function _getSpanned(e,t){return this._spannedCells.get(e).get(t);}},{key:"_recordSpans",value:function _recordSpans(e,t,i,n,o){for(var _i295=t+1;_i295<=t+n-1;_i295++){this._markSpannedCell(e,_i295,o);}for(var _s61=e+1;_s61<e+i;_s61++){for(var _e322=t;_e322<=t+n-1;_e322++){this._markSpannedCell(_s61,_e322,o);}}}},{key:"_markSpannedCell",value:function _markSpannedCell(e,t,i){if(!this._spannedCells.has(e)){this._spannedCells.set(e,new Map());}var n=this._spannedCells.get(e);n.set(t,i);}}]);return sE;}();function rE(e,t){t.setCustomProperty("table",true,e);return Ev(e,t,{hasSelectionHandle:true});}function aE(e){return!!e.getCustomProperty("table")&&Mv(e);}function cE(e){var t=e.getSelectedElement();if(t&&aE(t)){return t;}return null;}function lE(e){var t=JM("table",e.getFirstPosition());if(t&&aE(t.parent)){return t.parent;}return null;}function dE(e){var t=[];var _iteratorNormalCompletion365=true;var _didIteratorError365=false;var _iteratorError365=undefined;try{for(var _iterator365=fE(e.getRanges())[Symbol.iterator](),_step365;!(_iteratorNormalCompletion365=(_step365=_iterator365.next()).done);_iteratorNormalCompletion365=true){var _i296=_step365.value;var _e323=_i296.getContainedElement();if(_e323&&_e323.is("tableCell")){t.push(_e323);}}}catch(err){_didIteratorError365=true;_iteratorError365=err;}finally{try{if(!_iteratorNormalCompletion365&&_iterator365["return"]!=null){_iterator365["return"]();}}finally{if(_didIteratorError365){throw _iteratorError365;}}}return t;}function uE(e){var t=[];var _iteratorNormalCompletion366=true;var _didIteratorError366=false;var _iteratorError366=undefined;try{for(var _iterator366=e.getRanges()[Symbol.iterator](),_step366;!(_iteratorNormalCompletion366=(_step366=_iterator366.next()).done);_iteratorNormalCompletion366=true){var _i297=_step366.value;var _e324=JM("tableCell",_i297.start);if(_e324){t.push(_e324);}}}catch(err){_didIteratorError366=true;_iteratorError366=err;}finally{try{if(!_iteratorNormalCompletion366&&_iterator366["return"]!=null){_iterator366["return"]();}}finally{if(_didIteratorError366){throw _iteratorError366;}}}return t;}function hE(e){var t=dE(e);if(t.length){return t;}return uE(e);}function fE(e){return Array.from(e).sort(mE);}function mE(e,t){var i=e.start;var n=t.start;if(i.isEqual(n)){return 0;}return i.isBefore(n)?-1:1;}function gE(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return function(t){return t.on("insert:table",function(t,i,n){var o=i.item;if(!n.consumable.consume(o,"insert")){return;}n.consumable.consume(o,"attribute:headingRows:table");n.consumable.consume(o,"attribute:headingColumns:table");var s=e&&e.asWidget;var r=n.writer.createContainerElement("figure",{"class":"table"});var a=n.writer.createContainerElement("table");n.writer.insert(n.writer.createPositionAt(r,0),a);var c;if(s){c=rE(r,n.writer);}var l=new sE(o);var d={headingRows:o.getAttribute("headingRows")||0,headingColumns:o.getAttribute("headingColumns")||0};var u=new Map();var _iteratorNormalCompletion367=true;var _didIteratorError367=false;var _iteratorError367=undefined;try{for(var _iterator367=l[Symbol.iterator](),_step367;!(_iteratorNormalCompletion367=(_step367=_iterator367.next()).done);_iteratorNormalCompletion367=true){var _t274=_step367.value;var _i298=_t274.row,_s62=_t274.cell;var _r39=ME(TE(_i298,d),a,n);var _c11=o.getChild(_i298);var _l6=u.get(_i298)||AE(_c11,_i298,_r39,n);u.set(_i298,_l6);n.consumable.consume(_s62,"insert");var _h2=n.writer.createPositionAt(_l6,"end");xE(_t274,d,_h2,n,e);}}catch(err){_didIteratorError367=true;_iteratorError367=err;}finally{try{if(!_iteratorNormalCompletion367&&_iterator367["return"]!=null){_iterator367["return"]();}}finally{if(_didIteratorError367){throw _iteratorError367;}}}var h=n.mapper.toViewPosition(i.range.start);n.mapper.bindElements(o,s?c:r);n.writer.insert(h,s?c:r);});};}function pE(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return function(t){return t.on("insert:tableRow",function(t,i,n){var o=i.item;if(!n.consumable.consume(o,"insert")){return;}var s=o.parent;var r=n.mapper.toViewElement(s);var a=NE(r);var c=s.getChildIndex(o);var l=new sE(s,{startRow:c,endRow:c});var d={headingRows:s.getAttribute("headingRows")||0,headingColumns:s.getAttribute("headingColumns")||0};var u=new Map();var _iteratorNormalCompletion368=true;var _didIteratorError368=false;var _iteratorError368=undefined;try{for(var _iterator368=l[Symbol.iterator](),_step368;!(_iteratorNormalCompletion368=(_step368=_iterator368.next()).done);_iteratorNormalCompletion368=true){var _t275=_step368.value;var _i299=ME(TE(c,d),a,n);var _s63=u.get(c)||AE(o,c,_i299,n);u.set(c,_s63);n.consumable.consume(_t275.cell,"insert");var _r40=n.writer.createPositionAt(_s63,"end");xE(_t275,d,_r40,n,e);}}catch(err){_didIteratorError368=true;_iteratorError368=err;}finally{try{if(!_iteratorNormalCompletion368&&_iterator368["return"]!=null){_iterator368["return"]();}}finally{if(_didIteratorError368){throw _iteratorError368;}}}});};}function bE(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return function(t){return t.on("insert:tableCell",function(t,i,n){var o=i.item;if(!n.consumable.consume(o,"insert")){return;}var s=o.parent;var r=s.parent;var a=r.getChildIndex(s);var c=new sE(r,{startRow:a,endRow:a});var l={headingRows:r.getAttribute("headingRows")||0,headingColumns:r.getAttribute("headingColumns")||0};var _iteratorNormalCompletion369=true;var _didIteratorError369=false;var _iteratorError369=undefined;try{for(var _iterator369=c[Symbol.iterator](),_step369;!(_iteratorNormalCompletion369=(_step369=_iterator369.next()).done);_iteratorNormalCompletion369=true){var _t276=_step369.value;if(_t276.cell===o){var _i300=n.mapper.toViewElement(s);var _r41=n.writer.createPositionAt(_i300,s.getChildIndex(o));xE(_t276,l,_r41,n,e);return;}}}catch(err){_didIteratorError369=true;_iteratorError369=err;}finally{try{if(!_iteratorNormalCompletion369&&_iterator369["return"]!=null){_iterator369["return"]();}}finally{if(_didIteratorError369){throw _iteratorError369;}}}});};}function wE(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=!!e.asWidget;return function(e){return e.on("attribute:headingRows:table",function(e,i,n){var o=i.item;if(!n.consumable.consume(i.item,e.name)){return;}var s=n.mapper.toViewElement(o);var r=NE(s);var a=i.attributeOldValue;var c=i.attributeNewValue;if(c>a){var _e325=Array.from(o.getChildren()).filter(function(_ref46){var e=_ref46.index;return l(e,a-1,c);});var _i301=ME("thead",r,n);IE(_e325,_i301,n,"end");var _iteratorNormalCompletion370=true;var _didIteratorError370=false;var _iteratorError370=undefined;try{for(var _iterator370=_e325[Symbol.iterator](),_step370;!(_iteratorNormalCompletion370=(_step370=_iterator370.next()).done);_iteratorNormalCompletion370=true){var _i302=_step370.value;var _iteratorNormalCompletion371=true;var _didIteratorError371=false;var _iteratorError371=undefined;try{for(var _iterator371=_i302.getChildren()[Symbol.iterator](),_step371;!(_iteratorNormalCompletion371=(_step371=_iterator371.next()).done);_iteratorNormalCompletion371=true){var _e326=_step371.value;kE(_e326,"th",n,t);}}catch(err){_didIteratorError371=true;_iteratorError371=err;}finally{try{if(!_iteratorNormalCompletion371&&_iterator371["return"]!=null){_iterator371["return"]();}}finally{if(_didIteratorError371){throw _iteratorError371;}}}}}catch(err){_didIteratorError370=true;_iteratorError370=err;}finally{try{if(!_iteratorNormalCompletion370&&_iterator370["return"]!=null){_iterator370["return"]();}}finally{if(_didIteratorError370){throw _iteratorError370;}}}SE("tbody",r,n);}else{var _e327=Array.from(o.getChildren()).filter(function(_ref47){var e=_ref47.index;return l(e,c-1,a);}).reverse();var _i303=ME("tbody",r,n);IE(_e327,_i303,n,0);var _s64=new sE(o,{startRow:c?c-1:c,endRow:a-1});var _d3={headingRows:o.getAttribute("headingRows")||0,headingColumns:o.getAttribute("headingColumns")||0};var _iteratorNormalCompletion372=true;var _didIteratorError372=false;var _iteratorError372=undefined;try{for(var _iterator372=_s64[Symbol.iterator](),_step372;!(_iteratorNormalCompletion372=(_step372=_iterator372.next()).done);_iteratorNormalCompletion372=true){var _e328=_step372.value;yE(_e328,_d3,n,t);}}catch(err){_didIteratorError372=true;_iteratorError372=err;}finally{try{if(!_iteratorNormalCompletion372&&_iterator372["return"]!=null){_iterator372["return"]();}}finally{if(_didIteratorError372){throw _iteratorError372;}}}SE("thead",r,n);}function l(e,t,i){return e>t&&e<i;}});};}function _E(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=!!e.asWidget;return function(e){return e.on("attribute:headingColumns:table",function(e,i,n){var o=i.item;if(!n.consumable.consume(i.item,e.name)){return;}var s={headingRows:o.getAttribute("headingRows")||0,headingColumns:o.getAttribute("headingColumns")||0};var r=i.attributeOldValue;var a=i.attributeNewValue;var c=(r>a?r:a)-1;var _iteratorNormalCompletion373=true;var _didIteratorError373=false;var _iteratorError373=undefined;try{for(var _iterator373=new sE(o)[Symbol.iterator](),_step373;!(_iteratorNormalCompletion373=(_step373=_iterator373.next()).done);_iteratorNormalCompletion373=true){var _e329=_step373.value;if(_e329.column>c){continue;}yE(_e329,s,n,t);}}catch(err){_didIteratorError373=true;_iteratorError373=err;}finally{try{if(!_iteratorNormalCompletion373&&_iterator373["return"]!=null){_iterator373["return"]();}}finally{if(_didIteratorError373){throw _iteratorError373;}}}});};}function vE(){return function(e){return e.on("remove:tableRow",function(e,t,i){e.stop();var n=i.writer;var o=i.mapper;var s=o.toViewPosition(t.position).getLastMatchingPosition(function(e){return!e.item.is("tr");});var r=s.nodeAfter;var a=r.parent;var c=n.createRangeOn(r);var l=n.remove(c);var _iteratorNormalCompletion374=true;var _didIteratorError374=false;var _iteratorError374=undefined;try{for(var _iterator374=n.createRangeIn(l).getItems()[Symbol.iterator](),_step374;!(_iteratorNormalCompletion374=(_step374=_iterator374.next()).done);_iteratorNormalCompletion374=true){var _e330=_step374.value;o.unbindViewElement(_e330);}}catch(err){_didIteratorError374=true;_iteratorError374=err;}finally{try{if(!_iteratorNormalCompletion374&&_iterator374["return"]!=null){_iterator374["return"]();}}finally{if(_didIteratorError374){throw _iteratorError374;}}}if(!a.childCount){n.remove(n.createRangeOn(a));}},{priority:"higher"});};}function kE(e,t,i,n){var o=i.writer;var s=i.mapper.toViewElement(e);if(!s){return;}var r;if(n){var _e331=o.createEditableElement(t,s.getAttributes());r=Nv(_e331,o);o.insert(o.createPositionAfter(s),r);o.move(o.createRangeIn(s),o.createPositionAt(r,0));o.remove(o.createRangeOn(s));}else{r=o.rename(t,s);}i.mapper.unbindViewElement(s);i.mapper.bindElements(e,r);}function yE(e,t,i,n){var o=e.cell;var s=CE(e,t);var r=i.mapper.toViewElement(o);if(r&&r.name!==s){kE(o,s,i,n);}}function xE(e,t,i,n,o){var s=o&&o.asWidget;var r=CE(e,t);var a=s?Nv(n.writer.createEditableElement(r),n.writer):n.writer.createContainerElement(r);var c=e.cell;var l=c.getChild(0);var d=c.childCount===1&&l.name==="paragraph";n.writer.insert(i,a);if(d&&!OE(l)){var _e332=c.getChild(0);var _t277=n.writer.createPositionAt(a,"end");n.consumable.consume(_e332,"insert");if(o.asWidget){var _i304=n.writer.createContainerElement("span",{style:"display:inline-block"});n.mapper.bindElements(_e332,_i304);n.writer.insert(_t277,_i304);n.mapper.bindElements(c,a);}else{n.mapper.bindElements(c,a);n.mapper.bindElements(_e332,a);}}else{n.mapper.bindElements(c,a);}}function AE(e,t,i,n){n.consumable.consume(e,"insert");var o=n.writer.createContainerElement("tr");n.mapper.bindElements(e,o);var s=e.parent.getAttribute("headingRows")||0;var r=s>0&&t>=s?t-s:t;var a=n.writer.createPositionAt(i,r);n.writer.insert(a,o);return o;}function CE(e,t){var i=e.row,n=e.column;var o=t.headingColumns,s=t.headingRows;var r=s&&s>i;if(r){return"th";}var a=o&&o>n;return a?"th":"td";}function TE(e,t){return e<t.headingRows?"thead":"tbody";}function ME(e,t,i){var n=EE(e,t);return n?n:PE(e,t,i);}function EE(e,t){var _iteratorNormalCompletion375=true;var _didIteratorError375=false;var _iteratorError375=undefined;try{for(var _iterator375=t.getChildren()[Symbol.iterator](),_step375;!(_iteratorNormalCompletion375=(_step375=_iterator375.next()).done);_iteratorNormalCompletion375=true){var _i305=_step375.value;if(_i305.name==e){return _i305;}}}catch(err){_didIteratorError375=true;_iteratorError375=err;}finally{try{if(!_iteratorNormalCompletion375&&_iterator375["return"]!=null){_iterator375["return"]();}}finally{if(_didIteratorError375){throw _iteratorError375;}}}}function PE(e,t,i){var n=i.writer.createContainerElement(e);var o=i.writer.createPositionAt(t,e=="tbody"?"end":0);i.writer.insert(o,n);return n;}function SE(e,t,i){var n=EE(e,t);if(n&&n.childCount===0){i.writer.remove(i.writer.createRangeOn(n));}}function IE(e,t,i,n){var _iteratorNormalCompletion376=true;var _didIteratorError376=false;var _iteratorError376=undefined;try{for(var _iterator376=e[Symbol.iterator](),_step376;!(_iteratorNormalCompletion376=(_step376=_iterator376.next()).done);_iteratorNormalCompletion376=true){var _o97=_step376.value;var _e333=i.mapper.toViewElement(_o97);if(_e333){i.writer.move(i.writer.createRangeOn(_e333),i.writer.createPositionAt(t,n));}}}catch(err){_didIteratorError376=true;_iteratorError376=err;}finally{try{if(!_iteratorNormalCompletion376&&_iterator376["return"]!=null){_iterator376["return"]();}}finally{if(_didIteratorError376){throw _iteratorError376;}}}}function NE(e){var _iteratorNormalCompletion377=true;var _didIteratorError377=false;var _iteratorError377=undefined;try{for(var _iterator377=e.getChildren()[Symbol.iterator](),_step377;!(_iteratorNormalCompletion377=(_step377=_iterator377.next()).done);_iteratorNormalCompletion377=true){var _t278=_step377.value;if(_t278.name==="table"){return _t278;}}}catch(err){_didIteratorError377=true;_iteratorError377=err;}finally{try{if(!_iteratorNormalCompletion377&&_iterator377["return"]!=null){_iterator377["return"]();}}finally{if(_didIteratorError377){throw _iteratorError377;}}}}function OE(e){return!!_toConsumableArray(e.getAttributeKeys()).length;}var RE=/*#__PURE__*/function(_w21){_inherits(RE,_w21);function RE(){_classCallCheck(this,RE);return _possibleConstructorReturn(this,_getPrototypeOf(RE).apply(this,arguments));}_createClass(RE,[{key:"refresh",value:function refresh(){var e=this.editor.model;var t=e.document.selection;var i=e.schema;var n=LE(t.getFirstPosition());this.isEnabled=i.checkChild(n,"table");}},{key:"execute",value:function execute(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor.model;var i=t.document.selection;var n=this.editor.plugins.get("TableUtils");var o=parseInt(e.rows)||2;var s=parseInt(e.columns)||2;var r=Ov(i,t);t.change(function(e){var i=n.createTable(e,o,s);t.insertContent(i,r);e.setSelection(e.createPositionAt(i.getNodeByPath([0,0,0]),0));});}}]);return RE;}(_w);function LE(e){var t=e.parent;return t===t.root?t:t.parent;}var zE=/*#__PURE__*/function(_w22){_inherits(zE,_w22);function zE(e){var _this246;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,zE);_this246=_possibleConstructorReturn(this,_getPrototypeOf(zE).call(this,e));_this246.order=t.order||"below";return _this246;}_createClass(zE,[{key:"refresh",value:function refresh(){var e=this.editor.model.document.selection;var t=JM("table",e.getFirstPosition());this.isEnabled=!!t;}},{key:"execute",value:function execute(){var e=this.editor;var t=e.model.document.selection;var i=e.plugins.get("TableUtils");var n=this.order==="above";var o=n?t.getFirstPosition():t.getLastPosition();var s=n?t.getFirstRange():t.getLastRange();var r=s.getContainedElement()||JM("tableCell",o);var a=r.parent;var c=a.parent;var l=c.getChildIndex(a);i.insertRows(c,{rows:1,at:this.order==="below"?l+1:l});}}]);return zE;}(_w);var DE=/*#__PURE__*/function(_w23){_inherits(DE,_w23);function DE(e){var _this247;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,DE);_this247=_possibleConstructorReturn(this,_getPrototypeOf(DE).call(this,e));_this247.order=t.order||"right";return _this247;}_createClass(DE,[{key:"refresh",value:function refresh(){var e=this.editor.model.document.selection;var t=JM("table",e.getFirstPosition());this.isEnabled=!!t;}},{key:"execute",value:function execute(){var e=this.editor;var t=e.model.document.selection;var i=e.plugins.get("TableUtils");var n=this.order==="left";var o=n?t.getFirstPosition():t.getLastPosition();var s=n?t.getFirstRange():t.getLastRange();var r=s.getContainedElement()||JM("tableCell",o);var a=r.parent.parent;var _i$getCellLocation=i.getCellLocation(r),c=_i$getCellLocation.column;i.insertColumns(a,{columns:1,at:n?c:c+1});}}]);return DE;}(_w);var jE=/*#__PURE__*/function(_w24){_inherits(jE,_w24);function jE(e){var _this248;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,jE);_this248=_possibleConstructorReturn(this,_getPrototypeOf(jE).call(this,e));_this248.direction=t.direction||"horizontally";return _this248;}_createClass(jE,[{key:"refresh",value:function refresh(){var e=hE(this.editor.model.document.selection);this.isEnabled=e.length===1;}},{key:"execute",value:function execute(){var e=hE(this.editor.model.document.selection)[0];var t=this.direction==="horizontally";var i=this.editor.plugins.get("TableUtils");if(t){i.splitCellHorizontally(e,2);}else{i.splitCellVertically(e,2);}}}]);return jE;}(_w);var BE=/*#__PURE__*/function(_w25){_inherits(BE,_w25);function BE(e,t){var _this249;_classCallCheck(this,BE);_this249=_possibleConstructorReturn(this,_getPrototypeOf(BE).call(this,e));_this249.direction=t.direction;_this249.isHorizontal=_this249.direction=="right"||_this249.direction=="left";return _this249;}_createClass(BE,[{key:"refresh",value:function refresh(){var e=this._getMergeableCell();this.value=e;this.isEnabled=!!e;}},{key:"execute",value:function execute(){var _this250=this;var e=this.editor.model;var t=e.document;var i=uE(t.selection)[0];var n=this.value;var o=this.direction;e.change(function(e){var t=o=="right"||o=="down";var s=t?i:n;var r=t?n:i;var a=r.parent;WE(r,s,e);var c=_this250.isHorizontal?"colspan":"rowspan";var l=parseInt(i.getAttribute(c)||1);var d=parseInt(n.getAttribute(c)||1);e.setAttribute(c,l+d,s);e.setSelection(e.createRangeIn(s));if(!a.childCount){HE(a,e);}});}},{key:"_getMergeableCell",value:function _getMergeableCell(){var e=this.editor.model;var t=e.document;var i=uE(t.selection)[0];if(!i){return;}var n=this.editor.plugins.get("TableUtils");var o=this.isHorizontal?VE(i,this.direction,n):FE(i,this.direction);if(!o){return;}var s=this.isHorizontal?"rowspan":"colspan";var r=parseInt(i.getAttribute(s)||1);var a=parseInt(o.getAttribute(s)||1);if(a===r){return o;}}}]);return BE;}(_w);function VE(e,t,i){var n=e.parent;var o=n.parent;var s=t=="right"?e.nextSibling:e.previousSibling;var r=(o.getAttribute("headingColumns")||0)>0;if(!s){return;}var a=t=="right"?e:s;var c=t=="right"?s:e;var _i$getCellLocation2=i.getCellLocation(a),l=_i$getCellLocation2.column;var _i$getCellLocation3=i.getCellLocation(c),d=_i$getCellLocation3.column;var u=parseInt(a.getAttribute("colspan")||1);var h=eE(i,a,o);var f=eE(i,c,o);if(r&&h!=f){return;}var m=l+u===d;return m?s:undefined;}function FE(e,t){var i=e.parent;var n=i.parent;var o=n.getChildIndex(i);if(t=="down"&&o===n.childCount-1||t=="up"&&o===0){return;}var s=parseInt(e.getAttribute("rowspan")||1);var r=n.getAttribute("headingRows")||0;var a=t=="down"&&o+s===r;var c=t=="up"&&o===r;if(r&&(a||c)){return;}var l=parseInt(e.getAttribute("rowspan")||1);var d=t=="down"?o+l:o;var u=_toConsumableArray(new sE(n,{endRow:d}));var h=u.find(function(t){return t.cell===e;});var f=h.column;var m=u.find(function(_ref48){var e=_ref48.row,i=_ref48.rowspan,n=_ref48.column;if(n!==f){return false;}if(t=="down"){return e===d;}else{return d===e+i;}});return m&&m.cell;}function HE(e,t){var i=e.parent;var n=i.getChildIndex(e);var _iteratorNormalCompletion378=true;var _didIteratorError378=false;var _iteratorError378=undefined;try{for(var _iterator378=new sE(i,{endRow:n})[Symbol.iterator](),_step378;!(_iteratorNormalCompletion378=(_step378=_iterator378.next()).done);_iteratorNormalCompletion378=true){var _ref50=_step378.value;var _e334=_ref50.cell,_o98=_ref50.row,_s65=_ref50.rowspan;var _i306=_o98+_s65-1>=n;if(_i306){XM("rowspan",_s65-1,_e334,t);}}}catch(err){_didIteratorError378=true;_iteratorError378=err;}finally{try{if(!_iteratorNormalCompletion378&&_iterator378["return"]!=null){_iterator378["return"]();}}finally{if(_didIteratorError378){throw _iteratorError378;}}}t.remove(e);}function WE(e,t,i){if(!UE(e)){if(UE(t)){i.remove(i.createRangeIn(t));}i.move(i.createRangeIn(e),i.createPositionAt(t,"end"));}i.remove(e);}function UE(e){return e.childCount==1&&e.getChild(0).is("paragraph")&&e.getChild(0).isEmpty;}var $E=/*#__PURE__*/function(_w26){_inherits($E,_w26);function $E(){_classCallCheck(this,$E);return _possibleConstructorReturn(this,_getPrototypeOf($E).apply(this,arguments));}_createClass($E,[{key:"refresh",value:function refresh(){var e=hE(this.editor.model.document.selection);var t=e[0];if(t){var _i307=t.parent.parent;var _n175=this.editor.plugins.get("TableUtils").getRows(_i307);var _o99=_toConsumableArray(new sE(_i307));var _s66=_o99.filter(function(t){return e.includes(t.cell);}).map(function(e){return e.row;});var _r42=_s66[0];var _a22=_s66[_s66.length-1];this.isEnabled=_a22-_r42<_n175-1;}else{this.isEnabled=false;}}},{key:"execute",value:function execute(){var _this251=this;var e=hE(this.editor.model.document.selection);var t=qE(e);var i=e[0];var n=i.parent.parent;var o=_toConsumableArray(new sE(n,{endRow:t.last}));var s=this.editor.model.createBatch();var r=GE(o,i);this.editor.model.enqueueChange(s,function(e){e.setSelection(e.createSelection(n,"on"));});var a;var _loop11=function _loop11(_e335){_this251.editor.model.enqueueChange(s,function(t){var i=_e335;_this251._removeRow(i,n,t,o);a=YE(n,i,r);});};for(var _e335=t.last;_e335>=t.first;_e335--){_loop11(_e335);}this.editor.model.enqueueChange(s,function(e){e.setSelection(e.createPositionAt(a,0));});}},{key:"_removeRow",value:function _removeRow(e,t,i,n){var o=new Map();var s=t.getChild(e);var r=t.getAttribute("headingRows")||0;if(r&&e<r){XM("headingRows",r-1,t,i,0);}n.filter(function(_ref51){var t=_ref51.row,i=_ref51.rowspan;return t===e&&i>1;}).forEach(function(_ref52){var e=_ref52.column,t=_ref52.cell,i=_ref52.rowspan;return o.set(e,{cell:t,rowspanToSet:i-1});});n.filter(function(_ref53){var t=_ref53.row,i=_ref53.rowspan;return t<=e-1&&t+i>e;}).forEach(function(_ref54){var e=_ref54.cell,t=_ref54.rowspan;return XM("rowspan",t-1,e,i);});var a=e+1;var c=new sE(t,{includeSpanned:true,startRow:a,endRow:a});var l;for(var _i308=0,_arr3=_toConsumableArray(c);_i308<_arr3.length;_i308++){var _ref56=_arr3[_i308];var _e336=_ref56.row,_n176=_ref56.column,_s67=_ref56.cell;if(o.has(_n176)){var _o$get=o.get(_n176),_s68=_o$get.cell,_r43=_o$get.rowspanToSet;var _a23=l?i.createPositionAfter(l):i.createPositionAt(t.getChild(_e336),0);i.move(i.createRangeOn(_s68),_a23);XM("rowspan",_r43,_s68,i);l=_s68;}else{l=_s67;}}i.remove(s);}}]);return $E;}(_w);function qE(e){var t=e.map(function(e){return e.parent.index;}).sort();return{first:t[0],last:t[t.length-1]};}function YE(e,t,i){var n=e.getChild(t)||e.getChild(e.childCount-1);var o=n.getChild(0);var s=0;var _iteratorNormalCompletion379=true;var _didIteratorError379=false;var _iteratorError379=undefined;try{for(var _iterator379=n.getChildren()[Symbol.iterator](),_step379;!(_iteratorNormalCompletion379=(_step379=_iterator379.next()).done);_iteratorNormalCompletion379=true){var _e337=_step379.value;if(s>i){return o;}o=_e337;s+=parseInt(_e337.getAttribute("colspan")||1);}}catch(err){_didIteratorError379=true;_iteratorError379=err;}finally{try{if(!_iteratorNormalCompletion379&&_iterator379["return"]!=null){_iterator379["return"]();}}finally{if(_didIteratorError379){throw _iteratorError379;}}}return o;}function GE(e,t){var i=e.find(function(e){return e.cell===t;});return i.column;}var JE=/*#__PURE__*/function(_w27){_inherits(JE,_w27);function JE(){_classCallCheck(this,JE);return _possibleConstructorReturn(this,_getPrototypeOf(JE).apply(this,arguments));}_createClass(JE,[{key:"refresh",value:function refresh(){var e=hE(this.editor.model.document.selection);var t=e[0];if(t){var _i309=t.parent.parent;var _n177=this.editor.plugins.get("TableUtils").getColumns(_i309);var _o100=_toConsumableArray(new sE(_i309));var _s69=_o100.filter(function(t){return e.includes(t.cell);}).map(function(e){return e.column;}).sort();var _r44=_s69[0];var _a24=_s69[_s69.length-1];this.isEnabled=_a24-_r44<_n177-1;}else{this.isEnabled=false;}}},{key:"execute",value:function execute(){var _QE=QE(this.editor.model.document.selection),_QE2=_slicedToArray(_QE,2),e=_QE2[0],t=_QE2[1];var i=e.parent.parent;var n=_toConsumableArray(new sE(i));var o={first:n.find(function(t){return t.cell===e;}).column,last:n.find(function(e){return e.cell===t;}).column};var s=KE(n,e,t,o);this.editor.model.change(function(e){e.setSelection(e.createRangeOn(i));XE(i,o,e);for(var _t279=o.last;_t279>=o.first;_t279--){var _iteratorNormalCompletion380=true;var _didIteratorError380=false;var _iteratorError380=undefined;try{for(var _iterator380=n[Symbol.iterator](),_step380;!(_iteratorNormalCompletion380=(_step380=_iterator380.next()).done);_iteratorNormalCompletion380=true){var _ref58=_step380.value;var _i310=_ref58.cell,_o101=_ref58.column,_s70=_ref58.colspan;if(_o101<=_t279&&_s70>1&&_o101+_s70>_t279){XM("colspan",_s70-1,_i310,e);}else if(_o101===_t279){var _t280=_i310.parent;e.remove(_i310);if(!_t280.childCount){e.remove(_t280);}}}}catch(err){_didIteratorError380=true;_iteratorError380=err;}finally{try{if(!_iteratorNormalCompletion380&&_iterator380["return"]!=null){_iterator380["return"]();}}finally{if(_didIteratorError380){throw _iteratorError380;}}}}e.setSelection(e.createPositionAt(s,0));});}}]);return JE;}(_w);function XE(e,t,i){var n=e.getAttribute("headingColumns")||0;if(n&&t.first<=n){var _o102=Math.min(n-1,t.last)-t.first+1;i.setAttribute("headingColumns",n-_o102,e);}}function KE(e,t,i,n){var o=parseInt(i.getAttribute("colspan")||1);if(o>1){return i;}else if(t.previousSibling||i.nextSibling){return i.nextSibling||t.previousSibling;}else{if(n.first){return e.reverse().find(function(_ref59){var e=_ref59.column;return e<n.first;}).cell;}else{return e.reverse().find(function(_ref60){var e=_ref60.column;return e>n.last;}).cell;}}}function QE(e){var t=hE(e);var i=t[0];var n=t.pop();var o=[i,n];return i.isBefore(n)?o:o.reverse();}var ZE=/*#__PURE__*/function(_w28){_inherits(ZE,_w28);function ZE(){_classCallCheck(this,ZE);return _possibleConstructorReturn(this,_getPrototypeOf(ZE).apply(this,arguments));}_createClass(ZE,[{key:"refresh",value:function refresh(){var _this252=this;var e=this.editor.model;var t=hE(e.document.selection);var i=t.length>0;this.isEnabled=i;this.value=i&&t.every(function(e){return _this252._isInHeading(e,e.parent.parent);});}},{key:"execute",value:function execute(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor.model;var i=hE(t.document.selection);var n=i[0];var o=i[i.length-1];var s=n.parent.parent;var r=s.getAttribute("headingRows")||0;var _sort=[n.parent.index,o.parent.index].sort(),_sort2=_slicedToArray(_sort,2),a=_sort2[0],c=_sort2[1];if(e.forceValue===this.value){return;}var l=this.value?a:c+1;t.change(function(e){if(l){var _t281=eP(s,l,r);var _iteratorNormalCompletion381=true;var _didIteratorError381=false;var _iteratorError381=undefined;try{for(var _iterator381=_t281[Symbol.iterator](),_step381;!(_iteratorNormalCompletion381=(_step381=_iterator381.next()).done);_iteratorNormalCompletion381=true){var _i311=_step381.value;tP(_i311,l,e);}}catch(err){_didIteratorError381=true;_iteratorError381=err;}finally{try{if(!_iteratorNormalCompletion381&&_iterator381["return"]!=null){_iterator381["return"]();}}finally{if(_didIteratorError381){throw _iteratorError381;}}}}XM("headingRows",l,s,e,0);});}},{key:"_isInHeading",value:function _isInHeading(e,t){var i=parseInt(t.getAttribute("headingRows")||0);return!!i&&e.parent.index<i;}}]);return ZE;}(_w);function eP(e,t,i){var n=[];var o=t>i?i:0;var s=t-1;var r=new sE(e,{startRow:o,endRow:s});var _iteratorNormalCompletion382=true;var _didIteratorError382=false;var _iteratorError382=undefined;try{for(var _iterator382=r[Symbol.iterator](),_step382;!(_iteratorNormalCompletion382=(_step382=_iterator382.next()).done);_iteratorNormalCompletion382=true){var _ref62=_step382.value;var _e338=_ref62.row,_i312=_ref62.rowspan,_o103=_ref62.cell;if(_i312>1&&_e338+_i312>t){n.push(_o103);}}}catch(err){_didIteratorError382=true;_iteratorError382=err;}finally{try{if(!_iteratorNormalCompletion382&&_iterator382["return"]!=null){_iterator382["return"]();}}finally{if(_didIteratorError382){throw _iteratorError382;}}}return n;}function tP(e,t,i){var n=e.parent;var o=n.parent;var s=n.index;var r=parseInt(e.getAttribute("rowspan"));var a=t-s;var c={};var l=r-a;if(l>1){c.rowspan=l;}var d=parseInt(e.getAttribute("colspan")||1);if(d>1){c.colspan=d;}var u=o.getChildIndex(n);var h=u+a;var f=_toConsumableArray(new sE(o,{startRow:u,endRow:h,includeSpanned:true}));var m;var _iteratorNormalCompletion383=true;var _didIteratorError383=false;var _iteratorError383=undefined;try{for(var _iterator383=f[Symbol.iterator](),_step383;!(_iteratorNormalCompletion383=(_step383=_iterator383.next()).done);_iteratorNormalCompletion383=true){var _ref64=_step383.value;var _t282=_ref64.row,_n178=_ref64.column,_s71=_ref64.cell,_r45=_ref64.cellIndex;if(_s71===e&&m===undefined){m=_n178;}if(m!==undefined&&m===_n178&&_t282===h){var _e339=o.getChild(_t282);var _n179=i.createPositionAt(_e339,_r45);KM(i,_n179,c);}}}catch(err){_didIteratorError383=true;_iteratorError383=err;}finally{try{if(!_iteratorNormalCompletion383&&_iterator383["return"]!=null){_iterator383["return"]();}}finally{if(_didIteratorError383){throw _iteratorError383;}}}XM("rowspan",a,e,i);}var iP=/*#__PURE__*/function(_w29){_inherits(iP,_w29);function iP(){_classCallCheck(this,iP);return _possibleConstructorReturn(this,_getPrototypeOf(iP).apply(this,arguments));}_createClass(iP,[{key:"refresh",value:function refresh(){var e=this.editor.model;var t=hE(e.document.selection);var i=this.editor.plugins.get("TableUtils");var n=t.length>0;this.isEnabled=n;this.value=n&&t.every(function(e){return eE(i,e);});}},{key:"execute",value:function execute(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor.model;var i=this.editor.plugins.get("TableUtils");var n=hE(t.document.selection);var o=n[0];var s=n[n.length-1];var r=o.parent;var a=r.parent;var _sort3=[i.getCellLocation(o).column,i.getCellLocation(s).column].sort(),_sort4=_slicedToArray(_sort3,2),c=_sort4[0],l=_sort4[1];if(e.forceValue===this.value){return;}var d=this.value?c:l+1;t.change(function(e){XM("headingColumns",d,a,e,0);});}}]);return iP;}(_w);var nP=/*#__PURE__*/function(_bw68){_inherits(nP,_bw68);function nP(){_classCallCheck(this,nP);return _possibleConstructorReturn(this,_getPrototypeOf(nP).apply(this,arguments));}_createClass(nP,[{key:"getCellLocation",value:function getCellLocation(e){var t=e.parent;var i=t.parent;var n=i.getChildIndex(t);var o=new sE(i,{startRow:n,endRow:n});var _iteratorNormalCompletion384=true;var _didIteratorError384=false;var _iteratorError384=undefined;try{for(var _iterator384=o[Symbol.iterator](),_step384;!(_iteratorNormalCompletion384=(_step384=_iterator384.next()).done);_iteratorNormalCompletion384=true){var _ref66=_step384.value;var _t283=_ref66.cell,_i313=_ref66.row,_n180=_ref66.column;if(_t283===e){return{row:_i313,column:_n180};}}}catch(err){_didIteratorError384=true;_iteratorError384=err;}finally{try{if(!_iteratorNormalCompletion384&&_iterator384["return"]!=null){_iterator384["return"]();}}finally{if(_didIteratorError384){throw _iteratorError384;}}}}},{key:"createTable",value:function createTable(e,t,i){var n=e.createElement("table");oP(e,n,0,t,i);return n;}},{key:"insertRows",value:function insertRows(e){var _this253=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=this.editor.model;var n=t.at||0;var o=t.rows||1;i.change(function(t){var i=e.getAttribute("headingRows")||0;if(i>n){t.setAttribute("headingRows",i+o,e);}if(n===0||n===e.childCount){oP(t,e,n,o,_this253.getColumns(e));return;}var s=new sE(e,{endRow:n});var r=0;var _iteratorNormalCompletion385=true;var _didIteratorError385=false;var _iteratorError385=undefined;try{for(var _iterator385=s[Symbol.iterator](),_step385;!(_iteratorNormalCompletion385=(_step385=_iterator385.next()).done);_iteratorNormalCompletion385=true){var _ref68=_step385.value;var _e340=_ref68.row,_i314=_ref68.rowspan,_a25=_ref68.colspan,_c12=_ref68.cell;var _s72=_e340<n;var _l7=_e340+_i314>n;if(_s72&&_l7){t.setAttribute("rowspan",_i314+o,_c12);}if(_e340===n){r+=_a25;}}}catch(err){_didIteratorError385=true;_iteratorError385=err;}finally{try{if(!_iteratorNormalCompletion385&&_iterator385["return"]!=null){_iterator385["return"]();}}finally{if(_didIteratorError385){throw _iteratorError385;}}}oP(t,e,n,o,r);});}},{key:"insertColumns",value:function insertColumns(e){var _this254=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=this.editor.model;var n=t.at||0;var o=t.columns||1;i.change(function(t){var i=e.getAttribute("headingColumns");if(n<i){t.setAttribute("headingColumns",i+o,e);}var s=_this254.getColumns(e);if(n===0||s===n){var _iteratorNormalCompletion386=true;var _didIteratorError386=false;var _iteratorError386=undefined;try{for(var _iterator386=e.getChildren()[Symbol.iterator](),_step386;!(_iteratorNormalCompletion386=(_step386=_iterator386.next()).done);_iteratorNormalCompletion386=true){var _i315=_step386.value;sP(o,t,t.createPositionAt(_i315,n?"end":0));}}catch(err){_didIteratorError386=true;_iteratorError386=err;}finally{try{if(!_iteratorNormalCompletion386&&_iterator386["return"]!=null){_iterator386["return"]();}}finally{if(_didIteratorError386){throw _iteratorError386;}}}return;}var r=new sE(e,{column:n,includeSpanned:true});var _iteratorNormalCompletion387=true;var _didIteratorError387=false;var _iteratorError387=undefined;try{for(var _iterator387=r[Symbol.iterator](),_step387;!(_iteratorNormalCompletion387=(_step387=_iterator387.next()).done);_iteratorNormalCompletion387=true){var _ref70=_step387.value;var _i316=_ref70.row,_s73=_ref70.cell,_a26=_ref70.cellIndex;var _c13=parseInt(_s73.getAttribute("rowspan")||1);var _l8=parseInt(_s73.getAttribute("colspan")||1);if(_s73.index!==n&&_l8>1){t.setAttribute("colspan",_l8+o,_s73);r.skipRow(_i316);if(_c13>1){for(var _e341=_i316+1;_e341<_i316+_c13;_e341++){r.skipRow(_e341);}}}else{var _n181=t.createPositionAt(e.getChild(_i316),_a26);sP(o,t,_n181);}}}catch(err){_didIteratorError387=true;_iteratorError387=err;}finally{try{if(!_iteratorNormalCompletion387&&_iterator387["return"]!=null){_iterator387["return"]();}}finally{if(_didIteratorError387){throw _iteratorError387;}}}});}},{key:"splitCellVertically",value:function splitCellVertically(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;var i=this.editor.model;var n=e.parent;var o=n.parent;var s=parseInt(e.getAttribute("rowspan")||1);var r=parseInt(e.getAttribute("colspan")||1);i.change(function(i){if(r>1){var _rP=rP(r,t),_n182=_rP.newCellsSpan,_o104=_rP.updatedSpan;XM("colspan",_o104,e,i);var _a27={};if(_n182>1){_a27.colspan=_n182;}if(s>1){_a27.rowspan=s;}var _c14=r>t?t-1:r-1;sP(_c14,i,i.createPositionAfter(e),_a27);}if(r<t){var _n183=t-r;var _a28=_toConsumableArray(new sE(o));var _a28$find=_a28.find(function(_ref71){var t=_ref71.cell;return t===e;}),_c15=_a28$find.column;var _l9=_a28.filter(function(_ref72){var t=_ref72.cell,i=_ref72.colspan,n=_ref72.column;var o=t!==e&&n===_c15;var s=n<_c15&&n+i>_c15;return o||s;});var _iteratorNormalCompletion388=true;var _didIteratorError388=false;var _iteratorError388=undefined;try{for(var _iterator388=_l9[Symbol.iterator](),_step388;!(_iteratorNormalCompletion388=(_step388=_iterator388.next()).done);_iteratorNormalCompletion388=true){var _ref74=_step388.value;var _e342=_ref74.cell,_t284=_ref74.colspan;i.setAttribute("colspan",_t284+_n183,_e342);}}catch(err){_didIteratorError388=true;_iteratorError388=err;}finally{try{if(!_iteratorNormalCompletion388&&_iterator388["return"]!=null){_iterator388["return"]();}}finally{if(_didIteratorError388){throw _iteratorError388;}}}var _d4={};if(s>1){_d4.rowspan=s;}sP(_n183,i,i.createPositionAfter(e),_d4);var _u3=o.getAttribute("headingColumns")||0;if(_u3>_c15){XM("headingColumns",_u3+_n183,o,i);}}});}},{key:"splitCellHorizontally",value:function splitCellHorizontally(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;var i=this.editor.model;var n=e.parent;var o=n.parent;var s=o.getChildIndex(n);var r=parseInt(e.getAttribute("rowspan")||1);var a=parseInt(e.getAttribute("colspan")||1);i.change(function(i){if(r>1){var _n184=_toConsumableArray(new sE(o,{startRow:s,endRow:s+r-1,includeSpanned:true}));var _rP2=rP(r,t),_c16=_rP2.newCellsSpan,_l10=_rP2.updatedSpan;XM("rowspan",_l10,e,i);var _n184$find=_n184.find(function(_ref75){var t=_ref75.cell;return t===e;}),_d5=_n184$find.column;var _u4={};if(_c16>1){_u4.rowspan=_c16;}if(a>1){_u4.colspan=a;}var _iteratorNormalCompletion389=true;var _didIteratorError389=false;var _iteratorError389=undefined;try{for(var _iterator389=_n184[Symbol.iterator](),_step389;!(_iteratorNormalCompletion389=(_step389=_iterator389.next()).done);_iteratorNormalCompletion389=true){var _ref77=_step389.value;var _e343=_ref77.column,_t285=_ref77.row,_r46=_ref77.cellIndex;var _n185=_t285>=s+_l10;var _a29=_e343===_d5;var _h3=(_t285+s+_l10)%_c16===0;if(_n185&&_a29&&_h3){var _e344=i.createPositionAt(o.getChild(_t285),_r46);sP(1,i,_e344,_u4);}}}catch(err){_didIteratorError389=true;_iteratorError389=err;}finally{try{if(!_iteratorNormalCompletion389&&_iterator389["return"]!=null){_iterator389["return"]();}}finally{if(_didIteratorError389){throw _iteratorError389;}}}}if(r<t){var _n186=t-r;var _c17=_toConsumableArray(new sE(o,{startRow:0,endRow:s}));var _iteratorNormalCompletion390=true;var _didIteratorError390=false;var _iteratorError390=undefined;try{for(var _iterator390=_c17[Symbol.iterator](),_step390;!(_iteratorNormalCompletion390=(_step390=_iterator390.next()).done);_iteratorNormalCompletion390=true){var _ref79=_step390.value;var _t286=_ref79.cell,_o105=_ref79.rowspan,_r47=_ref79.row;if(_t286!==e&&_r47+_o105>s){var _e345=_o105+_n186;i.setAttribute("rowspan",_e345,_t286);}}}catch(err){_didIteratorError390=true;_iteratorError390=err;}finally{try{if(!_iteratorNormalCompletion390&&_iterator390["return"]!=null){_iterator390["return"]();}}finally{if(_didIteratorError390){throw _iteratorError390;}}}var _l11={};if(a>1){_l11.colspan=a;}oP(i,o,s+1,_n186,1,_l11);var _d6=o.getAttribute("headingRows")||0;if(_d6>s){XM("headingRows",_d6+_n186,o,i);}}});}},{key:"getColumns",value:function getColumns(e){var t=e.getChild(0);return _toConsumableArray(t.getChildren()).reduce(function(e,t){var i=parseInt(t.getAttribute("colspan")||1);return e+i;},0);}},{key:"getRows",value:function getRows(e){return e.childCount;}}],[{key:"pluginName",get:function get(){return"TableUtils";}}]);return nP;}(bw);function oP(e,t,i,n,o){var s=arguments.length>5&&arguments[5]!==undefined?arguments[5]:{};for(var _r48=0;_r48<n;_r48++){var _n187=e.createElement("tableRow");e.insert(_n187,t,i);sP(o,e,e.createPositionAt(_n187,"end"),s);}}function sP(e,t,i){var n=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};for(var _o106=0;_o106<e;_o106++){KM(t,i,n);}}function rP(e,t){if(e<t){return{newCellsSpan:1,updatedSpan:1};}var i=Math.floor(e/t);var n=e-i*t+i;return{newCellsSpan:i,updatedSpan:n};}function aP(e){e.document.registerPostFixer(function(t){return cP(t,e);});}function cP(e,t){var i=t.document.differ.getChanges();var n=false;var o=new Set();var _iteratorNormalCompletion391=true;var _didIteratorError391=false;var _iteratorError391=undefined;try{for(var _iterator391=i[Symbol.iterator](),_step391;!(_iteratorNormalCompletion391=(_step391=_iterator391.next()).done);_iteratorNormalCompletion391=true){var _t287=_step391.value;var _i317=void 0;if(_t287.name=="table"&&_t287.type=="insert"){_i317=_t287.position.nodeAfter;}if(_t287.name=="tableRow"||_t287.name=="tableCell"){_i317=JM("table",_t287.position);}if(fP(_t287)){_i317=JM("table",_t287.range.start);}if(_i317&&!o.has(_i317)){n=lP(_i317,e)||n;n=dP(_i317,e)||n;o.add(_i317);}}}catch(err){_didIteratorError391=true;_iteratorError391=err;}finally{try{if(!_iteratorNormalCompletion391&&_iterator391["return"]!=null){_iterator391["return"]();}}finally{if(_didIteratorError391){throw _iteratorError391;}}}return n;}function lP(e,t){var i=false;var n=uP(e);if(n.length){i=true;var _iteratorNormalCompletion392=true;var _didIteratorError392=false;var _iteratorError392=undefined;try{for(var _iterator392=n[Symbol.iterator](),_step392;!(_iteratorNormalCompletion392=(_step392=_iterator392.next()).done);_iteratorNormalCompletion392=true){var _e346=_step392.value;XM("rowspan",_e346.rowspan,_e346.cell,t,1);}}catch(err){_didIteratorError392=true;_iteratorError392=err;}finally{try{if(!_iteratorNormalCompletion392&&_iterator392["return"]!=null){_iterator392["return"]();}}finally{if(_didIteratorError392){throw _iteratorError392;}}}}return i;}function dP(e,t){var i=false;var n=hP(e);var o=n[0];var s=Object.values(n).every(function(e){return e===o;});if(!s){var _o107=Object.values(n).reduce(function(e,t){return t>e?t:e;},0);for(var _i318=0,_Object$entries3=Object.entries(n);_i318<_Object$entries3.length;_i318++){var _Object$entries3$_i=_slicedToArray(_Object$entries3[_i318],2),_s74=_Object$entries3$_i[0],_r49=_Object$entries3$_i[1];var _n188=_o107-_r49;if(_n188){for(var _i319=0;_i319<_n188;_i319++){KM(t,t.createPositionAt(e.getChild(_s74),"end"));}i=true;}}}return i;}function uP(e){var t=parseInt(e.getAttribute("headingRows")||0);var i=e.childCount;var n=[];var _iteratorNormalCompletion393=true;var _didIteratorError393=false;var _iteratorError393=undefined;try{for(var _iterator393=new sE(e)[Symbol.iterator](),_step393;!(_iteratorNormalCompletion393=(_step393=_iterator393.next()).done);_iteratorNormalCompletion393=true){var _ref81=_step393.value;var _o108=_ref81.row,_s75=_ref81.rowspan,_r50=_ref81.cell;if(_s75<2){continue;}var _e347=_o108<t;var _a30=_e347?t:i;if(_o108+_s75>_a30){var _e348=_a30-_o108;n.push({cell:_r50,rowspan:_e348});}}}catch(err){_didIteratorError393=true;_iteratorError393=err;}finally{try{if(!_iteratorNormalCompletion393&&_iterator393["return"]!=null){_iterator393["return"]();}}finally{if(_didIteratorError393){throw _iteratorError393;}}}return n;}function hP(e){var t={};var _iteratorNormalCompletion394=true;var _didIteratorError394=false;var _iteratorError394=undefined;try{for(var _iterator394=new sE(e,{includeSpanned:true})[Symbol.iterator](),_step394;!(_iteratorNormalCompletion394=(_step394=_iterator394.next()).done);_iteratorNormalCompletion394=true){var _ref83=_step394.value;var _i320=_ref83.row;if(!t[_i320]){t[_i320]=0;}t[_i320]+=1;}}catch(err){_didIteratorError394=true;_iteratorError394=err;}finally{try{if(!_iteratorNormalCompletion394&&_iterator394["return"]!=null){_iterator394["return"]();}}finally{if(_didIteratorError394){throw _iteratorError394;}}}return t;}function fP(e){var t=e.type==="attribute";var i=e.attributeKey;return t&&(i==="headingRows"||i==="colspan"||i==="rowspan");}function mP(e){e.document.registerPostFixer(function(t){return gP(t,e);});}function gP(e,t){var i=t.document.differ.getChanges();var n=false;var _iteratorNormalCompletion395=true;var _didIteratorError395=false;var _iteratorError395=undefined;try{for(var _iterator395=i[Symbol.iterator](),_step395;!(_iteratorNormalCompletion395=(_step395=_iterator395.next()).done);_iteratorNormalCompletion395=true){var _t288=_step395.value;if(_t288.type=="insert"&&_t288.name=="table"){n=pP(_t288.position.nodeAfter,e)||n;}if(_t288.type=="insert"&&_t288.name=="tableRow"){n=bP(_t288.position.nodeAfter,e)||n;}if(_t288.type=="insert"&&_t288.name=="tableCell"){n=wP(_t288.position.nodeAfter,e)||n;}if(_P(_t288)){n=wP(_t288.position.parent,e)||n;}}}catch(err){_didIteratorError395=true;_iteratorError395=err;}finally{try{if(!_iteratorNormalCompletion395&&_iterator395["return"]!=null){_iterator395["return"]();}}finally{if(_didIteratorError395){throw _iteratorError395;}}}return n;}function pP(e,t){var i=false;var _iteratorNormalCompletion396=true;var _didIteratorError396=false;var _iteratorError396=undefined;try{for(var _iterator396=e.getChildren()[Symbol.iterator](),_step396;!(_iteratorNormalCompletion396=(_step396=_iterator396.next()).done);_iteratorNormalCompletion396=true){var _n189=_step396.value;i=bP(_n189,t)||i;}}catch(err){_didIteratorError396=true;_iteratorError396=err;}finally{try{if(!_iteratorNormalCompletion396&&_iterator396["return"]!=null){_iterator396["return"]();}}finally{if(_didIteratorError396){throw _iteratorError396;}}}return i;}function bP(e,t){var i=false;var _iteratorNormalCompletion397=true;var _didIteratorError397=false;var _iteratorError397=undefined;try{for(var _iterator397=e.getChildren()[Symbol.iterator](),_step397;!(_iteratorNormalCompletion397=(_step397=_iterator397.next()).done);_iteratorNormalCompletion397=true){var _n190=_step397.value;i=wP(_n190,t)||i;}}catch(err){_didIteratorError397=true;_iteratorError397=err;}finally{try{if(!_iteratorNormalCompletion397&&_iterator397["return"]!=null){_iterator397["return"]();}}finally{if(_didIteratorError397){throw _iteratorError397;}}}return i;}function wP(e,t){if(e.childCount==0){t.insertElement("paragraph",e);return true;}var i=Array.from(e.getChildren()).filter(function(e){return e.is("text");});var _iteratorNormalCompletion398=true;var _didIteratorError398=false;var _iteratorError398=undefined;try{for(var _iterator398=i[Symbol.iterator](),_step398;!(_iteratorNormalCompletion398=(_step398=_iterator398.next()).done);_iteratorNormalCompletion398=true){var _e349=_step398.value;t.wrap(t.createRangeOn(_e349),"paragraph");}}catch(err){_didIteratorError398=true;_iteratorError398=err;}finally{try{if(!_iteratorNormalCompletion398&&_iterator398["return"]!=null){_iterator398["return"]();}}finally{if(_didIteratorError398){throw _iteratorError398;}}}return!!i.length;}function _P(e){if(!e.position||!e.position.parent.is("tableCell")){return false;}return e.type=="insert"&&e.name=="$text"||e.type=="remove";}function vP(e){e.document.registerPostFixer(function(){return kP(e);});}function kP(e){var t=e.document.differ;var i=new Set();var _iteratorNormalCompletion399=true;var _didIteratorError399=false;var _iteratorError399=undefined;try{for(var _iterator399=t.getChanges()[Symbol.iterator](),_step399;!(_iteratorNormalCompletion399=(_step399=_iterator399.next()).done);_iteratorNormalCompletion399=true){var _e351=_step399.value;var _t289=_e351.type=="insert"||_e351.type=="remove"?_e351.position.parent:_e351.range.start.parent;if(_t289.is("tableCell")&&yP(_t289,_e351.type)){i.add(_t289);}}}catch(err){_didIteratorError399=true;_iteratorError399=err;}finally{try{if(!_iteratorNormalCompletion399&&_iterator399["return"]!=null){_iterator399["return"]();}}finally{if(_didIteratorError399){throw _iteratorError399;}}}if(i.size){var _iteratorNormalCompletion400=true;var _didIteratorError400=false;var _iteratorError400=undefined;try{for(var _iterator400=i.values()[Symbol.iterator](),_step400;!(_iteratorNormalCompletion400=(_step400=_iterator400.next()).done);_iteratorNormalCompletion400=true){var _e350=_step400.value;t.refreshItem(_e350);}}catch(err){_didIteratorError400=true;_iteratorError400=err;}finally{try{if(!_iteratorNormalCompletion400&&_iterator400["return"]!=null){_iterator400["return"]();}}finally{if(_didIteratorError400){throw _iteratorError400;}}}return true;}return false;}function yP(e,t){var i=Array.from(e.getChildren()).some(function(e){return e.is("paragraph");});if(!i){return false;}if(t=="attribute"){var _t290=Array.from(e.getChild(0).getAttributeKeys()).length;return e.childCount===1&&_t290<2;}return e.childCount<=(t=="insert"?2:1);}var xP=i(94);var AP=/*#__PURE__*/function(_bw69){_inherits(AP,_bw69);function AP(){_classCallCheck(this,AP);return _possibleConstructorReturn(this,_getPrototypeOf(AP).apply(this,arguments));}_createClass(AP,[{key:"init",value:function init(){var _this255=this;var e=this.editor;var t=e.model;var i=t.schema;var n=e.conversion;i.register("table",{allowWhere:"$block",allowAttributes:["headingRows","headingColumns"],isLimit:true,isObject:true,isBlock:true});i.register("tableRow",{allowIn:"table",isLimit:true});i.register("tableCell",{allowIn:"tableRow",allowAttributes:["colspan","rowspan"],isObject:true});i.extend("$block",{allowIn:"tableCell"});i.addChildCheck(function(e,t){if(t.name=="table"&&Array.from(e.getNames()).includes("table")){return false;}});n["for"]("upcast").add(tE());n["for"]("editingDowncast").add(gE({asWidget:true}));n["for"]("dataDowncast").add(gE());n["for"]("upcast").elementToElement({model:"tableRow",view:"tr"});n["for"]("editingDowncast").add(pE({asWidget:true}));n["for"]("dataDowncast").add(pE());n["for"]("downcast").add(vE());n["for"]("upcast").add(iE("td"));n["for"]("upcast").add(iE("th"));n["for"]("editingDowncast").add(bE({asWidget:true}));n["for"]("dataDowncast").add(bE());n.attributeToAttribute({model:"colspan",view:"colspan"});n.attributeToAttribute({model:"rowspan",view:"rowspan"});n["for"]("editingDowncast").add(_E({asWidget:true}));n["for"]("dataDowncast").add(_E());n["for"]("editingDowncast").add(wE({asWidget:true}));n["for"]("dataDowncast").add(wE());e.commands.add("insertTable",new RE(e));e.commands.add("insertTableRowAbove",new zE(e,{order:"above"}));e.commands.add("insertTableRowBelow",new zE(e,{order:"below"}));e.commands.add("insertTableColumnLeft",new DE(e,{order:"left"}));e.commands.add("insertTableColumnRight",new DE(e,{order:"right"}));e.commands.add("removeTableRow",new $E(e));e.commands.add("removeTableColumn",new JE(e));e.commands.add("splitTableCellVertically",new jE(e,{direction:"vertically"}));e.commands.add("splitTableCellHorizontally",new jE(e,{direction:"horizontally"}));e.commands.add("mergeTableCellRight",new BE(e,{direction:"right"}));e.commands.add("mergeTableCellLeft",new BE(e,{direction:"left"}));e.commands.add("mergeTableCellDown",new BE(e,{direction:"down"}));e.commands.add("mergeTableCellUp",new BE(e,{direction:"up"}));e.commands.add("setTableColumnHeader",new iP(e));e.commands.add("setTableRowHeader",new ZE(e));aP(t);vP(t);mP(t);this.editor.keystrokes.set("Tab",function(){return _this255._handleTabOnSelectedTable.apply(_this255,arguments);},{priority:"low"});this.editor.keystrokes.set("Tab",this._getTabHandler(true),{priority:"low"});this.editor.keystrokes.set("Shift+Tab",this._getTabHandler(false),{priority:"low"});}},{key:"_handleTabOnSelectedTable",value:function _handleTabOnSelectedTable(e,t){var i=this.editor;var n=i.model.document.selection;if(!n.isCollapsed&&n.rangeCount===1&&n.getFirstRange().isFlat){var _e352=n.getSelectedElement();if(!_e352||!_e352.is("table")){return;}t();i.model.change(function(t){t.setSelection(t.createRangeIn(_e352.getChild(0).getChild(0)));});}}},{key:"_getTabHandler",value:function _getTabHandler(e){var t=this.editor;return function(i,n){var o=t.model.document.selection;var s=uE(o)[0];if(!s){return;}n();var r=s.parent;var a=r.parent;var c=a.getChildIndex(r);var l=r.getChildIndex(s);var d=l===0;if(!e&&d&&c===0){return;}var u=l===r.childCount-1;var h=c===a.childCount-1;if(e&&h&&u){t.execute("insertTableRowBelow");if(c===a.childCount-1){return;}}var f;if(e&&u){var _e353=a.getChild(c+1);f=_e353.getChild(0);}else if(!e&&d){var _e354=a.getChild(c-1);f=_e354.getChild(_e354.childCount-1);}else{f=r.getChild(l+(e?1:-1));}t.model.change(function(e){e.setSelection(e.createRangeIn(f));});};}}],[{key:"pluginName",get:function get(){return"TableEditing";}},{key:"requires",get:function get(){return[nP];}}]);return AP;}(bw);var CP=i(96);var TP=/*#__PURE__*/function(_db29){_inherits(TP,_db29);function TP(e){var _this256;_classCallCheck(this,TP);_this256=_possibleConstructorReturn(this,_getPrototypeOf(TP).call(this,e));var t=_this256.bindTemplate;_this256.items=_this256.createCollection();_this256.set("rows",0);_this256.set("columns",0);_this256.bind("label").to(_assertThisInitialized(_this256),"columns",_assertThisInitialized(_this256),"rows",function(e,t){return"".concat(t," \xD7 ").concat(e);});_this256.setTemplate({tag:"div",attributes:{"class":["ck"]},children:[{tag:"div",attributes:{"class":["ck-insert-table-dropdown__grid"]},children:_this256.items},{tag:"div",attributes:{"class":["ck-insert-table-dropdown__label"]},children:[{text:t.to("label")}]}],on:{mousedown:t.to(function(e){e.preventDefault();}),click:t.to(function(){_this256.fire("execute");})}});var _loop12=function _loop12(_e355){var t=new MP();t.on("over",function(){var t=Math.floor(_e355/10);var i=_e355%10;_this256.set("rows",t+1);_this256.set("columns",i+1);});_this256.items.add(t);};for(var _e355=0;_e355<100;_e355++){_loop12(_e355);}_this256.on("change:columns",function(){_this256._highlightGridBoxes();});_this256.on("change:rows",function(){_this256._highlightGridBoxes();});return _this256;}_createClass(TP,[{key:"focus",value:function focus(){}},{key:"focusLast",value:function focusLast(){}},{key:"_highlightGridBoxes",value:function _highlightGridBoxes(){var e=this.rows;var t=this.columns;this.items.map(function(i,n){var o=Math.floor(n/10);var s=n%10;var r=o<e&&s<t;i.set("isOn",r);});}}]);return TP;}(db);var MP=/*#__PURE__*/function(_db30){_inherits(MP,_db30);function MP(e){var _this257;_classCallCheck(this,MP);_this257=_possibleConstructorReturn(this,_getPrototypeOf(MP).call(this,e));var t=_this257.bindTemplate;_this257.set("isOn",false);_this257.setTemplate({tag:"div",attributes:{"class":["ck-insert-table-dropdown-grid-box",t["if"]("isOn","ck-on")]},on:{mouseover:t.to("over")}});return _this257;}return MP;}(db);var EP='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 6v3h4V6H3zm0 4v3h4v-3H3zm0 4v3h4v-3H3zm5 3h4v-3H8v3zm5 0h4v-3h-4v3zm4-4v-3h-4v3h4zm0-4V6h-4v3h4zm1.5 8a1.5 1.5 0 0 1-1.5 1.5H3A1.5 1.5 0 0 1 1.5 17V4c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13zM12 13v-3H8v3h4zm0-4V6H8v3h4z"/></svg>';var PP='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M18 7v1H2V7h16zm0 5v1H2v-1h16z" opacity=".6"/><path d="M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z"/></svg>';var SP='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v16h-1V2z" opacity=".6"/><path d="M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z"/></svg>';var IP='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z" opacity=".6"/><path d="M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z" opacity=".6"/><path d="M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z"/></svg>';var NP=/*#__PURE__*/function(_bw70){_inherits(NP,_bw70);function NP(){_classCallCheck(this,NP);return _possibleConstructorReturn(this,_getPrototypeOf(NP).apply(this,arguments));}_createClass(NP,[{key:"init",value:function init(){var _this258=this;var e=this.editor;var t=this.editor.t;var i=e.locale.contentLanguageDirection;var n=i==="ltr";e.ui.componentFactory.add("insertTable",function(i){var n=e.commands.get("insertTable");var o=Qb(i);o.bind("isEnabled").to(n);o.buttonView.set({icon:EP,label:t("bd"),tooltip:true});var s;o.on("change:isOpen",function(){if(s){return;}s=new TP(i);o.panelView.children.add(s);s.delegate("execute").to(o);o.buttonView.on("open",function(){s.rows=0;s.columns=0;});o.on("execute",function(){e.execute("insertTable",{rows:s.rows,columns:s.columns});e.editing.view.focus();});});return o;});e.ui.componentFactory.add("tableColumn",function(e){var i=[{type:"switchbutton",model:{commandName:"setTableColumnHeader",label:t("be"),bindIsOn:true}},{type:"separator"},{type:"button",model:{commandName:n?"insertTableColumnLeft":"insertTableColumnRight",label:t("bf")}},{type:"button",model:{commandName:n?"insertTableColumnRight":"insertTableColumnLeft",label:t("bg")}},{type:"button",model:{commandName:"removeTableColumn",label:t("bh")}}];return _this258._prepareDropdown(t("bi"),PP,i,e);});e.ui.componentFactory.add("tableRow",function(e){var i=[{type:"switchbutton",model:{commandName:"setTableRowHeader",label:t("bj"),bindIsOn:true}},{type:"separator"},{type:"button",model:{commandName:"insertTableRowBelow",label:t("bk")}},{type:"button",model:{commandName:"insertTableRowAbove",label:t("bl")}},{type:"button",model:{commandName:"removeTableRow",label:t("bm")}}];return _this258._prepareDropdown(t("bn"),SP,i,e);});e.ui.componentFactory.add("mergeTableCells",function(e){var i=[{type:"button",model:{commandName:"mergeTableCellUp",label:t("bo")}},{type:"button",model:{commandName:n?"mergeTableCellRight":"mergeTableCellLeft",label:t("bp")}},{type:"button",model:{commandName:"mergeTableCellDown",label:t("bq")}},{type:"button",model:{commandName:n?"mergeTableCellLeft":"mergeTableCellRight",label:t("br")}},{type:"separator"},{type:"button",model:{commandName:"splitTableCellVertically",label:t("bs")}},{type:"button",model:{commandName:"splitTableCellHorizontally",label:t("bt")}}];return _this258._prepareDropdown(t("bu"),IP,i,e);});}},{key:"_prepareDropdown",value:function _prepareDropdown(e,t,i,n){var o=this.editor;var s=Qb(n);var r=[];var a=new yr();var _iteratorNormalCompletion401=true;var _didIteratorError401=false;var _iteratorError401=undefined;try{for(var _iterator401=i[Symbol.iterator](),_step401;!(_iteratorNormalCompletion401=(_step401=_iterator401.next()).done);_iteratorNormalCompletion401=true){var _e356=_step401.value;OP(_e356,o,r,a);}}catch(err){_didIteratorError401=true;_iteratorError401=err;}finally{try{if(!_iteratorNormalCompletion401&&_iterator401["return"]!=null){_iterator401["return"]();}}finally{if(_didIteratorError401){throw _iteratorError401;}}}ew(s,a,o.ui.componentFactory);s.buttonView.set({label:e,icon:t,tooltip:true});s.bind("isEnabled").toMany(r,"isEnabled",function(){for(var _len23=arguments.length,e=new Array(_len23),_key23=0;_key23<_len23;_key23++){e[_key23]=arguments[_key23];}return e.some(function(e){return e;});});this.listenTo(s,"execute",function(e){o.execute(e.source.commandName);o.editing.view.focus();});return s;}}]);return NP;}(bw);function OP(e,t,i,n){var o=e.model=new N_(e.model);var _e$model=e.model,s=_e$model.commandName,r=_e$model.bindIsOn;if(e.type==="button"||e.type==="switchbutton"){var _e357=t.commands.get(s);i.push(_e357);o.set({commandName:s});o.bind("isEnabled").to(_e357);if(r){o.bind("isOn").to(_e357,"value");}}o.set({withText:true});n.add(e);}var RP=/*#__PURE__*/function(_Ju8){_inherits(RP,_Ju8);function RP(e){var _this259;_classCallCheck(this,RP);_this259=_possibleConstructorReturn(this,_getPrototypeOf(RP).call(this,e));_this259.domEventType=["mousemove","mouseup","mouseleave"];return _this259;}_createClass(RP,[{key:"onDomEvent",value:function onDomEvent(e){this.fire(e.type,e);}}]);return RP;}(Ju);function LP(e,t,i){var n=Array.from(e);var o=n[0];var s=n[n.length-1];var _t$getCellLocation=t.getCellLocation(o),r=_t$getCellLocation.row,a=_t$getCellLocation.column;var c=zP(n,a,i,t);var _t$getCellLocation2=t.getCellLocation(s),l=_t$getCellLocation2.row,d=_t$getCellLocation2.column;var u=d-a+1;var h=l-r+1;jP(c,u,h,i,t);var f=JM("table",o);BP(c,f,r,a,i);return c;}function zP(e,t,i,n){var o=i.createElement("table");var s=new Map();var r=new Map();var _iteratorNormalCompletion402=true;var _didIteratorError402=false;var _iteratorError402=undefined;try{for(var _iterator402=e[Symbol.iterator](),_step402;!(_iteratorNormalCompletion402=(_step402=_iterator402.next()).done);_iteratorNormalCompletion402=true){var _t291=_step402.value;var _e358=JM("tableRow",_t291);if(!s.has(_e358)){var _t292=_e358._clone();i.append(_t292,o);s.set(_e358,_t292);}var _a31=_t291._clone(true);var _n$getCellLocation=n.getCellLocation(_t291),_c18=_n$getCellLocation.column;r.set(_a31,_c18);i.append(_a31,s.get(_e358));}}catch(err){_didIteratorError402=true;_iteratorError402=err;}finally{try{if(!_iteratorNormalCompletion402&&_iterator402["return"]!=null){_iterator402["return"]();}}finally{if(_didIteratorError402){throw _iteratorError402;}}}DP(o,t,r,i,n);return o;}function DP(e,t,i,n,o){var _iteratorNormalCompletion403=true;var _didIteratorError403=false;var _iteratorError403=undefined;try{for(var _iterator403=e.getChildren()[Symbol.iterator](),_step403;!(_iteratorNormalCompletion403=(_step403=_iterator403.next()).done);_iteratorNormalCompletion403=true){var _s76=_step403.value;for(var _i321=0,_Array$from8=Array.from(_s76.getChildren());_i321<_Array$from8.length;_i321++){var _e359=_Array$from8[_i321];var _o$getCellLocation=o.getCellLocation(_e359),_s77=_o$getCellLocation.column;var _r51=i.get(_e359);var _a32=_r51-t;if(_s77!==_a32){for(var _t293=0;_t293<_a32-_s77;_t293++){var _t294=n.createElement("tableCell");n.insert(_t294,n.createPositionBefore(_e359));var _i322=n.createElement("paragraph");n.insert(_i322,_t294,0);n.insertText("",_i322,0);}}}}}catch(err){_didIteratorError403=true;_iteratorError403=err;}finally{try{if(!_iteratorNormalCompletion403&&_iterator403["return"]!=null){_iterator403["return"]();}}finally{if(_didIteratorError403){throw _iteratorError403;}}}}function jP(e,t,i,n,o){var _iteratorNormalCompletion404=true;var _didIteratorError404=false;var _iteratorError404=undefined;try{for(var _iterator404=e.getChildren()[Symbol.iterator](),_step404;!(_iteratorNormalCompletion404=(_step404=_iterator404.next()).done);_iteratorNormalCompletion404=true){var _s78=_step404.value;var _iteratorNormalCompletion405=true;var _didIteratorError405=false;var _iteratorError405=undefined;try{for(var _iterator405=_s78.getChildren()[Symbol.iterator](),_step405;!(_iteratorNormalCompletion405=(_step405=_iterator405.next()).done);_iteratorNormalCompletion405=true){var _e360=_step405.value;var _s79=parseInt(_e360.getAttribute("colspan")||1);var _r52=parseInt(_e360.getAttribute("rowspan")||1);var _o$getCellLocation2=o.getCellLocation(_e360),_a33=_o$getCellLocation2.row,_c19=_o$getCellLocation2.column;if(_c19+_s79>t){var _i323=t-_c19;if(_i323>1){n.setAttribute("colspan",_i323,_e360);}else{n.removeAttribute("colspan",_e360);}}if(_a33+_r52>i){var _t295=i-_a33;if(_t295>1){n.setAttribute("rowspan",_t295,_e360);}else{n.removeAttribute("rowspan",_e360);}}}}catch(err){_didIteratorError405=true;_iteratorError405=err;}finally{try{if(!_iteratorNormalCompletion405&&_iterator405["return"]!=null){_iterator405["return"]();}}finally{if(_didIteratorError405){throw _iteratorError405;}}}}}catch(err){_didIteratorError404=true;_iteratorError404=err;}finally{try{if(!_iteratorNormalCompletion404&&_iterator404["return"]!=null){_iterator404["return"]();}}finally{if(_didIteratorError404){throw _iteratorError404;}}}}function BP(e,t,i,n,o){var s=parseInt(t.getAttribute("headingRows")||0);if(s>0){var _t296=s-i;o.setAttribute("headingRows",_t296,e);}var r=parseInt(t.getAttribute("headingColumns")||0);if(r>0){var _t297=r-n;o.setAttribute("headingColumns",_t297,e);}}var VP=i(98);var FP=/*#__PURE__*/function(_bw71){_inherits(FP,_bw71);function FP(){_classCallCheck(this,FP);return _possibleConstructorReturn(this,_getPrototypeOf(FP).apply(this,arguments));}_createClass(FP,[{key:"init",value:function init(){var _this260=this;var e=this.editor;var t=e.model;this.listenTo(t,"deleteContent",function(e,t){return _this260._handleDeleteContent(e,t);},{priority:"high"});e.editing.view.addObserver(RP);this._defineSelectionConverter();this._enableShiftClickSelection();this._enableMouseDragSelection();}},{key:"getSelectedTableCells",value:function getSelectedTableCells(){var e=this.editor.model.document.selection;var t=dE(e);if(t.length==0){return null;}return t;}},{key:"getSelectionAsFragment",value:function getSelectionAsFragment(){var _this261=this;var e=this.getSelectedTableCells();if(!e){return null;}return this.editor.model.change(function(t){var i=t.createDocumentFragment();var n=LP(e,_this261.editor.plugins.get("TableUtils"),t);t.insert(n,i,0);return i;});}},{key:"_defineSelectionConverter",value:function _defineSelectionConverter(){var _this262=this;var e=this.editor;var t=new Set();e.conversion["for"]("editingDowncast").add(function(e){return e.on("selection",function(e,n,o){var s=o.writer;i(s);var r=_this262.getSelectedTableCells();if(!r){return;}var _iteratorNormalCompletion406=true;var _didIteratorError406=false;var _iteratorError406=undefined;try{for(var _iterator406=r[Symbol.iterator](),_step406;!(_iteratorNormalCompletion406=(_step406=_iterator406.next()).done);_iteratorNormalCompletion406=true){var _e361=_step406.value;var _i324=o.mapper.toViewElement(_e361);s.addClass("ck-editor__editable_selected",_i324);t.add(_i324);}}catch(err){_didIteratorError406=true;_iteratorError406=err;}finally{try{if(!_iteratorNormalCompletion406&&_iterator406["return"]!=null){_iterator406["return"]();}}finally{if(_didIteratorError406){throw _iteratorError406;}}}var a=o.mapper.toViewElement(r[r.length-1]);s.setSelection(a,0);},{priority:"lowest"});});function i(e){var _iteratorNormalCompletion407=true;var _didIteratorError407=false;var _iteratorError407=undefined;try{for(var _iterator407=t[Symbol.iterator](),_step407;!(_iteratorNormalCompletion407=(_step407=_iterator407.next()).done);_iteratorNormalCompletion407=true){var _i325=_step407.value;e.removeClass("ck-editor__editable_selected",_i325);}}catch(err){_didIteratorError407=true;_iteratorError407=err;}finally{try{if(!_iteratorNormalCompletion407&&_iterator407["return"]!=null){_iterator407["return"]();}}finally{if(_didIteratorError407){throw _iteratorError407;}}}t.clear();}}},{key:"_enableShiftClickSelection",value:function _enableShiftClickSelection(){var _this263=this;var e=this.editor;var t=false;this.listenTo(e.editing.view.document,"mousedown",function(i,n){if(!_this263.isEnabled){return;}if(!n.domEvent.shiftKey){return;}var o=uE(e.model.document.selection)[0];if(!o){return;}var s=_this263._getModelTableCellFromDomEvent(n);if(s&&WP(o,s)){t=true;_this263._setCellSelection(o,s);n.preventDefault();}});this.listenTo(e.editing.view.document,"mouseup",function(){t=false;});this.listenTo(e.editing.view.document,"selectionChange",function(e){if(t){e.stop();}},{priority:"highest"});}},{key:"_enableMouseDragSelection",value:function _enableMouseDragSelection(){var _this264=this;var e=this.editor;var t,i;var n=false;var o=false;this.listenTo(e.editing.view.document,"mousedown",function(e,i){if(!_this264.isEnabled){return;}if(i.domEvent.shiftKey||i.domEvent.ctrlKey||i.domEvent.altKey){return;}t=_this264._getModelTableCellFromDomEvent(i);});this.listenTo(e.editing.view.document,"mousemove",function(e,s){if(!s.domEvent.buttons){return;}if(!t){return;}var r=_this264._getModelTableCellFromDomEvent(s);if(r&&WP(t,r)){i=r;if(!n&&i!=t){n=true;}}if(!n){return;}o=true;_this264._setCellSelection(t,i);s.preventDefault();});this.listenTo(e.editing.view.document,"mouseup",function(){n=false;o=false;t=null;i=null;});this.listenTo(e.editing.view.document,"selectionChange",function(e){if(o){e.stop();}},{priority:"highest"});}},{key:"_handleDeleteContent",value:function _handleDeleteContent(e,t){var _t298=_slicedToArray(t,2),i=_t298[0],n=_t298[1];var o=this.editor.model;var s=!n||n.direction=="backward";var r=dE(i);if(!r.length){return;}e.stop();o.change(function(e){var t=r[s?r.length-1:0];o.change(function(e){var _iteratorNormalCompletion408=true;var _didIteratorError408=false;var _iteratorError408=undefined;try{for(var _iterator408=r[Symbol.iterator](),_step408;!(_iteratorNormalCompletion408=(_step408=_iterator408.next()).done);_iteratorNormalCompletion408=true){var _t299=_step408.value;o.deleteContent(e.createSelection(_t299,"in"));}}catch(err){_didIteratorError408=true;_iteratorError408=err;}finally{try{if(!_iteratorNormalCompletion408&&_iterator408["return"]!=null){_iterator408["return"]();}}finally{if(_didIteratorError408){throw _iteratorError408;}}}});var n=o.schema.getNearestSelectionRange(e.createPositionAt(t,0));if(n){if(i.is("documentSelection")){e.setSelection(n);}else{i.setTo(n);}}});}},{key:"_setCellSelection",value:function _setCellSelection(e,t){var i=this._getCellsToSelect(e,t);this.editor.model.change(function(e){e.setSelection(i.cells.map(function(t){return e.createRangeOn(t);}),{backward:i.backward});});}},{key:"_getModelTableCellFromDomEvent",value:function _getModelTableCellFromDomEvent(e){var t=e.target;var i=this.editor.editing.view.createPositionAt(t,0);var n=this.editor.editing.mapper.toModelPosition(i);var o=n.parent;if(!o){return;}if(o.is("tableCell")){return o;}return JM("tableCell",o);}},{key:"_getCellsToSelect",value:function _getCellsToSelect(e,t){var i=this.editor.plugins.get("TableUtils");var n=i.getCellLocation(e);var o=i.getCellLocation(t);var s=Math.min(n.row,o.row);var r=Math.max(n.row,o.row);var a=Math.min(n.column,o.column);var c=Math.max(n.column,o.column);var l=[];var _iteratorNormalCompletion409=true;var _didIteratorError409=false;var _iteratorError409=undefined;try{for(var _iterator409=new sE(JM("table",e),{startRow:s,endRow:r})[Symbol.iterator](),_step409;!(_iteratorNormalCompletion409=(_step409=_iterator409.next()).done);_iteratorNormalCompletion409=true){var _t300=_step409.value;if(_t300.column>=a&&_t300.column<=c){l.push(_t300.cell);}}}catch(err){_didIteratorError409=true;_iteratorError409=err;}finally{try{if(!_iteratorNormalCompletion409&&_iterator409["return"]!=null){_iterator409["return"]();}}finally{if(_didIteratorError409){throw _iteratorError409;}}}if(HP(n,o)){return{cells:l.reverse(),backward:true};}return{cells:l,backward:false};}}],[{key:"pluginName",get:function get(){return"TableSelection";}},{key:"requires",get:function get(){return[nP];}}]);return FP;}(bw);function HP(e,t){if(e.row>t.row){return true;}if(e.row==t.row&&e.column>t.column){return true;}return false;}function WP(e,t){return e.parent.parent==t.parent.parent;}var UP=/*#__PURE__*/function(_bw72){_inherits(UP,_bw72);function UP(){_classCallCheck(this,UP);return _possibleConstructorReturn(this,_getPrototypeOf(UP).apply(this,arguments));}_createClass(UP,[{key:"init",value:function init(){var _this265=this;var e=this.editor;var t=e.editing.view.document;this.listenTo(t,"copy",function(e,t){return _this265._onCopyCut(e,t);});this.listenTo(t,"cut",function(e,t){return _this265._onCopyCut(e,t);});}},{key:"_onCopyCut",value:function _onCopyCut(e,t){var i=this.editor.plugins.get("TableSelection");if(!i.getSelectedTableCells()){return;}if(e.name=="cut"&&this.editor.isReadOnly){return;}t.preventDefault();e.stop();var n=this.editor.data;var o=this.editor.editing.view.document;var s=n.toView(i.getSelectionAsFragment());o.fire("clipboardOutput",{dataTransfer:t.dataTransfer,content:s,method:e.name});}}],[{key:"pluginName",get:function get(){return"TableClipboard";}},{key:"requires",get:function get(){return[FP];}}]);return UP;}(bw);var $P=i(100);var qP=/*#__PURE__*/function(_bw73){_inherits(qP,_bw73);function qP(){_classCallCheck(this,qP);return _possibleConstructorReturn(this,_getPrototypeOf(qP).apply(this,arguments));}_createClass(qP,null,[{key:"requires",get:function get(){return[AP,NP,FP,UP,nk];}},{key:"pluginName",get:function get(){return"Table";}}]);return qP;}(bw);var YP=/*#__PURE__*/function(_bw74){_inherits(YP,_bw74);function YP(){_classCallCheck(this,YP);return _possibleConstructorReturn(this,_getPrototypeOf(YP).apply(this,arguments));}_createClass(YP,[{key:"afterInit",value:function afterInit(){var e=this.editor;var t=e.t;var i=e.plugins.get(wy);var n=e.config.get("table.contentToolbar");var o=e.config.get("table.tableToolbar");if(n){i.register("tableContent",{ariaLabel:t("c"),items:n,getRelatedElement:lE});}if(o){i.register("table",{ariaLabel:t("c"),items:o,getRelatedElement:cE});}}}],[{key:"requires",get:function get(){return[wy];}},{key:"pluginName",get:function get(){return"TableToolbar";}}]);return YP;}(bw);var GP="underline";var JP=/*#__PURE__*/function(_bw75){_inherits(JP,_bw75);function JP(){_classCallCheck(this,JP);return _possibleConstructorReturn(this,_getPrototypeOf(JP).apply(this,arguments));}_createClass(JP,[{key:"init",value:function init(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:GP});e.model.schema.setAttributeProperties(GP,{isFormatting:true,copyOnEnter:true});e.conversion.attributeToElement({model:GP,view:"u",upcastAlso:{styles:{"text-decoration":"underline"}}});e.commands.add(GP,new Zw(e,GP));e.keystrokes.set("CTRL+U","underline");}}],[{key:"pluginName",get:function get(){return"UnderlineEditing";}}]);return JP;}(bw);var XP='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M3 18v-1.5h14V18zm2.2-8V3.6c0-.4.4-.6.8-.6.3 0 .7.2.7.6v6.2c0 2 1.3 2.8 3.2 2.8 1.9 0 3.4-.9 3.4-2.9V3.6c0-.3.4-.5.8-.5.3 0 .7.2.7.5V10c0 2.7-2.2 4-4.9 4-2.6 0-4.7-1.2-4.7-4z"/></svg>';var KP="underline";var QP=/*#__PURE__*/function(_bw76){_inherits(QP,_bw76);function QP(){_classCallCheck(this,QP);return _possibleConstructorReturn(this,_getPrototypeOf(QP).apply(this,arguments));}_createClass(QP,[{key:"init",value:function init(){var _this266=this;var e=this.editor;var t=e.t;e.ui.componentFactory.add(KP,function(i){var n=e.commands.get(KP);var o=new Vb(i);o.set({label:t("ac"),icon:XP,keystroke:"CTRL+U",tooltip:true,isToggleable:true});o.bind("isOn","isEnabled").to(n,"value","isEnabled");_this266.listenTo(o,"execute",function(){e.execute(KP);e.editing.view.focus();});return o;});}}]);return QP;}(bw);var ZP=/*#__PURE__*/function(_bw77){_inherits(ZP,_bw77);function ZP(){_classCallCheck(this,ZP);return _possibleConstructorReturn(this,_getPrototypeOf(ZP).apply(this,arguments));}_createClass(ZP,null,[{key:"requires",get:function get(){return[JP,QP];}},{key:"pluginName",get:function get(){return"Underline";}}]);return ZP;}(bw);var eS=/*#__PURE__*/function(_bw78){_inherits(eS,_bw78);_createClass(eS,null,[{key:"pluginName",get:function get(){return"Autosave";}},{key:"requires",get:function get(){return[Oy];}}]);function eS(e){var _this267;_classCallCheck(this,eS);_this267=_possibleConstructorReturn(this,_getPrototypeOf(eS).call(this,e));var t=e.config.get("autosave")||{};var i=t.waitingTime||1e3;_this267.set("state","synchronized");_this267._debouncedSave=uh(_this267._save.bind(_assertThisInitialized(_this267)),i);_this267._lastDocumentVersion=e.model.document.version;_this267._domEmitter=Object.create(Ud);_this267._config=t;return _this267;}_createClass(eS,[{key:"init",value:function init(){var _this268=this;var e=this.editor;var t=e.model.document;var i=e.t;this._pendingActions=e.plugins.get(Oy);this.listenTo(t,"change:data",function(){if(!_this268._saveCallbacks.length){return;}if(_this268.state=="synchronized"){_this268._action=_this268._pendingActions.add(i("d"));_this268.state="waiting";_this268._debouncedSave();}else if(_this268.state=="waiting"){_this268._debouncedSave();}});this.listenTo(e,"destroy",function(){return _this268._flush();},{priority:"highest"});this._domEmitter.listenTo(window,"beforeunload",function(e,t){if(_this268._pendingActions.hasAny){t.returnValue=_this268._pendingActions.first.message;}});}},{key:"destroy",value:function destroy(){this._domEmitter.stopListening();_get(_getPrototypeOf(eS.prototype),"destroy",this).call(this);}},{key:"_flush",value:function _flush(){this._debouncedSave.flush();}},{key:"_save",value:function _save(){var _this269=this;var e=this.editor.model.document.version;if(e<this._lastDocumentVersion||this.editor.state==="initializing"){this._debouncedSave.cancel();return;}this._lastDocumentVersion=e;this.state="saving";Promise.resolve().then(function(){return Promise.all(_this269._saveCallbacks.map(function(e){return e(_this269.editor);}));})["catch"](function(e){_this269.state="error";_this269.state="saving";_this269._debouncedSave();throw e;}).then(function(){if(_this269.editor.model.document.version>_this269._lastDocumentVersion){_this269.state="waiting";_this269._debouncedSave();}else{_this269.state="synchronized";_this269._pendingActions.remove(_this269._action);_this269._action=null;}});}},{key:"_saveCallbacks",get:function get(){var e=[];if(this.adapter&&this.adapter.save){e.push(this.adapter.save);}if(this._config.save){e.push(this._config.save);}return e;}}]);return eS;}(bw);kr(eS,Jc);var tS="code";var iS=/*#__PURE__*/function(_bw79){_inherits(iS,_bw79);function iS(){_classCallCheck(this,iS);return _possibleConstructorReturn(this,_getPrototypeOf(iS).apply(this,arguments));}_createClass(iS,[{key:"init",value:function init(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:tS});e.model.schema.setAttributeProperties(tS,{isFormatting:true,copyOnEnter:true});e.conversion.attributeToElement({model:tS,view:"code",upcastAlso:{styles:{"word-wrap":"break-word"}}});e.commands.add(tS,new Zw(e,tS));}}],[{key:"pluginName",get:function get(){return"CodeEditing";}}]);return iS;}(bw);var nS='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.5 5.7l5.2 3.9v1.3l-5.6 4c-.1.2-.3.2-.5.2-.3-.1-.6-.7-.6-1l.3-.4 4.7-3.5L11.5 7l-.2-.2c-.1-.3-.1-.6 0-.8.2-.2.5-.4.8-.4a.8.8 0 0 1 .4.1zm-5.2 0L2 9.6v1.3l5.6 4c.1.2.3.2.5.2.3-.1.7-.7.6-1 0-.1 0-.3-.2-.4l-5-3.5L8.2 7l.2-.2c.1-.3.1-.6 0-.8-.2-.2-.5-.4-.8-.4a.8.8 0 0 0-.3.1z"/></svg>';var oS=i(12);var sS="code";var rS=/*#__PURE__*/function(_bw80){_inherits(rS,_bw80);function rS(){_classCallCheck(this,rS);return _possibleConstructorReturn(this,_getPrototypeOf(rS).apply(this,arguments));}_createClass(rS,[{key:"init",value:function init(){var _this270=this;var e=this.editor;var t=e.t;e.ui.componentFactory.add(sS,function(i){var n=e.commands.get(sS);var o=new Vb(i);o.set({label:t("ad"),icon:nS,tooltip:true,isToggleable:true});o.bind("isOn","isEnabled").to(n,"value","isEnabled");_this270.listenTo(o,"execute",function(){e.execute(sS);e.editing.view.focus();});return o;});}}]);return rS;}(bw);var aS=/*#__PURE__*/function(_bw81){_inherits(aS,_bw81);function aS(){_classCallCheck(this,aS);return _possibleConstructorReturn(this,_getPrototypeOf(aS).apply(this,arguments));}_createClass(aS,null,[{key:"requires",get:function get(){return[iS,rS];}},{key:"pluginName",get:function get(){return"Code";}}]);return aS;}(bw);function cS(e,t){var _iteratorNormalCompletion410,_didIteratorError410,_iteratorError410,_iterator410,_step410,_i326;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function cS$(_context37){while(1){switch(_context37.prev=_context37.next){case 0:_iteratorNormalCompletion410=true;_didIteratorError410=false;_iteratorError410=undefined;_context37.prev=3;_iterator410=t[Symbol.iterator]();case 5:if(_iteratorNormalCompletion410=(_step410=_iterator410.next()).done){_context37.next=13;break;}_i326=_step410.value;if(!(_i326&&e.getAttributeProperties(_i326[0]).copyOnEnter)){_context37.next=10;break;}_context37.next=10;return _i326;case 10:_iteratorNormalCompletion410=true;_context37.next=5;break;case 13:_context37.next=19;break;case 15:_context37.prev=15;_context37.t0=_context37["catch"](3);_didIteratorError410=true;_iteratorError410=_context37.t0;case 19:_context37.prev=19;_context37.prev=20;if(!_iteratorNormalCompletion410&&_iterator410["return"]!=null){_iterator410["return"]();}case 22:_context37.prev=22;if(!_didIteratorError410){_context37.next=25;break;}throw _iteratorError410;case 25:return _context37.finish(22);case 26:return _context37.finish(19);case 27:case"end":return _context37.stop();}}},_marked6,null,[[3,15,19,27],[20,,22,26]]);}var lS=/*#__PURE__*/function(_w30){_inherits(lS,_w30);function lS(){_classCallCheck(this,lS);return _possibleConstructorReturn(this,_getPrototypeOf(lS).apply(this,arguments));}_createClass(lS,[{key:"execute",value:function execute(){var _this271=this;var e=this.editor.model;var t=e.document;e.change(function(i){uS(e,i,t.selection);_this271.fire("afterExecute",{writer:i});});}},{key:"refresh",value:function refresh(){var e=this.editor.model;var t=e.document;this.isEnabled=dS(e.schema,t.selection);}}]);return lS;}(_w);function dS(e,t){if(t.rangeCount>1){return false;}var i=t.anchor;if(!i||!e.checkChild(i,"softBreak")){return false;}var n=t.getFirstRange();var o=n.start.parent;var s=n.end.parent;if((fS(o,e)||fS(s,e))&&o!==s){return false;}return true;}function uS(e,t,i){var n=i.isCollapsed;var o=i.getFirstRange();var s=o.start.parent;var r=o.end.parent;var a=s==r;if(n){var _n191=cS(e.schema,i.getAttributes());hS(e,t,o.end);t.removeSelectionAttribute(i.getAttributeKeys());t.setSelectionAttribute(_n191);}else{var _n192=!(o.start.isAtStart&&o.end.isAtEnd);e.deleteContent(i,{leaveUnmerged:_n192});if(a){hS(e,t,i.focus);}else{if(_n192){t.setSelection(r,0);}}}}function hS(e,t,i){var n=t.createElement("softBreak");e.insertContent(n,i);t.setSelection(n,"after");}function fS(e,t){if(e.is("rootElement")){return false;}return t.isLimit(e)||fS(e.parent,t);}var mS=/*#__PURE__*/function(_Yd6){_inherits(mS,_Yd6);function mS(e){var _this272;_classCallCheck(this,mS);_this272=_possibleConstructorReturn(this,_getPrototypeOf(mS).call(this,e));var t=_this272.document;t.on("keydown",function(e,i){if(_this272.isEnabled&&i.keyCode==Rl.enter){var _n193;t.once("enter",function(e){return _n193=e;},{priority:"highest"});t.fire("enter",new Gu(t,i.domEvent,{isSoft:i.shiftKey}));if(_n193&&_n193.stop.called){e.stop();}}});return _this272;}_createClass(mS,[{key:"observe",value:function observe(){}}]);return mS;}(Yd);var gS=/*#__PURE__*/function(_bw82){_inherits(gS,_bw82);function gS(){_classCallCheck(this,gS);return _possibleConstructorReturn(this,_getPrototypeOf(gS).apply(this,arguments));}_createClass(gS,[{key:"init",value:function init(){var e=this.editor;var t=e.model.schema;var i=e.conversion;var n=e.editing.view;var o=n.document;t.register("softBreak",{allowWhere:"$text",isInline:true});i["for"]("upcast").elementToElement({model:"softBreak",view:"br"});i["for"]("downcast").elementToElement({model:"softBreak",view:function view(e,t){return t.createEmptyElement("br");}});n.addObserver(mS);e.commands.add("shiftEnter",new lS(e));this.listenTo(o,"enter",function(t,i){i.preventDefault();if(!i.isSoft){return;}e.execute("shiftEnter");n.scrollToTheSelection();},{priority:"low"});}}],[{key:"pluginName",get:function get(){return"ShiftEnter";}}]);return gS;}(bw);function pS(e){var t=e.t;var i=e.config.get("codeBlock.languages");var _iteratorNormalCompletion411=true;var _didIteratorError411=false;var _iteratorError411=undefined;try{for(var _iterator411=i[Symbol.iterator](),_step411;!(_iteratorNormalCompletion411=(_step411=_iterator411.next()).done);_iteratorNormalCompletion411=true){var _e362=_step411.value;if(_e362.label==="Plain text"){_e362.label=t("bz");}if(_e362["class"]===undefined){_e362["class"]="language-".concat(_e362.language);}}}catch(err){_didIteratorError411=true;_iteratorError411=err;}finally{try{if(!_iteratorNormalCompletion411&&_iterator411["return"]!=null){_iterator411["return"]();}}finally{if(_didIteratorError411){throw _iteratorError411;}}}return i;}function bS(e,t,i){var n={};var _iteratorNormalCompletion412=true;var _didIteratorError412=false;var _iteratorError412=undefined;try{for(var _iterator412=e[Symbol.iterator](),_step412;!(_iteratorNormalCompletion412=(_step412=_iterator412.next()).done);_iteratorNormalCompletion412=true){var _o109=_step412.value;if(t==="class"){n[_o109[t].split(" ").shift()]=_o109[i];}else{n[_o109[t]]=_o109[i];}}}catch(err){_didIteratorError412=true;_iteratorError412=err;}finally{try{if(!_iteratorNormalCompletion412&&_iterator412["return"]!=null){_iterator412["return"]();}}finally{if(_didIteratorError412){throw _iteratorError412;}}}return n;}function wS(e){return e.data.match(/^(\s*)/)[0];}function _S(e,t){var i=e.createDocumentFragment();var n=t.split("\n").map(function(t){return e.createText(t);});var o=n[n.length-1];var _iteratorNormalCompletion413=true;var _didIteratorError413=false;var _iteratorError413=undefined;try{for(var _iterator413=n[Symbol.iterator](),_step413;!(_iteratorNormalCompletion413=(_step413=_iterator413.next()).done);_iteratorNormalCompletion413=true){var _t301=_step413.value;e.append(_t301,i);if(_t301!==o){e.appendElement("softBreak",i);}}}catch(err){_didIteratorError413=true;_iteratorError413=err;}finally{try{if(!_iteratorNormalCompletion413&&_iterator413["return"]!=null){_iterator413["return"]();}}finally{if(_didIteratorError413){throw _iteratorError413;}}}return i;}function vS(e){var t=e.document.selection;var i=[];if(t.isCollapsed){i.push(t.anchor);}else{var _n194=t.getFirstRange().getWalker({ignoreElementEnd:true,direction:"backward"});var _iteratorNormalCompletion414=true;var _didIteratorError414=false;var _iteratorError414=undefined;try{for(var _iterator414=_n194[Symbol.iterator](),_step414;!(_iteratorNormalCompletion414=(_step414=_iterator414.next()).done);_iteratorNormalCompletion414=true){var _ref85=_step414.value;var _t302=_ref85.item;if(_t302.is("textProxy")&&_t302.parent.is("codeBlock")){var _n195=wS(_t302.textNode);var _t302$textNode=_t302.textNode,_o110=_t302$textNode.parent,_s80=_t302$textNode.startOffset;var _r53=e.createPositionAt(_o110,_s80+_n195.length);i.push(_r53);}}}catch(err){_didIteratorError414=true;_iteratorError414=err;}finally{try{if(!_iteratorNormalCompletion414&&_iterator414["return"]!=null){_iterator414["return"]();}}finally{if(_didIteratorError414){throw _iteratorError414;}}}}return i;}function kS(e){var t=kw(e.getSelectedBlocks());return t&&t.is("codeBlock");}var yS=/*#__PURE__*/function(_w31){_inherits(yS,_w31);function yS(){_classCallCheck(this,yS);return _possibleConstructorReturn(this,_getPrototypeOf(yS).apply(this,arguments));}_createClass(yS,[{key:"refresh",value:function refresh(){this.value=this._getValue();this.isEnabled=this._checkEnabled();}},{key:"execute",value:function execute(){var _this273=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor;var i=t.model;var n=i.document.selection;var o=pS(t);var s=o[0];var r=Array.from(n.getSelectedBlocks());var a=e.forceValue===undefined?!this.value:e.forceValue;var c=e.language||s.language;i.change(function(e){if(a){_this273._applyCodeBlock(e,r,c);}else{_this273._removeCodeBlock(e,r);}});}},{key:"_getValue",value:function _getValue(){var e=this.editor.model.document.selection;var t=kw(e.getSelectedBlocks());var i=!!(t&&t.is("codeBlock"));return i?t.getAttribute("language"):false;}},{key:"_checkEnabled",value:function _checkEnabled(){if(this.value){return true;}var e=this.editor.model.document.selection;var t=this.editor.model.schema;var i=kw(e.getSelectedBlocks());if(!i){return false;}return xS(t,i);}},{key:"_applyCodeBlock",value:function _applyCodeBlock(e,t,i){var n=this.editor.model.schema;var o=t.filter(function(e){return xS(n,e);});var _iteratorNormalCompletion415=true;var _didIteratorError415=false;var _iteratorError415=undefined;try{for(var _iterator415=o[Symbol.iterator](),_step415;!(_iteratorNormalCompletion415=(_step415=_iterator415.next()).done);_iteratorNormalCompletion415=true){var _t303=_step415.value;e.rename(_t303,"codeBlock");e.setAttribute("language",i,_t303);n.removeDisallowedAttributes([_t303],e);}}catch(err){_didIteratorError415=true;_iteratorError415=err;}finally{try{if(!_iteratorNormalCompletion415&&_iterator415["return"]!=null){_iterator415["return"]();}}finally{if(_didIteratorError415){throw _iteratorError415;}}}o.reverse().forEach(function(t,i){var n=o[i+1];if(t.previousSibling===n){e.appendElement("softBreak",n);e.merge(e.createPositionBefore(t));}});}},{key:"_removeCodeBlock",value:function _removeCodeBlock(e,t){var i=t.filter(function(e){return e.is("codeBlock");});var _iteratorNormalCompletion416=true;var _didIteratorError416=false;var _iteratorError416=undefined;try{for(var _iterator416=i[Symbol.iterator](),_step416;!(_iteratorNormalCompletion416=(_step416=_iterator416.next()).done);_iteratorNormalCompletion416=true){var _t304=_step416.value;var _i327=e.createRangeOn(_t304);var _iteratorNormalCompletion417=true;var _didIteratorError417=false;var _iteratorError417=undefined;try{for(var _iterator417=Array.from(_i327.getItems()).reverse()[Symbol.iterator](),_step417;!(_iteratorNormalCompletion417=(_step417=_iterator417.next()).done);_iteratorNormalCompletion417=true){var _t305=_step417.value;if(_t305.is("softBreak")&&_t305.parent.is("codeBlock")){var _e$split=e.split(e.createPositionBefore(_t305)),_i328=_e$split.position;e.rename(_i328.nodeAfter,"paragraph");e.removeAttribute("language",_i328.nodeAfter);e.remove(_t305);}}}catch(err){_didIteratorError417=true;_iteratorError417=err;}finally{try{if(!_iteratorNormalCompletion417&&_iterator417["return"]!=null){_iterator417["return"]();}}finally{if(_didIteratorError417){throw _iteratorError417;}}}e.rename(_t304,"paragraph");e.removeAttribute("language",_t304);}}catch(err){_didIteratorError416=true;_iteratorError416=err;}finally{try{if(!_iteratorNormalCompletion416&&_iterator416["return"]!=null){_iterator416["return"]();}}finally{if(_didIteratorError416){throw _iteratorError416;}}}}}]);return yS;}(_w);function xS(e,t){if(t.is("rootElement")||e.isLimit(t)){return false;}return e.checkChild(t.parent,"codeBlock");}var AS=/*#__PURE__*/function(_w32){_inherits(AS,_w32);function AS(e){var _this274;_classCallCheck(this,AS);_this274=_possibleConstructorReturn(this,_getPrototypeOf(AS).call(this,e));_this274._indentSequence=e.config.get("codeBlock.indentSequence");return _this274;}_createClass(AS,[{key:"refresh",value:function refresh(){this.isEnabled=this._checkEnabled();}},{key:"execute",value:function execute(){var _this275=this;var e=this.editor;var t=e.model;t.change(function(e){var i=vS(t);var _iteratorNormalCompletion418=true;var _didIteratorError418=false;var _iteratorError418=undefined;try{for(var _iterator418=i[Symbol.iterator](),_step418;!(_iteratorNormalCompletion418=(_step418=_iterator418.next()).done);_iteratorNormalCompletion418=true){var _t306=_step418.value;e.insertText(_this275._indentSequence,_t306);}}catch(err){_didIteratorError418=true;_iteratorError418=err;}finally{try{if(!_iteratorNormalCompletion418&&_iterator418["return"]!=null){_iterator418["return"]();}}finally{if(_didIteratorError418){throw _iteratorError418;}}}});}},{key:"_checkEnabled",value:function _checkEnabled(){if(!this._indentSequence){return false;}return kS(this.editor.model.document.selection);}}]);return AS;}(_w);var CS=/*#__PURE__*/function(_w33){_inherits(CS,_w33);function CS(e){var _this276;_classCallCheck(this,CS);_this276=_possibleConstructorReturn(this,_getPrototypeOf(CS).call(this,e));_this276._indentSequence=e.config.get("codeBlock.indentSequence");return _this276;}_createClass(CS,[{key:"refresh",value:function refresh(){this.isEnabled=this._checkEnabled();}},{key:"execute",value:function execute(){var _this277=this;var e=this.editor;var t=e.model;t.change(function(e){var i=vS(t);var _iteratorNormalCompletion419=true;var _didIteratorError419=false;var _iteratorError419=undefined;try{for(var _iterator419=i[Symbol.iterator](),_step419;!(_iteratorNormalCompletion419=(_step419=_iterator419.next()).done);_iteratorNormalCompletion419=true){var _t307=_step419.value;var _i329=TS(_this277.editor.model,_t307,_this277._indentSequence);if(_i329){e.remove(_i329);}}}catch(err){_didIteratorError419=true;_iteratorError419=err;}finally{try{if(!_iteratorNormalCompletion419&&_iterator419["return"]!=null){_iterator419["return"]();}}finally{if(_didIteratorError419){throw _iteratorError419;}}}});}},{key:"_checkEnabled",value:function _checkEnabled(){var _this278=this;if(!this._indentSequence){return false;}var e=this.editor.model;if(!kS(e.document.selection)){return false;}return vS(e).some(function(t){return TS(e,t,_this278._indentSequence);});}}]);return CS;}(_w);function TS(e,t,i){var n=MS(t);if(!n){return null;}var o=wS(n);var s=o.lastIndexOf(i);if(s+i.length!==o.length){return null;}if(s===-1){return null;}var r=n.parent,a=n.startOffset;return e.createRange(e.createPositionAt(r,a+s),e.createPositionAt(r,a+s+i.length));}function MS(e){var t=e.parent.getChild(e.index);if(!t||t.is("softBreak")){t=e.nodeBefore;}if(!t||t.is("softBreak")){return null;}return t;}function ES(e,t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var n=bS(t,"language","class");var o=bS(t,"language","label");return function(t,s,r){var a=r.writer,c=r.mapper,l=r.consumable;if(!l.consume(s.item,"insert")){return;}var d=s.item.getAttribute("language");var u=c.toViewPosition(e.createPositionBefore(s.item));var h={};if(i){h["data-language"]=o[d];h.spellcheck="false";}var f=a.createContainerElement("pre",h);var m=a.createContainerElement("code",{"class":n[d]||null});a.insert(a.createPositionAt(f,0),m);a.insert(u,f);c.bindElements(s.item,m);};}function PS(e){return function(t,i,n){if(i.item.parent.name!=="codeBlock"){return;}var o=n.writer,s=n.mapper,r=n.consumable;if(!r.consume(i.item,"insert")){return;}var a=s.toViewPosition(e.createPositionBefore(i.item));o.insert(a,o.createText("\n"));};}function SS(e,t){var i=bS(t,"class","language");var n=t[0].language;return function(t,o,s){var r=o.viewItem;var a=r.getChild(0);if(!a||!a.is("code")){return;}var c=s.consumable,l=s.writer;if(!c.test(r,{name:true})||!c.test(a,{name:true})){return;}var d=l.createElement("codeBlock");var u=_toConsumableArray(a.getClassNames());if(!u.length){u.push("");}var _iteratorNormalCompletion420=true;var _didIteratorError420=false;var _iteratorError420=undefined;try{for(var _iterator420=u[Symbol.iterator](),_step420;!(_iteratorNormalCompletion420=(_step420=_iterator420.next()).done);_iteratorNormalCompletion420=true){var _e363=_step420.value;var _t308=i[_e363];if(_t308){l.setAttribute("language",_t308,d);break;}}}catch(err){_didIteratorError420=true;_iteratorError420=err;}finally{try{if(!_iteratorNormalCompletion420&&_iterator420["return"]!=null){_iterator420["return"]();}}finally{if(_didIteratorError420){throw _iteratorError420;}}}if(!d.hasAttribute("language")){l.setAttribute("language",n,d);}var h=e.processor.toData(a);var f=IS(h);var m=_S(l,f);l.append(m,d);var g=s.splitToAllowedParent(d,o.modelCursor);if(!g){return;}l.insert(d,g.position);c.consume(r,{name:true});c.consume(a,{name:true});var p=s.getSplitParts(d);o.modelRange=l.createRange(s.writer.createPositionBefore(d),s.writer.createPositionAfter(p[p.length-1]));if(g.cursorParent){o.modelCursor=l.createPositionAt(g.cursorParent,0);}else{o.modelCursor=o.modelRange.end;}};}function IS(e){var t=new RegExp(/^<code[^>]*>([\S\s]*)<\/code>$/).exec(e)[1];return t.replace(/&lt;/g,"<").replace(/&gt;/g,">");}var NS="paragraph";var OS=/*#__PURE__*/function(_bw83){_inherits(OS,_bw83);_createClass(OS,null,[{key:"pluginName",get:function get(){return"CodeBlockEditing";}},{key:"requires",get:function get(){return[gS];}}]);function OS(e){var _this279;_classCallCheck(this,OS);_this279=_possibleConstructorReturn(this,_getPrototypeOf(OS).call(this,e));e.config.define("codeBlock",{languages:[{language:"plaintext",label:"Plain text"},{language:"c",label:"C"},{language:"cs",label:"C#"},{language:"cpp",label:"C++"},{language:"css",label:"CSS"},{language:"diff",label:"Diff"},{language:"xml",label:"HTML/XML"},{language:"java",label:"Java"},{language:"javascript",label:"JavaScript"},{language:"php",label:"PHP"},{language:"python",label:"Python"},{language:"ruby",label:"Ruby"},{language:"typescript",label:"TypeScript"}],indentSequence:"\t"});return _this279;}_createClass(OS,[{key:"init",value:function init(){var _this280=this;var e=this.editor;var t=e.model.schema;var i=e.model;var n=pS(e);e.commands.add("codeBlock",new yS(e));e.commands.add("indentCodeBlock",new AS(e));e.commands.add("outdentCodeBlock",new CS(e));var o=function o(e){return function(t,i){var n=_this280.editor.commands.get(e);if(n.isEnabled){_this280.editor.execute(e);i();}};};e.keystrokes.set("Tab",o("indentCodeBlock"));e.keystrokes.set("Shift+Tab",o("outdentCodeBlock"));t.register("codeBlock",{allowWhere:"$block",isBlock:true,allowAttributes:["language"]});t.extend("$text",{allowIn:"codeBlock"});t.addAttributeCheck(function(e){if(e.endsWith("codeBlock $text")){return false;}});e.editing.downcastDispatcher.on("insert:codeBlock",ES(i,n,true));e.data.downcastDispatcher.on("insert:codeBlock",ES(i,n));e.data.downcastDispatcher.on("insert:softBreak",PS(i),{priority:"high"});e.data.upcastDispatcher.on("element:pre",SS(e.data,n));this.listenTo(e.editing.view.document,"clipboardInput",function(e,t){var n=i.document.selection;if(!n.anchor.parent.is("codeBlock")){return;}var o=t.dataTransfer.getData("text/plain");i.change(function(t){i.insertContent(_S(t,o),n);e.stop();});});this.listenTo(i,"getSelectedContent",function(e,_ref86){var _ref87=_slicedToArray(_ref86,1),n=_ref87[0];var o=n.anchor;if(n.isCollapsed||!o.parent.is("codeBlock")||!o.hasSameParentAs(n.focus)){return;}i.change(function(i){var s=e["return"];if(s.childCount>1||n.containsEntireContent(o.parent)){var _t309=i.createElement("codeBlock",o.parent.getAttributes());i.append(s,_t309);var _n196=i.createDocumentFragment();i.append(_t309,_n196);e["return"]=_n196;}else{var _e364=s.getChild(0);if(t.checkAttribute(_e364,"code")){i.setAttribute("code",true,_e364);}}});});}},{key:"afterInit",value:function afterInit(){var e=this.editor;var t=e.commands;var i=t.get("indent");var n=t.get("outdent");if(i){i.registerChildCommand(t.get("indentCodeBlock"));}if(n){n.registerChildCommand(t.get("outdentCodeBlock"));}this.listenTo(e.editing.view.document,"enter",function(t,i){var n=e.model.document.selection.getLastPosition().parent;if(!n.is("codeBlock")){return;}LS(e,i.isSoft)||zS(e,i.isSoft)||RS(e);i.preventDefault();t.stop();});}}]);return OS;}(bw);function RS(e){var t=e.model;var i=t.document;var n=i.selection.getLastPosition();var o=n.nodeBefore||n.textNode;var s;if(o&&o.is("text")){s=wS(o);}e.model.change(function(t){e.execute("shiftEnter");if(s){t.insertText(s,i.selection.anchor);}});}function LS(e,t){var i=e.model;var n=i.document;var o=e.editing.view;var s=n.selection.getLastPosition();var r=s.nodeAfter;if(t||!n.selection.isCollapsed||!s.isAtStart){return false;}if(!r||!r.is("softBreak")){return false;}e.model.change(function(t){e.execute("enter");var i=n.selection.anchor.parent.previousSibling;t.rename(i,NS);t.setSelection(i,"in");e.model.schema.removeDisallowedAttributes([i],t);t.remove(r);});o.scrollToTheSelection();return true;}function zS(e,t){var i=e.model;var n=i.document;var o=e.editing.view;var s=n.selection.getLastPosition();var r=s.nodeBefore;var a;if(t||!n.selection.isCollapsed||!s.isAtEnd||!r){return false;}if(r.is("softBreak")){a=i.createRangeOn(r);}else if(r.is("text")&&!r.data.match(/\S/)&&r.previousSibling&&r.previousSibling.is("softBreak")){a=i.createRange(i.createPositionBefore(r.previousSibling),i.createPositionAfter(r));}else{return false;}e.model.change(function(t){t.remove(a);e.execute("enter");var i=n.selection.anchor.parent;t.rename(i,NS);e.model.schema.removeDisallowedAttributes([i],t);});o.scrollToTheSelection();return true;}var DS='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.87 12.61a.75.75 0 0 1-.089.976l-.085.07-3.154 2.254 3.412 2.414a.75.75 0 0 1 .237.95l-.057.095a.75.75 0 0 1-.95.237l-.096-.058-4.272-3.022-.003-1.223 4.01-2.867a.75.75 0 0 1 1.047.174zm2.795-.231l.095.057 4.011 2.867-.003 1.223-4.272 3.022-.095.058a.75.75 0 0 1-.88-.151l-.07-.086-.058-.095a.75.75 0 0 1 .15-.88l.087-.07 3.412-2.414-3.154-2.253-.085-.071a.75.75 0 0 1 .862-1.207zM16 0a2 2 0 0 1 2 2v9.354l-.663-.492-.837-.001V2a.5.5 0 0 0-.5-.5H2a.5.5 0 0 0-.5.5v15a.5.5 0 0 0 .5.5h3.118L7.156 19H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h14zM5.009 15l.003 1H3v-1h2.009zm2.188-2l-1.471 1H5v-1h2.197zM10 11v.095L8.668 12H7v-1h3zm4-2v1H7V9h7zm0-2v1H7V7h7zm-4-2v1H5V5h5zM6 3v1H3V3h3z"/></svg>';var jS=i(103);var BS=/*#__PURE__*/function(_bw84){_inherits(BS,_bw84);function BS(){_classCallCheck(this,BS);return _possibleConstructorReturn(this,_getPrototypeOf(BS).apply(this,arguments));}_createClass(BS,[{key:"init",value:function init(){var _this281=this;var e=this.editor;var t=e.t;var i=e.ui.componentFactory;var n=pS(e);var o=n[0];i.add("codeBlock",function(i){var s=e.commands.get("codeBlock");var r=Qb(i,fv);var a=r.buttonView;a.set({label:t("bc"),tooltip:true,icon:DS,isToggleable:true});a.bind("isOn").to(s,"value",function(e){return!!e;});a.on("execute",function(){e.execute("codeBlock",{language:o.language});e.editing.view.focus();});r.on("execute",function(t){e.execute("codeBlock",{language:t.source._codeBlockLanguage,forceValue:true});e.editing.view.focus();});r["class"]="ck-code-block-dropdown";r.bind("isEnabled").to(s);ew(r,_this281._getLanguageListItemDefinitions(n));return r;});}},{key:"_getLanguageListItemDefinitions",value:function _getLanguageListItemDefinitions(e){var t=this.editor;var i=t.commands.get("codeBlock");var n=new yr();var _iteratorNormalCompletion421=true;var _didIteratorError421=false;var _iteratorError421=undefined;try{var _loop13=function _loop13(){var t=_step421.value;var e={type:"button",model:new N_({_codeBlockLanguage:t.language,label:t.label,withText:true})};e.model.bind("isOn").to(i,"value",function(t){return t===e.model._codeBlockLanguage;});n.add(e);};for(var _iterator421=e[Symbol.iterator](),_step421;!(_iteratorNormalCompletion421=(_step421=_iterator421.next()).done);_iteratorNormalCompletion421=true){_loop13();}}catch(err){_didIteratorError421=true;_iteratorError421=err;}finally{try{if(!_iteratorNormalCompletion421&&_iterator421["return"]!=null){_iterator421["return"]();}}finally{if(_didIteratorError421){throw _iteratorError421;}}}return n;}}]);return BS;}(bw);var VS=/*#__PURE__*/function(_bw85){_inherits(VS,_bw85);function VS(){_classCallCheck(this,VS);return _possibleConstructorReturn(this,_getPrototypeOf(VS).apply(this,arguments));}_createClass(VS,null,[{key:"requires",get:function get(){return[OS,BS];}},{key:"pluginName",get:function get(){return"CodeBlock";}}]);return VS;}(bw);var FS=/*#__PURE__*/function(_r_3){_inherits(FS,_r_3);function FS(e){_classCallCheck(this,FS);return _possibleConstructorReturn(this,_getPrototypeOf(FS).call(this,e,v_));}return FS;}(r_);var HS=/*#__PURE__*/function(_bw86){_inherits(HS,_bw86);_createClass(HS,null,[{key:"pluginName",get:function get(){return"FontBackgroundColorEditing";}}]);function HS(e){var _this282;_classCallCheck(this,HS);_this282=_possibleConstructorReturn(this,_getPrototypeOf(HS).call(this,e));e.config.define(v_,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:true},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5});e.conversion["for"]("upcast").elementToAttribute({view:{name:"span",styles:{"background-color":/[\s\S]+/}},model:{key:v_,value:y_("background-color")}});e.conversion["for"]("downcast").attributeToElement({model:v_,view:x_("background-color")});e.commands.add(v_,new FS(e));e.model.schema.extend("$text",{allowAttributes:v_});e.model.schema.setAttributeProperties(v_,{isFormatting:true,copyOnEnter:true});return _this282;}return HS;}(bw);function WS(e,t){var i=e.t;var n={Black:i("ce"),"Dim grey":i("cf"),Grey:i("cg"),"Light grey":i("ch"),White:i("ci"),Red:i("cj"),Orange:i("ck"),Yellow:i("cl"),"Light green":i("cm"),Green:i("cn"),Aquamarine:i("co"),Turquoise:i("cp"),"Light blue":i("cq"),Blue:i("cr"),Purple:i("cs")};return t.map(function(e){var t=n[e.label];if(t&&t!=e.label){e.label=t;}return e;});}function US(e){return e.map($S).filter(function(e){return!!e;});}function $S(e){if(typeof e==="string"){return{model:e.replace(/ /g,""),label:e,hasBorder:false,view:{name:"span",styles:{color:e}}};}else{return{model:e.color.replace(/ /g,""),label:e.label||e.color,hasBorder:e.hasBorder===undefined?false:e.hasBorder,view:{name:"span",styles:{color:"".concat(e.color)}}};}}var qS=/*#__PURE__*/function(_bw87){_inherits(qS,_bw87);function qS(e,_ref88){var _this283;var t=_ref88.commandName,i=_ref88.icon,n=_ref88.componentName,o=_ref88.dropdownLabel;_classCallCheck(this,qS);_this283=_possibleConstructorReturn(this,_getPrototypeOf(qS).call(this,e));_this283.commandName=t;_this283.componentName=n;_this283.icon=i;_this283.dropdownLabel=o;_this283.columns=e.config.get("".concat(_this283.componentName,".columns"));_this283.colorTableView;return _this283;}_createClass(qS,[{key:"init",value:function init(){var _this284=this;var e=this.editor;var t=e.locale;var i=t.t;var n=e.commands.get(this.commandName);var o=US(e.config.get(this.componentName).colors);var s=WS(t,o);var r=e.config.get("".concat(this.componentName,".documentColors"));e.ui.componentFactory.add(this.componentName,function(t){var o=Qb(t);_this284.colorTableView=A_({dropdownView:o,colors:s.map(function(e){return{label:e.label,color:e.model,options:{hasBorder:e.hasBorder}};}),columns:_this284.columns,removeButtonLabel:i("bw"),documentColorsLabel:r!==0?i("bx"):undefined,documentColorsCount:r===undefined?_this284.columns:r});_this284.colorTableView.bind("selectedColor").to(n,"value");o.buttonView.set({label:_this284.dropdownLabel,icon:_this284.icon,tooltip:true});o.extendTemplate({attributes:{"class":"ck-color-ui-dropdown"}});o.bind("isEnabled").to(n);o.on("execute",function(t,i){e.execute(_this284.commandName,i);e.editing.view.focus();});o.on("change:isOpen",function(t,i,n){o.colorTableView.appendGrids();if(n){if(r!==0){_this284.colorTableView.updateDocumentColors(e.model,_this284.componentName);}_this284.colorTableView.updateSelectedColors();}});return o;});}}]);return qS;}(bw);var YS='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M4 2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2zm8.38 9.262H7.62L10 5.506l2.38 5.756zm.532 1.285L14.34 16h1.426L10.804 4H9.196L4.234 16H5.66l1.428-3.453h5.824z"/></svg>';var GS=/*#__PURE__*/function(_qS){_inherits(GS,_qS);function GS(e){_classCallCheck(this,GS);var t=e.locale.t;return _possibleConstructorReturn(this,_getPrototypeOf(GS).call(this,e,{commandName:v_,componentName:v_,icon:YS,dropdownLabel:t("an")}));}_createClass(GS,null,[{key:"pluginName",get:function get(){return"FontBackgroundColorUI";}}]);return GS;}(qS);var JS=/*#__PURE__*/function(_bw88){_inherits(JS,_bw88);function JS(){_classCallCheck(this,JS);return _possibleConstructorReturn(this,_getPrototypeOf(JS).apply(this,arguments));}_createClass(JS,null,[{key:"requires",get:function get(){return[HS,GS];}},{key:"pluginName",get:function get(){return"FontBackgroundColor";}}]);return JS;}(bw);var XS=/*#__PURE__*/function(_r_4){_inherits(XS,_r_4);function XS(e){_classCallCheck(this,XS);return _possibleConstructorReturn(this,_getPrototypeOf(XS).call(this,e,__));}return XS;}(r_);var KS=/*#__PURE__*/function(_bw89){_inherits(KS,_bw89);_createClass(KS,null,[{key:"pluginName",get:function get(){return"FontColorEditing";}}]);function KS(e){var _this285;_classCallCheck(this,KS);_this285=_possibleConstructorReturn(this,_getPrototypeOf(KS).call(this,e));e.config.define(__,{colors:[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:true},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}],columns:5});e.conversion["for"]("upcast").elementToAttribute({view:{name:"span",styles:{color:/[\s\S]+/}},model:{key:__,value:y_("color")}});e.conversion["for"]("downcast").attributeToElement({model:__,view:x_("color")});e.commands.add(__,new XS(e));e.model.schema.extend("$text",{allowAttributes:__});e.model.schema.setAttributeProperties(__,{isFormatting:true,copyOnEnter:true});return _this285;}return KS;}(bw);var QS='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.4 10.3L10 4.5l-2.4 5.8h4.8zm.5 1.2H7.1L5.7 15H4.2l5-12h1.6l5 12h-1.5L13 11.5zm3.1 7H4a1 1 0 0 1 0-2h12a1 1 0 0 1 0 2z"/></svg>';var ZS=/*#__PURE__*/function(_qS2){_inherits(ZS,_qS2);function ZS(e){_classCallCheck(this,ZS);var t=e.locale.t;return _possibleConstructorReturn(this,_getPrototypeOf(ZS).call(this,e,{commandName:__,componentName:__,icon:QS,dropdownLabel:t("ao")}));}_createClass(ZS,null,[{key:"pluginName",get:function get(){return"FontColorUI";}}]);return ZS;}(qS);var eI=/*#__PURE__*/function(_bw90){_inherits(eI,_bw90);function eI(){_classCallCheck(this,eI);return _possibleConstructorReturn(this,_getPrototypeOf(eI).apply(this,arguments));}_createClass(eI,null,[{key:"requires",get:function get(){return[KS,ZS];}},{key:"pluginName",get:function get(){return"FontColor";}}]);return eI;}(bw);var tI=/*#__PURE__*/function(_w34){_inherits(tI,_w34);function tI(){_classCallCheck(this,tI);return _possibleConstructorReturn(this,_getPrototypeOf(tI).apply(this,arguments));}_createClass(tI,[{key:"refresh",value:function refresh(){this.isEnabled=iI(this.editor.model);}},{key:"execute",value:function execute(){var e=this.editor.model;e.change(function(t){var i=t.createElement("horizontalLine");e.insertContent(i);var n=i.nextSibling;var o=n&&e.schema.checkChild(n,"$text");if(!o&&e.schema.checkChild(i.parent,"paragraph")){n=t.createElement("paragraph");e.insertContent(n,t.createPositionAfter(i));}if(n){t.setSelection(n,0);}});}}]);return tI;}(_w);function iI(e){var t=e.schema;var i=e.document.selection;return nI(i,t,e)&&!oI(i,t);}function nI(e,t,i){var n=sI(e,i);return t.checkChild(n,"horizontalLine");}function oI(e,t){var i=e.getSelectedElement();return i&&t.isObject(i);}function sI(e,t){var i=Ov(e,t);var n=i.parent;if(n.isEmpty&&!n.is("$root")){return n.parent;}return n;}var rI=i(105);var aI=/*#__PURE__*/function(_bw91){_inherits(aI,_bw91);function aI(){_classCallCheck(this,aI);return _possibleConstructorReturn(this,_getPrototypeOf(aI).apply(this,arguments));}_createClass(aI,[{key:"init",value:function init(){var e=this.editor;var t=e.model.schema;var i=e.t;var n=e.conversion;t.register("horizontalLine",{isObject:true,allowWhere:"$block"});n["for"]("dataDowncast").elementToElement({model:"horizontalLine",view:function view(e,t){return t.createEmptyElement("hr");}});n["for"]("editingDowncast").elementToElement({model:"horizontalLine",view:function view(e,t){var n=i("bb");var o=t.createContainerElement("div");var s=t.createEmptyElement("hr");t.addClass("ck-horizontal-line",o);t.setCustomProperty("hr",true,o);t.insert(t.createPositionAt(o,0),s);return cI(o,t,n);}});n["for"]("upcast").elementToElement({view:"hr",model:"horizontalLine"});e.commands.add("horizontalLine",new tI(e));}}],[{key:"pluginName",get:function get(){return"HorizontalLineEditing";}}]);return aI;}(bw);function cI(e,t,i){t.setCustomProperty("horizontalLine",true,e);return Ev(e,t,{label:i});}var lI='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 9h16v2H2z"/></svg>';var dI=/*#__PURE__*/function(_bw92){_inherits(dI,_bw92);function dI(){_classCallCheck(this,dI);return _possibleConstructorReturn(this,_getPrototypeOf(dI).apply(this,arguments));}_createClass(dI,[{key:"init",value:function init(){var _this286=this;var e=this.editor;var t=e.t;e.ui.componentFactory.add("horizontalLine",function(i){var n=e.commands.get("horizontalLine");var o=new Vb(i);o.set({label:t("bb"),icon:lI,tooltip:true});o.bind("isEnabled").to(n,"isEnabled");_this286.listenTo(o,"execute",function(){e.execute("horizontalLine");e.editing.view.focus();});return o;});}}]);return dI;}(bw);var uI=/*#__PURE__*/function(_bw93){_inherits(uI,_bw93);function uI(){_classCallCheck(this,uI);return _possibleConstructorReturn(this,_getPrototypeOf(uI).apply(this,arguments));}_createClass(uI,null,[{key:"requires",get:function get(){return[aI,dI];}},{key:"pluginName",get:function get(){return"HorizontalLine";}}]);return uI;}(bw);var hI=/*#__PURE__*/function(){function hI(e){_classCallCheck(this,hI);this.set("activeHandlePosition",null);this.set("proposedWidthPercents",null);this.set("proposedWidth",null);this.set("proposedHeight",null);this.set("proposedHandleHostWidth",null);this.set("proposedHandleHostHeight",null);this._options=e;this._referenceCoordinates=null;}_createClass(hI,[{key:"begin",value:function begin(e,t,i){var n=new kh(t);this.activeHandlePosition=pI(e);this._referenceCoordinates=mI(t,bI(this.activeHandlePosition));this.originalWidth=n.width;this.originalHeight=n.height;this.aspectRatio=n.width/n.height;var o=i.style.width;if(o&&o.match(/^\d+\.?\d*%$/)){this.originalWidthPercents=parseFloat(o);}else{this.originalWidthPercents=fI(i,n);}}},{key:"update",value:function update(e){this.proposedWidth=e.width;this.proposedHeight=e.height;this.proposedWidthPercents=e.widthPercents;this.proposedHandleHostWidth=e.handleHostWidth;this.proposedHandleHostHeight=e.handleHostHeight;}}]);return hI;}();kr(hI,Jc);function fI(e,t){var i=e.parentElement;var n=parseFloat(i.ownerDocument.defaultView.getComputedStyle(i).width);return t.width/n*100;}function mI(e,t){var i=new kh(e);var n=t.split("-");var o={x:n[1]=="right"?i.right:i.left,y:n[0]=="bottom"?i.bottom:i.top};o.x+=e.ownerDocument.defaultView.scrollX;o.y+=e.ownerDocument.defaultView.scrollY;return o;}function gI(e){return"ck-widget__resizer__handle-".concat(e);}function pI(e){var t=["top-left","top-right","bottom-right","bottom-left"];for(var _i330=0,_t310=t;_i330<_t310.length;_i330++){var _i331=_t310[_i330];if(e.classList.contains(gI(_i331))){return _i331;}}}function bI(e){var t=e.split("-");var i={top:"bottom",bottom:"top",left:"right",right:"left"};return"".concat(i[t[0]],"-").concat(i[t[1]]);}var wI=/*#__PURE__*/function(){function wI(e){var _this287=this;_classCallCheck(this,wI);this._options=e;this._domResizerWrapper=null;this._viewResizerWrapper=null;this.set("isEnabled",true);this.decorate("begin");this.decorate("cancel");this.decorate("commit");this.decorate("updateSize");this.on("commit",function(e){if(!_this287.state.proposedWidth&&!_this287.state.proposedWidthPercents){_this287._cleanup();e.stop();}},{priority:"high"});}_createClass(wI,[{key:"attach",value:function attach(){var _this288=this;var e=this;var t=this._options.viewElement;var i=this._options.editor.editing.view;i.change(function(i){var n=i.createUIElement("div",{"class":"ck ck-reset_all ck-widget__resizer"},function(t){var i=this.toDomElement(t);e._appendHandles(i);e._appendSizeUI(i);e._domResizerWrapper=i;e.on("change:isEnabled",function(e,t,n){i.style.display=n?"":"none";});i.style.display=e.isEnabled?"":"none";return i;});i.insert(i.createPositionAt(t,"end"),n);i.addClass("ck-widget_with-resizer",t);_this288._viewResizerWrapper=n;});}},{key:"begin",value:function begin(e){this.state=new hI(this._options);this._sizeUI.bindToState(this._options,this.state);this.state.begin(e,this._getHandleHost(),this._getResizeHost());}},{key:"updateSize",value:function updateSize(e){var _this289=this;var t=this._proposeNewSize(e);var i=this._options.editor.editing.view;i.change(function(e){var i=_this289._options.unit||"%";var n=(i==="%"?t.widthPercents:t.width)+i;e.setStyle("width",n,_this289._options.viewElement);});var n=this._getHandleHost();var o=new kh(n);t.handleHostWidth=Math.round(o.width);t.handleHostHeight=Math.round(o.height);var s=new kh(n);t.width=Math.round(s.width);t.height=Math.round(s.height);this.redraw(o);this.state.update(t);}},{key:"commit",value:function commit(){var e=this._options.unit||"%";var t=(e==="%"?this.state.proposedWidthPercents:this.state.proposedWidth)+e;this._options.onCommit(t);this._cleanup();}},{key:"cancel",value:function cancel(){this._cleanup();}},{key:"destroy",value:function destroy(){this.cancel();}},{key:"redraw",value:function redraw(e){var _this290=this;var t=this._domResizerWrapper;if(i(t)){this._options.editor.editing.view.change(function(i){var n=t.parentElement;var o=_this290._getHandleHost();var s=e||new kh(o);i.setStyle("width",s.width+"px",_this290._viewResizerWrapper);i.setStyle("height",s.height+"px",_this290._viewResizerWrapper);var r={left:o.offsetLeft,top:o.offsetTop,height:o.offsetHeight,width:o.offsetWidth};if(!n.isSameNode(o)){i.setStyle("left",r.left+"px",_this290._viewResizerWrapper);i.setStyle("top",r.top+"px",_this290._viewResizerWrapper);i.setStyle("height",r.height+"px",_this290._viewResizerWrapper);i.setStyle("width",r.width+"px",_this290._viewResizerWrapper);}});}function i(e){return e&&e.ownerDocument&&e.ownerDocument.contains(e);}}},{key:"containsHandle",value:function containsHandle(e){return this._domResizerWrapper.contains(e);}},{key:"_cleanup",value:function _cleanup(){this._sizeUI.dismiss();this._sizeUI.isVisible=false;}},{key:"_proposeNewSize",value:function _proposeNewSize(e){var t=this.state;var i=kI(e);var n=this._options.isCentered?this._options.isCentered(this):true;var o={x:t._referenceCoordinates.x-(i.x+t.originalWidth),y:i.y-t.originalHeight-t._referenceCoordinates.y};if(n&&t.activeHandlePosition.endsWith("-right")){o.x=i.x-(t._referenceCoordinates.x+t.originalWidth);}if(n){o.x*=2;}var s={width:Math.abs(t.originalWidth+o.x),height:Math.abs(t.originalHeight+o.y)};s.dominant=s.width/t.aspectRatio>s.height?"width":"height";s.max=s[s.dominant];var r={width:s.width,height:s.height};if(s.dominant=="width"){r.height=r.width/t.aspectRatio;}else{r.width=r.height*t.aspectRatio;}return{width:Math.round(r.width),height:Math.round(r.height),widthPercents:Math.min(Math.round(t.originalWidthPercents/t.originalWidth*r.width*100)/100,100)};}},{key:"_getResizeHost",value:function _getResizeHost(){var e=this._domResizerWrapper.parentElement;return this._options.getResizeHost(e);}},{key:"_getHandleHost",value:function _getHandleHost(){var e=this._domResizerWrapper.parentElement;return this._options.getHandleHost(e);}},{key:"_appendHandles",value:function _appendHandles(e){var t=["top-left","top-right","bottom-right","bottom-left"];for(var _i332=0,_t311=t;_i332<_t311.length;_i332++){var _i333=_t311[_i332];e.appendChild(new Dp({tag:"div",attributes:{"class":"ck-widget__resizer__handle ".concat(vI(_i333))}}).render());}}},{key:"_appendSizeUI",value:function _appendSizeUI(e){var t=new _I();t.render();this._sizeUI=t;e.appendChild(t.element);}}],[{key:"isResizeHandle",value:function isResizeHandle(e){return e.classList.contains("ck-widget__resizer__handle");}}]);return wI;}();kr(wI,Jc);var _I=/*#__PURE__*/function(_db31){_inherits(_I,_db31);function _I(){var _this291;_classCallCheck(this,_I);_this291=_possibleConstructorReturn(this,_getPrototypeOf(_I).call(this));var e=_this291.bindTemplate;_this291.setTemplate({tag:"div",attributes:{"class":["ck","ck-size-view",e.to("activeHandlePosition",function(e){return e?"ck-orientation-".concat(e):"";})],style:{display:e["if"]("isVisible","none",function(e){return!e;})}},children:[{text:e.to("label")}]});return _this291;}_createClass(_I,[{key:"bindToState",value:function bindToState(e,t){this.bind("isVisible").to(t,"proposedWidth",t,"proposedHeight",function(e,t){return e!==null&&t!==null;});this.bind("label").to(t,"proposedHandleHostWidth",t,"proposedHandleHostHeight",t,"proposedWidthPercents",function(t,i,n){if(e.unit==="px"){return"".concat(t,"\xD7").concat(i);}else{return"".concat(n,"%");}});this.bind("activeHandlePosition").to(t);}},{key:"dismiss",value:function dismiss(){this.unbind();this.isVisible=false;}}]);return _I;}(db);function vI(e){return"ck-widget__resizer__handle-".concat(e);}function kI(e){return{x:e.pageX,y:e.pageY};}var yI="Expected a function";function xI(e,t,i){var n=true,o=true;if(typeof e!="function"){throw new TypeError(yI);}if(ce(i)){n="leading"in i?!!i.leading:n;o="trailing"in i?!!i.trailing:o;}return uh(e,t,{leading:n,maxWait:t,trailing:o});}var AI=xI;var CI=i(107);var TI=/*#__PURE__*/function(_bw94){_inherits(TI,_bw94);function TI(){_classCallCheck(this,TI);return _possibleConstructorReturn(this,_getPrototypeOf(TI).apply(this,arguments));}_createClass(TI,[{key:"init",value:function init(){var _this292=this;this.set("_visibleResizer",null);this.set("_activeResizer",null);this._resizers=new Map();var e=Nd.window.document;this.editor.model.schema.setAttributeProperties("width",{isFormatting:true});this._observer=Object.create(Ud);this._observer.listenTo(e,"mousedown",this._mouseDownListener.bind(this));this._observer.listenTo(e,"mousemove",this._mouseMoveListener.bind(this));this._observer.listenTo(e,"mouseup",this._mouseUpListener.bind(this));var t=function t(){if(_this292._visibleResizer){_this292._visibleResizer.redraw();}};var i=AI(t,200);this.on("change:_visibleResizer",t);this.editor.ui.on("update",i);this._observer.listenTo(Nd.window,"resize",i);var n=this.editor.editing.view.document.selection;n.on("change",function(){var e=n.getSelectedElement();_this292._visibleResizer=_this292._getResizerByViewElement(e)||null;});}},{key:"destroy",value:function destroy(){this._observer.stopListening();var _iteratorNormalCompletion422=true;var _didIteratorError422=false;var _iteratorError422=undefined;try{for(var _iterator422=this._resizers.values()[Symbol.iterator](),_step422;!(_iteratorNormalCompletion422=(_step422=_iterator422.next()).done);_iteratorNormalCompletion422=true){var _e365=_step422.value;_e365.destroy();}}catch(err){_didIteratorError422=true;_iteratorError422=err;}finally{try{if(!_iteratorNormalCompletion422&&_iterator422["return"]!=null){_iterator422["return"]();}}finally{if(_didIteratorError422){throw _iteratorError422;}}}}},{key:"attachTo",value:function attachTo(e){var t=new wI(e);var i=this.editor.plugins;t.attach();if(i.has("WidgetToolbarRepository")){var _e366=i.get("WidgetToolbarRepository");t.on("begin",function(){_e366.forceDisabled("resize");},{priority:"lowest"});t.on("cancel",function(){_e366.clearForceDisabled("resize");},{priority:"highest"});t.on("commit",function(){_e366.clearForceDisabled("resize");},{priority:"highest"});}this._resizers.set(e.viewElement,t);return t;}},{key:"_getResizerByHandle",value:function _getResizerByHandle(e){var _iteratorNormalCompletion423=true;var _didIteratorError423=false;var _iteratorError423=undefined;try{for(var _iterator423=this._resizers.values()[Symbol.iterator](),_step423;!(_iteratorNormalCompletion423=(_step423=_iterator423.next()).done);_iteratorNormalCompletion423=true){var _t312=_step423.value;if(_t312.containsHandle(e)){return _t312;}}}catch(err){_didIteratorError423=true;_iteratorError423=err;}finally{try{if(!_iteratorNormalCompletion423&&_iterator423["return"]!=null){_iterator423["return"]();}}finally{if(_didIteratorError423){throw _iteratorError423;}}}}},{key:"_getResizerByViewElement",value:function _getResizerByViewElement(e){return this._resizers.get(e);}},{key:"_mouseDownListener",value:function _mouseDownListener(e,t){if(!wI.isResizeHandle(t.target)){return;}var i=t.target;this._activeResizer=this._getResizerByHandle(i);if(this._activeResizer){this._activeResizer.begin(i);}}},{key:"_mouseMoveListener",value:function _mouseMoveListener(e,t){if(this._activeResizer){this._activeResizer.updateSize(t);}}},{key:"_mouseUpListener",value:function _mouseUpListener(){if(this._activeResizer){this._activeResizer.commit();this._activeResizer=null;}}}],[{key:"pluginName",get:function get(){return"WidgetResize";}}]);return TI;}(bw);kr(TI,Jc);var MI=/*#__PURE__*/function(_w35){_inherits(MI,_w35);function MI(){_classCallCheck(this,MI);return _possibleConstructorReturn(this,_getPrototypeOf(MI).apply(this,arguments));}_createClass(MI,[{key:"refresh",value:function refresh(){var e=this.editor.model.document.selection.getSelectedElement();this.isEnabled=Vv(e);if(!e||!e.hasAttribute("width")){this.value=null;}else{this.value={width:e.getAttribute("width"),height:null};}}},{key:"execute",value:function execute(e){var t=this.editor.model;var i=t.document.selection.getSelectedElement();t.change(function(t){t.setAttribute("width",e.width,i);});}}]);return MI;}(_w);var EI=i(109);var PI=/*#__PURE__*/function(_bw95){_inherits(PI,_bw95);function PI(){_classCallCheck(this,PI);return _possibleConstructorReturn(this,_getPrototypeOf(PI).apply(this,arguments));}_createClass(PI,[{key:"init",value:function init(){var e=this.editor;var t=new MI(e);this._registerSchema();this._registerConverters();e.commands.add("imageResize",t);e.editing.downcastDispatcher.on("insert:image",function(i,n,o){var s=o.mapper.toViewElement(n.item);var r=e.plugins.get(TI).attachTo({unit:e.config.get("image.resizeUnit")||"%",modelElement:n.item,viewElement:s,editor:e,getHandleHost:function getHandleHost(e){return e.querySelector("img");},getResizeHost:function getResizeHost(e){return e;},isCentered:function isCentered(){var e=n.item.getAttribute("imageStyle");return!e||e=="full"||e=="alignCenter";},onCommit:function onCommit(t){e.execute("imageResize",{width:t});}});r.on("updateSize",function(){if(!s.hasClass("image_resized")){e.editing.view.change(function(e){e.addClass("image_resized",s);});}});r.bind("isEnabled").to(t);},{priority:"low"});}},{key:"_registerSchema",value:function _registerSchema(){this.editor.model.schema.extend("image",{allowAttributes:"width"});}},{key:"_registerConverters",value:function _registerConverters(){var e=this.editor;e.conversion["for"]("downcast").add(function(e){return e.on("attribute:width:image",function(e,t,i){if(!i.consumable.consume(t.item,e.name)){return;}var n=i.writer;var o=i.mapper.toViewElement(t.item);if(t.attributeNewValue!==null){n.setStyle("width",t.attributeNewValue,o);n.addClass("image_resized",o);}else{n.removeStyle("width",o);n.removeClass("image_resized",o);}});});e.conversion["for"]("upcast").attributeToAttribute({view:{name:"figure",styles:{width:/.+/}},model:{key:"width",value:function value(e){return e.getStyle("width");}}});}}],[{key:"requires",get:function get(){return[TI];}},{key:"pluginName",get:function get(){return"ImageResize";}}]);return PI;}(bw);var SI=/*#__PURE__*/function(_w36){_inherits(SI,_w36);function SI(){_classCallCheck(this,SI);return _possibleConstructorReturn(this,_getPrototypeOf(SI).apply(this,arguments));}_createClass(SI,[{key:"refresh",value:function refresh(){var e=this.editor.model;var t=e.document;this.isEnabled=e.schema.checkAttributeInSelection(t.selection,"mention");}},{key:"execute",value:function execute(e){var t=this.editor.model;var i=t.document;var n=i.selection;var o=typeof e.mention=="string"?{id:e.mention}:e.mention;var s=o.id;var r=e.range||n.getFirstRange();var a=e.text||s;var c=NI({_text:a,id:s},o);if(e.marker.length!=1){throw new rr["b"]("mentioncommand-incorrect-marker: The marker must be a single character.",this);}if(s.charAt(0)!=e.marker){throw new rr["b"]("mentioncommand-incorrect-id: The item id must start with the marker character.",this);}t.change(function(e){var i=Hr(n.getAttributes());var o=new Map(i.entries());o.set("mention",c);t.insertContent(e.createText(a,o),r);t.insertContent(e.createText(" ",i),r.start.getShiftedBy(a.length));});}}]);return SI;}(_w);var II=/*#__PURE__*/function(_bw96){_inherits(II,_bw96);function II(){_classCallCheck(this,II);return _possibleConstructorReturn(this,_getPrototypeOf(II).apply(this,arguments));}_createClass(II,[{key:"init",value:function init(){var e=this.editor;var t=e.model;var i=t.document;t.schema.extend("$text",{allowAttributes:"mention"});e.conversion["for"]("upcast").elementToAttribute({view:{name:"span",key:"data-mention",classes:"mention"},model:{key:"mention",value:OI}});e.conversion["for"]("downcast").attributeToElement({model:"mention",view:LI});e.conversion["for"]("downcast").add(RI);i.registerPostFixer(function(e){return jI(e,i,t.schema);});i.registerPostFixer(function(e){return BI(e,i);});i.registerPostFixer(function(e){return zI(e,i);});e.commands.add("mention",new SI(e));}}],[{key:"pluginName",get:function get(){return"MentionEditing";}}]);return II;}(bw);function NI(e,t){return Object.assign({_uid:ir()},e,t||{});}function OI(e,t){var i=e.getAttribute("data-mention");var n=e.getChild(0);if(!n){return;}var o={id:i,_text:n.data};return NI(o,t);}function RI(e){e.on("attribute:mention",function(e,t,i){var n=t.attributeNewValue;if(!t.item.is("textProxy")||!n){return;}var o=t.range.start;var s=o.textNode||o.nodeAfter;if(s.data!=n._text){i.consumable.consume(t.item,e.name);}},{priority:"highest"});}function LI(e,t){if(!e){return;}var i={"class":"mention","data-mention":e.id};var n={id:e._uid,priority:20};return t.createAttributeElement("span",i,n);}function zI(e,t){var i=t.selection;var n=i.focus;if(i.isCollapsed&&i.hasAttribute("mention")&&DI(n)){e.removeSelectionAttribute("mention");return true;}}function DI(e){var t=e.isAtStart;var i=e.nodeBefore&&e.nodeBefore.is("text");return i||t;}function jI(e,t,i){var n=t.differ.getChanges();var o=false;var _iteratorNormalCompletion424=true;var _didIteratorError424=false;var _iteratorError424=undefined;try{for(var _iterator424=n[Symbol.iterator](),_step424;!(_iteratorNormalCompletion424=(_step424=_iterator424.next()).done);_iteratorNormalCompletion424=true){var _t313=_step424.value;var _n197=_t313.position;if(_t313.name=="$text"){var _t314=_n197.textNode&&_n197.textNode.nextSibling;o=FI(_n197.textNode,e)||o;o=FI(_t314,e)||o;o=FI(_n197.nodeBefore,e)||o;o=FI(_n197.nodeAfter,e)||o;}if(_t313.name!="$text"&&_t313.type=="insert"){var _t315=_n197.nodeAfter;var _iteratorNormalCompletion425=true;var _didIteratorError425=false;var _iteratorError425=undefined;try{for(var _iterator425=e.createRangeIn(_t315).getItems()[Symbol.iterator](),_step425;!(_iteratorNormalCompletion425=(_step425=_iterator425.next()).done);_iteratorNormalCompletion425=true){var _i334=_step425.value;o=FI(_i334,e)||o;}}catch(err){_didIteratorError425=true;_iteratorError425=err;}finally{try{if(!_iteratorNormalCompletion425&&_iterator425["return"]!=null){_iterator425["return"]();}}finally{if(_didIteratorError425){throw _iteratorError425;}}}}if(_t313.type=="insert"&&i.isInline(_t313.name)){var _t316=_n197.nodeAfter&&_n197.nodeAfter.nextSibling;o=FI(_n197.nodeBefore,e)||o;o=FI(_t316,e)||o;}}}catch(err){_didIteratorError424=true;_iteratorError424=err;}finally{try{if(!_iteratorNormalCompletion424&&_iterator424["return"]!=null){_iterator424["return"]();}}finally{if(_didIteratorError424){throw _iteratorError424;}}}return o;}function BI(e,t){var i=t.differ.getChanges();var n=false;var _iteratorNormalCompletion426=true;var _didIteratorError426=false;var _iteratorError426=undefined;try{for(var _iterator426=i[Symbol.iterator](),_step426;!(_iteratorNormalCompletion426=(_step426=_iterator426.next()).done);_iteratorNormalCompletion426=true){var _t317=_step426.value;if(_t317.type==="attribute"&&_t317.attributeKey!="mention"){var _i335=_t317.range.start.nodeBefore;var _o111=_t317.range.end.nodeAfter;for(var _i336=0,_arr4=[_i335,_o111];_i336<_arr4.length;_i336++){var _s81=_arr4[_i336];if(VI(_s81)&&_s81.getAttribute(_t317.attributeKey)!=_t317.attributeNewValue){e.setAttribute(_t317.attributeKey,_t317.attributeNewValue,_s81);n=true;}}}}}catch(err){_didIteratorError426=true;_iteratorError426=err;}finally{try{if(!_iteratorNormalCompletion426&&_iterator426["return"]!=null){_iterator426["return"]();}}finally{if(_didIteratorError426){throw _iteratorError426;}}}return n;}function VI(e){if(!e||!(e.is("text")||e.is("textProxy"))||!e.hasAttribute("mention")){return false;}var t=e.data;var i=e.getAttribute("mention");var n=i._text;return t!=n;}function FI(e,t){if(VI(e)){t.removeAttribute("mention",e);return true;}return false;}var HI=/*#__PURE__*/function(){function HI(e,t){var _this293=this;_classCallCheck(this,HI);this.model=e;this.testCallback=t;this.hasMatch=false;this.set("isEnabled",true);this.on("change:isEnabled",function(){if(_this293.isEnabled){_this293._startListening();}else{_this293.stopListening(e.document.selection);_this293.stopListening(e.document);}});this._startListening();}_createClass(HI,[{key:"_startListening",value:function _startListening(){var _this294=this;var e=this.model;var t=e.document;this.listenTo(t.selection,"change:range",function(e,_ref89){var i=_ref89.directChange;if(!i){return;}if(!t.selection.isCollapsed){if(_this294.hasMatch){_this294.fire("unmatched");_this294.hasMatch=false;}return;}_this294._evaluateTextBeforeSelection("selection");});this.listenTo(t,"change:data",function(e,t){if(t.type=="transparent"){return;}_this294._evaluateTextBeforeSelection("data",{batch:t});});}},{key:"_evaluateTextBeforeSelection",value:function _evaluateTextBeforeSelection(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var i=this.model;var n=i.document;var o=n.selection;var s=i.createRange(i.createPositionAt(o.focus.parent,0),o.focus);var _Bw2=Bw(s,i),r=_Bw2.text,a=_Bw2.range;var c=this.testCallback(r);if(!c&&this.hasMatch){this.fire("unmatched");}this.hasMatch=!!c;if(c){var _i337=Object.assign(t,{text:r,range:a});if(_typeof(c)=="object"){Object.assign(_i337,c);}this.fire("matched:".concat(e),_i337);}}}]);return HI;}();kr(HI,Jc);var WI=i(111);var UI=/*#__PURE__*/function(_Ub){_inherits(UI,_Ub);function UI(e){var _this295;_classCallCheck(this,UI);_this295=_possibleConstructorReturn(this,_getPrototypeOf(UI).call(this,e));_this295.extendTemplate({attributes:{"class":["ck-mentions"],tabindex:"-1"}});return _this295;}_createClass(UI,[{key:"selectFirst",value:function selectFirst(){this.select(0);}},{key:"selectNext",value:function selectNext(){var e=this.selected;var t=this.items.getIndex(e);this.select(t+1);}},{key:"selectPrevious",value:function selectPrevious(){var e=this.selected;var t=this.items.getIndex(e);this.select(t-1);}},{key:"select",value:function select(e){var t=0;if(e>0&&e<this.items.length){t=e;}else if(e<0){t=this.items.length-1;}var i=this.items.get(t);if(this.selected===i){return;}if(this.selected){this.selected.removeHighlight();}i.highlight();this.selected=i;if(!this._isItemVisibleInScrolledArea(i)){this.element.scrollTop=i.element.offsetTop;}}},{key:"executeSelected",value:function executeSelected(){this.selected.fire("execute");}},{key:"_isItemVisibleInScrolledArea",value:function _isItemVisibleInScrolledArea(e){return new kh(this.element).contains(new kh(e.element));}}]);return UI;}(Ub);var $I=/*#__PURE__*/function(_db32){_inherits($I,_db32);function $I(e,t){var _this296;_classCallCheck(this,$I);_this296=_possibleConstructorReturn(this,_getPrototypeOf($I).call(this,e));_this296.template=false;_this296.domElement=t;_this296.domElement.classList.add("ck-button");_this296.set("isOn",false);_this296.on("change:isOn",function(e,t,i){if(i){_this296.domElement.classList.add("ck-on");_this296.domElement.classList.remove("ck-off");}else{_this296.domElement.classList.add("ck-off");_this296.domElement.classList.remove("ck-on");}});_this296.listenTo(_this296.domElement,"click",function(){_this296.fire("execute");});return _this296;}_createClass($I,[{key:"render",value:function render(){_get(_getPrototypeOf($I.prototype),"render",this).call(this);this.element=this.domElement;}}]);return $I;}(db);var qI=/*#__PURE__*/function(_$b){_inherits(qI,_$b);function qI(){_classCallCheck(this,qI);return _possibleConstructorReturn(this,_getPrototypeOf(qI).apply(this,arguments));}_createClass(qI,[{key:"highlight",value:function highlight(){var e=this.children.first;e.isOn=true;}},{key:"removeHighlight",value:function removeHighlight(){var e=this.children.first;e.isOn=false;}}]);return qI;}($b);var YI=3;var GI=[Rl.arrowup,Rl.arrowdown,Rl.enter,Rl.tab,Rl.space,Rl.esc];var JI=/*#__PURE__*/function(_bw97){_inherits(JI,_bw97);_createClass(JI,null,[{key:"pluginName",get:function get(){return"MentionUI";}},{key:"requires",get:function get(){return[Ok];}}]);function JI(e){var _this297;_classCallCheck(this,JI);_this297=_possibleConstructorReturn(this,_getPrototypeOf(JI).call(this,e));_this297._mentionsView=_this297._createMentionView();_this297._mentionsConfigurations=new Map();_this297._requestFeedDebounced=uh(_this297._requestFeed,100);e.config.define("mention",{feeds:[]});return _this297;}_createClass(JI,[{key:"init",value:function init(){var _this298=this;var e=this.editor;this._balloon=e.plugins.get(Ok);e.editing.view.document.on("keydown",function(e,t){if(tN(t.keyCode)&&_this298._isUIVisible){t.preventDefault();e.stop();if(t.keyCode==Rl.arrowdown){_this298._mentionsView.selectNext();}if(t.keyCode==Rl.arrowup){_this298._mentionsView.selectPrevious();}if(t.keyCode==Rl.enter||t.keyCode==Rl.tab||t.keyCode==Rl.space){_this298._mentionsView.executeSelected();}if(t.keyCode==Rl.esc){_this298._hideUIAndRemoveMarker();}}},{priority:"highest"});Jb({emitter:this._mentionsView,activator:function activator(){return _this298._isUIVisible;},contextElements:[this._balloon.view.element],callback:function callback(){return _this298._hideUIAndRemoveMarker();}});var t=e.config.get("mention.feeds");var _iteratorNormalCompletion427=true;var _didIteratorError427=false;var _iteratorError427=undefined;try{for(var _iterator427=t[Symbol.iterator](),_step427;!(_iteratorNormalCompletion427=(_step427=_iterator427.next()).done);_iteratorNormalCompletion427=true){var _e367=_step427.value;var _t318=_e367.feed;var _i338=_e367.marker;if(!nN(_i338)){throw new rr["b"]("mentionconfig-incorrect-marker: The marker must be provided and it must be a single character.",null);}var _n198=_e367.minimumCharacters||0;var _o112=typeof _t318=="function"?_t318.bind(this.editor):eN(_t318);var _s82=this._setupTextWatcherForFeed(_i338,_n198);var _r54=_e367.itemRenderer;var _a34={watcher:_s82,marker:_i338,feedCallback:_o112,itemRenderer:_r54};this._mentionsConfigurations.set(_i338,_a34);}}catch(err){_didIteratorError427=true;_iteratorError427=err;}finally{try{if(!_iteratorNormalCompletion427&&_iterator427["return"]!=null){_iterator427["return"]();}}finally{if(_didIteratorError427){throw _iteratorError427;}}}this.on("requestFeed:response",function(e,t){return _this298._handleFeedResponse(t);});this.on("requestFeed:error",function(){return _this298._hideUIAndRemoveMarker();});}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(JI.prototype),"destroy",this).call(this);this._mentionsView.destroy();}},{key:"_createMentionView",value:function _createMentionView(){var _this299=this;var e=this.editor.locale;var t=new UI(e);this._items=new yr();t.items.bindTo(this._items).using(function(i){var n=i.item,o=i.marker;var s=new qI(e);var r=_this299._renderItem(n,o);r.delegate("execute").to(s);s.children.add(r);s.item=n;s.marker=o;s.on("execute",function(){t.fire("execute",{item:n,marker:o});});return s;});t.on("execute",function(e,t){var i=_this299.editor;var n=i.model;var o=t.item;var s=t.marker;var r=i.model.markers.get("mention");var a=n.createPositionAt(n.document.selection.focus);var c=n.createPositionAt(r.getStart());var l=n.createRange(c,a);_this299._hideUIAndRemoveMarker();i.execute("mention",{mention:o,text:o.text,marker:s,range:l});i.editing.view.focus();});return t;}},{key:"_getItemRenderer",value:function _getItemRenderer(e){var _this$_mentionsConfig=this._mentionsConfigurations.get(e),t=_this$_mentionsConfig.itemRenderer;return t;}},{key:"_requestFeed",value:function _requestFeed(e,t){var _this300=this;this._lastRequested=t;var _this$_mentionsConfig2=this._mentionsConfigurations.get(e),i=_this$_mentionsConfig2.feedCallback;var n=i(t);var o=n instanceof Promise;if(!o){this.fire("requestFeed:response",{feed:n,marker:e,feedText:t});return;}n.then(function(i){if(_this300._lastRequested==t){_this300.fire("requestFeed:response",{feed:i,marker:e,feedText:t});}else{_this300.fire("requestFeed:discarded",{feed:i,marker:e,feedText:t});}})["catch"](function(e){_this300.fire("requestFeed:error",{error:e});console.warn(Object(rr["a"])("mention-feed-callback-error: Could not obtain mention autocomplete feed."));});}},{key:"_setupTextWatcherForFeed",value:function _setupTextWatcherForFeed(e,t){var _this301=this;var i=this.editor;var n=new HI(i.model,QI(e,t));n.on("matched",function(t,n){var o=i.model.document.selection;var s=o.focus;if(iN(s)){_this301._hideUIAndRemoveMarker();return;}var r=ZI(e,n.text);var a=e.length+r.length;var c=s.getShiftedBy(-a);var l=s.getShiftedBy(-r.length);var d=i.model.createRange(c,l);if(oN(i)){var _e368=i.model.markers.get("mention");i.model.change(function(t){t.updateMarker(_e368,{range:d});});}else{i.model.change(function(e){e.addMarker("mention",{range:d,usingOperation:false,affectsData:false});});}_this301._requestFeedDebounced(e,r);});n.on("unmatched",function(){_this301._hideUIAndRemoveMarker();});return n;}},{key:"_handleFeedResponse",value:function _handleFeedResponse(e){var t=e.feed,i=e.marker;if(!oN(this.editor)){return;}this._items.clear();var _iteratorNormalCompletion428=true;var _didIteratorError428=false;var _iteratorError428=undefined;try{for(var _iterator428=t[Symbol.iterator](),_step428;!(_iteratorNormalCompletion428=(_step428=_iterator428.next()).done);_iteratorNormalCompletion428=true){var _e369=_step428.value;var _t319=_typeof(_e369)!="object"?{id:_e369,text:_e369}:_e369;this._items.add({item:_t319,marker:i});}}catch(err){_didIteratorError428=true;_iteratorError428=err;}finally{try{if(!_iteratorNormalCompletion428&&_iterator428["return"]!=null){_iterator428["return"]();}}finally{if(_didIteratorError428){throw _iteratorError428;}}}var n=this.editor.model.markers.get("mention");if(this._items.length){this._showOrUpdateUI(n);}else{this._hideUIAndRemoveMarker();}}},{key:"_showOrUpdateUI",value:function _showOrUpdateUI(e){if(this._isUIVisible){this._balloon.updatePosition(this._getBalloonPanelPositionData(e,this._mentionsView.position));}else{this._balloon.add({view:this._mentionsView,position:this._getBalloonPanelPositionData(e,this._mentionsView.position),withArrow:false,singleViewMode:true});}this._mentionsView.position=this._balloon.view.position;this._mentionsView.selectFirst();}},{key:"_hideUIAndRemoveMarker",value:function _hideUIAndRemoveMarker(){if(this._balloon.hasView(this._mentionsView)){this._balloon.remove(this._mentionsView);}if(oN(this.editor)){this.editor.model.change(function(e){return e.removeMarker("mention");});}this._mentionsView.position=undefined;}},{key:"_renderItem",value:function _renderItem(e,t){var i=this.editor;var n;var o=e.id;var s=this._getItemRenderer(t);if(s){var _t320=s(e);if(typeof _t320!="string"){n=new $I(i.locale,_t320);}else{o=_t320;}}if(!n){var _e370=new Vb(i.locale);_e370.label=o;_e370.withText=true;n=_e370;}return n;}},{key:"_getBalloonPanelPositionData",value:function _getBalloonPanelPositionData(e,t){var _this302=this;var i=this.editor;var n=i.editing;var o=n.view.domConverter;var s=n.mapper;return{target:function target(){var t=e.getRange();if(t.start.root.rootName=="$graveyard"){t=i.model.document.selection.getFirstRange();}var n=s.toViewRange(t);var r=kh.getDomRangeRects(o.viewRangeToDom(n));return r.pop();},limiter:function limiter(){var e=_this302.editor.editing.view;var t=e.document;var i=t.selection.editableElement;if(i){return e.domConverter.mapViewToDom(i.root);}return null;},positions:XI(t)};}},{key:"_isUIVisible",get:function get(){return this._balloon.visibleView===this._mentionsView;}}]);return JI;}(bw);function XI(e){var t={caret_se:function caret_se(e){return{top:e.bottom+YI,left:e.right,name:"caret_se"};},caret_ne:function caret_ne(e,t){return{top:e.top-t.height-YI,left:e.right,name:"caret_ne"};},caret_sw:function caret_sw(e,t){return{top:e.bottom+YI,left:e.right-t.width,name:"caret_sw"};},caret_nw:function caret_nw(e,t){return{top:e.top-t.height-YI,left:e.right-t.width,name:"caret_nw"};}};if(t.hasOwnProperty(e)){return[t[e]];}return[t.caret_se,t.caret_sw,t.caret_ne,t.caret_nw];}function KI(e,t){var i=t==0?"*":"{".concat(t,",}");var n=Cl.features.isRegExpUnicodePropertySupported?"\\p{Ps}\\p{Pi}\"'":"\\(\\[{\"'";var o=Cl.features.isRegExpUnicodePropertySupported?"\\p{L}\\p{N}":"a-zA-ZÀ-ž0-9";var s="(?:^|[ ".concat(n,"])([").concat(e,"])([_").concat(o,"]").concat(i,")$");return new RegExp(s,"u");}function QI(e,t){var i=KI(e,t);return function(e){return i.test(e);};}function ZI(e,t){var i=KI(e,0);var n=t.match(i);return n[2];}function eN(e){return function(t){var i=e.filter(function(e){var i=typeof e=="string"?e:String(e.id);return i.toLowerCase().includes(t.toLowerCase());}).slice(0,10);return i;};}function tN(e){return GI.includes(e);}function iN(e){var t=e.textNode&&e.textNode.hasAttribute("mention");var i=e.nodeBefore;return t||i&&i.is("text")&&i.hasAttribute("mention");}function nN(e){return e&&e.length==1;}function oN(e){return e.model.markers.has("mention");}var sN=i(113);var rN=/*#__PURE__*/function(_bw98){_inherits(rN,_bw98);function rN(){_classCallCheck(this,rN);return _possibleConstructorReturn(this,_getPrototypeOf(rN).apply(this,arguments));}_createClass(rN,[{key:"toMentionAttribute",value:function toMentionAttribute(e,t){return OI(e,t);}}],[{key:"pluginName",get:function get(){return"Mention";}},{key:"requires",get:function get(){return[II,JI];}}]);return rN;}(bw);var aN=/*#__PURE__*/function(_bw99){_inherits(aN,_bw99);function aN(){_classCallCheck(this,aN);return _possibleConstructorReturn(this,_getPrototypeOf(aN).apply(this,arguments));}_createClass(aN,[{key:"afterInit",value:function afterInit(){var e=this.editor;var t=e.t;var i=e.plugins.get(wy);i.register("mediaEmbed",{ariaLabel:t("b"),items:e.config.get("mediaEmbed.toolbar")||[],getRelatedElement:_T});}}],[{key:"requires",get:function get(){return[wy];}},{key:"pluginName",get:function get(){return"MediaEmbedToolbar";}}]);return aN;}(bw);var cN="subscript";var lN=/*#__PURE__*/function(_bw100){_inherits(lN,_bw100);function lN(){_classCallCheck(this,lN);return _possibleConstructorReturn(this,_getPrototypeOf(lN).apply(this,arguments));}_createClass(lN,[{key:"init",value:function init(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:cN});e.model.schema.setAttributeProperties(cN,{isFormatting:true,copyOnEnter:true});e.conversion.attributeToElement({model:cN,view:"sub",upcastAlso:[{styles:{"vertical-align":"sub"}}]});e.commands.add(cN,new Zw(e,cN));}}],[{key:"pluginName",get:function get(){return"SubscriptEditing";}}]);return lN;}(bw);var dN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M7.03 10.349l3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82zm8.147 7.829h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309z"/></svg>';var uN="subscript";var hN=/*#__PURE__*/function(_bw101){_inherits(hN,_bw101);function hN(){_classCallCheck(this,hN);return _possibleConstructorReturn(this,_getPrototypeOf(hN).apply(this,arguments));}_createClass(hN,[{key:"init",value:function init(){var _this303=this;var e=this.editor;var t=e.t;e.ui.componentFactory.add(uN,function(i){var n=e.commands.get(uN);var o=new Vb(i);o.set({label:t("ae"),icon:dN,tooltip:true,isToggleable:true});o.bind("isOn","isEnabled").to(n,"value","isEnabled");_this303.listenTo(o,"execute",function(){e.execute(uN);e.editing.view.focus();});return o;});}}]);return hN;}(bw);var fN=/*#__PURE__*/function(_bw102){_inherits(fN,_bw102);function fN(){_classCallCheck(this,fN);return _possibleConstructorReturn(this,_getPrototypeOf(fN).apply(this,arguments));}_createClass(fN,null,[{key:"requires",get:function get(){return[lN,hN];}},{key:"pluginName",get:function get(){return"Subscript";}}]);return fN;}(bw);var mN="superscript";var gN=/*#__PURE__*/function(_bw103){_inherits(gN,_bw103);function gN(){_classCallCheck(this,gN);return _possibleConstructorReturn(this,_getPrototypeOf(gN).apply(this,arguments));}_createClass(gN,[{key:"init",value:function init(){var e=this.editor;e.model.schema.extend("$text",{allowAttributes:mN});e.model.schema.setAttributeProperties(mN,{isFormatting:true,copyOnEnter:true});e.conversion.attributeToElement({model:mN,view:"sup",upcastAlso:[{styles:{"vertical-align":"super"}}]});e.commands.add(mN,new Zw(e,mN));}}],[{key:"pluginName",get:function get(){return"SuperscriptEditing";}}]);return gN;}(bw);var pN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M15.677 8.678h2.549c.254 0 .447.05.58.152a.49.49 0 0 1 .201.413.54.54 0 0 1-.159.393c-.105.108-.266.162-.48.162h-3.594c-.245 0-.435-.066-.572-.197a.621.621 0 0 1-.205-.463c0-.114.044-.265.132-.453a1.62 1.62 0 0 1 .288-.444c.433-.436.824-.81 1.172-1.122.348-.312.597-.517.747-.615.267-.183.49-.368.667-.553.177-.185.312-.375.405-.57.093-.194.139-.384.139-.57a1.008 1.008 0 0 0-.554-.917 1.197 1.197 0 0 0-.56-.133c-.426 0-.761.182-1.005.546a2.332 2.332 0 0 0-.164.39 1.609 1.609 0 0 1-.258.488c-.096.114-.237.17-.423.17a.558.558 0 0 1-.405-.156.568.568 0 0 1-.161-.427c0-.218.05-.446.151-.683.101-.238.252-.453.452-.646s.454-.349.762-.467a2.998 2.998 0 0 1 1.081-.178c.498 0 .923.076 1.274.228a1.916 1.916 0 0 1 1.004 1.032 1.984 1.984 0 0 1-.156 1.794c-.2.32-.405.572-.613.754-.208.182-.558.468-1.048.857-.49.39-.826.691-1.008.906a2.703 2.703 0 0 0-.24.309zM7.03 10.349l3.818-3.819a.8.8 0 1 1 1.132 1.132L8.16 11.48l3.819 3.818a.8.8 0 1 1-1.132 1.132L7.03 12.61l-3.818 3.82a.8.8 0 1 1-1.132-1.132L5.9 11.48 2.08 7.662A.8.8 0 1 1 3.212 6.53l3.818 3.82z"/></svg>';var bN="superscript";var wN=/*#__PURE__*/function(_bw104){_inherits(wN,_bw104);function wN(){_classCallCheck(this,wN);return _possibleConstructorReturn(this,_getPrototypeOf(wN).apply(this,arguments));}_createClass(wN,[{key:"init",value:function init(){var _this304=this;var e=this.editor;var t=e.t;e.ui.componentFactory.add(bN,function(i){var n=e.commands.get(bN);var o=new Vb(i);o.set({label:t("af"),icon:pN,tooltip:true,isToggleable:true});o.bind("isOn","isEnabled").to(n,"value","isEnabled");_this304.listenTo(o,"execute",function(){e.execute(bN);e.editing.view.focus();});return o;});}}]);return wN;}(bw);var _N=/*#__PURE__*/function(_bw105){_inherits(_N,_bw105);function _N(){_classCallCheck(this,_N);return _possibleConstructorReturn(this,_getPrototypeOf(_N).apply(this,arguments));}_createClass(_N,null,[{key:"requires",get:function get(){return[gN,wN];}},{key:"pluginName",get:function get(){return"Superscript";}}]);return _N;}(bw);var vN=i(115);var kN=/*#__PURE__*/function(_db33){_inherits(kN,_db33);function kN(e,t){var _this305;_classCallCheck(this,kN);_this305=_possibleConstructorReturn(this,_getPrototypeOf(kN).call(this,e));var i="ck-labeled-view-".concat(ir());var n="ck-labeled-view-status-".concat(ir());_this305.view=t(_assertThisInitialized(_this305),i,n);_this305.set("label");_this305.set("isEnabled",true);_this305.set("errorText",null);_this305.set("infoText",null);_this305.set("class");_this305.labelView=_this305._createLabelView(i);_this305.statusView=_this305._createStatusView(n);_this305.bind("_statusText").to(_assertThisInitialized(_this305),"errorText",_assertThisInitialized(_this305),"infoText",function(e,t){return e||t;});var o=_this305.bindTemplate;_this305.setTemplate({tag:"div",attributes:{"class":["ck","ck-labeled-view",o.to("class"),o["if"]("isEnabled","ck-disabled",function(e){return!e;})]},children:[_this305.labelView,_this305.view,_this305.statusView]});return _this305;}_createClass(kN,[{key:"_createLabelView",value:function _createLabelView(e){var t=new h_(this.locale);t["for"]=e;t.bind("text").to(this,"label");return t;}},{key:"_createStatusView",value:function _createStatusView(e){var t=new db(this.locale);var i=this.bindTemplate;t.setTemplate({tag:"div",attributes:{"class":["ck","ck-labeled-view__status",i["if"]("errorText","ck-labeled-view__status_error"),i["if"]("_statusText","ck-hidden",function(e){return!e;})],id:e,role:i["if"]("errorText","alert")},children:[{text:i.to("_statusText")}]});return t;}},{key:"focus",value:function focus(){this.view.focus();}}]);return kN;}(db);function yN(e,t,i){var n=new mk(e.locale);n.set({id:t,ariaDescribedById:i});n.bind("isReadOnly").to(e,"isEnabled",function(e){return!e;});n.bind("hasError").to(e,"errorText",function(e){return!!e;});n.on("input",function(){e.errorText=null;});return n;}function xN(e,t,i){var n=Qb(e.locale);n.set({id:t,ariaDescribedById:i});n.bind("isEnabled").to(e);return n;}var AN=i(117);var CN=/*#__PURE__*/function(_db34){_inherits(CN,_db34);function CN(e,t){var _this306;_classCallCheck(this,CN);_this306=_possibleConstructorReturn(this,_getPrototypeOf(CN).call(this,e));var i=_this306.bindTemplate;_this306.set("value","");_this306.set("id");_this306.set("isReadOnly",false);_this306.set("hasError",false);_this306.set("ariaDescribedById");_this306.options=t;_this306._dropdownView=_this306._createDropdownView(e);_this306._inputView=_this306._createInputTextView(e);_this306.setTemplate({tag:"div",attributes:{"class":["ck","ck-input-color",i["if"]("hasError","ck-error")],id:i.to("id"),"aria-invalid":i["if"]("hasError",true),"aria-describedby":i.to("ariaDescribedById")},children:[_this306._inputView,_this306._dropdownView]});return _this306;}_createClass(CN,[{key:"focus",value:function focus(){this._inputView.focus();}},{key:"_createDropdownView",value:function _createDropdownView(){var e=this.locale;var t=this.bindTemplate;var i=this._createColorGrid(e);var n=Qb(e);var o=new db();var s=this._createRemoveColorButton(e);o.setTemplate({tag:"span",attributes:{"class":["ck","ck-input-color__button__preview"],style:{backgroundColor:t.to("value")}},children:[{tag:"span",attributes:{"class":["ck","ck-input-color__button__preview__no-color-indicator",t["if"]("value","ck-hidden",function(e){return e!="";})]}}]});n.buttonView.extendTemplate({attributes:{"class":"ck-input-color__button"}});n.buttonView.children.add(o);n.panelPosition=e.uiLanguageDirection==="rtl"?"se":"sw";n.panelView.children.add(s);n.panelView.children.add(i);n.bind("isEnabled").to(this,"isReadOnly",function(e){return!e;});return n;}},{key:"_createInputTextView",value:function _createInputTextView(){var _this307=this;var e=this.locale;var t=new mk(e);t.bind("value").to(this);t.bind("isReadOnly").to(this);t.bind("hasError").to(this);t.on("input",function(){_this307.value=t.element.value;});t.delegate("input").to(this);return t;}},{key:"_createRemoveColorButton",value:function _createRemoveColorButton(){var _this308=this;var e=this.locale;var t=e.t;var i=new Vb(e);i["class"]="ck-input-color__remove-color";i.withText=true;i.icon=m_;i.label=t("bw");i.on("execute",function(){_this308.value="";_this308._dropdownView.isOpen=false;_this308.fire("input");});return i;}},{key:"_createColorGrid",value:function _createColorGrid(e){var _this309=this;var t=new d_(e,{colorDefinitions:this.options.colorDefinitions,columns:this.options.columns});t.on("execute",function(e,t){_this309.value=t.value;_this309._dropdownView.isOpen=false;_this309.fire("input");});t.bind("selectedColor").to(this,"value");return t;}}]);return CN;}(db);var TN=Ak.defaultPositions;var MN=[TN.northArrowSouth,TN.northArrowSouthWest,TN.northArrowSouthEast,TN.southArrowNorth,TN.southArrowNorthWest,TN.southArrowNorthEast];var EN=function EN(e){return e==="";};function PN(e,t){var i=e.plugins.get("ContextualBalloon");if(lE(e.editing.view.document.selection)){var _n199;if(t==="cell"){_n199=IN(e);}else{_n199=SN(e);}i.updatePosition(_n199);}}function SN(e){var t=e.model.document.selection.getFirstPosition();var i=JM("table",t);var n=e.editing.mapper.toViewElement(i);return{target:e.editing.view.domConverter.viewToDom(n),positions:MN};}function IN(e){var t=UN(e.model.document.selection.getFirstPosition());var i=e.editing.mapper.toViewElement(t);return{target:e.editing.view.domConverter.viewToDom(i),positions:MN};}function NN(e){return{none:e("cv"),solid:e("cw"),dotted:e("cx"),dashed:e("cy"),"double":e("cz"),groove:e("da"),ridge:e("db"),inset:e("dc"),outset:e("dd")};}function ON(e){return e("de");}function RN(e){return e("df");}function LN(e){e=e.trim();return EN(e)||Ox(e);}function zN(e){e=e.trim();return EN(e)||HN(e)||Dx(e)||Bx(e);}function DN(e){e=e.trim();return EN(e)||HN(e)||Dx(e);}function jN(e){var t=new yr();var i=NN(e.t);var _loop14=function _loop14(_n200){var o={type:"button",model:new N_({_borderStyleValue:_n200==="none"?"":_n200,label:i[_n200],withText:true})};if(_n200==="none"){o.model.bind("isOn").to(e,"borderStyle",function(e){return!e;});}else{o.model.bind("isOn").to(e,"borderStyle",function(e){return e===_n200;});}t.add(o);};for(var _n200 in i){_loop14(_n200);}return t;}function BN(_ref90){var e=_ref90.view,t=_ref90.icons,i=_ref90.toolbar,n=_ref90.labels,o=_ref90.propertyName,s=_ref90.nameToValue;var _loop15=function _loop15(_r55){var a=new Vb(e.locale);a.set({label:n[_r55],icon:t[_r55]});a.bind("isOn").to(e,o,function(e){return e===s(_r55);});a.on("execute",function(){e[o]=s(_r55);});i.items.add(a);};for(var _r55 in n){_loop15(_r55);}}var VN=[{color:"hsl(0, 0%, 0%)",label:"Black"},{color:"hsl(0, 0%, 30%)",label:"Dim grey"},{color:"hsl(0, 0%, 60%)",label:"Grey"},{color:"hsl(0, 0%, 90%)",label:"Light grey"},{color:"hsl(0, 0%, 100%)",label:"White",hasBorder:true},{color:"hsl(0, 75%, 60%)",label:"Red"},{color:"hsl(30, 75%, 60%)",label:"Orange"},{color:"hsl(60, 75%, 60%)",label:"Yellow"},{color:"hsl(90, 75%, 60%)",label:"Light green"},{color:"hsl(120, 75%, 60%)",label:"Green"},{color:"hsl(150, 75%, 60%)",label:"Aquamarine"},{color:"hsl(180, 75%, 60%)",label:"Turquoise"},{color:"hsl(210, 75%, 60%)",label:"Light blue"},{color:"hsl(240, 75%, 60%)",label:"Blue"},{color:"hsl(270, 75%, 60%)",label:"Purple"}];function FN(e){return function(t,i,n){var o=new CN(t.locale,{colorDefinitions:WN(e.colorConfig),columns:e.columns});o.set({id:i,ariaDescribedById:n});o.bind("isReadOnly").to(t,"isEnabled",function(e){return!e;});o.bind("errorText").to(t);o.on("input",function(){t.errorText=null;});return o;};}function HN(e){var t=parseFloat(e);return!Number.isNaN(t)&&e===String(t);}function WN(e){return e.map(function(e){return{color:e.model,label:e.label,options:{hasBorder:e.hasBorder}};});}function UN(e){var t=e.nodeAfter&&e.nodeAfter.is("tableCell");return t?e.nodeAfter:JM("tableCell",e);}var $N=i(119);var qN=/*#__PURE__*/function(_db35){_inherits(qN,_db35);function qN(e){var _this310;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,qN);_this310=_possibleConstructorReturn(this,_getPrototypeOf(qN).call(this,e));var i=_this310.bindTemplate;_this310.set("class",t["class"]||null);_this310.children=_this310.createCollection();if(t.children){t.children.forEach(function(e){return _this310.children.add(e);});}_this310.set("_role",null);_this310.set("_ariaLabelledBy",null);if(t.labelView){_this310.set({_role:"group",_ariaLabelledBy:t.labelView.id});}_this310.setTemplate({tag:"div",attributes:{"class":["ck","ck-form__row",i.to("class")],role:i.to("_role"),"aria-labelledby":i.to("_ariaLabelledBy")},children:_this310.children});return _this310;}return qN;}(db);var YN=i(121);var GN=/*#__PURE__*/function(_db36){_inherits(GN,_db36);function GN(e){var _this311;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,GN);_this311=_possibleConstructorReturn(this,_getPrototypeOf(GN).call(this,e));var i=_this311.bindTemplate;_this311.children=_this311.createCollection();_this311.set("class",t["class"]||null);_this311.set("label",t.label||"");var n=new db(e);n.setTemplate({tag:"span",attributes:{"class":["ck","ck-form__header__label"]},children:[{text:i.to("label")}]});_this311.children.add(n);_this311.setTemplate({tag:"div",attributes:{"class":["ck","ck-form__header",i.to("class")]},children:_this311.children});return _this311;}return GN;}(db);var JN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.261 7.062l2.88 1.663a.75.75 0 0 1-.75 1.3L10.5 8.933v7.317a.75.75 0 1 1-1.5 0V8.932l-1.89 1.093a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .511-.187.752.752 0 0 1 .511.187zM15.25 4a.75.75 0 1 1 0 1.5H4.75a.75.75 0 0 1 0-1.5h10.5z"/></svg>';var XN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.75 11.875a.752.752 0 0 1 .508.184l2.883 1.666a.75.75 0 0 1-.659 1.344l-.091-.044-1.892-1.093.001 4.318a.75.75 0 1 1-1.5 0v-4.317l-1.89 1.092a.75.75 0 0 1-.75-1.3l2.879-1.663a.752.752 0 0 1 .51-.187zM15.25 9a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM9.75.375a.75.75 0 0 1 .75.75v4.318l1.89-1.093.092-.045a.75.75 0 0 1 .659 1.344l-2.883 1.667a.752.752 0 0 1-.508.184.752.752 0 0 1-.511-.187L6.359 5.65a.75.75 0 0 1 .75-1.299L9 5.442V1.125a.75.75 0 0 1 .75-.75z"/></svg>';var KN='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.239 13.938l-2.88-1.663a.75.75 0 0 1 .75-1.3L9 12.067V4.75a.75.75 0 1 1 1.5 0v7.318l1.89-1.093a.75.75 0 0 1 .75 1.3l-2.879 1.663a.752.752 0 0 1-.511.187.752.752 0 0 1-.511-.187zM4.25 17a.75.75 0 1 1 0-1.5h10.5a.75.75 0 0 1 0 1.5H4.25z"/></svg>';var QN=i(13);var ZN=i(14);var eO=i(125);var tO={left:Iw,center:Ow,right:Nw,justify:Rw,top:JN,middle:XN,bottom:KN};var iO=/*#__PURE__*/function(_db37){_inherits(iO,_db37);function iO(e,t){var _this312;_classCallCheck(this,iO);_this312=_possibleConstructorReturn(this,_getPrototypeOf(iO).call(this,e));_this312.set({borderStyle:"",borderWidth:"",borderColor:"",padding:"",backgroundColor:"",width:"",height:"",horizontalAlignment:"",verticalAlignment:""});_this312.options=t;var _this312$_createBorde=_this312._createBorderFields(),i=_this312$_createBorde.borderStyleDropdown,n=_this312$_createBorde.borderWidthInput,o=_this312$_createBorde.borderColorInput,s=_this312$_createBorde.borderRowLabel;var _this312$_createDimen=_this312._createDimensionFields(),r=_this312$_createDimen.widthInput,a=_this312$_createDimen.operatorLabel,c=_this312$_createDimen.heightInput,l=_this312$_createDimen.dimensionsLabel;var _this312$_createAlign=_this312._createAlignmentFields(),d=_this312$_createAlign.horizontalAlignmentToolbar,u=_this312$_createAlign.verticalAlignmentToolbar,h=_this312$_createAlign.alignmentLabel;_this312.focusTracker=new _p();_this312.keystrokes=new dp();_this312.children=_this312.createCollection();_this312.borderStyleDropdown=i;_this312.borderWidthInput=n;_this312.borderColorInput=o;_this312.backgroundInput=_this312._createBackgroundField();_this312.paddingInput=_this312._createPaddingField();_this312.widthInput=r;_this312.heightInput=c;_this312.horizontalAlignmentToolbar=d;_this312.verticalAlignmentToolbar=u;var _this312$_createActio=_this312._createActionButtons(),f=_this312$_createActio.saveButtonView,m=_this312$_createActio.cancelButtonView;_this312.saveButtonView=f;_this312.cancelButtonView=m;_this312._focusables=new Rp();_this312._focusCycler=new vb({focusables:_this312._focusables,focusTracker:_this312.focusTracker,keystrokeHandler:_this312.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});_this312.children.add(new GN(e,{label:_this312.t("Cell properties")}));_this312.children.add(new qN(e,{labelView:s,children:[s,i,o,n],"class":"ck-table-form__border-row"}));_this312.children.add(new qN(e,{children:[_this312.backgroundInput]}));_this312.children.add(new qN(e,{children:[new qN(e,{labelView:l,children:[l,r,a,c],"class":"ck-table-form__dimensions-row"}),new qN(e,{children:[_this312.paddingInput],"class":"ck-table-cell-properties-form__padding-row"})]}));_this312.children.add(new qN(e,{labelView:h,children:[h,d,u],"class":"ck-table-cell-properties-form__alignment-row"}));_this312.children.add(new qN(e,{children:[_this312.saveButtonView,_this312.cancelButtonView],"class":"ck-table-form__action-row"}));_this312.setTemplate({tag:"form",attributes:{"class":["ck","ck-form","ck-table-form","ck-table-cell-properties-form"],tabindex:"-1"},children:_this312.children});return _this312;}_createClass(iO,[{key:"render",value:function render(){var _this313=this;_get(_getPrototypeOf(iO.prototype),"render",this).call(this);gk({view:this});[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.paddingInput,this.horizontalAlignmentToolbar,this.verticalAlignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(function(e){_this313._focusables.add(e);_this313.focusTracker.add(e.element);});this.keystrokes.listenTo(this.element);}},{key:"focus",value:function focus(){this._focusCycler.focusFirst();}},{key:"_createBorderFields",value:function _createBorderFields(){var _this314=this;var e=FN({colorConfig:this.options.borderColors,columns:5});var t=this.locale;var i=this.t;var n=new h_(t);n.text=i("dj");var o=NN(i);var s=new kN(t,xN);s.set({label:i("dk"),"class":"ck-table-form__border-style"});s.view.buttonView.set({isOn:false,withText:true,tooltip:i("dk")});s.view.buttonView.bind("label").to(this,"borderStyle",function(e){return o[e?e:"none"];});s.view.on("execute",function(e){_this314.borderStyle=e.source._borderStyleValue;});ew(s.view,jN(this));var r=new kN(t,yN);r.set({label:i("dl"),"class":"ck-table-form__border-width"});r.view.bind("value").to(this,"borderWidth");r.bind("isEnabled").to(this,"borderStyle",nO);r.view.on("input",function(){_this314.borderWidth=r.view.element.value;});var a=new kN(t,e);a.set({label:i("dm"),"class":"ck-table-form__border-color"});a.view.bind("value").to(this,"borderColor");a.bind("isEnabled").to(this,"borderStyle",nO);a.view.on("input",function(){_this314.borderColor=a.view.value;});this.on("change:borderStyle",function(e,t,i){if(!nO(i)){_this314.borderColor="";_this314.borderWidth="";}});return{borderRowLabel:n,borderStyleDropdown:s,borderColorInput:a,borderWidthInput:r};}},{key:"_createBackgroundField",value:function _createBackgroundField(){var _this315=this;var e=this.locale;var t=this.t;var i=FN({colorConfig:this.options.backgroundColors,columns:5});var n=new kN(e,i);n.set({label:t("dn"),"class":"ck-table-cell-properties-form__background"});n.view.bind("value").to(this,"backgroundColor");n.view.on("input",function(){_this315.backgroundColor=n.view.value;});return n;}},{key:"_createDimensionFields",value:function _createDimensionFields(){var _this316=this;var e=this.locale;var t=this.t;var i=new h_(e);i.text=t("do");var n=new kN(e,yN);n.set({label:t("dl"),"class":"ck-table-form__dimensions-row__width"});n.view.bind("value").to(this,"width");n.view.on("input",function(){_this316.width=n.view.element.value;});var o=new db(e);o.setTemplate({tag:"span",attributes:{"class":["ck-table-form__dimension-operator"]},children:[{text:"×"}]});var s=new kN(e,yN);s.set({label:t("dp"),"class":"ck-table-form__dimensions-row__height"});s.view.bind("value").to(this,"height");s.view.on("input",function(){_this316.height=s.view.element.value;});return{dimensionsLabel:i,widthInput:n,operatorLabel:o,heightInput:s};}},{key:"_createPaddingField",value:function _createPaddingField(){var _this317=this;var e=this.locale;var t=this.t;var i=new kN(e,yN);i.set({label:t("dq"),"class":"ck-table-cell-properties-form__padding"});i.view.bind("value").to(this,"padding");i.view.on("input",function(){_this317.padding=i.view.element.value;});return i;}},{key:"_createAlignmentFields",value:function _createAlignmentFields(){var e=this.locale;var t=this.t;var i=new h_(e);i.text=t("dr");var n=new aw(e);var o=this.locale.contentLanguageDirection==="rtl";n.set({isCompact:true,ariaLabel:t("ds")});BN({view:this,icons:tO,toolbar:n,labels:this._horizontalAlignmentLabels,propertyName:"horizontalAlignment",nameToValue:function nameToValue(e){return e===(o?"right":"left")?"":e;}});var s=new aw(e);s.set({isCompact:true,ariaLabel:t("dt")});BN({view:this,icons:tO,toolbar:s,labels:this._verticalAlignmentLabels,propertyName:"verticalAlignment",nameToValue:function nameToValue(e){return e==="middle"?"":e;}});return{horizontalAlignmentToolbar:n,verticalAlignmentToolbar:s,alignmentLabel:i};}},{key:"_createActionButtons",value:function _createActionButtons(){var e=this.locale;var t=this.t;var i=new Vb(e);var n=new Vb(e);var o=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.paddingInput];i.set({label:t("dg"),icon:pk,"class":"ck-button-save",type:"submit",withText:true});i.bind("isEnabled").toMany(o,"errorText",function(){for(var _len24=arguments.length,e=new Array(_len24),_key24=0;_key24<_len24;_key24++){e[_key24]=arguments[_key24];}return e.every(function(e){return!e;});});n.set({label:t("dh"),icon:bk,"class":"ck-button-cancel",type:"cancel",withText:true});n.delegate("execute").to(this,"cancel");return{saveButtonView:i,cancelButtonView:n};}},{key:"_horizontalAlignmentLabels",get:function get(){var e=this.locale;var t=this.t;var i=t("du");var n=t("dv");var o=t("dw");var s=t("dx");if(e.uiLanguageDirection==="rtl"){return{right:o,center:n,left:i,justify:s};}else{return{left:i,center:n,right:o,justify:s};}}},{key:"_verticalAlignmentLabels",get:function get(){var e=this.t;return{top:e("dy"),middle:e("dz"),bottom:e("ea")};}}]);return iO;}(db);function nO(e){return!!e;}var oO='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.105 18l-.17 1H2.5A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1h15A1.5 1.5 0 0 1 19 2.5v9.975l-.85-.124-.15-.302V8h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5h3.105zM2 12h5V8H2v4zm10-4H8v4h4V8zM2 2v5h5V2H2zm0 16h5v-5H2v5zM13 7h5V2h-5v5zM8 2v5h4V2H8z" opacity=".6"/><path d="M15.5 11.5l1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM13 6a1 1 0 0 1 1 1v3.172a2.047 2.047 0 0 0-.293.443l-.858 1.736-1.916.28-.151.027A1.976 1.976 0 0 0 9.315 14H7a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h6zm-1 2H8v4h4V8z"/></svg>';var sO=500;var rO=/*#__PURE__*/function(_bw106){_inherits(rO,_bw106);_createClass(rO,null,[{key:"requires",get:function get(){return[Ok];}},{key:"pluginName",get:function get(){return"TableCellPropertiesUI";}}]);function rO(e){var _this318;_classCallCheck(this,rO);_this318=_possibleConstructorReturn(this,_getPrototypeOf(rO).call(this,e));e.config.define("table.tableCellProperties",{borderColors:VN,backgroundColors:VN});return _this318;}_createClass(rO,[{key:"init",value:function init(){var _this319=this;var e=this.editor;var t=e.t;this._balloon=e.plugins.get(Ok);this.view=this._createPropertiesView();this._undoStepBatch=null;e.ui.componentFactory.add("tableCellProperties",function(e){var i=new Vb(e);i.set({label:t("ba"),icon:oO,tooltip:true});_this319.listenTo(i,"execute",function(){return _this319._showView();});return i;});}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(rO.prototype),"destroy",this).call(this);this.view.destroy();}},{key:"_createPropertiesView",value:function _createPropertiesView(){var _this320=this;var e=this.editor;var t=e.editing.view.document;var i=e.config.get("table.tableCellProperties");var n=US(i.borderColors);var o=WS(e.locale,n);var s=US(i.backgroundColors);var r=WS(e.locale,s);var a=new iO(e.locale,{borderColors:o,backgroundColors:r});var c=e.t;a.render();this.listenTo(a,"submit",function(){_this320._hideView();});this.listenTo(a,"cancel",function(){if(_this320._undoStepBatch.operations.length){e.execute("undo",_this320._undoStepBatch);}_this320._hideView();});a.keystrokes.set("Esc",function(e,t){_this320._hideView();t();});this.listenTo(e.ui,"update",function(){if(!lE(t.selection)){_this320._hideView();}else if(_this320._isViewVisible){PN(e,"cell");}});Jb({emitter:a,activator:function activator(){return _this320._isViewInBalloon;},contextElements:[this._balloon.view.element],callback:function callback(){return _this320._hideView();}});var l=ON(c);var d=RN(c);a.on("change:borderStyle",this._getPropertyChangeCallback("tableCellBorderStyle"));a.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:a.borderColorInput,commandName:"tableCellBorderColor",errorText:l,validator:LN}));a.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:a.borderWidthInput,commandName:"tableCellBorderWidth",errorText:d,validator:DN}));a.on("change:padding",this._getValidatedPropertyChangeCallback({viewField:a.paddingInput,commandName:"tableCellPadding",errorText:d,validator:zN}));a.on("change:width",this._getValidatedPropertyChangeCallback({viewField:a.widthInput,commandName:"tableCellWidth",errorText:d,validator:zN}));a.on("change:height",this._getValidatedPropertyChangeCallback({viewField:a.heightInput,commandName:"tableCellHeight",errorText:d,validator:zN}));a.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:a.backgroundInput,commandName:"tableCellBackgroundColor",errorText:l,validator:LN}));a.on("change:horizontalAlignment",this._getPropertyChangeCallback("tableCellHorizontalAlignment"));a.on("change:verticalAlignment",this._getPropertyChangeCallback("tableCellVerticalAlignment"));return a;}},{key:"_fillViewFormFromCommandValues",value:function _fillViewFormFromCommandValues(){var e=this.editor.commands;this.view.set({borderStyle:e.get("tableCellBorderStyle").value||"",borderColor:e.get("tableCellBorderColor").value||"",borderWidth:e.get("tableCellBorderWidth").value||"",width:e.get("tableCellWidth").value||"",height:e.get("tableCellHeight").value||"",padding:e.get("tableCellPadding").value||"",backgroundColor:e.get("tableCellBackgroundColor").value||"",horizontalAlignment:e.get("tableCellHorizontalAlignment").value||"",verticalAlignment:e.get("tableCellVerticalAlignment").value||""});}},{key:"_showView",value:function _showView(){var e=this.editor;this._balloon.add({view:this.view,position:IN(e)});this._undoStepBatch=e.model.createBatch();this._fillViewFormFromCommandValues();this.view.focus();}},{key:"_hideView",value:function _hideView(){if(!this._isViewInBalloon){return;}var e=this.editor;this.stopListening(e.ui,"update");this.view.saveButtonView.focus();this._balloon.remove(this.view);this.editor.editing.view.focus();}},{key:"_getPropertyChangeCallback",value:function _getPropertyChangeCallback(e){var _this321=this;return function(t,i,n){_this321.editor.execute(e,{value:n,batch:_this321._undoStepBatch});};}},{key:"_getValidatedPropertyChangeCallback",value:function _getValidatedPropertyChangeCallback(_ref91){var _this322=this;var e=_ref91.commandName,t=_ref91.viewField,i=_ref91.validator,n=_ref91.errorText;var o=uh(function(){t.errorText=n;},sO);return function(n,s,r){o.cancel();if(i(r)){_this322.editor.execute(e,{value:r,batch:_this322._undoStepBatch});t.errorText=null;}else{o();}};}},{key:"_isViewVisible",get:function get(){return this._balloon.visibleView===this.view;}},{key:"_isViewInBalloon",get:function get(){return this._balloon.hasView(this.view);}}]);return rO;}(bw);function aO(e){e.setNormalizer("border",cO);e.setNormalizer("border-top",lO("top"));e.setNormalizer("border-right",lO("right"));e.setNormalizer("border-bottom",lO("bottom"));e.setNormalizer("border-left",lO("left"));e.setNormalizer("border-color",dO("color"));e.setNormalizer("border-width",dO("width"));e.setNormalizer("border-style",dO("style"));e.setNormalizer("border-top-color",hO("color","top"));e.setNormalizer("border-top-style",hO("style","top"));e.setNormalizer("border-top-width",hO("width","top"));e.setNormalizer("border-right-color",hO("color","right"));e.setNormalizer("border-right-style",hO("style","right"));e.setNormalizer("border-right-width",hO("width","right"));e.setNormalizer("border-bottom-color",hO("color","bottom"));e.setNormalizer("border-bottom-style",hO("style","bottom"));e.setNormalizer("border-bottom-width",hO("width","bottom"));e.setNormalizer("border-left-color",hO("color","left"));e.setNormalizer("border-left-style",hO("style","left"));e.setNormalizer("border-left-width",hO("width","left"));e.setExtractor("border-top",fO("top"));e.setExtractor("border-right",fO("right"));e.setExtractor("border-bottom",fO("bottom"));e.setExtractor("border-left",fO("left"));e.setExtractor("border-top-color","border.color.top");e.setExtractor("border-right-color","border.color.right");e.setExtractor("border-bottom-color","border.color.bottom");e.setExtractor("border-left-color","border.color.left");e.setExtractor("border-top-width","border.width.top");e.setExtractor("border-right-width","border.width.right");e.setExtractor("border-bottom-width","border.width.bottom");e.setExtractor("border-left-width","border.width.left");e.setExtractor("border-top-style","border.style.top");e.setExtractor("border-right-style","border.style.right");e.setExtractor("border-bottom-style","border.style.bottom");e.setExtractor("border-left-style","border.style.left");e.setReducer("border-color",Jx("border-color"));e.setReducer("border-style",Jx("border-style"));e.setReducer("border-width",Jx("border-width"));e.setReducer("border-top",bO("top"));e.setReducer("border-right",bO("right"));e.setReducer("border-bottom",bO("bottom"));e.setReducer("border-left",bO("left"));e.setReducer("border",pO);e.setStyleRelation("border",["border-color","border-style","border-width","border-top","border-right","border-bottom","border-left","border-top-color","border-right-color","border-bottom-color","border-left-color","border-top-style","border-right-style","border-bottom-style","border-left-style","border-top-width","border-right-width","border-bottom-width","border-left-width"]);e.setStyleRelation("border-color",["border-top-color","border-right-color","border-bottom-color","border-left-color"]);e.setStyleRelation("border-style",["border-top-style","border-right-style","border-bottom-style","border-left-style"]);e.setStyleRelation("border-width",["border-top-width","border-right-width","border-bottom-width","border-left-width"]);e.setStyleRelation("border-top",["border-top-color","border-top-style","border-top-width"]);e.setStyleRelation("border-right",["border-right-color","border-right-style","border-right-width"]);e.setStyleRelation("border-bottom",["border-bottom-color","border-bottom-style","border-bottom-width"]);e.setStyleRelation("border-left",["border-left-color","border-left-style","border-left-width"]);}function cO(e){var _gO=gO(e),t=_gO.color,i=_gO.style,n=_gO.width;return{path:"border",value:{color:Gx(t),style:Gx(i),width:Gx(n)}};}function lO(e){return function(t){var _gO2=gO(t),i=_gO2.color,n=_gO2.style,o=_gO2.width;var s={};if(i!==undefined){s.color=_defineProperty({},e,i);}if(n!==undefined){s.style=_defineProperty({},e,n);}if(o!==undefined){s.width=_defineProperty({},e,o);}return{path:"border",value:s};};}function dO(e){return function(t){return{path:"border",value:uO(t,e)};};}function uO(e,t){return _defineProperty({},t,Gx(e));}function hO(e,t){return function(i){return{path:"border",value:_defineProperty({},e,_defineProperty({},t,i))};};}function fO(e){return function(t,i){if(i.border){return mO(i.border,e);}};}function mO(e,t){var i={};if(e.width&&e.width[t]){i.width=e.width[t];}if(e.style&&e.style[t]){i.style=e.style[t];}if(e.color&&e.color[t]){i.color=e.color[t];}return i;}function gO(e){var t={};var i=Qx(e);var _iteratorNormalCompletion429=true;var _didIteratorError429=false;var _iteratorError429=undefined;try{for(var _iterator429=i[Symbol.iterator](),_step429;!(_iteratorNormalCompletion429=(_step429=_iterator429.next()).done);_iteratorNormalCompletion429=true){var _e372=_step429.value;if(Dx(_e372)||/thin|medium|thick/.test(_e372)){t.width=_e372;}else if(Lx(_e372)){t.style=_e372;}else{t.color=_e372;}}}catch(err){_didIteratorError429=true;_iteratorError429=err;}finally{try{if(!_iteratorNormalCompletion429&&_iterator429["return"]!=null){_iterator429["return"]();}}finally{if(_didIteratorError429){throw _iteratorError429;}}}return t;}function pO(e){var t=[];t.push.apply(t,_toConsumableArray(wO(mO(e,"top"),"top")));t.push.apply(t,_toConsumableArray(wO(mO(e,"right"),"right")));t.push.apply(t,_toConsumableArray(wO(mO(e,"bottom"),"bottom")));t.push.apply(t,_toConsumableArray(wO(mO(e,"left"),"left")));return t;}function bO(e){return function(t){return wO(t,e);};}function wO(e,t){var i=[];if(e&&e.width!==undefined){i.push(e.width);}if(e&&e.style!==undefined){i.push(e.style);}if(e&&e.color!==undefined){i.push(e.color);}if(i.length){return[["border-".concat(t),i.join(" ")]];}return[];}function _O(e){e.setNormalizer("padding",Kx("padding"));e.setNormalizer("padding-top",function(e){return{path:"padding.top",value:e};});e.setNormalizer("padding-right",function(e){return{path:"padding.right",value:e};});e.setNormalizer("padding-bottom",function(e){return{path:"padding.bottom",value:e};});e.setNormalizer("padding-left",function(e){return{path:"padding.left",value:e};});e.setReducer("padding",Jx("padding"));e.setStyleRelation("padding",["padding-top","padding-right","padding-bottom","padding-left"]);}function vO(e){e.setNormalizer("background",kO);e.setNormalizer("background-color",function(e){return{path:"background.color",value:e};});e.setReducer("background",function(e){var t=[];t.push(["background-color",e.color]);return t;});}function kO(e){var t={};var i=Qx(e);var _iteratorNormalCompletion430=true;var _didIteratorError430=false;var _iteratorError430=undefined;try{for(var _iterator430=i[Symbol.iterator](),_step430;!(_iteratorNormalCompletion430=(_step430=_iterator430.next()).done);_iteratorNormalCompletion430=true){var _e373=_step430.value;if(Fx(_e373)){t.repeat=t.repeat||[];t.repeat.push(_e373);}else if(Wx(_e373)){t.position=t.position||[];t.position.push(_e373);}else if($x(_e373)){t.attachment=_e373;}else if(Ox(_e373)){t.color=_e373;}else if(Yx(_e373)){t.image=_e373;}}}catch(err){_didIteratorError430=true;_iteratorError430=err;}finally{try{if(!_iteratorNormalCompletion430&&_iterator430["return"]!=null){_iterator430["return"]();}}finally{if(_didIteratorError430){throw _iteratorError430;}}}return{path:"background",value:t};}function yO(e,t,i,n){e["for"]("upcast").attributeToAttribute({view:{styles:_defineProperty({},n,/[\s\S]+/)},model:{name:t,key:i,value:function value(e){return e.getNormalizedStyle(n);}}});}function xO(e,t){e["for"]("upcast").add(function(e){return e.on("element:"+t,function(e,t,i){var n=["border-top","border-right","border-bottom","border-left"].filter(function(e){return t.viewItem.hasStyle(e);});if(!n.length){return;}var o={styles:n};if(!i.consumable.test(t.viewItem,o)){return;}if(!t.modelRange){t=Object.assign(t,i.convertChildren(t.viewItem,t.modelCursor));}var s=_toConsumableArray(t.modelRange.getItems({shallow:true})).pop();i.consumable.consume(t.viewItem,o);i.writer.setAttribute("borderStyle",t.viewItem.getNormalizedStyle("border-style"),s);i.writer.setAttribute("borderColor",t.viewItem.getNormalizedStyle("border-color"),s);i.writer.setAttribute("borderWidth",t.viewItem.getNormalizedStyle("border-width"),s);});});}function AO(e,t,i,n){e["for"]("downcast").attributeToAttribute({model:{name:t,key:i},view:function view(e){return{key:"style",value:_defineProperty({},n,e)};}});}function CO(e,t,i){e["for"]("downcast").add(function(e){return e.on("attribute:".concat(t,":table"),function(e,t,n){var o=t.item,s=t.attributeNewValue;var r=n.mapper,a=n.writer;if(!n.consumable.consume(t.item,e.name)){return;}var c=_toConsumableArray(r.toViewElement(o).getChildren()).find(function(e){return e.is("table");});if(s){a.setStyle(i,s,c);}else{a.removeStyle(i,c);}});});}var TO=/*#__PURE__*/function(_w37){_inherits(TO,_w37);function TO(e,t){var _this323;_classCallCheck(this,TO);_this323=_possibleConstructorReturn(this,_getPrototypeOf(TO).call(this,e));_this323.attributeName=t;return _this323;}_createClass(TO,[{key:"refresh",value:function refresh(){var e=this.editor;var t=hE(e.model.document.selection);this.isEnabled=!!t.length;this.value=this._getSingleValue(t);}},{key:"execute",value:function execute(){var _this324=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=e.value,i=e.batch;var n=this.editor.model;var o=hE(n.document.selection);var s=this._getValueToSet(t);n.enqueueChange(i||"default",function(e){if(s){o.forEach(function(t){return e.setAttribute(_this324.attributeName,s,t);});}else{o.forEach(function(t){return e.removeAttribute(_this324.attributeName,t);});}});}},{key:"_getAttribute",value:function _getAttribute(e){if(!e){return;}return e.getAttribute(this.attributeName);}},{key:"_getValueToSet",value:function _getValueToSet(e){return e;}},{key:"_getSingleValue",value:function _getSingleValue(e){var _this325=this;var t=this._getAttribute(e[0]);var i=e.every(function(e){return _this325._getAttribute(e)===t;});return i?t:undefined;}}]);return TO;}(_w);var MO=/*#__PURE__*/function(_TO){_inherits(MO,_TO);function MO(e){_classCallCheck(this,MO);return _possibleConstructorReturn(this,_getPrototypeOf(MO).call(this,e,"padding"));}_createClass(MO,[{key:"_getAttribute",value:function _getAttribute(e){if(!e){return;}return QM(e.getAttribute(this.attributeName));}},{key:"_getValueToSet",value:function _getValueToSet(e){return ZM(e,"px");}}]);return MO;}(TO);var EO=/*#__PURE__*/function(_TO2){_inherits(EO,_TO2);function EO(e){_classCallCheck(this,EO);return _possibleConstructorReturn(this,_getPrototypeOf(EO).call(this,e,"width"));}_createClass(EO,[{key:"_getValueToSet",value:function _getValueToSet(e){return ZM(e,"px");}}]);return EO;}(TO);var PO=/*#__PURE__*/function(_TO3){_inherits(PO,_TO3);function PO(e){_classCallCheck(this,PO);return _possibleConstructorReturn(this,_getPrototypeOf(PO).call(this,e,"height"));}_createClass(PO,[{key:"_getValueToSet",value:function _getValueToSet(e){return ZM(e,"px");}}]);return PO;}(TO);var SO=/*#__PURE__*/function(_TO4){_inherits(SO,_TO4);function SO(e){_classCallCheck(this,SO);return _possibleConstructorReturn(this,_getPrototypeOf(SO).call(this,e,"backgroundColor"));}return SO;}(TO);var IO=/*#__PURE__*/function(_TO5){_inherits(IO,_TO5);function IO(e){_classCallCheck(this,IO);return _possibleConstructorReturn(this,_getPrototypeOf(IO).call(this,e,"verticalAlignment"));}return IO;}(TO);var NO=/*#__PURE__*/function(_TO6){_inherits(NO,_TO6);function NO(e){_classCallCheck(this,NO);return _possibleConstructorReturn(this,_getPrototypeOf(NO).call(this,e,"horizontalAlignment"));}return NO;}(TO);var OO=/*#__PURE__*/function(_TO7){_inherits(OO,_TO7);function OO(e){_classCallCheck(this,OO);return _possibleConstructorReturn(this,_getPrototypeOf(OO).call(this,e,"borderStyle"));}_createClass(OO,[{key:"_getAttribute",value:function _getAttribute(e){if(!e){return;}return QM(e.getAttribute(this.attributeName));}}]);return OO;}(TO);var RO=/*#__PURE__*/function(_TO8){_inherits(RO,_TO8);function RO(e){_classCallCheck(this,RO);return _possibleConstructorReturn(this,_getPrototypeOf(RO).call(this,e,"borderColor"));}_createClass(RO,[{key:"_getAttribute",value:function _getAttribute(e){if(!e){return;}return QM(e.getAttribute(this.attributeName));}}]);return RO;}(TO);var LO=/*#__PURE__*/function(_TO9){_inherits(LO,_TO9);function LO(e){_classCallCheck(this,LO);return _possibleConstructorReturn(this,_getPrototypeOf(LO).call(this,e,"borderWidth"));}_createClass(LO,[{key:"_getAttribute",value:function _getAttribute(e){if(!e){return;}return QM(e.getAttribute(this.attributeName));}},{key:"_getValueToSet",value:function _getValueToSet(e){return ZM(e,"px");}}]);return LO;}(TO);var zO=/^(top|bottom)$/;var DO=/*#__PURE__*/function(_bw107){_inherits(DO,_bw107);function DO(){_classCallCheck(this,DO);return _possibleConstructorReturn(this,_getPrototypeOf(DO).apply(this,arguments));}_createClass(DO,[{key:"init",value:function init(){var e=this.editor;var t=e.model.schema;var i=e.conversion;e.data.addStyleProcessorRules(aO);jO(t,i);e.commands.add("tableCellBorderStyle",new OO(e));e.commands.add("tableCellBorderColor",new RO(e));e.commands.add("tableCellBorderWidth",new LO(e));BO(t,i);e.commands.add("tableCellHorizontalAlignment",new NO(e));FO(t,i,"width","width");e.commands.add("tableCellWidth",new EO(e));FO(t,i,"height","height");e.commands.add("tableCellHeight",new PO(e));e.data.addStyleProcessorRules(_O);FO(t,i,"padding","padding");e.commands.add("tableCellPadding",new MO(e));e.data.addStyleProcessorRules(vO);FO(t,i,"backgroundColor","background-color");e.commands.add("tableCellBackgroundColor",new SO(e));VO(t,i);e.commands.add("tableCellVerticalAlignment",new IO(e));}}],[{key:"pluginName",get:function get(){return"TableCellPropertiesEditing";}},{key:"requires",get:function get(){return[AP];}}]);return DO;}(bw);function jO(e,t){e.extend("tableCell",{allowAttributes:["borderWidth","borderColor","borderStyle"]});xO(t,"td");xO(t,"th");AO(t,"tableCell","borderStyle","border-style");AO(t,"tableCell","borderColor","border-color");AO(t,"tableCell","borderWidth","border-width");}function BO(e,t){e.extend("tableCell",{allowAttributes:["horizontalAlignment"]});t.attributeToAttribute({model:{name:"tableCell",key:"horizontalAlignment",values:["right","center","justify"]},view:{right:{key:"style",value:{"text-align":"right"}},center:{key:"style",value:{"text-align":"center"}},justify:{key:"style",value:{"text-align":"justify"}}}});}function VO(e,t){e.extend("tableCell",{allowAttributes:["verticalAlignment"]});t.attributeToAttribute({model:{name:"tableCell",key:"verticalAlignment",values:["top","bottom"]},view:{top:{key:"style",value:{"vertical-align":"top"}},bottom:{key:"style",value:{"vertical-align":"bottom"}}}});t["for"]("upcast").attributeToAttribute({view:{attributes:{valign:zO}},model:{name:"tableCell",key:"verticalAlignment",value:function value(e){return e.getAttribute("valign");}}});}function FO(e,t,i,n){e.extend("tableCell",{allowAttributes:[i]});yO(t,"tableCell",i,n);AO(t,"tableCell",i,n);}var HO=/*#__PURE__*/function(_bw108){_inherits(HO,_bw108);function HO(){_classCallCheck(this,HO);return _possibleConstructorReturn(this,_getPrototypeOf(HO).apply(this,arguments));}_createClass(HO,null,[{key:"pluginName",get:function get(){return"TableCellProperties";}},{key:"requires",get:function get(){return[DO,rO];}}]);return HO;}(bw);var WO=/*#__PURE__*/function(_w38){_inherits(WO,_w38);function WO(e,t){var _this326;_classCallCheck(this,WO);_this326=_possibleConstructorReturn(this,_getPrototypeOf(WO).call(this,e));_this326.attributeName=t;return _this326;}_createClass(WO,[{key:"refresh",value:function refresh(){var e=this.editor;var t=e.model.document.selection;var i=JM("table",t.getFirstPosition());this.isEnabled=!!i;this.value=this._getValue(i);}},{key:"execute",value:function execute(){var _this327=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor.model;var i=t.document.selection;var n=e.value,o=e.batch;var s=JM("table",i.getFirstPosition());var r=this._getValueToSet(n);t.enqueueChange(o||"default",function(e){if(r){e.setAttribute(_this327.attributeName,r,s);}else{e.removeAttribute(_this327.attributeName,s);}});}},{key:"_getValue",value:function _getValue(e){if(!e){return;}return e.getAttribute(this.attributeName);}},{key:"_getValueToSet",value:function _getValueToSet(e){return e;}}]);return WO;}(_w);var UO=/*#__PURE__*/function(_WO){_inherits(UO,_WO);function UO(e){_classCallCheck(this,UO);return _possibleConstructorReturn(this,_getPrototypeOf(UO).call(this,e,"backgroundColor"));}return UO;}(WO);var $O=/*#__PURE__*/function(_WO2){_inherits($O,_WO2);function $O(e){_classCallCheck(this,$O);return _possibleConstructorReturn(this,_getPrototypeOf($O).call(this,e,"borderColor"));}_createClass($O,[{key:"_getValue",value:function _getValue(e){if(!e){return;}return QM(e.getAttribute(this.attributeName));}}]);return $O;}(WO);var qO=/*#__PURE__*/function(_WO3){_inherits(qO,_WO3);function qO(e){_classCallCheck(this,qO);return _possibleConstructorReturn(this,_getPrototypeOf(qO).call(this,e,"borderStyle"));}_createClass(qO,[{key:"_getValue",value:function _getValue(e){if(!e){return;}return QM(e.getAttribute(this.attributeName));}}]);return qO;}(WO);var YO=/*#__PURE__*/function(_WO4){_inherits(YO,_WO4);function YO(e){_classCallCheck(this,YO);return _possibleConstructorReturn(this,_getPrototypeOf(YO).call(this,e,"borderWidth"));}_createClass(YO,[{key:"_getValue",value:function _getValue(e){if(!e){return;}return QM(e.getAttribute(this.attributeName));}},{key:"_getValueToSet",value:function _getValueToSet(e){return ZM(e,"px");}}]);return YO;}(WO);var GO=/*#__PURE__*/function(_WO5){_inherits(GO,_WO5);function GO(e){_classCallCheck(this,GO);return _possibleConstructorReturn(this,_getPrototypeOf(GO).call(this,e,"width"));}_createClass(GO,[{key:"_getValueToSet",value:function _getValueToSet(e){return ZM(e,"px");}}]);return GO;}(WO);var JO=/*#__PURE__*/function(_WO6){_inherits(JO,_WO6);function JO(e){_classCallCheck(this,JO);return _possibleConstructorReturn(this,_getPrototypeOf(JO).call(this,e,"height"));}_createClass(JO,[{key:"_getValueToSet",value:function _getValueToSet(e){return ZM(e,"px");}}]);return JO;}(WO);var XO=/*#__PURE__*/function(_WO7){_inherits(XO,_WO7);function XO(e){_classCallCheck(this,XO);return _possibleConstructorReturn(this,_getPrototypeOf(XO).call(this,e,"alignment"));}return XO;}(WO);var KO=/^(left|right)$/;var QO=/*#__PURE__*/function(_bw109){_inherits(QO,_bw109);function QO(){_classCallCheck(this,QO);return _possibleConstructorReturn(this,_getPrototypeOf(QO).apply(this,arguments));}_createClass(QO,[{key:"init",value:function init(){var e=this.editor;var t=e.model.schema;var i=e.conversion;e.data.addStyleProcessorRules(aO);ZO(t,i);e.commands.add("tableBorderColor",new $O(e));e.commands.add("tableBorderStyle",new qO(e));e.commands.add("tableBorderWidth",new YO(e));eR(t,i);e.commands.add("tableAlignment",new XO(e));iR(t,i,"width","width");e.commands.add("tableWidth",new GO(e));iR(t,i,"height","height");e.commands.add("tableHeight",new JO(e));e.data.addStyleProcessorRules(vO);tR(t,i,"backgroundColor","background-color");e.commands.add("tableBackgroundColor",new UO(e));}}],[{key:"pluginName",get:function get(){return"TablePropertiesEditing";}},{key:"requires",get:function get(){return[AP];}}]);return QO;}(bw);function ZO(e,t){e.extend("table",{allowAttributes:["borderWidth","borderColor","borderStyle"]});xO(t,"table");CO(t,"borderColor","border-color");CO(t,"borderStyle","border-style");CO(t,"borderWidth","border-width");}function eR(e,t){e.extend("table",{allowAttributes:["alignment"]});t.attributeToAttribute({model:{name:"table",key:"alignment",values:["left","right"]},view:{left:{key:"style",value:{"float":"left"}},right:{key:"style",value:{"float":"right"}}},converterPriority:"high"});t["for"]("upcast").attributeToAttribute({view:{attributes:{align:KO}},model:{name:"table",key:"alignment",value:function value(e){return e.getAttribute("align");}}});}function tR(e,t,i,n){e.extend("table",{allowAttributes:[i]});yO(t,"table",i,n);CO(t,i,n);}function iR(e,t,i,n){e.extend("table",{allowAttributes:[i]});yO(t,"table",i,n);AO(t,"table",i,n);}var nR=i(127);var oR={left:ry,center:ay,right:cy};var sR=/*#__PURE__*/function(_db38){_inherits(sR,_db38);function sR(e,t){var _this328;_classCallCheck(this,sR);_this328=_possibleConstructorReturn(this,_getPrototypeOf(sR).call(this,e));_this328.set({borderStyle:"",borderWidth:"",borderColor:"",backgroundColor:"",width:"",height:"",alignment:""});_this328.options=t;var _this328$_createBorde=_this328._createBorderFields(),i=_this328$_createBorde.borderStyleDropdown,n=_this328$_createBorde.borderWidthInput,o=_this328$_createBorde.borderColorInput,s=_this328$_createBorde.borderRowLabel;var _this328$_createDimen=_this328._createDimensionFields(),r=_this328$_createDimen.widthInput,a=_this328$_createDimen.operatorLabel,c=_this328$_createDimen.heightInput,l=_this328$_createDimen.dimensionsLabel;var _this328$_createAlign=_this328._createAlignmentFields(),d=_this328$_createAlign.alignmentToolbar,u=_this328$_createAlign.alignmentLabel;_this328.focusTracker=new _p();_this328.keystrokes=new dp();_this328.children=_this328.createCollection();_this328.borderStyleDropdown=i;_this328.borderWidthInput=n;_this328.borderColorInput=o;_this328.backgroundInput=_this328._createBackgroundField();_this328.widthInput=r;_this328.heightInput=c;_this328.alignmentToolbar=d;var _this328$_createActio=_this328._createActionButtons(),h=_this328$_createActio.saveButtonView,f=_this328$_createActio.cancelButtonView;_this328.saveButtonView=h;_this328.cancelButtonView=f;_this328._focusables=new Rp();_this328._focusCycler=new vb({focusables:_this328._focusables,focusTracker:_this328.focusTracker,keystrokeHandler:_this328.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}});_this328.children.add(new GN(e,{label:_this328.t("Table properties")}));_this328.children.add(new qN(e,{labelView:s,children:[s,i,o,n],"class":"ck-table-form__border-row"}));_this328.children.add(new qN(e,{children:[_this328.backgroundInput]}));_this328.children.add(new qN(e,{children:[new qN(e,{labelView:l,children:[l,r,a,c],"class":"ck-table-form__dimensions-row"}),new qN(e,{labelView:u,children:[u,d],"class":"ck-table-properties-form__alignment-row"})]}));_this328.children.add(new qN(e,{children:[_this328.saveButtonView,_this328.cancelButtonView],"class":"ck-table-form__action-row"}));_this328.setTemplate({tag:"form",attributes:{"class":["ck","ck-form","ck-table-form","ck-table-properties-form"],tabindex:"-1"},children:_this328.children});return _this328;}_createClass(sR,[{key:"render",value:function render(){var _this329=this;_get(_getPrototypeOf(sR.prototype),"render",this).call(this);gk({view:this});[this.borderStyleDropdown,this.borderColorInput,this.borderWidthInput,this.backgroundInput,this.widthInput,this.heightInput,this.alignmentToolbar,this.saveButtonView,this.cancelButtonView].forEach(function(e){_this329._focusables.add(e);_this329.focusTracker.add(e.element);});this.keystrokes.listenTo(this.element);}},{key:"focus",value:function focus(){this._focusCycler.focusFirst();}},{key:"_createBorderFields",value:function _createBorderFields(){var _this330=this;var e=FN({colorConfig:this.options.borderColors,columns:5});var t=this.locale;var i=this.t;var n=new h_(t);n.text=i("dj");var o=NN(this.t);var s=new kN(t,xN);s.set({label:i("dk"),"class":"ck-table-form__border-style"});s.view.buttonView.set({isOn:false,withText:true,tooltip:i("dk")});s.view.buttonView.bind("label").to(this,"borderStyle",function(e){return o[e?e:"none"];});s.view.on("execute",function(e){_this330.borderStyle=e.source._borderStyleValue;});ew(s.view,jN(this));var r=new kN(t,yN);r.set({label:i("dl"),"class":"ck-table-form__border-width"});r.view.bind("value").to(this,"borderWidth");r.bind("isEnabled").to(this,"borderStyle",rR);r.view.on("input",function(){_this330.borderWidth=r.view.element.value;});var a=new kN(t,e);a.set({label:i("dm"),"class":"ck-table-form__border-color"});a.view.bind("value").to(this,"borderColor");a.bind("isEnabled").to(this,"borderStyle",rR);a.view.on("input",function(){_this330.borderColor=a.view.value;});this.on("change:borderStyle",function(e,t,i){if(!rR(i)){_this330.borderColor="";_this330.borderWidth="";}});return{borderRowLabel:n,borderStyleDropdown:s,borderColorInput:a,borderWidthInput:r};}},{key:"_createBackgroundField",value:function _createBackgroundField(){var _this331=this;var e=FN({colorConfig:this.options.backgroundColors,columns:5});var t=this.locale;var i=this.t;var n=new kN(t,e);n.set({label:i("dn"),"class":"ck-table-properties-form__background"});n.view.bind("value").to(this,"backgroundColor");n.view.on("input",function(){_this331.backgroundColor=n.view.value;});return n;}},{key:"_createDimensionFields",value:function _createDimensionFields(){var _this332=this;var e=this.locale;var t=this.t;var i=new h_(e);i.text=t("do");var n=new kN(e,yN);n.set({label:t("dl"),"class":"ck-table-form__dimensions-row__width"});n.view.bind("value").to(this,"width");n.view.on("input",function(){_this332.width=n.view.element.value;});var o=new db(e);o.setTemplate({tag:"span",attributes:{"class":["ck-table-form__dimension-operator"]},children:[{text:"×"}]});var s=new kN(e,yN);s.set({label:t("dp"),"class":"ck-table-form__dimensions-row__height"});s.view.bind("value").to(this,"height");s.view.on("input",function(){_this332.height=s.view.element.value;});return{dimensionsLabel:i,widthInput:n,operatorLabel:o,heightInput:s};}},{key:"_createAlignmentFields",value:function _createAlignmentFields(){var e=this.locale;var t=this.t;var i=new h_(e);i.text=t("ed");var n=new aw(e);n.set({isCompact:true,ariaLabel:t("ee")});BN({view:this,icons:oR,toolbar:n,labels:this._alignmentLabels,propertyName:"alignment",nameToValue:function nameToValue(e){return e==="center"?"":e;}});return{alignmentLabel:i,alignmentToolbar:n};}},{key:"_createActionButtons",value:function _createActionButtons(){var e=this.locale;var t=this.t;var i=new Vb(e);var n=new Vb(e);var o=[this.borderWidthInput,this.borderColorInput,this.backgroundInput,this.widthInput,this.heightInput];i.set({label:t("dg"),icon:pk,"class":"ck-button-save",type:"submit",withText:true});i.bind("isEnabled").toMany(o,"errorText",function(){for(var _len25=arguments.length,e=new Array(_len25),_key25=0;_key25<_len25;_key25++){e[_key25]=arguments[_key25];}return e.every(function(e){return!e;});});n.set({label:t("dh"),icon:bk,"class":"ck-button-cancel",type:"cancel",withText:true});n.delegate("execute").to(this,"cancel");return{saveButtonView:i,cancelButtonView:n};}},{key:"_alignmentLabels",get:function get(){var e=this.locale;var t=this.t;var i=t("ef");var n=t("eg");var o=t("eh");if(e.uiLanguageDirection==="rtl"){return{right:o,center:n,left:i};}else{return{left:i,center:n,right:o};}}}]);return sR;}(db);function rR(e){return!!e;}var aR='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8 2v5h4V2h1v5h5v1h-5v4h.021l-.172.351-1.916.28-.151.027c-.287.063-.54.182-.755.341L8 13v5H7v-5H2v-1h5V8H2V7h5V2h1zm4 6H8v4h4V8z" opacity=".6"/><path d="M15.5 11.5l1.323 2.68 2.957.43-2.14 2.085.505 2.946L15.5 18.25l-2.645 1.39.505-2.945-2.14-2.086 2.957-.43L15.5 11.5zM17 1a2 2 0 0 1 2 2v9.475l-.85-.124-.857-1.736a2.048 2.048 0 0 0-.292-.44L17 3H3v14h7.808l.402.392L10.935 19H3a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h14z"/></svg>';var cR=500;var lR=/*#__PURE__*/function(_bw110){_inherits(lR,_bw110);_createClass(lR,null,[{key:"requires",get:function get(){return[Ok];}},{key:"pluginName",get:function get(){return"TablePropertiesUI";}}]);function lR(e){var _this333;_classCallCheck(this,lR);_this333=_possibleConstructorReturn(this,_getPrototypeOf(lR).call(this,e));e.config.define("table.tableProperties",{borderColors:VN,backgroundColors:VN});return _this333;}_createClass(lR,[{key:"init",value:function init(){var _this334=this;var e=this.editor;var t=e.t;this._balloon=e.plugins.get(Ok);this.view=this._createPropertiesView();this._undoStepBatch=null;e.ui.componentFactory.add("tableProperties",function(e){var i=new Vb(e);i.set({label:t("az"),icon:aR,tooltip:true});_this334.listenTo(i,"execute",function(){return _this334._showView();});return i;});}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(lR.prototype),"destroy",this).call(this);this.view.destroy();}},{key:"_createPropertiesView",value:function _createPropertiesView(){var _this335=this;var e=this.editor;var t=e.editing.view.document;var i=e.config.get("table.tableProperties");var n=US(i.borderColors);var o=WS(e.locale,n);var s=US(i.backgroundColors);var r=WS(e.locale,s);var a=new sR(e.locale,{borderColors:o,backgroundColors:r});var c=e.t;a.render();this.listenTo(a,"submit",function(){_this335._hideView();});this.listenTo(a,"cancel",function(){if(_this335._undoStepBatch.operations.length){e.execute("undo",_this335._undoStepBatch);}_this335._hideView();});a.keystrokes.set("Esc",function(e,t){_this335._hideView();t();});this.listenTo(e.ui,"update",function(){if(!lE(t.selection)){_this335._hideView();}else if(_this335._isViewVisible){PN(e,"table");}});Jb({emitter:a,activator:function activator(){return _this335._isViewInBalloon;},contextElements:[this._balloon.view.element],callback:function callback(){return _this335._hideView();}});var l=ON(c);var d=RN(c);a.on("change:borderStyle",this._getPropertyChangeCallback("tableBorderStyle"));a.on("change:borderColor",this._getValidatedPropertyChangeCallback({viewField:a.borderColorInput,commandName:"tableBorderColor",errorText:l,validator:LN}));a.on("change:borderWidth",this._getValidatedPropertyChangeCallback({viewField:a.borderWidthInput,commandName:"tableBorderWidth",errorText:d,validator:DN}));a.on("change:backgroundColor",this._getValidatedPropertyChangeCallback({viewField:a.backgroundInput,commandName:"tableBackgroundColor",errorText:l,validator:LN}));a.on("change:width",this._getValidatedPropertyChangeCallback({viewField:a.widthInput,commandName:"tableWidth",errorText:d,validator:zN}));a.on("change:height",this._getValidatedPropertyChangeCallback({viewField:a.heightInput,commandName:"tableHeight",errorText:d,validator:zN}));a.on("change:alignment",this._getPropertyChangeCallback("tableAlignment"));return a;}},{key:"_fillViewFormFromCommandValues",value:function _fillViewFormFromCommandValues(){var e=this.editor.commands;this.view.set({borderStyle:e.get("tableBorderStyle").value||"",borderColor:e.get("tableBorderColor").value||"",borderWidth:e.get("tableBorderWidth").value||"",backgroundColor:e.get("tableBackgroundColor").value||"",width:e.get("tableWidth").value||"",height:e.get("tableHeight").value||"",alignment:e.get("tableAlignment").value||""});}},{key:"_showView",value:function _showView(){var e=this.editor;this._balloon.add({view:this.view,position:SN(e)});this._undoStepBatch=e.model.createBatch();this._fillViewFormFromCommandValues();this.view.focus();}},{key:"_hideView",value:function _hideView(){if(!this._isViewInBalloon){return;}var e=this.editor;this.stopListening(e.ui,"update");this.view.saveButtonView.focus();this._balloon.remove(this.view);this.editor.editing.view.focus();}},{key:"_getPropertyChangeCallback",value:function _getPropertyChangeCallback(e){var _this336=this;return function(t,i,n){_this336.editor.execute(e,{value:n,batch:_this336._undoStepBatch});};}},{key:"_getValidatedPropertyChangeCallback",value:function _getValidatedPropertyChangeCallback(_ref93){var _this337=this;var e=_ref93.commandName,t=_ref93.viewField,i=_ref93.validator,n=_ref93.errorText;var o=uh(function(){t.errorText=n;},cR);return function(n,s,r){o.cancel();if(i(r)){_this337.editor.execute(e,{value:r,batch:_this337._undoStepBatch});t.errorText=null;}else{o();}};}},{key:"_isViewVisible",get:function get(){return this._balloon.visibleView===this.view;}},{key:"_isViewInBalloon",get:function get(){return this._balloon.hasView(this.view);}}]);return lR;}(bw);var dR=/*#__PURE__*/function(_bw111){_inherits(dR,_bw111);function dR(){_classCallCheck(this,dR);return _possibleConstructorReturn(this,_getPrototypeOf(dR).apply(this,arguments));}_createClass(dR,null,[{key:"pluginName",get:function get(){return"TableProperties";}},{key:"requires",get:function get(){return[QO,lR];}}]);return dR;}(bw);function uR(e){if(e.is("text")||e.is("textProxy")){return e.data;}var t="";var i=null;var _iteratorNormalCompletion431=true;var _didIteratorError431=false;var _iteratorError431=undefined;try{for(var _iterator431=e.getChildren()[Symbol.iterator](),_step431;!(_iteratorNormalCompletion431=(_step431=_iterator431.next()).done);_iteratorNormalCompletion431=true){var _n201=_step431.value;var _e374=uR(_n201);if(i&&i.is("element")){t+="\n";}t+=_e374;i=_n201;}}catch(err){_didIteratorError431=true;_iteratorError431=err;}finally{try{if(!_iteratorNormalCompletion431&&_iterator431["return"]!=null){_iterator431["return"]();}}finally{if(_didIteratorError431){throw _iteratorError431;}}}return t;}var hR=/*#__PURE__*/function(_bw112){_inherits(hR,_bw112);function hR(e){var _this338;_classCallCheck(this,hR);_this338=_possibleConstructorReturn(this,_getPrototypeOf(hR).call(this,e));_this338.set("characters",0);_this338.set("words",0);Object.defineProperties(_assertThisInitialized(_this338),{characters:{get:function get(){return this.characters=this._getCharacters();}},words:{get:function get(){return this.words=this._getWords();}}});_this338.set("_wordsLabel");_this338.set("_charactersLabel");_this338._config=e.config.get("wordCount")||{};_this338._outputView;_this338._wordsMatchRegExp=Cl.features.isRegExpUnicodePropertySupported?new RegExp("[\\p{L}\\p{N}\\p{M}\\p{Pd}\\p{Pc}]+","gu"):/[\x2D0-9A-Z_a-z\xC0-\u017E]+/g;return _this338;}_createClass(hR,[{key:"init",value:function init(){var _this339=this;var e=this.editor;e.model.document.on("change:data",AI(this._refreshStats.bind(this),250));if(typeof this._config.onUpdate=="function"){this.on("update",function(e,t){_this339._config.onUpdate(t);});}if(Gs(this._config.container)){this._config.container.appendChild(this.wordCountContainer);}}},{key:"destroy",value:function destroy(){if(this._outputView){this._outputView.element.remove();this._outputView.destroy();}_get(_getPrototypeOf(hR.prototype),"destroy",this).call(this);}},{key:"_getCharacters",value:function _getCharacters(){var e=uR(this.editor.model.document.getRoot());return e.replace(/\n/g,"").length;}},{key:"_getWords",value:function _getWords(){var e=uR(this.editor.model.document.getRoot());var t=e.match(this._wordsMatchRegExp)||[];return t.length;}},{key:"_refreshStats",value:function _refreshStats(){var e=this.words=this._getWords();var t=this.characters=this._getCharacters();this.fire("update",{words:e,characters:t});}},{key:"wordCountContainer",get:function get(){var e=this.editor;var t=e.t;var i=e.config.get("wordCount.displayWords");var n=e.config.get("wordCount.displayCharacters");var o=Dp.bind(this,this);var s=[];if(!this._outputView){this._outputView=new db();if(i||i===undefined){this.bind("_wordsLabel").to(this,"words",function(e){return t("e",[e]);});s.push({tag:"div",children:[{text:[o.to("_wordsLabel")]}],attributes:{"class":"ck-word-count__words"}});}if(n||n===undefined){this.bind("_charactersLabel").to(this,"characters",function(e){return t("f",[e]);});s.push({tag:"div",children:[{text:[o.to("_charactersLabel")]}],attributes:{"class":"ck-word-count__characters"}});}this._outputView.setTemplate({tag:"div",attributes:{"class":["ck","ck-word-count"]},children:s});this._outputView.render();}return this._outputView.element;}}],[{key:"pluginName",get:function get(){return"WordCount";}}]);return hR;}(bw);var fR=/*#__PURE__*/function(){function fR(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,fR);this.namespaces=t.namespaces||[];this._domParser=new DOMParser();this._domConverter=new Dd(e,{blockFillerMode:"nbsp"});this._htmlWriter=new gp();}_createClass(fR,[{key:"toData",value:function toData(e){var t=this._domConverter.viewToDom(e,document);return this._htmlWriter.getHtml(t);}},{key:"toView",value:function toView(e){var t=this._toDom(e);return this._domConverter.domToView(t,{keepOriginalCase:true});}},{key:"_toDom",value:function _toDom(e){var t=this.namespaces.map(function(e){return"xmlns:".concat(e,"=\"nsp\"");}).join(" ");e="<xml ".concat(t,">").concat(e,"</xml>");var i=this._domParser.parseFromString(e,"text/xml");var n=i.querySelector("parsererror");if(n){throw new Error("Parse error - "+n.textContent);}var o=i.createDocumentFragment();var s=i.documentElement.childNodes;while(s.length>0){o.appendChild(s[0]);}return o;}}]);return fR;}();var mR=/*#__PURE__*/function(){function mR(){_classCallCheck(this,mR);}_createClass(mR,null,[{key:"safeXmlCharactersEntities",get:function get(){return{tagOpener:"&laquo;",tagCloser:"&raquo;",doubleQuote:"&uml;",realDoubleQuote:"&quot;"};}},{key:"safeBadBlackboardCharacters",get:function get(){return{ltElement:"«mo»<«/mo»",gtElement:"«mo»>«/mo»",ampElement:"«mo»&«/mo»"};}},{key:"safeGoodBlackboardCharacters",get:function get(){return{ltElement:"«mo»§lt;«/mo»",gtElement:"«mo»§gt;«/mo»",ampElement:"«mo»§amp;«/mo»"};}},{key:"xmlCharacters",get:function get(){return{id:"xmlCharacters",tagOpener:"<",tagCloser:">",doubleQuote:'"',ampersand:"&",quote:"'"};}},{key:"safeXmlCharacters",get:function get(){return{id:"safeXmlCharacters",tagOpener:"«",tagCloser:"»",doubleQuote:"¨",ampersand:"§",quote:"`",realDoubleQuote:"¨"};}}]);return mR;}();var gR=/*#__PURE__*/function(){function gR(){_classCallCheck(this,gR);}_createClass(gR,null,[{key:"isMathmlInAttribute",value:function isMathmlInAttribute(e,t){var i="['\"][\\s]*=[\\s]*[\\w-]+";var n="\"[^\"]*\"|'[^']*'";var o="[\\s]*(".concat(n,")[\\s]*=[\\s]*[\\w-]+[\\s]*");var s="('".concat(o,"')*");var r="^".concat(i).concat(s,"[\\s]+gmi<");var a=new RegExp(r);var c=e.substring(0,t);var l=c.split("").reverse().join("");var d=a.test(l);return d;}},{key:"safeXmlDecode",value:function safeXmlDecode(e){var t=mR.safeXmlCharactersEntities.tagOpener;var i=mR.safeXmlCharactersEntities.tagCloser;var n=mR.safeXmlCharactersEntities.doubleQuote;var o=mR.safeXmlCharactersEntities.realDoubleQuote;e=e.split(t).join(mR.safeXmlCharacters.tagOpener);e=e.split(i).join(mR.safeXmlCharacters.tagCloser);e=e.split(n).join(mR.safeXmlCharacters.doubleQuote);e=e.split(o).join(mR.safeXmlCharacters.realDoubleQuote);var s=mR.safeBadBlackboardCharacters.ltElement;var r=mR.safeBadBlackboardCharacters.gtElement;var a=mR.safeBadBlackboardCharacters.ampElement;if("_wrs_blackboard"in window&&window._wrs_blackboard){e=e.split(s).join(mR.safeGoodBlackboardCharacters.ltElement);e=e.split(r).join(mR.safeGoodBlackboardCharacters.gtElement);e=e.split(a).join(mR.safeGoodBlackboardCharacters.ampElement);}t=mR.safeXmlCharacters.tagOpener;i=mR.safeXmlCharacters.tagCloser;n=mR.safeXmlCharacters.doubleQuote;o=mR.safeXmlCharacters.realDoubleQuote;var c=mR.safeXmlCharacters.ampersand;var l=mR.safeXmlCharacters.quote;e=e.split(t).join(mR.xmlCharacters.tagOpener);e=e.split(i).join(mR.xmlCharacters.tagCloser);e=e.split(n).join(mR.xmlCharacters.doubleQuote);e=e.split(c).join(mR.xmlCharacters.ampersand);e=e.split(l).join(mR.xmlCharacters.quote);var d="";var u=null;for(var _t321=0;_t321<e.length;_t321+=1){var _i339=e.charAt(_t321);if(u==null){if(_i339==="$"){u="";}else{d+=_i339;}}else if(_i339===";"){d+="&".concat(u);u=null;}else if(_i339.match(/([a-zA-Z0-9#._-] | '-')/)){u+=_i339;}else{d+="$".concat(u);u=null;_t321-=1;}}return d;}},{key:"safeXmlEncode",value:function safeXmlEncode(e){var t=mR.xmlCharacters.tagOpener;var i=mR.xmlCharacters.tagCloser;var n=mR.xmlCharacters.doubleQuote;var o=mR.xmlCharacters.ampersand;var s=mR.xmlCharacters.quote;e=e.split(t).join(mR.safeXmlCharacters.tagOpener);e=e.split(i).join(mR.safeXmlCharacters.tagCloser);e=e.split(n).join(mR.safeXmlCharacters.doubleQuote);e=e.split(o).join(mR.safeXmlCharacters.ampersand);e=e.split(s).join(mR.safeXmlCharacters.quote);return e;}},{key:"mathMLEntities",value:function mathMLEntities(e){var t="";for(var _i340=0;_i340<e.length;_i340+=1){var _n202=e.charAt(_i340);if(e.codePointAt(_i340)>128){t+="&#".concat(e.codePointAt(_i340),";");if(e.codePointAt(_i340)>65535){_i340+=1;}}else if(_n202==="&"){var _o113=e.indexOf(";",_i340+1);if(_o113>=0){var _n203=document.createElement("span");_n203.innerHTML=e.substring(_i340,_o113+1);t+="&#".concat(xR.fixedCharCodeAt(_n203.textContent||_n203.innerText,0),";");_i340=_o113;}else{t+=_n202;}}else{t+=_n202;}}return t;}},{key:"addCustomEditorClassAttribute",value:function addCustomEditorClassAttribute(e,t){var i="";var n=e.indexOf("<math");if(n===0){var _o114=e.indexOf(">");if(e.indexOf("class")===-1){i="".concat(e.substr(n,_o114)," class=\"wrs_").concat(t,"\">");i+=e.substr(_o114+1,e.length);return i;}}return e;}},{key:"removeCustomEditorClassAttribute",value:function removeCustomEditorClassAttribute(e,t){if(e.indexOf("class")===-1||e.indexOf("wrs_".concat(t))===-1){return e;}if(e.indexOf("class=\"wrs_".concat(t,"\""))!==-1){return e.replace("class=\"wrs_".concat(t,"\""),"");}return e.replace("wrs_".concat(t),"");}},{key:"addAnnotation",value:function addAnnotation(e,t,i){var n=e.indexOf("<annotation");var o="";if(n!==-1){var _n204=e.indexOf("</semantics>");o="".concat(e.substring(0,_n204),"<annotation encoding=\"").concat(i,"\">").concat(t,"</annotation>").concat(e.substring(_n204));}else if(gR.isEmpty(e)){var _n205=e.indexOf("/>");var _s83=e.indexOf(">");var _r56=_s83===_n205?_n205:_s83;o="".concat(e.substring(0,_r56),"><semantics><annotation encoding=\"").concat(i,"\">").concat(t,"</annotation></semantics></math>");}else{var _n206=e.indexOf(">")+1;var _s84=e.lastIndexOf("</math>");var _r57=e.substring(_n206,_s84);o="".concat(e.substring(0,_n206),"<semantics>").concat(_r57,"<annotation encoding=\"").concat(i,"\">").concat(t,"</annotation></semantics></math>");}return o;}},{key:"removeAnnotation",value:function removeAnnotation(e,t){var i=e;var n="<annotation encoding=\"".concat(t,"\">");var o="</annotation>";var s=e.indexOf(n);if(s!==-1){var _t322=false;var _n207=e.indexOf("<annotation");while(_n207!==-1){if(_n207!==s){_t322=true;}_n207=e.indexOf("<annotation",_n207+1);}if(_t322){var _t323=e.indexOf(o,s);var _n208=_t323+o.length;var _r58=e.substring(0,s);i=_r58+e.substring(_n208);}else{i=gR.removeSemantics(e);}}return i;}},{key:"removeSemantics",value:function removeSemantics(e){var t="</math>";var i="<semantics>";var n="<annotation";var o=e;var s=e.indexOf(i);if(s!==-1){var _r59=e.indexOf(n,s+i.length);if(_r59!==-1){o=e.substring(0,s)+e.substring(s+i.length,_r59)+t;}}return o;}},{key:"removeSemanticsOcurrences",value:function removeSemanticsOcurrences(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:mR.xmlCharacters;var i="".concat(t.tagOpener,"math");var n="".concat(t.tagOpener,"/math").concat(t.tagCloser);var o="/".concat(t.tagCloser);var s=t.tagCloser;var r="".concat(t.tagOpener,"semantics").concat(t.tagCloser);var a="".concat(t.tagOpener,"annotation encoding=");var c="";var l=e.indexOf(i);var d=0;while(l!==-1){c+=e.substring(d,l);var _t324=e.indexOf(n,l);var _u5=e.indexOf(o,l);var _h4=e.indexOf(s,l);if(_t324!==-1){d=_t324;}else if(_u5===_h4-1){d=_u5;}var _f2=e.indexOf(r,l);if(_f2!==-1){var _t325=e.substring(l,_f2);var _o115=e.indexOf(a,l);if(_o115!==-1){var _s85=_f2+r.length;var _a35=e.substring(_s85,_o115);c+=_t325+_a35+n;l=e.indexOf(i,l+i.length);d+=n.length;}else{d=l;l=e.indexOf(i,l+i.length);}}else{d=l;l=e.indexOf(i,l+i.length);}}c+=e.substring(d,e.length);return c;}},{key:"containClass",value:function containClass(e,t){var i=e.indexOf("class");if(i===-1){return false;}var n=e.indexOf(">",i);var o=e.substring(i,n);if(o.indexOf(t)!==-1){return true;}return false;}},{key:"isEmpty",value:function isEmpty(e){var t=">";var i="/>";var n=e.indexOf(t);var o=e.indexOf(i);var s=false;if(o!==-1){if(o===n-1){s=true;}}if(!s){var _t326=new RegExp("</(.+:)?math>");var _i341=_t326.exec(e);if(_i341){s=n+1===_i341.index;}}return s;}},{key:"encodeProperties",value:function encodeProperties(e){var t=/\w+=".*?"/g;var i=function i(e){var t=e.indexOf('"');var i=e.substring(t+1,e.length-1);var n=xR.htmlEntities(i);var o="".concat(e.substring(0,t+1)).concat(n,"\"");return o;};var n=e.replace(t,i);return n;}}]);return gR;}();var pR=/*#__PURE__*/function(){function pR(){_classCallCheck(this,pR);}_createClass(pR,null,[{key:"addConfiguration",value:function addConfiguration(e){Object.assign(pR.properties,e);}},{key:"get",value:function get(e){if(!Object.prototype.hasOwnProperty.call(pR.properties,e)){if(Object.prototype.hasOwnProperty.call(pR.properties,"_wrs_conf_")){return pR.properties["_wrs_conf_".concat(e)];}return false;}return pR.properties[e];}},{key:"set",value:function set(e,t){pR.properties[e]=t;}},{key:"update",value:function update(e,t){if(!pR.get(e)){pR.set(e,t);}else{var _i342=Object.assign(pR.get(e),t);pR.set(e,_i342);}}},{key:"properties",get:function get(){return pR._properties;},set:function set(e){pR._properties=e;}}]);return pR;}();pR._properties={};var bR=/*#__PURE__*/function(){function bR(){_classCallCheck(this,bR);this.cache=[];}_createClass(bR,[{key:"populate",value:function populate(e,t){this.cache[e]=t;}},{key:"get",value:function get(e){if(Object.prototype.hasOwnProperty.call(this.cache,e)){return this.cache[e];}return false;}}]);return bR;}();var wR=/*#__PURE__*/function(){function wR(){_classCallCheck(this,wR);this.listeners=[];}_createClass(wR,[{key:"add",value:function add(e){this.listeners.push(e);}},{key:"fire",value:function fire(e,t){for(var _i343=0;_i343<this.listeners.length&&!t.cancelled;_i343+=1){if(this.listeners[_i343].eventName===e){this.listeners[_i343].callback(t);}}return t.defaultPrevented;}}],[{key:"newListener",value:function newListener(e,t){var i={};i.eventName=e;i.callback=t;return i;}}]);return wR;}();var _R=/*#__PURE__*/function(){function _R(){_classCallCheck(this,_R);}_createClass(_R,null,[{key:"addListener",value:function addListener(e){_R.listeners.add(e);}},{key:"fireEvent",value:function fireEvent(e,t){_R.listeners.fire(e,t);}},{key:"setServicePath",value:function setServicePath(e,t){_R.servicePaths[e]=t;}},{key:"getServicePath",value:function getServicePath(e){return _R.servicePaths[e];}},{key:"getServerURL",value:function getServerURL(){var e=window.location.href;var t=e.split("/");var i="".concat(t[0],"//").concat(t[2]);return i;}},{key:"init",value:function init(e){_R.parameters=e;var t=_R.createServiceURI("configurationjs");var i=_R.createServiceURI("createimage");var n=_R.createServiceURI("showimage");var o=_R.createServiceURI("getmathml");var s=_R.createServiceURI("service");if(_R.parameters.URI.indexOf("/")===0){var _e375=_R.getServerURL();t=_e375+t;n=_e375+n;i=_e375+i;o=_e375+o;s=_e375+s;}_R.setServicePath("configurationjs",t);_R.setServicePath("showimage",n);_R.setServicePath("createimage",i);_R.setServicePath("service",s);_R.setServicePath("getmathml",o);_R.setServicePath("configurationjs",t);_R.listeners.fire("onInit",{});}},{key:"getUrl",value:function getUrl(e,t){var i=window.location.toString().substr(0,window.location.toString().lastIndexOf("/")+1);var n=xR.createHttpRequest();if(n){if(typeof t==="undefined"||typeof t==="undefined"){n.open("GET",e,false);}else if(e.substr(0,1)==="/"||e.substr(0,7)==="http://"||e.substr(0,8)==="https://"){n.open("POST",e,false);}else{n.open("POST",i+e,false);}if(typeof t!=="undefined"&&t){n.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8");n.send(xR.httpBuildQuery(t));}else{n.send(null);}return n.responseText;}return"";}},{key:"getService",value:function getService(e,t,i){var n;if(i===true){var _i344="".concat(_R.getServicePath(e),"?").concat(t);n=_R.getUrl(_i344);}else{var _i345=_R.getServicePath(e);n=_R.getUrl(_i345,t);}return n;}},{key:"getServerLanguageFromService",value:function getServerLanguageFromService(e){if(e.indexOf(".php")!==-1){return"php";}if(e.indexOf(".aspx")!==-1){return"aspx";}if(e.indexOf("wirispluginengine")!==-1){return"ruby";}return"java";}},{key:"createServiceURI",value:function createServiceURI(e){var t=_R.serverExtension();return xR.concatenateUrl(_R.parameters.URI,e)+t;}},{key:"serverExtension",value:function serverExtension(){if(_R.parameters.server.indexOf("php")!==-1){return".php";}if(_R.parameters.server.indexOf("aspx")!==-1){return".aspx";}return"";}},{key:"listeners",get:function get(){return _R._listeners;}},{key:"parameters",get:function get(){return _R._parameters;},set:function set(e){_R._parameters=e;}},{key:"servicePaths",get:function get(){return _R._servicePaths;},set:function set(e){_R._servicePaths=e;}},{key:"integrationPath",get:function get(){return _R._integrationPath;},set:function set(e){_R._integrationPath=e;}}]);return _R;}();_R._servicePaths={};_R._integrationPath="";_R._listeners=new wR();_R._parameters={};var vR=/*#__PURE__*/function(){function vR(){_classCallCheck(this,vR);}_createClass(vR,null,[{key:"getLatexFromMathML",value:function getLatexFromMathML(e){var t=gR.removeSemantics(e);var i=vR.cache;var n={service:"mathml2latex",mml:t};var o=JSON.parse(_R.getService("service",n));var s="";if(o.status==="ok"){s=o.result.text;var _t327=xR.htmlEntities(s);var _n209=gR.addAnnotation(e,_t327,"LaTeX");i.populate(s,_n209);}return s;}},{key:"getMathMLFromLatex",value:function getMathMLFromLatex(e,t){var i=vR.cache;if(vR.cache.get(e)){return vR.cache.get(e);}var n={service:"latex2mathml",latex:e};if(t){n.saveLatex="";}var o=JSON.parse(_R.getService("service",n));var s;if(o.status==="ok"){var _t328=o.result.text;_t328=_t328.split("\r").join("").split("\n").join(" ");if(_t328.indexOf("semantics")===-1&&_t328.indexOf("annotation")===-1){_t328=gR.addAnnotation(_t328,e,"LaTeX");s=_t328;}else{s=_t328;}if(!i.get(e)){i.populate(e,_t328);}}else{s="$$".concat(e,"$$");}return s;}},{key:"parseMathmlToLatex",value:function parseMathmlToLatex(e,t){var i="";var n="".concat(t.tagOpener,"math");var o="".concat(t.tagOpener,"/math").concat(t.tagCloser);var s="".concat(t.tagOpener,"annotation encoding=").concat(t.doubleQuote,"LaTeX").concat(t.doubleQuote).concat(t.tagCloser);var r="".concat(t.tagOpener,"/annotation").concat(t.tagCloser);var a=e.indexOf(n);var c=0;var l;var d;var u;while(a!==-1){i+=e.substring(c,a);c=e.indexOf(o,a);if(c===-1){c=e.length-1;}else{c+=o.length;}l=e.substring(a,c);d=l.indexOf(s);if(d!==-1){d+=s.length;u=l.indexOf(r);var _e376=l.substring(d,u);if(t===mR.safeXmlCharacters){_e376=gR.safeXmlDecode(_e376);}i+="$$".concat(_e376,"$$");vR.cache.populate(_e376,l);}else{i+=l;}a=e.indexOf(n,c);}i+=e.substring(c,e.length);return i;}},{key:"getLatexFromTextNode",value:function getLatexFromTextNode(e,t,i){var n={open:"$$",close:"$$"};if(typeof i==="undefined"||i==null){i=n;}var o=e;while(o.previousSibling&&o.previousSibling.nodeType===3){o=o.previousSibling;}function s(e,t,n){var o=e.nodeValue.indexOf(n,t);while(o===-1){e=e.nextSibling;if(!e){return null;}o=e.nodeValue?e.nodeValue.indexOf(i.close):-1;}return{node:e,position:o};}function r(e,t,i,n){if(e===i){return t<=n;}while(e&&e!==i){e=e.nextSibling;}return e===i;}var a;var c={node:o,position:0};var l=i.open.length;do{a=s(c.node,c.position,i.open);if(a==null||r(e,t,a.node,a.position)){return null;}c=s(a.node,a.position+l,i.close);if(c==null){return null;}c.position+=l;}while(r(c.node,c.position,e,t));var d;if(a.node===c.node){d=a.node.nodeValue.substring(a.position+l,c.position-l);}else{var _e377=a.position+l;d=a.node.nodeValue.substring(_e377,a.node.nodeValue.length);var _t329=a.node;do{_t329=_t329.nextSibling;if(_t329===c.node){d+=c.node.nodeValue.substring(0,c.position-l);}else{d+=_t329.nodeValue?_t329.nodeValue:"";}}while(_t329!==c.node);}return{latex:d,startNode:a.node,startPosition:a.position,endNode:c.node,endPosition:c.position};}},{key:"cache",get:function get(){return vR._cache;},set:function set(e){vR._cache=e;}}]);return vR;}();vR._cache=new bR();var kR=i(16);var yR=/*#__PURE__*/function(){function yR(){_classCallCheck(this,yR);throw new Error("Static class StringManager can not be instantiated.");}_createClass(yR,null,[{key:"get",value:function get(e){var t=this.language;if(!(t in this.strings)){console.warn("Unknown language ".concat(t," set in StringManager."));t="en";}if(!(e in this.strings[t])){console.warn("Unknown key ".concat(e," in StringManager."));return e;}return this.strings[t][e];}}]);return yR;}();yR.strings=kR;yR.language="en";var xR=/*#__PURE__*/function(){function xR(){_classCallCheck(this,xR);}_createClass(xR,null,[{key:"fireEvent",value:function fireEvent(e,t){if(document.createEvent){var _i346=document.createEvent("HTMLEvents");_i346.initEvent(t,true,true);return!e.dispatchEvent(_i346);}var i=document.createEventObject();return e.fireEvent("on".concat(t),i);}},{key:"addEvent",value:function addEvent(e,t,i){if(e.addEventListener){e.addEventListener(t,i,true);}else if(e.attachEvent){e.attachEvent("on".concat(t),i);}}},{key:"removeEvent",value:function removeEvent(e,t,i){if(e.removeEventListener){e.removeEventListener(t,i,true);}else if(e.detachEvent){e.detachEvent("on".concat(t),i);}}},{key:"addElementEvents",value:function addElementEvents(e,t,i,n){if(t){xR.addEvent(e,"dblclick",function(e){var i=e||window.event;var n=i.srcElement?i.srcElement:i.target;t(n,i);});}if(i){xR.addEvent(e,"mousedown",function(e){var t=e||window.event;var n=t.srcElement?t.srcElement:t.target;i(n,t);});}if(n){xR.addEvent(e,"mouseup",function(e){var t=e||window.event;var i=t.srcElement?t.srcElement:t.target;n(i,t);});}}},{key:"addClass",value:function addClass(e,t){if(!xR.containsClass(e,t)){e.className+=" ".concat(t);}}},{key:"containsClass",value:function containsClass(e,t){if(e==null||!("className"in e)){return false;}var i=e.className.split(" ");for(var _e378=i.length-1;_e378>=0;_e378-=1){if(i[_e378]===t){return true;}}return false;}},{key:"removeClass",value:function removeClass(e,t){var i="";var n=e.className.split(" ");for(var _e379=0;_e379<n.length;_e379+=1){if(n[_e379]!==t){i+="".concat(n[_e379]," ");}}e.className=i.trim();}},{key:"convertOldXmlinitialtextAttribute",value:function convertOldXmlinitialtextAttribute(e){var t="value=";var i=e.indexOf("xmlinitialtext");var n=e.indexOf(t,i);var o=e.charAt(n+t.length);var s=n+t.length+1;var r=e.indexOf(o,s);var a=e.substring(s,r);var c=a.split("«").join("§lt;");c=c.split("»").join("§gt;");c=c.split("&").join("§");c=c.split("¨").join("§quot;");e=e.split(a).join(c);return e;}},{key:"createElement",value:function createElement(e,t,i){if(t===undefined){t={};}if(i===undefined){i=document;}var n;try{var _o116="<".concat(e);Object.keys(t).forEach(function(e){_o116+=" ".concat(e,"=\"").concat(xR.htmlEntities(t[e]),"\"");});_o116+=">";n=i.createElement(_o116);}catch(o){n=i.createElement(e);Object.keys(t).forEach(function(e){n.setAttribute(e,t[e]);});}return n;}},{key:"createObject",value:function createObject(e,t){if(t===undefined){t=document;}e=e.split("<applet ").join('<span wirisObject="WirisApplet" ').split("<APPLET ").join('<span wirisObject="WirisApplet" ');e=e.split("</applet>").join("</span>").split("</APPLET>").join("</span>");e=e.split("<param ").join('<br wirisObject="WirisParam" ').split("<PARAM ").join('<br wirisObject="WirisParam" ');e=e.split("</param>").join("</br>").split("</PARAM>").join("</br>");var i=xR.createElement("div",{},t);i.innerHTML=e;function n(e){if(e.getAttribute&&e.getAttribute("wirisObject")==="WirisParam"){var _i347={};for(var _t330=0;_t330<e.attributes.length;_t330+=1){if(e.attributes[_t330].nodeValue!==null){_i347[e.attributes[_t330].nodeName]=e.attributes[_t330].nodeValue;}}var _n210=xR.createElement("param",_i347,t);if(_n210.NAME){_n210.name=_n210.NAME;_n210.value=_n210.VALUE;}_n210.removeAttribute("wirisObject");e.parentNode.replaceChild(_n210,e);}else if(e.getAttribute&&e.getAttribute("wirisObject")==="WirisApplet"){var _i348={};for(var _t331=0;_t331<e.attributes.length;_t331+=1){if(e.attributes[_t331].nodeValue!==null){_i348[e.attributes[_t331].nodeName]=e.attributes[_t331].nodeValue;}}var _o117=xR.createElement("applet",_i348,t);_o117.removeAttribute("wirisObject");for(var _t332=0;_t332<e.childNodes.length;_t332+=1){n(e.childNodes[_t332]);if(e.childNodes[_t332].nodeName.toLowerCase()==="param"){_o117.appendChild(e.childNodes[_t332]);_t332-=1;}}e.parentNode.replaceChild(_o117,e);}else{for(var _t333=0;_t333<e.childNodes.length;_t333+=1){n(e.childNodes[_t333]);}}}n(i);return i.firstChild;}},{key:"createObjectCode",value:function createObjectCode(e){if(typeof e==="undefined"||e===null){return null;}if(e.nodeType===1){var _t334="<".concat(e.tagName);for(var _i349=0;_i349<e.attributes.length;_i349+=1){if(e.attributes[_i349].specified){_t334+=" ".concat(e.attributes[_i349].name,"=\"").concat(xR.htmlEntities(e.attributes[_i349].value),"\"");}}if(e.childNodes.length>0){_t334+=">";for(var _i350=0;_i350<e.childNodes.length;_i350+=1){_t334+=xR.createObject(e.childNodes[_i350]);}_t334+="</".concat(e.tagName,">");}else if(e.nodeName==="DIV"||e.nodeName==="SCRIPT"){_t334+="></".concat(e.tagName,">");}else{_t334+="/>";}return _t334;}if(e.nodeType===3){return xR.htmlEntities(e.nodeValue);}return"";}},{key:"concatenateUrl",value:function concatenateUrl(e,t){var i="";if(e.indexOf("/")!==e.length&&t.indexOf("/")!==0){i="/";}return(e+i+t).replace(/([^:]\/)\/+/g,"$1");}},{key:"htmlEntities",value:function htmlEntities(e){return e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;");}},{key:"htmlEntitiesDecode",value:function htmlEntitiesDecode(e){var t=document.createElement("textarea");t.innerHTML=e;return t.value;}},{key:"createHttpRequest",value:function createHttpRequest(){var e=window.location.toString().substr(0,window.location.toString().lastIndexOf("/")+1);if(e.substr(0,7)==="file://"){throw yR.get("exception_cross_site");}if(typeof XMLHttpRequest!=="undefined"){return new XMLHttpRequest();}try{return new ActiveXObject("Msxml2.XMLHTTP");}catch(e){try{return new ActiveXObject("Microsoft.XMLHTTP");}catch(e){return null;}}}},{key:"httpBuildQuery",value:function httpBuildQuery(e){var t="";Object.keys(e).forEach(function(i){if(e[i]!=null){t+="".concat(xR.urlEncode(i),"=").concat(xR.urlEncode(e[i]),"&");}});if(t.substring(t.length-1)==="&"){t=t.substring(0,t.length-1);}return t;}},{key:"propertiesToString",value:function propertiesToString(e){var t=[];Object.keys(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){t.push(i);}});var i=t.length;for(var _e380=0;_e380<i;_e380+=1){for(var _n211=_e380+1;_n211<i;_n211+=1){var _i351=t[_e380];var _o118=t[_n211];if(xR.compareStrings(_i351,_o118)>0){t[_e380]=_o118;t[_n211]=_i351;}}}var n="";for(var _o119=0;_o119<i;_o119+=1){var _i352=t[_o119];n+=_i352;n+="=";var _s86=e[_i352];_s86=_s86.replace("\\","\\\\");_s86=_s86.replace("\n","\\n");_s86=_s86.replace("\r","\\r");_s86=_s86.replace("\t","\\t");n+=_s86;n+="\n";}return n;}},{key:"compareStrings",value:function compareStrings(e,t){var i;var n=e.length;var o=t.length;var s=n>o?o:n;for(i=0;i<s;i+=1){var _n212=xR.fixedCharCodeAt(e,i)-xR.fixedCharCodeAt(t,i);if(_n212!==0){return _n212;}}return e.length-t.length;}},{key:"fixedCharCodeAt",value:function fixedCharCodeAt(e,t){t=t||0;var i=e.charCodeAt(t);var n;var o;if(i>=55296&&i<=56319){n=i;o=e.charCodeAt(t+1);if(Number.isNaN(o)){throw yR.get("exception_high_surrogate");}return(n-55296)*1024+(o-56320)+65536;}if(i>=56320&&i<=57343){return false;}return i;}},{key:"urlToAssArray",value:function urlToAssArray(e){var t;t=e.indexOf("?");if(t>0){var _i353=e.substring(t+1);var _n213=_i353.split("&");var _o120={};for(t=0;t<_n213.length;t+=1){var _e381=_n213[t];var _i354=_e381.split("=");if(_i354.length>1){_o120[_i354[0]]=decodeURIComponent(_i354[1].replace(/\+/g," "));}}return _o120;}return{};}},{key:"urlEncode",value:function urlEncode(e){var t="";t=encodeURIComponent(e);return t;}},{key:"getWIRISImageOutput",value:function getWIRISImageOutput(e,t,i){var n=xR.createObject(e);if(n){if(n.className===pR.get("imageClassName")||n.getAttribute(pR.get("imageMathmlAttribute"))){if(!t){return e;}var _o121=n.getAttribute(pR.get("imageMathmlAttribute"));var _s87=gR.safeXmlDecode(_o121);if(!pR.get("saveHandTraces")){_s87=gR.removeAnnotation(_s87,"application/json");}if(_s87==null){_s87=n.getAttribute("alt");}if(i){var _e382=gR.safeXmlEncode(_s87);return _e382;}return _s87;}}return e;}},{key:"getNodeLength",value:function getNodeLength(e){var t={IMG:1,BR:1};if(e.nodeType===3){return e.nodeValue.length;}if(e.nodeType===1){var _i355=t[e.nodeName.toUpperCase()];if(_i355===undefined){_i355=0;}for(var _t335=0;_t335<e.childNodes.length;_t335+=1){_i355+=xR.getNodeLength(e.childNodes[_t335]);}return _i355;}return 0;}},{key:"getSelectedItem",value:function getSelectedItem(e,t,i){var n;if(t){n=e.contentWindow;n.focus();}else{n=window;e.focus();}if(document.selection&&!i){var _i356=n.document.selection.createRange();if(_i356.parentElement){if(_i356.htmlText.length>0){if(_i356.text.length===0){return xR.getSelectedItem(e,t,true);}return null;}n.document.execCommand("InsertImage",false,"#");var _o122=_i356.parentElement();if(_o122.nodeName.toUpperCase()!=="IMG"){_i356.pasteHTML('<span id="wrs_openEditorWindow_temporalObject"></span>');_o122=n.document.getElementById("wrs_openEditorWindow_temporalObject");}var _s88;var _r60;if(_o122.nextSibling&&_o122.nextSibling.nodeType===3){_s88=_o122.nextSibling;_r60=0;}else if(_o122.previousSibling&&_o122.previousSibling.nodeType===3){_s88=_o122.previousSibling;_r60=_s88.nodeValue.length;}else{_s88=n.document.createTextNode("");_o122.parentNode.insertBefore(_s88,_o122);_r60=0;}_o122.parentNode.removeChild(_o122);return{node:_s88,caretPosition:_r60};}if(_i356.length>1){return null;}return{node:_i356.item(0)};}if(n.getSelection){var _e383;var _t336=n.getSelection();try{_e383=_t336.getRangeAt(0);}catch(t){_e383=n.document.createRange();}var _i357=_e383.startContainer;if(_i357.nodeType===3){return{node:_i357,caretPosition:_e383.startOffset};}if(_i357!==_e383.endContainer){return null;}if(_i357.nodeType===1){var _t337=_e383.startOffset;if(_i357.childNodes[_t337]){return{node:_i357.childNodes[_t337]};}}}return null;}},{key:"getSelectedItemOnTextarea",value:function getSelectedItemOnTextarea(e){var t=document.createTextNode(e.value);var i=vR.getLatexFromTextNode(t,e.selectionStart);if(i===null){return null;}return{node:t,caretPosition:e.selectionStart,startPosition:i.startPosition,endPosition:i.endPosition};}},{key:"getElementsByNameFromString",value:function getElementsByNameFromString(e,t,i){var n=[];e=e.toLowerCase();t=t.toLowerCase();var o=e.indexOf("<".concat(t," "));while(o!==-1){var _s89=void 0;if(i){_s89=">";}else{_s89="</".concat(t,">");}var _r61=e.indexOf(_s89,o);if(_r61!==-1){_r61+=_s89.length;n.push({start:o,end:_r61});}else{_r61=o+1;}o=e.indexOf("<".concat(t," "),_r61);}return n;}},{key:"decode64",value:function decode64(e){var t="+".charCodeAt(0);var i="/".charCodeAt(0);var n="0".charCodeAt(0);var o="a".charCodeAt(0);var s="A".charCodeAt(0);var r="-".charCodeAt(0);var a="_".charCodeAt(0);var c=e.charCodeAt(0);if(c===t||c===r){return 62;}if(c===i||c===a){return 63;}if(c<n){return-1;}if(c<n+10){return c-n+26+26;}if(c<s+26){return c-s;}if(c<o+26){return c-o+26;}return null;}},{key:"b64ToByteArray",value:function b64ToByteArray(e,t){var i;if(e.length%4>0){throw new Error("Invalid string. Length must be a multiple of 4");}var n=[];var o;var s;if(!t){if(e.charAt(e.length-2)==="="){s=2;}else if(e.charAt(e.length-1)==="="){s=1;}else{s=0;}o=s>0?e.length-4:e.length;}else{o=t;}var r;for(r=0;r<o;r+=4){i=xR.decode64(e.charAt(r))<<18|xR.decode64(e.charAt(r+1))<<12|xR.decode64(e.charAt(r+2))<<6|xR.decode64(e.charAt(r+3));n.push(i>>16&255);n.push(i>>8&255);n.push(i&255);}if(s){if(s===2){i=xR.decode64(e.charAt(r))<<2|xR.decode64(e.charAt(r+1))>>4;n.push(i&255);}else if(s===1){i=xR.decode64(e.charAt(r))<<10|xR.decode64(e.charAt(r+1))<<4|xR.decode64(e.charAt(r+2))>>2;n.push(i>>8&255);n.push(i&255);}}return n;}},{key:"readInt32",value:function readInt32(e){if(e.length<4){return false;}var t=e.splice(0,4);return t[0]<<24|t[1]<<16|t[2]<<8|t[3]<<0;}},{key:"readByte",value:function readByte(e){return e.shift()<<0;}},{key:"readBytes",value:function readBytes(e,t,i){return e.splice(t,i);}},{key:"updateTextArea",value:function updateTextArea(e,t){if(e&&t){e.focus();if(e.selectionStart!=null){var _i358=e.selectionEnd;var _n214=e.value.substring(0,e.selectionStart);var _o123=e.value.substring(_i358,e.value.length);e.value=_n214+t+_o123;e.selectionEnd=_i358+t.length;}else{var _e384=document.selection.createRange();_e384.text=t;}}}},{key:"updateExistingTextOnTextarea",value:function updateExistingTextOnTextarea(e,t,i,n){e.focus();var o=e.value.substring(0,i);e.value=o+t+e.value.substring(n,e.value.length);e.selectionEnd=i+t.length;}},{key:"addArgument",value:function addArgument(e,t,i){var n;if(e.indexOf("?")>0){n="&";}else{n="?";}return"".concat(e+n+t,"=").concat(i);}}]);return xR;}();var AR=/*#__PURE__*/function(){function AR(){_classCallCheck(this,AR);}_createClass(AR,null,[{key:"removeImgDataAttributes",value:function removeImgDataAttributes(e){var t=[];var i=e.attributes;Object.keys(i).forEach(function(e){var n=i[e];if(n.name.indexOf("data-")===0){t.push(n.name);}});t.forEach(function(t){e.removeAttribute(t);});}},{key:"clone",value:function clone(e,t){var i=pR.get("imageCustomEditorName");if(!e.hasAttribute(i)){t.removeAttribute(i);}var n=pR.get("imageMathmlAttribute");var o=[n,i,"alt","height","width","style","src","role"];o.forEach(function(i){var n=e.getAttribute(i);if(n){t.setAttribute(i,n);}});}},{key:"setImgSize",value:function setImgSize(e,t,i){var n;var o;var s;var r;if(i){if(pR.get("imageFormat")==="svg"){if(pR.get("saveMode")!=="base64"){n=AR.getMetricsFromSvgString(t);}else{o=e.src.substr(e.src.indexOf("base64,")+7,e.src.length);r="";s=xR.b64ToByteArray(o,o.length);for(var _e385=0;_e385<s.length;_e385+=1){r+=String.fromCharCode(s[_e385]);}n=AR.getMetricsFromSvgString(r);}}else{o=e.src.substr(e.src.indexOf("base64,")+7,e.src.length);s=xR.b64ToByteArray(o,88);n=AR.getMetricsFromBytes(s);}}else{n=xR.urlToAssArray(t);}var a=n.cw;if(!a){return;}var c=n.ch;var l=n.cb;var _n215=n,d=_n215.dpi;if(d){a=a*96/d;c=c*96/d;l=l*96/d;}e.width=a;e.height=c;e.style.verticalAlign="-".concat(c-l,"px");}},{key:"fixAfterResize",value:function fixAfterResize(e){e.removeAttribute("style");e.removeAttribute("width");e.removeAttribute("height");e.style.maxWidth="none";if(e.src.indexOf("data:image")!==-1){if(pR.get("imageFormat")==="svg"){var _t338=decodeURIComponent(e.src.substring(32,e.src.length));AR.setImgSize(e,_t338,true);}else{var _t339=e.src.substring(22,e.src.length);AR.setImgSize(e,_t339,true);}}else{AR.setImgSize(e,e.src);}}},{key:"getMetricsFromSvgString",value:function getMetricsFromSvgString(e){var t=e.indexOf('height="');var i=e.indexOf('"',t+8,e.length);var n=e.substring(t+8,i);t=e.indexOf('width="');i=e.indexOf('"',t+7,e.length);var o=e.substring(t+7,i);t=e.indexOf('wrs:baseline="');i=e.indexOf('"',t+14,e.length);var s=e.substring(t+14,i);if(typeof o!=="undefined"){var _e386=[];_e386.cw=o;_e386.ch=n;if(typeof s!=="undefined"){_e386.cb=s;}return _e386;}return[];}},{key:"getMetricsFromBytes",value:function getMetricsFromBytes(e){xR.readBytes(e,0,8);var t;var i;var n;var o;var s;while(e.length>=4){n=xR.readInt32(e);if(n===1229472850){t=xR.readInt32(e);i=xR.readInt32(e);xR.readInt32(e);xR.readByte(e);}else if(n===1650545477){o=xR.readInt32(e);}else if(n===1883789683){s=xR.readInt32(e);s=Math.round(s/39.37);xR.readInt32(e);xR.readByte(e);}xR.readInt32(e);}if(typeof t!=="undefined"){var _e387=[];_e387.cw=t;_e387.ch=i;_e387.dpi=s;if(o){_e387.cb=o;}return _e387;}return[];}}]);return AR;}();var CR=/*#__PURE__*/function(){function CR(){_classCallCheck(this,CR);}_createClass(CR,null,[{key:"mathMLToAccessible",value:function mathMLToAccessible(e,t,i){if(typeof t==="undefined"){t="en";}if(gR.containClass(e,"wrs_chemistry")){i.mode="chemistry";}var n="";if(CR.cache.get(e)){n=CR.cache.get(e);}else{i.service="mathml2accessible";i.lang=t;var _o124=JSON.parse(_R.getService("service",i));if(_o124.status!=="error"){n=_o124.result.text;CR.cache.populate(e,n);}else{n=yR.get("error_convert_accessibility");}}return n;}},{key:"cache",get:function get(){return CR._cache;},set:function set(e){CR._cache=e;}}]);return CR;}();CR._cache=new bR();var TR=i(129);var MR=/*#__PURE__*/function(){function MR(){_classCallCheck(this,MR);}_createClass(MR,null,[{key:"mathmlToImgObject",value:function mathmlToImgObject(e,t,i,n){var o=e.createElement("img");o.align="middle";o.style.maxWidth="none";var s=i||{};s.mml=t;s.lang=n;s.metrics="true";s.centerbaseline="false";if(pR.get("saveMode")==="base64"&&pR.get("base64savemode")==="default"){s.base64=true;}o.className=pR.get("imageClassName");if(t.indexOf('class="')!==-1){var _e388=t.substring(t.indexOf('class="')+'class="'.length,t.length);_e388=_e388.substring(0,_e388.indexOf('"'));_e388=_e388.substring(4,_e388.length);o.setAttribute(pR.get("imageCustomEditorName"),_e388);}if(pR.get("wirisPluginPerformance")&&(pR.get("saveMode")==="xml"||pR.get("saveMode")==="safeXml")){var _e389=JSON.parse(MR.createShowImageSrc(s,n));if(_e389.status==="warning"){try{_e389=JSON.parse(_R.getService("showimage",s));}catch(e){return null;}}var _e390=_e389;_e389=_e390.result;if(_e389.format==="png"){o.src="data:image/png;base64,".concat(_e389.content);}else{o.src="data:image/svg+xml;charset=utf8,".concat(xR.urlEncode(_e389.content));}o.setAttribute(pR.get("imageMathmlAttribute"),gR.safeXmlEncode(t));AR.setImgSize(o,_e389.content,true);if(pR.get("enableAccessibility")){if(typeof _e389.alt==="undefined"){o.alt=CR.mathMLToAccessible(t,n,s);}else{o.alt=_e389.alt;}}}else{var _e391=MR.createImageSrc(t,s);o.setAttribute(pR.get("imageMathmlAttribute"),gR.safeXmlEncode(t));o.src=_e391;AR.setImgSize(o,_e391,pR.get("saveMode")==="base64"&&pR.get("base64savemode")==="default");if(pR.get("enableAccessibility")){o.alt=CR.mathMLToAccessible(t,n,s);}}if(typeof MR.observer!=="undefined"){MR.observer.observe(o);}o.setAttribute("role","math");return o;}},{key:"createImageSrc",value:function createImageSrc(e,t){if(pR.get("saveMode")==="base64"&&pR.get("base64savemode")==="default"){t.base64=true;}var i=_R.getService("createimage",t);if(i.indexOf("@BASE@")!==-1){var _e392=_R.getServicePath("createimage").split("/");_e392.pop();i=i.split("@BASE@").join(_e392.join("/"));}return i;}},{key:"initParse",value:function initParse(e,t){e=MR.initParseSaveMode(e,t);return MR.initParseEditMode(e);}},{key:"initParseSaveMode",value:function initParseSaveMode(e,t){if(pR.get("saveMode")){e=vR.parseMathmlToLatex(e,mR.safeXmlCharacters);e=vR.parseMathmlToLatex(e,mR.xmlCharacters);e=MR.parseMathmlToImg(e,mR.safeXmlCharacters,t);e=MR.parseMathmlToImg(e,mR.xmlCharacters,t);if(pR.get("saveMode")==="base64"&&pR.get("base64savemode")==="image"){e=MR.codeImgTransform(e,"base642showimage");}}return e;}},{key:"initParseEditMode",value:function initParseEditMode(e){if(pR.get("parseModes").indexOf("latex")!==-1){var _t340=xR.getElementsByNameFromString(e,"img",true);var _i359='encoding="LaTeX">';var _n216=0;for(var _o125=0;_o125<_t340.length;_o125+=1){var _s90=e.substring(_t340[_o125].start+_n216,_t340[_o125].end+_n216);if(_s90.indexOf(" class=\"".concat(pR.get("imageClassName"),"\""))!==-1){var _r62=" ".concat(pR.get("imageMathmlAttribute"),"=\"");var _a36=_s90.indexOf(_r62);if(_a36===-1){_r62=' alt="';_a36=_s90.indexOf(_r62);}if(_a36!==-1){_a36+=_r62.length;var _c20=_s90.indexOf('"',_a36);var _l12=gR.safeXmlDecode(_s90.substring(_a36,_c20));var _d7=_l12.indexOf(_i359);if(_d7!==-1){_d7+=_i359.length;var _s91=_l12.indexOf("</annotation>",_d7);var _r63=_l12.substring(_d7,_s91);var _a37="$$".concat(xR.htmlEntitiesDecode(_r63),"$$");var _c21=e.substring(0,_t340[_o125].start+_n216);var _u6=e.substring(_t340[_o125].end+_n216);e=_c21+_a37+_u6;_n216+=_a37.length-(_t340[_o125].end-_t340[_o125].start);}}}}}return e;}},{key:"endParse",value:function endParse(e){var t=MR.endParseEditMode(e);var i=MR.endParseSaveMode(t);return i;}},{key:"endParseEditMode",value:function endParseEditMode(e){if(pR.get("parseModes").indexOf("latex")!==-1){var _t341="";var _i360=0;var _n217=e.indexOf("$$");while(_n217!==-1){_t341+=e.substring(_i360,_n217);_i360=e.indexOf("$$",_n217+2);if(_i360!==-1){var _o126=e.substring(_n217+2,_i360);var _s92=xR.htmlEntitiesDecode(_o126);var _r64=vR.getMathMLFromLatex(_s92,true);if(!pR.get("saveHandTraces")){_r64=gR.removeAnnotation(_r64,"application/json");}_t341+=_r64;_i360+=2;}else{_t341+="$$";_i360=_n217+2;}_n217=e.indexOf("$$",_i360);}_t341+=e.substring(_i360,e.length);e=_t341;}return e;}},{key:"endParseSaveMode",value:function endParseSaveMode(e){if(pR.get("saveMode")){if(pR.get("saveMode")==="safeXml"){e=MR.codeImgTransform(e,"img2mathml");}else if(pR.get("saveMode")==="xml"){e=MR.codeImgTransform(e,"img2mathml");}else if(pR.get("saveMode")==="base64"&&pR.get("base64savemode")==="image"){e=MR.codeImgTransform(e,"img264");}}return e;}},{key:"createShowImageSrc",value:function createShowImageSrc(e,t){var i=[];var n=["mml","color","centerbaseline","zoom","dpi","fontSize","fontFamily","defaultStretchy","backgroundColor","format"];n.forEach(function(t){var o=n[t];if(typeof e[o]!=="undefined"){i[o]=e[o];}});var o={};Object.keys(e).forEach(function(t){if(t!=="mml"){o[t]=e[t];}});o.formula=com.wiris.js.JsPluginTools.md5encode(xR.propertiesToString(i));o.lang=typeof t==="undefined"?"en":t;o.version=pR.get("version");var s=_R.getService("showimage",xR.httpBuildQuery(o),true);return s;}},{key:"codeImgTransform",value:function codeImgTransform(e,t){var i="";var n=0;var o=/<img/gi;var s=o.source.length;while(o.test(e)){var _r65=o.lastIndex-s;i+=e.substring(n,_r65);var _a38=_r65+1;while(_a38<e.length&&n<=_r65){var _t342=e.charAt(_a38);if(_t342==='"'||_t342==="'"){var _i361=e.indexOf(_t342,_a38+1);if(_i361===-1){_a38=e.length;}else{_a38=_i361;}}else if(_t342===">"){n=_a38+1;}_a38+=1;}if(n<_r65){i+=e.substring(_r65,e.length);return i;}var _c22=e.substring(_r65,n);var _l13=xR.createObject(_c22);var _d8=_l13.getAttribute(pR.get("imageMathmlAttribute"));var _u7=void 0;var _h5=void 0;if(t==="base642showimage"){if(_d8==null){_d8=_l13.getAttribute("alt");}_d8=gR.safeXmlDecode(_d8);_c22=MR.mathmlToImgObject(document,_d8,null,null);i+=xR.createObjectCode(_c22);}else if(t==="img2mathml"){if(pR.get("saveMode")){if(pR.get("saveMode")==="safeXml"){_u7=true;_h5=true;}else if(pR.get("saveMode")==="xml"){_u7=true;_h5=false;}}i+=xR.getWIRISImageOutput(_c22,_u7,_h5);}else if(t==="img264"){if(_d8===null){_d8=_l13.getAttribute("alt");}_d8=gR.safeXmlDecode(_d8);var _e393={};_e393.base64="true";_c22=MR.mathmlToImgObject(document,_d8,_e393,null);AR.setImgSize(_c22,_c22.src,true);i+=xR.createObjectCode(_c22);}}i+=e.substring(n,e.length);return i;}},{key:"parseMathmlToImg",value:function parseMathmlToImg(e,t,i){var n="";var o="".concat(t.tagOpener,"math");var s="".concat(t.tagOpener,"/math").concat(t.tagCloser);var r=e.indexOf(o);var a=0;while(r!==-1){n+=e.substring(a,r);var _c23=e.indexOf(pR.get("imageMathmlAttribute"));a=e.indexOf(s,r);if(a===-1){a=e.length-1;}else if(_c23!==-1){a+=e.indexOf("/>",r);}else{a+=s.length;}if(!gR.isMathmlInAttribute(e,r)&&_c23===-1){var _o127=e.substring(r,a);_o127=t.id===mR.safeXmlCharacters.id?gR.safeXmlDecode(_o127):gR.mathMLEntities(_o127);n+=xR.createObjectCode(MR.mathmlToImgObject(document,_o127,null,i));}else{n+=e.substring(r,a);}r=e.indexOf(o,a);}n+=e.substring(a,e.length);return n;}}]);return MR;}();if(typeof MutationObserver!=="undefined"){var _e394=new MutationObserver(function(e){e.forEach(function(e){if(e.oldValue===pR.get("imageClassName")&&e.attributeName==="class"&&e.target.className.indexOf(pR.get("imageClassName"))===-1){e.target.className=pR.get("imageClassName");}});});MR.observer=Object.create(_e394);MR.observer.Config={attributes:true,attributeOldValue:true};MR.observer.observe=function e(t){Object.getPrototypeOf(this).observe(t,this.Config);};}var ER=/*#__PURE__*/function(){function ER(){_classCallCheck(this,ER);this.isContentChanged=false;this.waitingForChanges=false;}_createClass(ER,[{key:"setIsContentChanged",value:function setIsContentChanged(e){this.isContentChanged=e;}},{key:"getIsContentChanged",value:function getIsContentChanged(){return this.isContentChanged;}},{key:"setWaitingForChanges",value:function setWaitingForChanges(e){this.waitingForChanges=e;}},{key:"caretPositionChanged",value:function caretPositionChanged(e){}},{key:"clipboardChanged",value:function clipboardChanged(e){}},{key:"contentChanged",value:function contentChanged(e){if(this.waitingForChanges===true&&this.isContentChanged===false){this.isContentChanged=true;}}},{key:"styleChanged",value:function styleChanged(e){}},{key:"transformationReceived",value:function transformationReceived(e){}}]);return ER;}();var PR=/*#__PURE__*/function(){function PR(e){_classCallCheck(this,PR);this.editorAttributes={};if("editorAttributes"in e){this.editorAttributes=e.editorAttributes;}else{throw new Error("ContentManager constructor error: editorAttributes property missed.");}this.customEditors=null;if("customEditors"in e){this.customEditors=e.customEditors;}this.environment={};if("environment"in e){this.environment=e.environment;}else{throw new Error("ContentManager constructor error: environment property missed");}this.language="";if("language"in e){this.language=e.language;}else{throw new Error("ContentManager constructor error: language property missed");}this.editorListener=new ER();this.editor=null;this.ua=navigator.userAgent.toLowerCase();this.deviceProperties={};this.deviceProperties.isAndroid=this.ua.indexOf("android")>-1;this.deviceProperties.isIOS=this.ua.indexOf("ipad")>-1||this.ua.indexOf("iphone")>-1;this.toolbar=null;this.modalDialogInstance=null;this.listeners=new wR();this.mathML=null;this.isNewElement=true;this.integrationModel=null;this.isEditorLoaded=false;}_createClass(PR,[{key:"addListener",value:function addListener(e){this.listeners.add(e);}},{key:"setIntegrationModel",value:function setIntegrationModel(e){this.integrationModel=e;}},{key:"setModalDialogInstance",value:function setModalDialogInstance(e){this.modalDialogInstance=e;}},{key:"insert",value:function insert(){this.updateTitle(this.modalDialogInstance);this.insertEditor(this.modalDialogInstance);}},{key:"insertEditor",value:function insertEditor(){if(window.com&&window.com.wiris&&window.com.wiris.jsEditor&&window.com.wiris.jsEditor.JsEditor&&window.com.wiris.jsEditor.JsEditor.newInstance){this.editor=window.com.wiris.jsEditor.JsEditor.newInstance(this.editorAttributes);this.editor.insertInto(this.modalDialogInstance.contentContainer);this.editor.focus();if(this.modalDialogInstance.rtl){this.editor.action("rtl");}if(this.editor.getEditorModel().isRTL()){this.editor.element.style.direction="rtl";}this.editor.getEditorModel().addEditorListener(this.editorListener);if(this.modalDialogInstance.deviceProperties.isIOS){setTimeout(function e(){this.modalDialogInstance.hideKeyboard();},400);var _e395=document.getElementsByClassName("wrs_formulaDisplay")[0];xR.addEvent(_e395,"focus",this.modalDialogInstance.handleOpenedIosSoftkeyboard);xR.addEvent(_e395,"blur",this.modalDialogInstance.handleClosedIosSoftkeyboard);}this.listeners.fire("onLoad",{});this.isEditorLoaded=true;}else{setTimeout(PR.prototype.insertEditor.bind(this),100);}}},{key:"init",value:function init(){var e=document.createElement("script");e.type="text/javascript";var t=pR.get("editorUrl");var i=document.createElement("a");i.href=t;if(window.location.href.indexOf("https://")===0){if(i.protocol==="http:"){i.protocol="https:";}}if(i.port==="80"||i.port==="443"){t="".concat(i.protocol,"//").concat(i.hostname,"/").concat(i.pathname);}else{t="".concat(i.protocol,"//").concat(i.hostname,":").concat(i.port,"/").concat(i.pathname);}var n={};if("editor"in this.environment){n.editor=this.environment.editor;}else{n.editor="unknown";}if("mode"in this.environment){n.mode=this.environment.mode;}else{n.mode=pR.get("saveMode");}if("version"in this.environment){n.version=this.environment.version;}else{n.version=pR.get("version");}e.src="".concat(t,"?lang=").concat(this.language,"&stats-editor=").concat(n.editor,"&stats-mode=").concat(n.mode,"&stats-version=").concat(n.version);document.getElementsByTagName("head")[0].appendChild(e);}},{key:"setInitialContent",value:function setInitialContent(){if(!this.isNewElement){this.setMathML(this.mathML);}}},{key:"setMathML",value:function setMathML(e,t){var _this340=this;if(typeof t==="undefined"){t=false;}this.editor.setMathMLWithCallback(e,function(){_this340.editorListener.setWaitingForChanges(true);});setTimeout(function(){_this340.editorListener.setIsContentChanged(false);},500);if(!t){this.onFocus();}}},{key:"onFocus",value:function onFocus(){if(typeof this.editor!=="undefined"&&this.editor!=null){this.editor.focus();}}},{key:"submitAction",value:function submitAction(){if(!this.editor.isFormulaEmpty()){var _e396=this.editor.getMathMLWithSemantics();if(this.customEditors.getActiveEditor()!==null){var _this$customEditors$g=this.customEditors.getActiveEditor(),_t344=_this$customEditors$g.toolbar;_e396=gR.addCustomEditorClassAttribute(_e396,_t344);}else{Object.keys(this.customEditors.editors).forEach(function(t){_e396=gR.removeCustomEditorClassAttribute(_e396,t);});}var _t343=gR.mathMLEntities(_e396);this.integrationModel.updateFormula(_t343);}else{this.integrationModel.updateFormula(null);}this.customEditors.disable();this.integrationModel.notifyWindowClosed();this.setEmptyMathML();this.customEditors.disable();}},{key:"setEmptyMathML",value:function setEmptyMathML(){if(this.deviceProperties.isAndroid||this.deviceProperties.isIOS){if(this.editor.getEditorModel().isRTL()){this.setMathML('<math dir="rtl"><semantics><annotation encoding="application/json">[]</annotation></semantics></math>',true);}else{this.setMathML('<math><semantics><annotation encoding="application/json">[]</annotation></semantics></math>',true);}}else if(this.editor.getEditorModel().isRTL()){this.setMathML('<math dir="rtl"/>',true);}else{this.setMathML("<math/>",true);}}},{key:"onOpen",value:function onOpen(){if(this.isNewElement){this.setEmptyMathML();}else{this.setMathML(this.mathML);}this.updateToolbar();this.onFocus();}},{key:"updateToolbar",value:function updateToolbar(){this.updateTitle(this.modalDialogInstance);var e=this.customEditors.getActiveEditor();if(e){var _t345=e.toolbar?e.toolbar:_wrs_int_wirisProperties.toolbar;if(this.toolbar==null||this.toolbar!==_t345){this.setToolbar(_t345);}}else{var _e397=this.getToolbar();if(this.toolbar==null||this.toolbar!==_e397){this.setToolbar(_e397);this.customEditors.disable();}}}},{key:"updateTitle",value:function updateTitle(){var e=this.customEditors.getActiveEditor();if(e){this.modalDialogInstance.setTitle(e.title);}else{this.modalDialogInstance.setTitle("MathType");}}},{key:"getToolbar",value:function getToolbar(){var e="general";if("toolbar"in this.editorAttributes){e=this.editorAttributes.toolbar;}if(e==="general"){e=typeof _wrs_int_wirisProperties==="undefined"||typeof _wrs_int_wirisProperties.toolbar==="undefined"?"general":_wrs_int_wirisProperties.toolbar;}return e;}},{key:"setToolbar",value:function setToolbar(e){this.toolbar=e;this.editor.setParams({toolbar:this.toolbar});}},{key:"hasChanges",value:function hasChanges(){return!this.editor.isFormulaEmpty()&&this.editorListener.getIsContentChanged();}},{key:"onKeyDown",value:function onKeyDown(e){if(e.key!==undefined&&e.repeat===false){if(e.key==="Escape"||e.key==="Esc"){var _t346=document.getElementsByClassName("wrs_expandButton wrs_expandButtonFor3RowsLayout wrs_pressed");if(_t346.length===0){_t346=document.getElementsByClassName("wrs_expandButton wrs_expandButtonFor2RowsLayout wrs_pressed");if(_t346.length===0){_t346=document.getElementsByClassName("wrs_select wrs_pressed");if(_t346.length===0){this.modalDialogInstance.cancelAction();e.stopPropagation();e.preventDefault();}}}}else if(e.shiftKey&&e.key==="Tab"){if(document.activeElement===this.modalDialogInstance.submitButton){this.editor.focus();e.stopPropagation();e.preventDefault();}else{var _t347=document.querySelector('[title="Manual"]');if(document.activeElement===_t347){this.modalDialogInstance.cancelButton.focus();e.stopPropagation();e.preventDefault();}}}else if(e.key==="Tab"){if(document.activeElement===this.modalDialogInstance.cancelButton){var _t348=document.querySelector('[title="Manual"]');_t348.focus();e.stopPropagation();e.preventDefault();}else{var _t349=document.getElementsByClassName("wrs_formulaDisplay")[0];if(_t349.getAttribute("class")==="wrs_formulaDisplay wrs_focused"){this.modalDialogInstance.submitButton.focus();e.stopPropagation();e.preventDefault();}}}}}}]);return PR;}();var SR=/*#__PURE__*/function(){function SR(){_classCallCheck(this,SR);this.editors=[];this.activeEditor="default";}_createClass(SR,[{key:"addEditor",value:function addEditor(e,t){var i={};i.name=t.name;i.toolbar=t.toolbar;i.icon=t.icon;i.confVariable=t.confVariable;i.title=t.title;i.tooltip=t.tooltip;this.editors[e]=i;}},{key:"enable",value:function enable(e){this.activeEditor=e;}},{key:"disable",value:function disable(){this.activeEditor="default";}},{key:"getActiveEditor",value:function getActiveEditor(){if(this.activeEditor!=="default"){return this.editors[this.activeEditor];}return null;}}]);return SR;}();var IR={imageCustomEditorName:"data-custom-editor",imageClassName:"Wirisformula",CASClassName:"Wiriscas"};var NR=IR;var OR=/*#__PURE__*/function(){function OR(){_classCallCheck(this,OR);this.cancelled=false;this.defaultPrevented=false;}_createClass(OR,[{key:"cancel",value:function cancel(){this.cancelled=true;}},{key:"preventDefault",value:function preventDefault(){this.defaultPrevented=true;}}]);return OR;}();var RR=/*#__PURE__*/function(){function RR(e){_classCallCheck(this,RR);this.overlayElement=e.overlayElement;this.callbacks=e.callbacks;this.overlayWrapper=this.overlayElement.appendChild(document.createElement("div"));this.overlayWrapper.setAttribute("class","wrs_popupmessage_overlay_envolture");this.message=this.overlayWrapper.appendChild(document.createElement("div"));this.message.id="wrs_popupmessage";this.message.setAttribute("class","wrs_popupmessage_panel");this.message.setAttribute("role","dialog");this.message.setAttribute("aria-describedby","description_txt");var t=document.createElement("p");var i=document.createTextNode(e.strings.message);t.appendChild(i);t.id="description_txt";this.message.appendChild(t);var n=this.overlayWrapper.appendChild(document.createElement("div"));n.setAttribute("class","wrs_popupmessage_overlay");n.addEventListener("click",this.cancelAction.bind(this));this.buttonArea=this.message.appendChild(document.createElement("div"));this.buttonArea.setAttribute("class","wrs_popupmessage_button_area");this.buttonArea.id="wrs_popup_button_area";var o={"class":"wrs_button_accept",innerHTML:e.strings.submitString,id:"wrs_popup_accept_button"};this.closeButton=this.createButton(o,this.closeAction.bind(this));this.buttonArea.appendChild(this.closeButton);var s={"class":"wrs_button_cancel",innerHTML:e.strings.cancelString,id:"wrs_popup_cancel_button"};this.cancelButton=this.createButton(s,this.cancelAction.bind(this));this.buttonArea.appendChild(this.cancelButton);}_createClass(RR,[{key:"createButton",value:function createButton(e,t){var i={};i=document.createElement("button");i.setAttribute("id",e.id);i.setAttribute("class",e["class"]);i.innerHTML=e.innerHTML;i.addEventListener("click",t);return i;}},{key:"show",value:function show(){if(this.overlayWrapper.style.display!=="block"){document.activeElement.blur();this.overlayWrapper.style.display="block";this.closeButton.focus();}else{this.overlayWrapper.style.display="none";_wrs_modalWindow.focus();}}},{key:"cancelAction",value:function cancelAction(){this.overlayWrapper.style.display="none";if(typeof this.callbacks.cancelCallback!=="undefined"){this.callbacks.cancelCallback();}}},{key:"closeAction",value:function closeAction(){this.cancelAction();if(typeof this.callbacks.closeCallback!=="undefined"){this.callbacks.closeCallback();}}},{key:"onKeyDown",value:function onKeyDown(e){if(e.key!==undefined){if(e.key==="Escape"||e.key==="Esc"){this.cancelAction();e.stopPropagation();e.preventDefault();}else if(e.key==="Tab"){if(document.activeElement===this.closeButton){this.cancelButton.focus();}else{this.closeButton.focus();}e.stopPropagation();e.preventDefault();}}}}]);return RR;}();var LR='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   viewBox="0 0 13.76 13.76"\n   height="13.76"\n   width="13.76"\n   id="svg3783"\n   version="1.1">\n  <metadata\n     id="metadata3789">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <defs\n     id="defs3787" />\n  <image\n     y="0"\n     x="0"\n     id="image3791"\n     xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAACXBIWXMAAC4jAAAuIwF4pT92AAAB\nvklEQVRYw83Z23GDMBAF0AsNhBIowSVQgjuISnAJKSEdZNOBS6CDOBUkqSC4gs2PyGhAQg92se4M\n4w8bccYW2hVumBmRdAB6ADfopQcw2SOYNoIkAL8APgB8AzgLI0/2S/iy1xkt3B9m9h0dM9/YHxM4\nJ/c4MfPkGX+y763OyYVKgUPQTXAJdC84Bg2CS6Gl4FSoF7wHmgvOhbrgzsW+8L4YJegccrEj749R\ngs7ZXGdz8wbAeNbREcDTzrHvblEgBbAUFACuy6JALJeL0E/P9sbvmBnNojcgAM+oJ58AhrlnWM5Z\nA+C9RmiokakBvIJuNTLSc7hojqY0Mo8EB6Ep2CPBm9BU7BHgKDQHqwlOguZiNcDJ0JLe4FV4iaLY\nJjF16dLqnoob+EdDs8A1QJPBtUCTwDVBo+DaoJvgNvBIR6rDl9wirbA1QIPgVgl6VwHb+dAr7Jkk\nS/Pg3mCkVOslxxV9yBFqSqTA/3N2Utkzye3pftw5OxzQ5tHeddcdzGj3o4VgClUwowgtAVOs3BpF\naA6YUnsDowhNAVNu12UUoVtgCn2+ifxp1wO42Ner4KPR5dJ2tsse2ZLvTQxbVf4AmC2z7WnSvpIA\nAAAASUVORK5CYII=\n"\n     style="image-rendering:optimizeQuality"\n     preserveAspectRatio="none"\n     height="13.76"\n     width="13.76" />\n</svg>\n';var zR='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   viewBox="0 0 13.76 13.76"\n   height="13.76"\n   width="13.76"\n   id="svg2"\n   version="1.1">\n  <metadata\n     id="metadata8">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <defs\n     id="defs6" />\n  <image\n     y="0"\n     x="0"\n     id="image10"\n     xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAACXBIWXMAAC4jAAAuIwF4pT92AAAB\n2ElEQVRYw9XZoXPCMBTH8S+5KfDzQ29606CH3/SmQTO96aGHHn/F0Himh8eDZSblQknSJH2F0DtE\nQw8+12vyfulr7XY7LuW4qvj+DugD18AC+AE2woa+/mz07y9cF7Y8d7YPDEtjK2AsCB4BvdLYHPi0\nXawioAA3wAfQaQiKHhuFYl1QSbAL6gWrSKgEuArqBKsEaB1wKNQKVsasHybcpRhwLNQED0zsoMbz\nFwJOhWL6Cmzd2e0D14Wi1/k9di2wFNnAEtBifd9jv4GtIPgaeBOCAkzLFayr/6idWSSY6DJ8sHT9\n6VK6zRFqKwo5gQ+grnKbA/gI6gsy5wRboT7sucBOaBX21GAvNAR7KnAlNBTbNDgIGoMtwO/C0Gko\nNBZbN525tk+dJrAj4F4YGxXgVQS019DkCgarM0OjwCoDaDBYZQINAquMoJVglRnUC1YZQp1g1RB0\nJryn65jYJ0HoRGPHguDX8hsZ6VAiGX4eUrJBbHqSArdN7LLBmCcBnpvYWfHWo6E8Wge8Ar7Kj8E4\nARwcnBPBB20BE7uJBMdAU8BH/YvyBAsFp0BjwNZGi201qALXgYaAnR0hX2upAzwDj/p8raFL5I4u\n8ALc6vNfvc+ztq5al9Rh/AfwZZ/LmlMllAAAAABJRU5ErkJggg==\n"\n     style="image-rendering:optimizeQuality"\n     preserveAspectRatio="none"\n     height="13.76"\n     width="13.76" />\n</svg>\n';var DR='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   viewBox="0 0 13.76 13.76"\n   height="13.76"\n   width="13.76"\n   id="svg3793"\n   version="1.1">\n  <metadata\n     id="metadata3799">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <defs\n     id="defs3797" />\n  <image\n     y="0"\n     x="0"\n     id="image3801"\n     xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAAAXNSR0IArs4c6QAAAARnQU1BAACx\njwv8YQUAAAAJcEhZcwAALiMAAC4jAXilP3YAAAG4SURBVFhHvZnhUYNAEEbRBkwH2oGUkA40FWgJ\nKSEdaAmxA0vQDmIHKSFWgPuAHZkEAnd8y5v5kuNHMm+WY1mSm6qqCiGlZdUspXzxopY9Wu6bpZQf\nSxlRWapwVx9p2dy2CxUHy9ryWx9pKdWyECYcIQshwlGyIBeOlAWpcLQsyISXkAWEX5tlPkvJwnP7\nns1SsnvLS7PMZwlZiShEy8pEIVJWKgpRsnJRiJBNFf2wbCzjfZgRUZi9JYWDxT9bWk6WIXbKym4t\nKRVloObO5oze6ZClWX9a5jyOcOrfmuUkXPRUH/1zVRhZpvsnCxN+jnDqHh0SdQaFu9vg0ZIqrBZ1\neoXP92yKcJSocyHcd4FNEY4WdbrCR1rGrukMF9BWVhZvLZ7U9rS2nH9HVvoq63iFu+RUlOpIuCYL\nCCPIqVjq1A9j5R3aBnMY2kKzMlbZHPQVbVHLhomCUjZUFFSy35ZQUVDIMo+Gi4JCltFwERSy75Y5\n4+VkFLLcKHLHyyRUF1jOeJmMShbChZWy0Df8yFDLgg8/cpCN6I9cdHJhZHmy7X2anAnCtDUZ/j/Y\ng2X2j709MHhTDAFF8QdK9SRpUl2yFgAAAABJRU5ErkJggg==\n"\n     style="image-rendering:optimizeQuality"\n     preserveAspectRatio="none"\n     height="13.76"\n     width="13.76" />\n</svg>\n';var jR='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   viewBox="0 0 13.76 13.76"\n   height="13.76"\n   width="13.76"\n   id="svg12"\n   version="1.1">\n  <metadata\n     id="metadata18">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <defs\n     id="defs16" />\n  <image\n     y="0"\n     x="0"\n     id="image20"\n     xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAAAXNSR0IArs4c6QAAAARnQU1BAACx\njwv8YQUAAAAJcEhZcwAALiMAAC4jAXilP3YAAAGMSURBVFhHvdk7TsNAFIVhQ0l6elLDJqCGngXQ\nU7MA6rALahZATQ81C6APrXP/jEaKHD/i8TnzS1eaICF/2I4f4qxt20bYOmaVlrK2Mb8s1Nj3mIu0\nlPYZszlPa1kvMf9pKe02Zq3Gcrhc4JUaSzawA0sWsAtLcrATS1KwG0sycA0sAd6kZXm1sNzVHtOy\nvBpYoK8xV/tPC3JjZVByYqVQcmHlUHJgLVBSY0ugPP7xO5PXYSW2FMr19ytm8sahxD7ElEBzk3c6\nsFysn/afymKPvsXMueh3oblRMNibmPuYZ34wsyWHfqhB8OFpwKvDHLADmusFd8/ZU8FOaO4I3PcF\nmwLXgOYOwVtexdnwdUy3vg2UQPnD2eji+vZsrruHS/eoBEpjWMpgrhi1Dv1gY6fBkuRQmtqzJVmg\npMbaoKTEWqGkwtqhpMBWgZICWwVKCuwpzxKSFNi5T2vFqb5gVcAqLNnBSixZwWos2cBg/9JSmgUM\n9iMt5QFe8tZ8VP6n3WXMHQtxPzHfabm0ptkBwWhpthzMp7YAAAAASUVORK5CYII=\n"\n     style="image-rendering:optimizeQuality"\n     preserveAspectRatio="none"\n     height="13.76"\n     width="13.76" />\n</svg>\n';var BR='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   viewBox="0 0 13.76 13.76"\n   height="13.76"\n   width="13.76"\n   id="svg3813"\n   version="1.1">\n  <metadata\n     id="metadata3819">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <defs\n     id="defs3817" />\n  <image\n     y="0"\n     x="0"\n     id="image3821"\n     xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAACXBIWXMAAC4jAAAuIwF4pT92AAAA\nnUlEQVRYw+3Z0QnCMBSF4T/FATqCG1g3cISO0NE6iiPoCE5gneD40ohPvgkJ/AcC9/EjHELgliT0\nkoGOIlasWLFixYoVK1asWLFixYoVK1bsjxy+5hlYgLEx47ofSEKSJW1nTUJJMgLPDlpwHoCpk8rO\nvgZixf4Zu3Vi3cq+WroBp4ahL+BYa3AB7o1CH7vvc7M1U4N/g2sdSk8bxjfDaMNdr+hmAQAAAABJ\nRU5ErkJggg==\n"\n     style="image-rendering:optimizeQuality"\n     preserveAspectRatio="none"\n     height="13.76"\n     width="13.76" />\n</svg>\n';var VR='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   viewBox="0 0 13.76 13.76"\n   height="13.76"\n   width="13.76"\n   id="svg32"\n   version="1.1">\n  <metadata\n     id="metadata38">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <defs\n     id="defs36" />\n  <image\n     y="0"\n     x="0"\n     id="image40"\n     xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAACXBIWXMAAC4jAAAuIwF4pT92AAAA\npklEQVRYw+3ZLQ4CMRCG4bcbFOvXg99T7FG4BafAw1VALx7dWyy2mIoGgSOZJu/n6p70ZybppFIK\nvWSgo4gVK1asWLFixYoVK1asWLFixYoV+yO7r/UMHIAxiO8FZGBrsUfgDEwBN/QNXIA11S/PW1Bo\nCz4N9ein4Nd1Dyw9PbDR0iVW7J+xudax6HkOtZVdg0MfQE7N0G4GlmANYgNW4A6QepowfgDMXB26\nb1V6LAAAAABJRU5ErkJggg==\n"\n     style="image-rendering:optimizeQuality"\n     preserveAspectRatio="none"\n     height="13.76"\n     width="13.76" />\n</svg>\n';var FR='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   viewBox="0 0 13.76 13.76"\n   height="13.76"\n   width="13.76"\n   id="svg3823"\n   version="1.1">\n  <metadata\n     id="metadata3829">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <defs\n     id="defs3827" />\n  <image\n     y="0"\n     x="0"\n     id="image3831"\n     xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAAAXNSR0IArs4c6QAAAARnQU1BAACx\njwv8YQUAAAAJcEhZcwAALiMAAC4jAXilP3YAAAHOSURBVFhH1ZiLUcMwEEQNDcQl0AEuISVABZhO\nUkroICVAB6ECoINQgdmVfR5FlmQrkZzjzezEzsc8NPqcdNd1XfVfuB9ec3NAmv4yiRo5ImzBlm+c\nwZYtEHJCGsT3eSgHxKZFxs/tL+aMkCK8R3yMwu4PcsVmiXBIVDDCvh/miEtMeE5UaEsNMJcN8o64\ng26PvPSXs9S+/zRHQtgtvLRFCb9blZpnYw/9Rb6RR3M3zxtiprFbyKYwipK1+uwlnIkSrbITUaJR\n1itKtMkGRYk2WRZAQbTNBpzWtggrrwnaWja00hk0DrCgsEZZ4hXWKksmwjLAHobkgOv+V3+ZhXHQ\niWxKqXYLKNyILDdqbPKlldASPhA+Mxc7uwatkSOSix1iP//q2APshLBvfJo7hbizgQj/mDtl+KYu\nCj8h7NSqCM2zXJvZwqqEY4uCOuGYLKEwJ3kVzMlyscg5915FTFbdqhaSVbn8+mTV1gmurOqCxpZN\nEeUu9BlZd1obioTkQ7IhPGTjYZuPIoUMK/GUFrX39asuHJTlH3w1d3FCBxCrCUufZX+NCUdPSsAq\nwu4A8wnPiQrFhW1Z4govFRWKCoeOjzjoZF92CdwpZy6AquoPvJRHJxB8bJ8AAAAASUVORK5CYII=\n"\n     style="image-rendering:optimizeQuality"\n     preserveAspectRatio="none"\n     height="13.76"\n     width="13.76" />\n</svg>\n';var HR='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   viewBox="0 0 13.76 13.76"\n   height="13.76"\n   width="13.76"\n   id="svg42"\n   version="1.1">\n  <metadata\n     id="metadata48">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <defs\n     id="defs46" />\n  <image\n     y="0"\n     x="0"\n     id="image50"\n     xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAAAXNSR0IArs4c6QAAAARnQU1BAACx\njwv8YQUAAAAJcEhZcwAALiMAAC4jAXilP3YAAAG/SURBVFhH1ZgxUsMwEEUNJRyAGmp6qKGn5xRQ\nQ08NNfRQQw11DpAaanIAWrMv8WaELSlexhLLm/mRnImiF48jr7zVtm3zX9ju2ik5llxLdpdHNg4k\nT5I7yWB8Cdl9yZHkRmIRRpQxOxK+YzC+hKwSnTBBKKoMxpeUBSbkksgRE1V+CJeWhUPJ5ao7ICeq\nrIVryMKJpC88RlTZk1SThVDYIvoluZIsSqyz511SfEg4UxbRdw5qnlmFa9AsCn8hO4aBKHiUjYqC\nN9mkKHiSzYqCJ9lPSVIUPMmySqTudEu8XbOxO90ab7KQFPYoC1Fhr7IwENbagMLCUtXnoCTM1QZW\n3iS3dFT2mRfHvEjuVfZUckFnQh67dgqo1GYqC1MLn3XtZIR/sFcJW2C39FcD18KxpcutcGqddSmc\nuykg/LDq+iAnC/OudUFOVrfLbkjJWvb11YjJuhSFvqxbUQhlXYuCylpE2YXy2SkLlVEgaxVluzyT\nIEutWQ1kKZYtouF2maK4mjCyFN6bJsw9gKgmrNdsbsKNT0qEKsIqC7EJx4gqxYVDWQgntIgqRYXD\nbY3CLpcVgmdPC974BYy3/MgRNM03hR9ubFTHT48AAAAASUVORK5CYII=\n"\n     style="image-rendering:optimizeQuality"\n     preserveAspectRatio="none"\n     height="13.76"\n     width="13.76" />\n</svg>\n';var WR='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   viewBox="0 0 13.44 13.76"\n   height="13.76"\n   width="13.44"\n   id="svg3803"\n   version="1.1">\n  <metadata\n     id="metadata3809">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <defs\n     id="defs3807" />\n  <image\n     y="0"\n     x="0"\n     id="image3811"\n     xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAArCAYAAAAOnxr+AAAACXBIWXMAAC4jAAAuIwF4pT92AAAA\nvElEQVRYw+3ZSw0CMRSF4b8T9iAFB4wDkDAWcICEkTA4GAeAA3AADurgsCkbAgsSMrmFczZNd1/a\n3vSVJFFDGipJNdBZaRdAB2wC2TIwAgNAkrQEjsA86GBegDZJGoF18JnfJtVR9idXvaGGGmrod/b6\nV9kD14k9LbD6FDqUM8CU2b2Deo0aaqihhhpqqKGGGhr1hH/wiP469FaBMzflEhc9PZKQ1CtmsqRO\nEunpHbeNNN3A+dFJ/mf6V+gduGPIoUgKLbAAAAAASUVORK5CYII=\n"\n     style="image-rendering:optimizeQuality"\n     preserveAspectRatio="none"\n     height="13.76"\n     width="13.44" />\n</svg>\n';var UR='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   xmlns:dc="http://purl.org/dc/elements/1.1/"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:xlink="http://www.w3.org/1999/xlink"\n   viewBox="0 0 13.44 13.76"\n   height="13.76"\n   width="13.44"\n   id="svg22"\n   version="1.1">\n  <metadata\n     id="metadata28">\n    <rdf:RDF>\n      <cc:Work\n         rdf:about="">\n        <dc:format>image/svg+xml</dc:format>\n        <dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />\n        <dc:title></dc:title>\n      </cc:Work>\n    </rdf:RDF>\n  </metadata>\n  <defs\n     id="defs26" />\n  <image\n     y="0"\n     x="0"\n     id="image30"\n     xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAArCAYAAAAOnxr+AAAACXBIWXMAAC4jAAAuIwF4pT92AAAA\nvUlEQVRYw+3ZsQ3CMBCF4d8WFekZgBqWIDUDZACmYBQWYIn0pGYAegZIexROERHRIBTdhXeVy08+\nyT4/JzMjQmWCVBjoarSugK0z3/0degKODjeyBy5Am8ysARrnnT8nM7sCa+fQLgdAAlQ6ngQVVFBB\nfzeUTK6t8VAwU328ztV6QQUVVFBBBRVUUEG9Ds41sJvZs/8GelDrlw7tAjhvmZLo9o6RD4bEGUp+\nX1My/I0T4HN4rrcASf9M/wp9ASNzIKYYz2hAAAAAAElFTkSuQmCC\n"\n     style="image-rendering:optimizeQuality"\n     preserveAspectRatio="none"\n     height="13.76"\n     width="13.44" />\n</svg>\n';var $R=/*#__PURE__*/function(){function $R(e){var _this341=this;_classCallCheck(this,$R);this.attributes=e;var t=navigator.userAgent.toLowerCase();var i=t.indexOf("android")>-1;var n=t.indexOf("ipad")>-1||t.indexOf("iphone")>-1;this.iosSoftkeyboardOpened=false;this.iosMeasureUnit=t.indexOf("crios")===-1?"%":"vh";this.iosDivHeight="100%".concat(this.iosMeasureUnit);var o=window.outerWidth;var s=window.outerHeight;var r=o>s;var a=o<s;var c=r&&this.attributes.height>s;var l=a&&this.attributes.width>o;var d=c||l;this.instanceId=document.getElementsByClassName("wrs_modal_dialogContainer").length;this.deviceProperties={orientation:r?"landscape":"portait",isAndroid:i,isIOS:n,isMobile:d,isDesktop:!d&&!n&&!i};this.properties={created:false,state:"",previousState:"",position:{bottom:0,right:10},size:{height:338,width:580}};this.websiteBeforeLockParameters=null;var u={};u["class"]="wrs_modal_overlay";u.id=this.getElementId(u["class"]);this.overlay=xR.createElement("div",u);u={};u["class"]="wrs_modal_title_bar";u.id=this.getElementId(u["class"]);this.titleBar=xR.createElement("div",u);u={};u["class"]="wrs_modal_title";u.id=this.getElementId(u["class"]);this.title=xR.createElement("div",u);this.title.innerHTML="";u={};u["class"]="wrs_modal_close_button";u.id=this.getElementId(u["class"]);u.title=yR.get("close");u.style={};this.closeDiv=xR.createElement("a",u);this.closeDiv.setAttribute("role","button");var h="background-size: 10px; background-image: url(data:image/svg+xml;base64,".concat(window.btoa(LR),")");var f="background-size: 10px; background-image: url(data:image/svg+xml;base64,".concat(window.btoa(zR),")");this.closeDiv.setAttribute("style",h);this.closeDiv.setAttribute("onmouseover","this.style = \"".concat(f,"\";"));this.closeDiv.setAttribute("onmouseout","this.style = \"".concat(h,"\";"));u={};u["class"]="wrs_modal_stack_button";u.id=this.getElementId(u["class"]);u.title=yR.get("exit_fullscreen");this.stackDiv=xR.createElement("a",u);this.stackDiv.setAttribute("role","button");h="background-size: 10px; background-image: url(data:image/svg+xml;base64,".concat(window.btoa(FR),")");f="background-size: 10px; background-image: url(data:image/svg+xml;base64,".concat(window.btoa(HR),")");this.stackDiv.setAttribute("style",h);this.stackDiv.setAttribute("onmouseover","this.style = \"".concat(f,"\";"));this.stackDiv.setAttribute("onmouseout","this.style = \"".concat(h,"\";"));u={};u["class"]="wrs_modal_maximize_button";u.id=this.getElementId(u["class"]);u.title=yR.get("fullscreen");this.maximizeDiv=xR.createElement("a",u);this.maximizeDiv.setAttribute("role","button");h="background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,".concat(window.btoa(DR),")");f="background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,".concat(window.btoa(jR),")");this.maximizeDiv.setAttribute("style",h);this.maximizeDiv.setAttribute("onmouseover","this.style = \"".concat(f,"\";"));this.maximizeDiv.setAttribute("onmouseout","this.style = \"".concat(h,"\";"));u={};u["class"]="wrs_modal_minimize_button";u.id=this.getElementId(u["class"]);u.title=yR.get("minimize");this.minimizeDiv=xR.createElement("a",u);this.minimizeDiv.setAttribute("role","button");h="background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,".concat(window.btoa(BR),")");f="background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,".concat(window.btoa(VR),")");this.minimizeDiv.setAttribute("style",h);this.minimizeDiv.setAttribute("onmouseover","this.style = \"".concat(f,"\";"));this.minimizeDiv.setAttribute("onmouseout","this.style = \"".concat(h,"\";"));u={};u["class"]="wrs_modal_dialogContainer";u.id=this.getElementId(u["class"]);u.role="dialog";this.container=xR.createElement("div",u);this.container.setAttribute("aria-labeledby","wrs_modal_title[0]");u={};u["class"]="wrs_modal_wrapper";u.id=this.getElementId(u["class"]);this.wrapper=xR.createElement("div",u);u={};u["class"]="wrs_content_container";u.id=this.getElementId(u["class"]);this.contentContainer=xR.createElement("div",u);u={};u["class"]="wrs_modal_controls";u.id=this.getElementId(u["class"]);this.controls=xR.createElement("div",u);u={};u["class"]="wrs_modal_buttons_container";u.id=this.getElementId(u["class"]);this.buttonContainer=xR.createElement("div",u);this.submitButton=this.createSubmitButton({id:this.getElementId("wrs_modal_button_accept"),"class":"wrs_modal_button_accept",innerHTML:yR.get("accept")},this.submitAction.bind(this));this.cancelButton=this.createSubmitButton({id:this.getElementId("wrs_modal_button_cancel"),"class":"wrs_modal_button_cancel",innerHTML:yR.get("cancel")},this.cancelAction.bind(this));this.contentManager=null;var m={cancelString:yR.get("cancel"),submitString:yR.get("close"),message:yR.get("close_modal_warning")};var g={closeCallback:function closeCallback(){_this341.close();},cancelCallback:function cancelCallback(){_this341.focus();}};var p={overlayElement:this.container,callbacks:g,strings:m};this.popup=new RR(p);this.rtl=false;if("rtl"in this.attributes){this.rtl=this.attributes.rtl;}this.handleOpenedIosSoftkeyboard=this.handleOpenedIosSoftkeyboard.bind(this);this.handleClosedIosSoftkeyboard=this.handleClosedIosSoftkeyboard.bind(this);}_createClass($R,[{key:"setContentManager",value:function setContentManager(e){this.contentManager=e;}},{key:"getContentManager",value:function getContentManager(){return this.contentManager;}},{key:"submitAction",value:function submitAction(){if(typeof this.contentManager.submitAction!=="undefined"){this.contentManager.submitAction();}this.close();}},{key:"cancelAction",value:function cancelAction(){if(typeof this.contentManager.hasChanges==="undefined"){this.close();}else if(!this.contentManager.hasChanges()){this.close();}else{this.showPopUpMessage();}}},{key:"createSubmitButton",value:function createSubmitButton(e,t){var i=/*#__PURE__*/function(){function i(){_classCallCheck(this,i);this.element=document.createElement("button");this.element.id=e.id;this.element.className=e["class"];this.element.innerHTML=e.innerHTML;xR.addEvent(this.element,"click",t);}_createClass(i,[{key:"getElement",value:function getElement(){return this.element;}}]);return i;}();return new i(e,t).getElement();}},{key:"create",value:function create(){this.titleBar.appendChild(this.closeDiv);this.titleBar.appendChild(this.stackDiv);this.titleBar.appendChild(this.maximizeDiv);this.titleBar.appendChild(this.minimizeDiv);this.titleBar.appendChild(this.title);if(this.deviceProperties.isDesktop){this.container.appendChild(this.titleBar);}this.wrapper.appendChild(this.contentContainer);this.wrapper.appendChild(this.controls);this.controls.appendChild(this.buttonContainer);this.buttonContainer.appendChild(this.submitButton);this.buttonContainer.appendChild(this.cancelButton);this.container.appendChild(this.wrapper);this.recalculateScrollBar();document.body.appendChild(this.container);document.body.appendChild(this.overlay);if(this.deviceProperties.isDesktop){this.createModalWindowDesktop();this.createResizeButtons();this.addListeners();if(pR.get("modalWindowFullScreen")){this.maximize();}}else if(this.deviceProperties.isAndroid){this.createModalWindowAndroid();}else if(this.deviceProperties.isIOS&&!this.deviceProperties.isMobile){this.createModalWindowIos();}if(this.contentManager!=null){this.contentManager.insert(this);}this.properties.open=true;this.properties.created=true;if(this.isRTL()){this.container.style.right="".concat(window.innerWidth-this.scrollbarWidth-this.container.offsetWidth,"px");this.container.className+=" wrs_modal_rtl";}}},{key:"createResizeButtons",value:function createResizeButtons(){this.resizerBR=document.createElement("div");this.resizerBR.className="wrs_bottom_right_resizer";this.resizerBR.innerHTML="◢";this.resizerTL=document.createElement("div");this.resizerTL.className="wrs_bottom_left_resizer";this.container.appendChild(this.resizerBR);this.titleBar.appendChild(this.resizerTL);xR.addEvent(this.resizerBR,"mousedown",this.activateResizeStateBR.bind(this));xR.addEvent(this.resizerTL,"mousedown",this.activateResizeStateTL.bind(this));}},{key:"activateResizeStateBR",value:function activateResizeStateBR(e){this.initializeResizeProperties(e,false);}},{key:"activateResizeStateTL",value:function activateResizeStateTL(e){this.initializeResizeProperties(e,true);}},{key:"initializeResizeProperties",value:function initializeResizeProperties(e,t){xR.addClass(document.body,"wrs_noselect");xR.addClass(this.overlay,"wrs_overlay_active");this.resizeDataObject={x:this.eventClient(e).X,y:this.eventClient(e).Y};this.initialWidth=parseInt(this.container.style.width,10);this.initialHeight=parseInt(this.container.style.height,10);if(!t){this.initialRight=parseInt(this.container.style.right,10);this.initialBottom=parseInt(this.container.style.bottom,10);}else{this.leftScale=true;}if(!this.initialRight){this.initialRight=0;}if(!this.initialBottom){this.initialBottom=0;}document.body.style["user-select"]="none";}},{key:"open",value:function open(){var _this342=this;this.removeClass("wrs_closed");var e=this.deviceProperties.isIOS;var t=this.deviceProperties.isAndroid;var i=this.deviceProperties.isMobile;if(e||t||i){this.restoreWebsiteScale();this.lockWebsiteScroll();setTimeout(function(){_this342.hideKeyboard();},400);}if(!this.properties.created){this.create();}else{if(!this.properties.open){this.properties.open=true;if(!this.deviceProperties.isAndroid&&!this.deviceProperties.isIOS){this.restoreState();}}if(this.deviceProperties.isDesktop&&pR.get("modalWindowFullScreen")){this.maximize();}if(this.deviceProperties.isIOS){this.iosSoftkeyboardOpened=false;this.setContainerHeight("".concat(100+this.iosMeasureUnit));}}if(this.contentManager.isEditorLoaded===false){var _e398=wR.newListener("onLoad",function(){_this342.contentManager.onOpen(_this342);});this.contentManager.addListener(_e398);}else{this.contentManager.onOpen(this);}}},{key:"close",value:function close(){this.removeClass("wrs_maximized");this.removeClass("wrs_minimized");this.removeClass("wrs_stack");this.addClass("wrs_closed");this.saveModalProperties();this.unlockWebsiteScroll();this.properties.open=false;}},{key:"restoreWebsiteScale",value:function restoreWebsiteScale(){var e=document.querySelector("meta[name=viewport]");var t=["initial-scale=","minimum-scale=","maximum-scale="];var i=["1.0","1.0","1.0"];var n=function n(e,t){var n=e.getAttribute("content");if(n){var _o128=n.split(",");var _s93="";var _r66=[];for(var _e399=0;_e399<_o128.length;_e399+=1){var _i362=false;var _n218=0;while(!_i362&&_n218<t.length){if(_o128[_e399].indexOf(t[_n218])){_i362=true;}_n218+=1;}if(!_i362){_r66.push(_o128[_e399]);}}for(var _e400=0;_e400<t.length;_e400+=1){var _n219=t[_e400]+i[_e400];_s93+=_e400===0?_n219:",".concat(_n219);}for(var _e401=0;_e401<_r66.length;_e401+=1){_s93+=",".concat(_r66[_e401]);}e.setAttribute("content",_s93);e.setAttribute("content","");e.setAttribute("content",n);}else{e.setAttribute("content","initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0");e.removeAttribute("content");}};if(!e){e=document.createElement("meta");document.getElementsByTagName("head")[0].appendChild(e);n(e,t,i);e.remove();}else{n(e,t,i);}}},{key:"lockWebsiteScroll",value:function lockWebsiteScroll(){this.websiteBeforeLockParameters={bodyStylePosition:document.body.style.position?document.body.style.position:"",bodyStyleOverflow:document.body.style.overflow?document.body.style.overflow:"",htmlStyleOverflow:document.documentElement.style.overflow?document.documentElement.style.overflow:"",windowScrollX:window.scrollX,windowScrollY:window.scrollY};}},{key:"unlockWebsiteScroll",value:function unlockWebsiteScroll(){if(this.websiteBeforeLockParameters){document.body.style.position=this.websiteBeforeLockParameters.bodyStylePosition;document.body.style.overflow=this.websiteBeforeLockParameters.bodyStyleOverflow;document.documentElement.style.overflow=this.websiteBeforeLockParameters.htmlStyleOverflow;var _e402=this.websiteBeforeLockParameters.windowScrollX;var _t350=this.websiteBeforeLockParameters.windowScrollY;window.scrollTo(_e402,_t350);this.websiteBeforeLockParameters=null;}}},{key:"isIE11",value:function isIE11(){if(navigator.userAgent.search("Msie/")>=0||navigator.userAgent.search("Trident/")>=0||navigator.userAgent.search("Edge/")>=0){return true;}return false;}},{key:"isRTL",value:function isRTL(){if(this.attributes.language==="ar"||this.attributes.language==="he"){return true;}return this.rtl;}},{key:"addClass",value:function addClass(e){xR.addClass(this.overlay,e);xR.addClass(this.titleBar,e);xR.addClass(this.overlay,e);xR.addClass(this.container,e);xR.addClass(this.contentContainer,e);xR.addClass(this.stackDiv,e);xR.addClass(this.minimizeDiv,e);xR.addClass(this.maximizeDiv,e);xR.addClass(this.wrapper,e);}},{key:"removeClass",value:function removeClass(e){xR.removeClass(this.overlay,e);xR.removeClass(this.titleBar,e);xR.removeClass(this.overlay,e);xR.removeClass(this.container,e);xR.removeClass(this.contentContainer,e);xR.removeClass(this.stackDiv,e);xR.removeClass(this.minimizeDiv,e);xR.removeClass(this.maximizeDiv,e);xR.removeClass(this.wrapper,e);}},{key:"createModalWindowDesktop",value:function createModalWindowDesktop(){this.addClass("wrs_modal_desktop");this.stack();}},{key:"createModalWindowAndroid",value:function createModalWindowAndroid(){this.addClass("wrs_modal_android");window.addEventListener("resize",this.orientationChangeAndroidSoftkeyboard.bind(this));}},{key:"createModalWindowIos",value:function createModalWindowIos(){this.addClass("wrs_modal_ios");window.addEventListener("resize",this.orientationChangeIosSoftkeyboard.bind(this));}},{key:"restoreState",value:function restoreState(){if(this.properties.state==="maximized"){this.maximize();}else if(this.properties.state==="minimized"){this.properties.state=this.properties.previousState;this.properties.previousState="";this.minimize();}else{this.stack();}}},{key:"stack",value:function stack(){this.properties.previousState=this.properties.state;this.properties.state="stack";this.removeClass("wrs_maximized");this.minimizeDiv.title=yR.get("minimize");this.removeClass("wrs_minimized");this.addClass("wrs_stack");var e="background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,".concat(window.btoa(BR),")");var t="background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,".concat(window.btoa(VR),")");this.minimizeDiv.setAttribute("style",e);this.minimizeDiv.setAttribute("onmouseover","this.style = \"".concat(t,"\";"));this.minimizeDiv.setAttribute("onmouseout","this.style = \"".concat(e,"\";"));this.restoreModalProperties();if(typeof this.resizerBR!=="undefined"&&typeof this.resizerTL!=="undefined"){this.setResizeButtonsVisibility();}this.recalculateScrollBar();this.recalculatePosition();this.recalculateScale();this.focus();}},{key:"minimize",value:function minimize(){this.saveModalProperties();this.title.style.cursor="pointer";if(this.properties.state==="minimized"&&this.properties.previousState==="stack"){this.stack();}else if(this.properties.state==="minimized"&&this.properties.previousState==="maximized"){this.maximize();}else{this.container.style.height="30px";this.container.style.width="250px";this.container.style.bottom="0px";this.container.style.right="10px";this.removeListeners();this.properties.previousState=this.properties.state;this.properties.state="minimized";this.setResizeButtonsVisibility();this.minimizeDiv.title=yR.get("maximize");if(xR.containsClass(this.overlay,"wrs_stack")){this.removeClass("wrs_stack");}else{this.removeClass("wrs_maximized");}this.addClass("wrs_minimized");var _e403="background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,".concat(window.btoa(WR),")");var _t351="background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,".concat(window.btoa(UR),")");this.minimizeDiv.setAttribute("style",_e403);this.minimizeDiv.setAttribute("onmouseover","this.style = \"".concat(_t351,"\";"));this.minimizeDiv.setAttribute("onmouseout","this.style = \"".concat(_e403,"\";"));}}},{key:"maximize",value:function maximize(){this.saveModalProperties();if(this.properties.state!=="maximized"){this.properties.previousState=this.properties.state;this.properties.state="maximized";}this.setResizeButtonsVisibility();if(xR.containsClass(this.overlay,"wrs_minimized")){this.minimizeDiv.title=yR.get("minimize");this.removeClass("wrs_minimized");}else if(xR.containsClass(this.overlay,"wrs_stack")){this.container.style.left=null;this.container.style.top=null;this.removeClass("wrs_stack");}this.addClass("wrs_maximized");var e="background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,".concat(window.btoa(BR),")");var t="background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,".concat(window.btoa(VR),")");this.minimizeDiv.setAttribute("style",e);this.minimizeDiv.setAttribute("onmouseover","this.style = \"".concat(t,"\";"));this.minimizeDiv.setAttribute("onmouseout","this.style = \"".concat(e,"\";"));this.setSize(parseInt(window.innerHeight*.8,10),parseInt(window.innerWidth*.8,10));if(this.container.clientHeight>700){this.container.style.height="700px";}if(this.container.clientWidth>1200){this.container.style.width="1200px";}var _window=window,i=_window.innerHeight;var _window2=window,n=_window2.innerWidth;var o=this.container.offsetHeight;var s=this.container.offsetWidth;var r=i/2-o/2;var a=n/2-s/2;this.setPosition(r,a);this.recalculateScale();this.recalculatePosition();this.recalculateSize();this.focus();}},{key:"reExpand",value:function reExpand(){if(this.properties.state==="minimized"){if(this.properties.previousState==="maximized"){this.maximize();}else{this.stack();}this.title.style.cursor="";}}},{key:"setSize",value:function setSize(e,t){this.container.style.height="".concat(e,"px");this.container.style.width="".concat(t,"px");this.recalculateSize();}},{key:"setPosition",value:function setPosition(e,t){this.container.style.bottom="".concat(e,"px");this.container.style.right="".concat(t,"px");}},{key:"saveModalProperties",value:function saveModalProperties(){if(this.properties.state==="stack"){this.properties.position.bottom=parseInt(this.container.style.bottom,10);this.properties.position.right=parseInt(this.container.style.right,10);this.properties.size.width=parseInt(this.container.style.width,10);this.properties.size.height=parseInt(this.container.style.height,10);}}},{key:"restoreModalProperties",value:function restoreModalProperties(){if(this.properties.state==="stack"){this.setPosition(this.properties.position.bottom,this.properties.position.right);this.setSize(this.properties.size.height,this.properties.size.width);}}},{key:"recalculateSize",value:function recalculateSize(){this.wrapper.style.width="".concat(this.container.clientWidth-12,"px");this.wrapper.style.height="".concat(this.container.clientHeight-38,"px");this.contentContainer.style.height="".concat(parseInt(this.wrapper.offsetHeight-50,10),"px");}},{key:"setResizeButtonsVisibility",value:function setResizeButtonsVisibility(){if(this.properties.state==="stack"){this.resizerTL.style.visibility="visible";this.resizerBR.style.visibility="visible";}else{this.resizerTL.style.visibility="hidden";this.resizerBR.style.visibility="hidden";}}},{key:"addListeners",value:function addListeners(){this.maximizeDiv.addEventListener("click",this.maximize.bind(this),true);this.stackDiv.addEventListener("click",this.stack.bind(this),true);this.minimizeDiv.addEventListener("click",this.minimize.bind(this),true);this.closeDiv.addEventListener("click",this.cancelAction.bind(this));this.title.addEventListener("click",this.reExpand.bind(this));this.overlay.addEventListener("click",this.cancelAction.bind(this));xR.addEvent(window,"mousedown",this.startDrag.bind(this));xR.addEvent(window,"mouseup",this.stopDrag.bind(this));xR.addEvent(window,"mousemove",this.drag.bind(this));xR.addEvent(window,"resize",this.onWindowResize.bind(this));xR.addEvent(this.container,"keydown",this.onKeyDown.bind(this));}},{key:"removeListeners",value:function removeListeners(){xR.removeEvent(window,"mousedown",this.startDrag);xR.removeEvent(window,"mouseup",this.stopDrag);xR.removeEvent(window,"mousemove",this.drag);xR.removeEvent(window,"resize",this.onWindowResize);xR.removeEvent(this.container,"keydown",this.onKeyDown);}},{key:"eventClient",value:function eventClient(e){if(typeof e.clientX==="undefined"&&e.changedTouches){var _t352={X:e.changedTouches[0].clientX,Y:e.changedTouches[0].clientY};return _t352;}var t={X:e.clientX,Y:e.clientY};return t;}},{key:"startDrag",value:function startDrag(e){if(this.properties.state==="minimized"){return;}if(e.target===this.title){if(typeof this.dragDataObject==="undefined"||this.dragDataObject===null){this.dragDataObject={x:this.eventClient(e).X,y:this.eventClient(e).Y};this.lastDrag={x:"0px",y:"0px"};if(this.container.style.right===""){this.container.style.right="0px";}if(this.container.style.bottom===""){this.container.style.bottom="0px";}if(this.isIE11()){}xR.addClass(document.body,"wrs_noselect");xR.addClass(this.overlay,"wrs_overlay_active");this.limitWindow=this.getLimitWindow();}}}},{key:"drag",value:function drag(e){if(this.dragDataObject){e.preventDefault();var _t353=Math.min(this.eventClient(e).Y,this.limitWindow.minPointer.y);_t353=Math.max(this.limitWindow.maxPointer.y,_t353);var _i363=Math.min(this.eventClient(e).X,this.limitWindow.minPointer.x);_i363=Math.max(this.limitWindow.maxPointer.x,_i363);var _n220="".concat(_i363-this.dragDataObject.x,"px");var _o129="".concat(_t353-this.dragDataObject.y,"px");this.lastDrag={x:_n220,y:_o129};this.container.style.transform="translate3d(".concat(_n220,",").concat(_o129,",0)");}if(this.resizeDataObject){var _window3=window,_t354=_window3.innerWidth;var _window4=window,_i364=_window4.innerHeight;var _n221=Math.min(this.eventClient(e).X,_t354-this.scrollbarWidth-7);var _o130=Math.min(this.eventClient(e).Y,_i364-7);if(_n221<0){_n221=0;}if(_o130<0){_o130=0;}var _s94;if(this.leftScale){_s94=-1;}else{_s94=1;}this.container.style.width="".concat(this.initialWidth+_s94*(_n221-this.resizeDataObject.x),"px");this.container.style.height="".concat(this.initialHeight+_s94*(_o130-this.resizeDataObject.y),"px");if(!this.leftScale){if(this.resizeDataObject.x-_n221-this.initialWidth<-580){this.container.style.right="".concat(this.initialRight-(_n221-this.resizeDataObject.x),"px");}else{this.container.style.right="".concat(this.initialRight+this.initialWidth-580,"px");this.container.style.width="580px";}if(this.resizeDataObject.y-_o130<this.initialHeight-338){this.container.style.bottom="".concat(this.initialBottom-(_o130-this.resizeDataObject.y),"px");}else{this.container.style.bottom="".concat(this.initialBottom+this.initialHeight-338,"px");this.container.style.height="338px";}}this.recalculateScale();this.recalculatePosition();}}},{key:"getLimitWindow",value:function getLimitWindow(){var e=window.innerWidth;var t=window.innerHeight;var i=this.container.offsetHeight;var n=parseInt(this.container.style.bottom,10);var o=parseInt(this.container.style.right,10);var _window5=window,s=_window5.pageXOffset;var r=this.dragDataObject.y;var a=this.dragDataObject.x;var c=i+n-(t-(r-s));var l=e-this.scrollbarWidth-(a-s)-o;var d=t-this.container.offsetHeight+c;var u=this.title.offsetHeight-(this.title.offsetHeight-c);var h=e-l-this.scrollbarWidth;var f=this.container.offsetWidth-l;var m={x:h,y:d};var g={x:f,y:u};return{minPointer:m,maxPointer:g};}},{key:"getScrollBarWidth",value:function getScrollBarWidth(){var e=document.createElement("p");e.style.width="100%";e.style.height="200px";var t=document.createElement("div");t.style.position="absolute";t.style.top="0px";t.style.left="0px";t.style.visibility="hidden";t.style.width="200px";t.style.height="150px";t.style.overflow="hidden";t.appendChild(e);document.body.appendChild(t);var i=e.offsetWidth;t.style.overflow="scroll";var n=e.offsetWidth;if(i===n){n=t.clientWidth;}document.body.removeChild(t);return i-n;}},{key:"stopDrag",value:function stopDrag(){if(this.dragDataObject||this.resizeDataObject){this.container.style.transform="";if(this.dragDataObject){this.container.style.right="".concat(parseInt(this.container.style.right,10)-parseInt(this.lastDrag.x,10),"px");this.container.style.bottom="".concat(parseInt(this.container.style.bottom,10)-parseInt(this.lastDrag.y,10),"px");}this.focus();document.body.style["user-select"]="";if(this.isIE11()){}xR.removeClass(document.body,"wrs_noselect");xR.removeClass(this.overlay,"wrs_overlay_active");}this.dragDataObject=null;this.resizeDataObject=null;this.initialWidth=null;this.leftScale=null;}},{key:"onWindowResize",value:function onWindowResize(){this.recalculateScrollBar();this.recalculatePosition();this.recalculateScale();}},{key:"onKeyDown",value:function onKeyDown(e){if(e.key!==undefined){if(this.popup.overlayWrapper.style.display!=="block"){if(e.key==="Escape"||e.key==="Esc"){if(this.properties.open){this.contentManager.onKeyDown(e);}}else if(e.shiftKey&&e.key==="Tab"){if(document.activeElement===this.cancelButton){this.submitButton.focus();e.stopPropagation();e.preventDefault();}else{this.contentManager.onKeyDown(e);}}else if(e.key==="Tab"){if(document.activeElement===this.submitButton){this.cancelButton.focus();e.stopPropagation();e.preventDefault();}else{this.contentManager.onKeyDown(e);}}}else{this.popup.onKeyDown(e);}}}},{key:"recalculatePosition",value:function recalculatePosition(){this.container.style.right="".concat(Math.min(parseInt(this.container.style.right,10),window.innerWidth-this.scrollbarWidth-this.container.offsetWidth),"px");if(parseInt(this.container.style.right,10)<0){this.container.style.right="0px";}this.container.style.bottom="".concat(Math.min(parseInt(this.container.style.bottom,10),window.innerHeight-this.container.offsetHeight),"px");if(parseInt(this.container.style.bottom,10)<0){this.container.style.bottom="0px";}}},{key:"recalculateScale",value:function recalculateScale(){var e=false;if(parseInt(this.container.style.width,10)>580){this.container.style.width="".concat(Math.min(parseInt(this.container.style.width,10),window.innerWidth-this.scrollbarWidth),"px");e=true;}else{this.container.style.width="580px";e=true;}if(parseInt(this.container.style.height,10)>338){this.container.style.height="".concat(Math.min(parseInt(this.container.style.height,10),window.innerHeight),"px");e=true;}else{this.container.style.height="338px";e=true;}if(e){this.recalculateSize();}}},{key:"recalculateScrollBar",value:function recalculateScrollBar(){this.hasScrollBar=window.innerWidth>document.documentElement.clientWidth;if(this.hasScrollBar){this.scrollbarWidth=this.getScrollBarWidth();}else{this.scrollbarWidth=0;}}},{key:"hideKeyboard",value:function hideKeyboard(){var e=document.createElement("input");this.container.appendChild(e);e.focus();e.blur();e.remove();}},{key:"focus",value:function focus(){if(this.contentManager!=null&&typeof this.contentManager.onFocus!=="undefined"){this.contentManager.onFocus();}}},{key:"portraitMode",value:function portraitMode(){return window.innerHeight>window.innerWidth;}},{key:"handleOpenedIosSoftkeyboard",value:function handleOpenedIosSoftkeyboard(){if(!this.iosSoftkeyboardOpened&&this.iosDivHeight!=null&&this.iosDivHeight==="100".concat(this.iosMeasureUnit)){if(this.portraitMode()){this.setContainerHeight("63".concat(this.iosMeasureUnit));}else{this.setContainerHeight("40".concat(this.iosMeasureUnit));}}this.iosSoftkeyboardOpened=true;}},{key:"handleClosedIosSoftkeyboard",value:function handleClosedIosSoftkeyboard(){this.iosSoftkeyboardOpened=false;this.setContainerHeight("100".concat(this.iosMeasureUnit));}},{key:"orientationChangeIosSoftkeyboard",value:function orientationChangeIosSoftkeyboard(){if(this.iosSoftkeyboardOpened){if(this.portraitMode()){this.setContainerHeight("63".concat(this.iosMeasureUnit));}else{this.setContainerHeight("40".concat(this.iosMeasureUnit));}}else{this.setContainerHeight("100".concat(this.iosMeasureUnit));}}},{key:"orientationChangeAndroidSoftkeyboard",value:function orientationChangeAndroidSoftkeyboard(){this.setContainerHeight("100%");}},{key:"setContainerHeight",value:function setContainerHeight(e){this.iosDivHeight=e;this.wrapper.style.height=e;}},{key:"showPopUpMessage",value:function showPopUpMessage(){if(this.properties.state==="minimized"){this.stack();}this.popup.show();}},{key:"setTitle",value:function setTitle(e){this.title.innerHTML=e;}},{key:"getElementId",value:function getElementId(e){return"".concat(e,"[").concat(this.instanceId,"]");}}]);return $R;}();var qR;var YR=qR;/*! http://mths.be/codepointat v0.1.0 by @mathias */if(!String.prototype.codePointAt){(function(){"use strict";var e=function(_e404){function e(_x5){return _e404.apply(this,arguments);}e.toString=function(){return _e404.toString();};return e;}(function(e){if(this==null){throw TypeError();}var t=String(this);var i=t.length;var n=e?Number(e):0;if(n!=n){n=0;}if(n<0||n>=i){return undefined;}var o=t.charCodeAt(n);var s;if(o>=55296&&o<=56319&&i>n+1){s=t.charCodeAt(n+1);if(s>=56320&&s<=57343){return(o-55296)*1024+s-56320+65536;}}return o;});if(Object.defineProperty){Object.defineProperty(String.prototype,"codePointAt",{value:e,configurable:true,writable:true});}else{String.prototype.codePointAt=e;}})();}if(typeof Object.assign!="function"){Object.defineProperty(Object,"assign",{value:function e(t,i){"use strict";if(t==null){throw new TypeError("Cannot convert undefined or null to object");}var n=Object(t);for(var o=1;o<arguments.length;o++){var s=arguments[o];if(s!=null){for(var r in s){if(Object.prototype.hasOwnProperty.call(s,r)){n[r]=s[r];}}}}return n;},writable:true,configurable:true});}var GR=i(130);var JR=/*#__PURE__*/function(){function JR(e){_classCallCheck(this,JR);this.language="en";this.editMode="images";this.modalDialog=null;this.customEditors=new SR();var t={name:"Chemistry",toolbar:"chemistry",icon:"chem.png",confVariable:"chemEnabled",title:"ChemType",tooltip:"Insert a chemistry formula - ChemType"};this.customEditors.addEditor("chemistry",t);this.environment={};this.editionProperties={};this.editionProperties.isNewElement=true;this.editionProperties.temporalImage=null;this.editionProperties.latexRange=null;this.editionProperties.range=null;this.integrationModel=null;this.contentManager=null;this.browser=function(){var e=navigator.userAgent;var t="none";if(e.search("Edge/")>=0){t="EDGE";}else if(e.search("Chrome/")>=0){t="CHROME";}else if(e.search("Trident/")>=0){t="IE";}else if(e.search("Firefox/")>=0){t="FIREFOX";}else if(e.search("Safari/")>=0){t="SAFARI";}return t;}();this.listeners=new wR();this.serviceProviderProperties={};if("serviceProviderProperties"in e){this.serviceProviderProperties=e.serviceProviderProperties;}else{throw new Error("serviceProviderProperties property missing.");}}_createClass(JR,[{key:"setIntegrationModel",value:function setIntegrationModel(e){this.integrationModel=e;}},{key:"setEnvironment",value:function setEnvironment(e){if("editor"in e){this.environment.editor=e.editor;}if("mode"in e){this.environment.mode=e.mode;}if("version"in e){this.environment.version=e.version;}}},{key:"getModalDialog",value:function getModalDialog(){return this.modalDialog;}},{key:"init",value:function init(){var _this343=this;if(!JR.initialized){var _e405=wR.newListener("onInit",function(){var e=_R.getService("configurationjs","","get");var t=JSON.parse(e);pR.addConfiguration(t);pR.addConfiguration(NR);yR.language=_this343.language;_this343.listeners.fire("onLoad",{});});_R.addListener(_e405);_R.init(this.serviceProviderProperties);JR.initialized=true;}else{this.listeners.fire("onLoad",{});}}},{key:"addListener",value:function addListener(e){this.listeners.add(e);}},{key:"beforeUpdateFormula",value:function beforeUpdateFormula(e,t){var i=new OR();i.mathml=e;i.wirisProperties={};if(t!=null){Object.keys(t).forEach(function(e){i.wirisProperties[e]=t[e];});}i.language=this.language;i.editMode=this.editMode;if(this.listeners.fire("onBeforeFormulaInsertion",i)){return{};}if(JR.globalListeners.fire("onBeforeFormulaInsertion",i)){return{};}return{mathml:i.mathml,wirisProperties:i.wirisProperties};}},{key:"insertFormula",value:function insertFormula(e,t,i,n){var o={};if(!i){this.insertElementOnSelection(null,e,t);}else if(this.editMode==="latex"){o.latex=vR.getLatexFromMathML(i);if(!!this.integrationModel.fillNonLatexNode&&!o.latex){var _n222=new OR();_n222.editMode=this.editMode;_n222.windowTarget=t;_n222.focusElement=e;_n222.latex=o.latex;this.integrationModel.fillNonLatexNode(_n222,t,i);}else{o.node=t.document.createTextNode("$$".concat(o.latex,"$$"));}this.insertElementOnSelection(o.node,e,t);}else{o.node=MR.mathmlToImgObject(t.document,i,n,this.language);this.insertElementOnSelection(o.node,e,t);}return o;}},{key:"afterUpdateFormula",value:function afterUpdateFormula(e,t,i,n){var o=new OR();o.editMode=this.editMode;o.windowTarget=t;o.focusElement=e;o.node=i;o.latex=n;if(this.listeners.fire("onAfterFormulaInsertion",o)){return{};}if(JR.globalListeners.fire("onAfterFormulaInsertion",o)){return{};}return{};}},{key:"placeCaretAfterNode",value:function placeCaretAfterNode(e){this.integrationModel.getSelection();var t=e.ownerDocument;if(typeof t.getSelection!=="undefined"&&!!e.parentElement){var _i365=t.createRange();_i365.setStartAfter(e);_i365.collapse(true);var _n223=t.getSelection();_n223.removeAllRanges();_n223.addRange(_i365);t.body.focus();}}},{key:"insertElementOnSelection",value:function insertElementOnSelection(e,t,i){if(this.editionProperties.isNewElement){if(e){if(t.type==="textarea"){xR.updateTextArea(t,e.textContent);}else if(document.selection&&document.getSelection===0){var _t355=i.document.selection.createRange();i.document.execCommand("InsertImage",false,e.src);if(!("parentElement"in _t355)){i.document.execCommand("delete",false);_t355=i.document.selection.createRange();i.document.execCommand("InsertImage",false,e.src);}if("parentElement"in _t355){var _i366=_t355.parentElement();if(_i366.nodeName.toUpperCase()==="IMG"){_i366.parentNode.replaceChild(e,_i366);}else{_t355.pasteHTML(xR.createObjectCode(e));}}}else{var _t356=this.integrationModel.getSelection();var _i367=null;if(this.editionProperties.range){_i367=this.editionProperties.range;this.editionProperties.range=null;}else{_i367=_t356.getRangeAt(0);}_i367.deleteContents();var _n224=_i367.startContainer;var _o131=_i367.startOffset;if(_n224.nodeType===3){_n224=_n224.splitText(_o131);_n224.parentNode.insertBefore(e,_n224);}else if(_n224.nodeType===1){_n224.insertBefore(e,_n224.childNodes[_o131]);}this.placeCaretAfterNode(e);}}else if(t.type==="textarea"){t.focus();}else{var _e406=this.integrationModel.getSelection();_e406.removeAllRanges();if(this.editionProperties.range){var _t357=this.editionProperties.range;this.editionProperties.range=null;_e406.addRange(_t357);}}}else if(this.editionProperties.latexRange){if(document.selection&&document.getSelection===0){this.editionProperties.isNewElement=true;this.editionProperties.latexRange.select();this.insertElementOnSelection(e,t,i);}else{this.editionProperties.latexRange.deleteContents();this.editionProperties.latexRange.insertNode(e);this.placeCaretAfterNode(e);}}else if(t.type==="textarea"){var _i368;if(typeof this.integrationModel.getSelectedItem!=="undefined"){_i368=this.integrationModel.getSelectedItem(t,false);}else{_i368=xR.getSelectedItemOnTextarea(t);}xR.updateExistingTextOnTextarea(t,e.textContent,_i368.startPosition,_i368.endPosition);}else{if(e&&e.nodeName.toLowerCase()==="img"){AR.removeImgDataAttributes(this.editionProperties.temporalImage);AR.clone(e,this.editionProperties.temporalImage);}else{this.editionProperties.temporalImage.remove();}this.placeCaretAfterNode(this.editionProperties.temporalImage);}}},{key:"openModalDialog",value:function openModalDialog(e,t){var _this344=this;this.editMode="images";try{if(t){e.contentWindow.focus();var _t358=e.contentWindow.getSelection();this.editionProperties.range=_t358.getRangeAt(0);}else{e.focus();var _t359=getSelection();this.editionProperties.range=_t359.getRangeAt(0);}}catch(e){this.editionProperties.range=null;}if(t===undefined){t=true;}this.editionProperties.latexRange=null;if(e){var _i369;if(typeof this.integrationModel.getSelectedItem!=="undefined"){_i369=this.integrationModel.getSelectedItem(e,t);}else{_i369=xR.getSelectedItem(e,t);}if(_i369){if(!_i369.caretPosition&&xR.containsClass(_i369.node,pR.get("imageClassName"))){this.editionProperties.temporalImage=_i369.node;this.editionProperties.isNewElement=false;}else if(_i369.node.nodeType===3){if(this.integrationModel.getMathmlFromTextNode){var _e407=this.integrationModel.getMathmlFromTextNode(_i369.node,_i369.caretPosition);if(_e407){this.editMode="latex";this.editionProperties.isNewElement=false;this.editionProperties.temporalImage=document.createElement("img");this.editionProperties.temporalImage.setAttribute(pR.get("imageMathmlAttribute"),gR.safeXmlEncode(_e407));}}else{var _n225=vR.getLatexFromTextNode(_i369.node,_i369.caretPosition);if(_n225){var _i370=vR.getMathMLFromLatex(_n225.latex);this.editMode="latex";this.editionProperties.isNewElement=false;this.editionProperties.temporalImage=document.createElement("img");this.editionProperties.temporalImage.setAttribute(pR.get("imageMathmlAttribute"),gR.safeXmlEncode(_i370));var _o132=t?e.contentWindow:window;if(e.tagName.toLowerCase()!=="textarea"){if(document.selection){var _e408=0;var _t360=_n225.startNode.previousSibling;while(_t360){_e408+=xR.getNodeLength(_t360);_t360=_t360.previousSibling;}this.editionProperties.latexRange=_o132.document.selection.createRange();this.editionProperties.latexRange.moveToElementText(_n225.startNode.parentNode);this.editionProperties.latexRange.move("character",_e408+_n225.startPosition);this.editionProperties.latexRange.moveEnd("character",_n225.latex.length+4);}else{this.editionProperties.latexRange=_o132.document.createRange();this.editionProperties.latexRange.setStart(_n225.startNode,_n225.startPosition);this.editionProperties.latexRange.setEnd(_n225.endNode,_n225.endPosition);}}}}}}else if(e.tagName.toLowerCase()==="textarea"){this.editMode="latex";}}var i=pR.get("editorAttributes").split(", ");var n={};for(var _e409=0,_t361=i.length;_e409<_t361;_e409+=1){var _t362=i[_e409].split("=");var _o133=_t362[0];var _s95=_t362[1];n[_o133]=_s95;}var o={};var s=pR.get("editorParameters");var r=this.integrationModel.editorParameters;Object.assign(o,n,s);Object.assign(o,n,r);o.language=this.language;o.rtl=this.integrationModel.rtl;var a={};a.editorAttributes=o;a.language=this.language;a.customEditors=this.customEditors;a.environment=this.environment;if(this.modalDialog==null){this.modalDialog=new $R(o);this.contentManager=new PR(a);var _e410=wR.newListener("onLoad",function(){_this344.contentManager.isNewElement=_this344.editionProperties.isNewElement;if(_this344.editionProperties.temporalImage!=null){var _e411=gR.safeXmlDecode(_this344.editionProperties.temporalImage.getAttribute(pR.get("imageMathmlAttribute")));_this344.contentManager.mathML=_e411;}});this.contentManager.addListener(_e410);this.contentManager.init();this.modalDialog.setContentManager(this.contentManager);this.contentManager.setModalDialogInstance(this.modalDialog);}else{this.contentManager.isNewElement=this.editionProperties.isNewElement;if(this.editionProperties.temporalImage!=null){var _e412=gR.safeXmlDecode(this.editionProperties.temporalImage.getAttribute(pR.get("imageMathmlAttribute")));this.contentManager.mathML=_e412;}}this.contentManager.setIntegrationModel(this.integrationModel);this.modalDialog.open();}},{key:"getCustomEditors",value:function getCustomEditors(){return this.customEditors;}}],[{key:"addGlobalListener",value:function addGlobalListener(e){JR.globalListeners.add(e);}},{key:"globalListeners",get:function get(){return JR._globalListeners;},set:function set(e){JR._globalListeners=e;}},{key:"initialized",get:function get(){return JR._initialized;},set:function set(e){JR._initialized=e;}}]);return JR;}();JR._globalListeners=new wR();JR._initialized=false;var XR=/*#__PURE__*/function(){function XR(e){var _this345=this;_classCallCheck(this,XR);this.language="en";this.serviceProviderProperties={};if("serviceProviderProperties"in e){this.serviceProviderProperties=e.serviceProviderProperties;}this.configurationService="";if("configurationService"in e){this.serviceProviderProperties.URI=e.configurationService;console.warn("Deprecated property configurationService. Use serviceParameters on instead.",[e.configurationService]);}this.version="version"in e?e.version:"";this.target=null;if("target"in e){this.target=e.target;}else{throw new Error("IntegrationModel constructor error: target property missed.");}if("scriptName"in e){this.scriptName=e.scriptName;}this.callbackMethodArguments={};if("callbackMethodArguments"in e){this.callbackMethodArguments=e.callbackMethodArguments;}this.environment={};if("environment"in e){this.environment=e.environment;}this.isIframe=false;if(this.target!=null){this.isIframe=this.target.tagName.toUpperCase()==="IFRAME";}this.editorObject=null;if("editorObject"in e){this.editorObject=e.editorObject;}this.rtl=false;if("rtl"in e){this.rtl=e.rtl;}this.managesLanguage=false;if("managesLanguage"in e){this.managesLanguage=e.managesLanguage;}this.temporalImageResizing=false;this.core=null;this.listeners=new wR();if("integrationParameters"in e){XR.integrationParameters.forEach(function(t){if(t in e.integrationParameters){var _i371=e.integrationParameters[t];if(Object.keys(_i371).length!==0){_this345[t]=_i371;}}});}}_createClass(XR,[{key:"init",value:function init(){var _this346=this;this.language=this.getLanguage();var e=wR.newListener("onLoad",function(){_this346.callbackFunction(_this346.callbackMethodArguments);});if(this.serviceProviderProperties.URI.indexOf("configuration")!==-1){var _e413=this.serviceProviderProperties.URI;var _t363=_R.getServerLanguageFromService(_e413);this.serviceProviderProperties.server=_t363;var _i372=this.serviceProviderProperties.URI.indexOf("configuration");var _n226=this.serviceProviderProperties.URI.substring(0,_i372);this.serviceProviderProperties.URI=_n226;}var t=this.serviceProviderProperties.URI;t=t.indexOf("/")===0||t.indexOf("http")===0?t:xR.concatenateUrl(this.getPath(),t);this.serviceProviderProperties.URI=t;var i={};i.serviceProviderProperties=this.serviceProviderProperties;this.setCore(new JR(i));this.core.addListener(e);this.core.language=this.language;this.core.init();this.core.setEnvironment(this.environment);}},{key:"getPath",value:function getPath(){if(typeof this.scriptName==="undefined"){throw new Error("scriptName property needed for getPath.");}var e=document.getElementsByTagName("script");var t="";for(var _i373=0;_i373<e.length;_i373+=1){var _n227=e[_i373].src.lastIndexOf(this.scriptName);if(_n227>=0){t=e[_i373].src.substr(0,_n227-1);}}return t;}},{key:"setLanguage",value:function setLanguage(e){this.language=e;}},{key:"setCore",value:function setCore(e){this.core=e;e.setIntegrationModel(this);}},{key:"getCore",value:function getCore(){return this.core;}},{key:"setTarget",value:function setTarget(e){this.target=e;this.isIframe=this.target.tagName.toUpperCase()==="IFRAME";}},{key:"setEditorObject",value:function setEditorObject(e){this.editorObject=e;}},{key:"openNewFormulaEditor",value:function openNewFormulaEditor(){this.core.editionProperties.isNewElement=true;this.core.openModalDialog(this.target,this.isIframe);}},{key:"openExistingFormulaEditor",value:function openExistingFormulaEditor(){this.core.editionProperties.isNewElement=false;this.core.openModalDialog(this.target,this.isIframe);}},{key:"updateFormula",value:function updateFormula(e){if(this.editorParameters){e=com.wiris.editor.util.EditorUtils.addAnnotation(e,"application/vnd.wiris.mtweb-params+json",JSON.stringify(this.editorParameters));}var t;var i;var n=null;if(this.isIframe){t=this.target.contentWindow;i=this.target.contentWindow;}else{t=this.target;i=window;}var o=this.core.beforeUpdateFormula(e,n);if(!o){return"";}o=this.insertFormula(t,i,o.mathml,o.wirisProperties);if(!o){return"";}return this.core.afterUpdateFormula(o.focusElement,o.windowTarget,o.node,o.latex);}},{key:"insertFormula",value:function insertFormula(e,t,i,n){return this.core.insertFormula(e,t,i,n);}},{key:"getSelection",value:function getSelection(){if(this.isIframe){this.target.contentWindow.focus();return this.target.contentWindow.getSelection();}this.target.focus();return window.getSelection();}},{key:"addEvents",value:function addEvents(){var _this347=this;var e=this.isIframe?this.target.contentWindow.document:this.target;xR.addElementEvents(e,function(e,t){_this347.doubleClickHandler(e,t);},function(e,t){_this347.mousedownHandler(e,t);},function(e,t){_this347.mouseupHandler(e,t);});}},{key:"doubleClickHandler",value:function doubleClickHandler(e){if(e.nodeName.toLowerCase()==="img"){this.core.getCustomEditors().disable();var _t364=pR.get("imageCustomEditorName");if(e.hasAttribute(_t364)){var _i374=e.getAttribute(_t364);this.core.getCustomEditors().enable(_i374);}if(xR.containsClass(e,pR.get("imageClassName"))){this.core.editionProperties.temporalImage=e;this.core.editionProperties.isNewElement=true;this.openExistingFormulaEditor();}}}},{key:"mouseupHandler",value:function mouseupHandler(){var _this348=this;if(this.temporalImageResizing){setTimeout(function(){AR.fixAfterResize(_this348.temporalImageResizing);},10);}}},{key:"mousedownHandler",value:function mousedownHandler(e){if(e.nodeName.toLowerCase()==="img"){if(xR.containsClass(e,pR.get("imageClassName"))){this.temporalImageResizing=e;}}}},{key:"getLanguage",value:function getLanguage(){return this.getBrowserLanguage();}},{key:"getBrowserLanguage",value:function getBrowserLanguage(){var e="en";if(navigator.userLanguage){e=navigator.userLanguage.substring(0,2);}else if(navigator.language){e=navigator.language.substring(0,2);}else{e="en";}return e;}},{key:"callbackFunction",value:function callbackFunction(){var _this349=this;var e=wR.newListener("onTargetReady",function(){_this349.addEvents(_this349.target);});this.listeners.add(e);}},{key:"notifyWindowClosed",value:function notifyWindowClosed(){}},{key:"getMathmlFromTextNode",value:function getMathmlFromTextNode(e,t){}},{key:"fillNonLatexNode",value:function fillNonLatexNode(e,t,i){}},{key:"getSelectedItem",value:function getSelectedItem(e,t){}}]);return XR;}();XR.prototype.getMathmlFromTextNode=undefined;XR.prototype.fillNonLatexNode=undefined;XR.prototype.getSelectedItem=undefined;XR.integrationParameters=["serviceProviderProperties","editorParameters"];var KR=/*#__PURE__*/function(_XR){_inherits(KR,_XR);function KR(e){var _this350;_classCallCheck(this,KR);var t=e.editorObject;if(typeof t.config!="undefined"&&typeof t.config.get("mathTypeParameters")!="undefined"){e.integrationParameters=t.config.get("mathTypeParameters");}_this350=_possibleConstructorReturn(this,_getPrototypeOf(KR).call(this,e));_this350.integrationFolderName="ckeditor_wiris";return _this350;}_createClass(KR,[{key:"getLanguage",value:function getLanguage(){return this.editorObject.config.get("language");}},{key:"addEditorListeners",value:function addEditorListeners(){var e=this.editorObject;if(typeof e.config.wirislistenersdisabled=="undefined"||!e.config.wirislistenersdisabled){this.checkElement();}}},{key:"checkElement",value:function checkElement(){var e=this.editorObject;var t=e.sourceElement;if(!t.wirisActive){this.setTarget(t);this.addEvents();t.wirisActive=true;}}},{key:"doubleClickHandler",value:function doubleClickHandler(e,t){if(e.nodeName.toLowerCase()=="img"){if(xR.containsClass(e,pR.get("imageClassName"))){if(typeof t.stopPropagation!="undefined"){t.stopPropagation();}else{t.returnValue=false;}this.core.getCustomEditors().disable();var _i375=e.getAttribute(pR.get("imageCustomEditorName"));if(_i375){this.core.getCustomEditors().enable(_i375);}this.core.editionProperties.temporalImage=e;this.openExistingFormulaEditor();}}}},{key:"getCorePath",value:function getCorePath(){return null;}},{key:"callbackFunction",value:function callbackFunction(){_get(_getPrototypeOf(KR.prototype),"callbackFunction",this).call(this);this.addEditorListeners();}},{key:"openNewFormulaEditor",value:function openNewFormulaEditor(){this.core.editionProperties.selection=this.editorObject.editing.view.document.selection;return _get(_getPrototypeOf(KR.prototype),"openNewFormulaEditor",this).call(this);}},{key:"insertMathml",value:function insertMathml(e){var _this351=this;return this.editorObject.model.change(function(t){var i=_this351.getCore();var n=t.createElement("mathml",{formula:e});if(i.editionProperties.isNewElement){if(!e)return;var _i376=_this351.core.editionProperties.selection||_this351.editorObject.editing.view.document.selection;var _o134=_this351.editorObject.editing.mapper.toModelPosition(_i376.getLastPosition());t.insert(n,_o134);if(!_i376.isCollapsed){var _iteratorNormalCompletion432=true;var _didIteratorError432=false;var _iteratorError432=undefined;try{for(var _iterator432=_i376.getRanges()[Symbol.iterator](),_step432;!(_iteratorNormalCompletion432=(_step432=_iterator432.next()).done);_iteratorNormalCompletion432=true){var _e414=_step432.value;t.remove(_this351.editorObject.editing.mapper.toModelRange(_e414));}}catch(err){_didIteratorError432=true;_iteratorError432=err;}finally{try{if(!_iteratorNormalCompletion432&&_iterator432["return"]!=null){_iterator432["return"]();}}finally{if(_didIteratorError432){throw _iteratorError432;}}}}}else{var _o135=i.editionProperties.temporalImage;var _s96=_this351.editorObject.editing.view.domConverter.domToView(_o135).parent;var _r67=_this351.editorObject.editing.mapper.toModelElement(_s96);var _a39=_this351.editorObject.model.createPositionBefore(_r67);if(e){t.insert(n,_a39);}t.remove(_r67);}return n;});}},{key:"findText",value:function findText(e){var t=e;var i;while(!i){i=this.editorObject.editing.mapper.toModelElement(this.editorObject.editing.view.domConverter.domToView(t));t=t.parentElement;}var n=this.editorObject.model.createRangeIn(i);var o=Array.from(n.getItems());for(var _i377=0,_o136=o;_i377<_o136.length;_i377++){var _t365=_o136[_i377];if(_t365.is("textProxy")&&_t365.data==e.data.replace(String.fromCharCode(160)," ")){return _t365.textNode;}}}},{key:"insertFormula",value:function insertFormula(e,t,i,n){var _this352=this;var o={};if(!i){this.insertMathml("");}else if(this.core.editMode=="latex"){o.latex=vR.getLatexFromMathML(i);o.node=t.document.createTextNode("$$"+o.latex+"$$");this.editorObject.model.change(function(e){var t=_this352.core.editionProperties.latexRange;var i=_this352.findText(t.startContainer);var n=_this352.findText(t.endContainer);var s=e.createPositionAt(i.parent,i.startOffset+t.startOffset);var r=e.createPositionAt(n.parent,n.startOffset+t.endOffset);var a=e.createRange(s,r);e.remove(a);e.insertText("$$"+o.latex+"$$",i.getAttributes(),s);});}else{o.node=this.editorObject.editing.view.domConverter.viewToDom(this.editorObject.editing.mapper.toViewElement(this.insertMathml(i)),t.document);}return o;}},{key:"notifyWindowClosed",value:function notifyWindowClosed(){this.editorObject.editing.view.focus();}}]);return KR;}(XR);var QR=/*#__PURE__*/function(_w39){_inherits(QR,_w39);function QR(e){_classCallCheck(this,QR);return _possibleConstructorReturn(this,_getPrototypeOf(QR).call(this,e));}_createClass(QR,[{key:"execute",value:function execute(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(!e.hasOwnProperty("integration")||!(e.integration instanceof KR)){throw'Must pass a valid CKEditor5Integration instance as attribute "integration" of options';}this.integration=e.integration;this.setEditor();this.openEditor();}},{key:"setEditor",value:function setEditor(){this.integration.core.getCustomEditors().disable();}},{key:"openEditor",value:function openEditor(){var e=this._getSelectedImage();if(typeof e!=="undefined"&&e!==null&&e.classList.contains(WirisPlugin.Configuration.get("imageClassName"))){this.integration.core.editionProperties.temporalImage=e;this.integration.openExistingFormulaEditor();}else{this.integration.openNewFormulaEditor();}}},{key:"_getSelectedImage",value:function _getSelectedImage(){var e=this.editor.editing.view.document.selection;if(e.isCollapsed||e.rangeCount!==1){return;}var t=e.getFirstRange();var i;var _iteratorNormalCompletion433=true;var _didIteratorError433=false;var _iteratorError433=undefined;try{for(var _iterator433=t[Symbol.iterator](),_step433;!(_iteratorNormalCompletion433=(_step433=_iterator433.next()).done);_iteratorNormalCompletion433=true){var _e415=_step433.value;if(_e415.item.name!=="span"){return;}i=_e415.item.getChild(0);break;}}catch(err){_didIteratorError433=true;_iteratorError433=err;}finally{try{if(!_iteratorNormalCompletion433&&_iterator433["return"]!=null){_iterator433["return"]();}}finally{if(_didIteratorError433){throw _iteratorError433;}}}if(!i){return;}return this.editor.editing.view.domConverter.mapViewToDom(i);}}]);return QR;}(_w);var ZR=/*#__PURE__*/function(_QR){_inherits(ZR,_QR);function ZR(){_classCallCheck(this,ZR);return _possibleConstructorReturn(this,_getPrototypeOf(ZR).apply(this,arguments));}_createClass(ZR,[{key:"setEditor",value:function setEditor(){this.integration.core.getCustomEditors().enable("chemistry");}}]);return ZR;}(QR);var eL='<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 22.0.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 300 261.7" style="enable-background:new 0 0 300 261.7;" xml:space="preserve">\n<style type="text/css">\n\t.st0{fill:#FFFFFF;}\n\t.st1{fill:#EF4A5F;}\n\t.st2{fill:#C8202F;}\n</style>\n<path class="st0" d="M300,32.8c0-16.4-13.4-29.7-29.9-29.7c-2.9,0-7.2,0.8-7.2,0.8c-37.9,9.1-71.3,14-112,14c-0.3,0-0.6,0-1,0\n\tc-16.5,0-29.9,13.3-29.9,29.7c0,16.4,13.4,29.7,29.9,29.7l0,0c45.3,0,83.1-5.3,125.3-15.3h0C289.3,59.5,300,47.4,300,32.8"/>\n<path class="st0" d="M90.2,257.7c-11.4,0-21.9-6.4-27-16.7l-60-119.9c-7.5-14.9-1.4-33.1,13.5-40.5c14.9-7.5,33.1-1.4,40.5,13.5\n\tl27.3,54.7L121.1,39c5.3-15.8,22.4-24.4,38.2-19.1c15.8,5.3,24.4,22.4,19.1,38.2l-59.6,179c-3.9,11.6-14.3,19.7-26.5,20.6\n\tC91.6,257.7,90.9,257.7,90.2,257.7"/>\n<g>\n\t<g>\n\t\t<path class="st1" d="M90.2,257.7c-11.4,0-21.9-6.4-27-16.7l-60-119.9c-7.5-14.9-1.4-33.1,13.5-40.5c14.9-7.5,33.1-1.4,40.5,13.5\n\t\t\tl27.3,54.7L121.1,39c5.3-15.8,22.4-24.4,38.2-19.1c15.8,5.3,24.4,22.4,19.1,38.2l-59.6,179c-3.9,11.6-14.3,19.7-26.5,20.6\n\t\t\tC91.6,257.7,90.9,257.7,90.2,257.7"/>\n\t</g>\n</g>\n<g>\n\t<g>\n\t\t<path class="st2" d="M300,32.8c0-16.4-13.4-29.7-29.9-29.7c-2.9,0-7.2,0.8-7.2,0.8c-37.9,9.1-71.3,14-112,14c-0.3,0-0.6,0-1,0\n\t\t\tc-16.5,0-29.9,13.3-29.9,29.7c0,16.4,13.4,29.7,29.9,29.7l0,0c45.3,0,83.1-5.3,125.3-15.3h0C289.3,59.5,300,47.4,300,32.8"/>\n\t</g>\n</g>\n</svg>\n';var tL='<?xml version="1.0" encoding="utf-8"?>\n\x3c!-- Generator: Adobe Illustrator 22.0.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\x3e\n<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n\t viewBox="0 0 40.3 49.5" style="enable-background:new 0 0 40.3 49.5;" xml:space="preserve">\n<style type="text/css">\n\t.st0{fill:#A4CF61;}\n</style>\n<path class="st0" d="M39.2,12.1c0-1.9-1.1-3.6-2.7-4.4L24.5,0.9l0,0c-0.7-0.4-1.5-0.6-2.4-0.6c-0.9,0-1.7,0.2-2.4,0.6l0,0L2.3,10.8\n\tl0,0C0.9,11.7,0,13.2,0,14.9h0v19.6h0c0,1.7,0.9,3.3,2.3,4.1l0,0l17.4,9.9l0,0c0.7,0.4,1.5,0.6,2.4,0.6c0.9,0,1.7-0.2,2.4-0.6l0,0\n\tl12.2-6.9h0c1.5-0.8,2.6-2.5,2.6-4.3c0-2.7-2.2-4.9-4.9-4.9c-0.9,0-1.8,0.3-2.5,0.7l0,0l-9.7,5.6l-12.3-7V17.8l12.3-7l9.9,5.7l0,0\n\tc0.7,0.4,1.5,0.6,2.4,0.6C37,17,39.2,14.8,39.2,12.1"/>\n</svg>\n';var iL=/*#__PURE__*/function(_bw113){_inherits(iL,_bw113);function iL(){_classCallCheck(this,iL);return _possibleConstructorReturn(this,_getPrototypeOf(iL).apply(this,arguments));}_createClass(iL,[{key:"init",value:function init(){var e=this._addIntegration();this._addCommands();this._addViews(e);this._addSchema();this._addConverters();this._exposeWiris();}},{key:"_addIntegration",value:function _addIntegration(){var e=this.editor;var t={};t.environment={};t.environment.editor="CKEditor5";t.editorObject=e;t.serviceProviderProperties={};t.serviceProviderProperties.URI="https://www.wiris.net/demo/plugins/app";t.serviceProviderProperties.server="java";t.target=e.sourceElement;t.scriptName="bundle.js";t.managesLanguage=true;var i;if(t.target){i=new KR(t);i.init();i.listeners.fire("onTargetReady",{});i.checkElement();this.listenTo(e.editing.view.document,"click",function(e,t){if(t.domEvent.detail==2){i.doubleClickHandler(t.domTarget,t.domEvent);e.stop();}},{priority:"highest"});}return i;}},{key:"_addCommands",value:function _addCommands(){var e=this.editor;e.commands.add("MathType",new QR(e));e.commands.add("ChemType",new ZR(e));}},{key:"_addViews",value:function _addViews(e){var t=this.editor;t.ui.componentFactory.add("MathType",function(i){var n=new Vb(i);n.bind("isEnabled").to(t.commands.get("MathType"),"isEnabled");n.set({label:"Insert a math equation - MathType",icon:eL,tooltip:true});n.on("execute",function(){t.execute("MathType",{integration:e});});return n;});t.ui.componentFactory.add("ChemType",function(i){var n=new Vb(i);n.bind("isEnabled").to(t.commands.get("ChemType"),"isEnabled");n.set({label:"Insert a chemistry formula - ChemType",icon:tL,tooltip:true});n.on("execute",function(){t.execute("ChemType",{integration:e});});return n;});t.editing.view.addObserver(yC);}},{key:"_addSchema",value:function _addSchema(){var e=this.editor.model.schema;e.register("mathml",{allowWhere:"$text",isObject:true,isInline:true,allowAttributes:["formula"]});}},{key:"_addConverters",value:function _addConverters(){var e=this.editor;e.conversion["for"]("upcast").elementToElement({view:{name:"span",classes:"ck-math-widget"},model:function model(e,t){var i=gR.safeXmlDecode(e.getChild(0).getAttribute("data-mathml"));return t.createElement("mathml",{formula:i});}});e.data.upcastDispatcher.on("element:math",function(i,n,o){var s=o.consumable,r=o.writer;var a=n.viewItem;if(!s.test(a,{name:true})){return;}var c=t(a);var l=new fR(e.editing.view.document);var d=new dx(e.editing.view.document);var u=d.createDocumentFragment(a.getChildren());var h=_toConsumableArray(a.getAttributes()).map(function(_ref94){var _ref95=_slicedToArray(_ref94,2),e=_ref95[0],t=_ref95[1];return" ".concat(e,"=\"").concat(t,"\"");}).join("");var f=l.toData(u)||"";f="<math".concat(h,">").concat(f,"</math>");var m=c?r.createText(MR.initParse(f,e.config.get("language"))):r.createElement("mathml",{formula:f});var g=o.splitToAllowedParent(m,n.modelCursor);if(!g){return;}o.writer.insert(m,g.position);s.consume(a,{name:true});var p=o.getSplitParts(m);n.modelRange=r.createRange(o.writer.createPositionBefore(m),o.writer.createPositionAfter(p[p.length-1]));if(g.cursorParent){n.modelCursor=o.writer.createPositionAt(g.cursorParent,0);}else{n.modelCursor=n.modelRange.end;}});function t(e){var t=e.getChild(0);if(!t||t.name!=="semantics")return false;var _iteratorNormalCompletion434=true;var _didIteratorError434=false;var _iteratorError434=undefined;try{for(var _iterator434=t.getChildren()[Symbol.iterator](),_step434;!(_iteratorNormalCompletion434=(_step434=_iterator434.next()).done);_iteratorNormalCompletion434=true){var _e416=_step434.value;if(_e416.name==="annotation"&&_e416.getAttribute("encoding")==="LaTeX"){return true;}}}catch(err){_didIteratorError434=true;_iteratorError434=err;}finally{try{if(!_iteratorNormalCompletion434&&_iterator434["return"]!=null){_iterator434["return"]();}}finally{if(_didIteratorError434){throw _iteratorError434;}}}return false;}e.conversion["for"]("editingDowncast").elementToElement({model:"mathml",view:o});e.conversion["for"]("dataDowncast").elementToElement({model:"mathml",view:n});function i(e,t){if(t.is("text")){return e.createText(t.data);}else if(t.is("element")){if(t.is("emptyElement")){return e.createEmptyElement(t.name,t.getAttributes());}else{var _n228=e.createContainerElement(t.name,t.getAttributes());var _iteratorNormalCompletion435=true;var _didIteratorError435=false;var _iteratorError435=undefined;try{for(var _iterator435=t.getChildren()[Symbol.iterator](),_step435;!(_iteratorNormalCompletion435=(_step435=_iterator435.next()).done);_iteratorNormalCompletion435=true){var _o137=_step435.value;e.insert(e.createPositionAt(_n228,"end"),i(e,_o137));}}catch(err){_didIteratorError435=true;_iteratorError435=err;}finally{try{if(!_iteratorNormalCompletion435&&_iterator435["return"]!=null){_iterator435["return"]();}}finally{if(_didIteratorError435){throw _iteratorError435;}}}return _n228;}}throw new Exception("Given node has unsupported type.");}function n(e,t){var n=new pp(t.document);var o=MR.endParseSaveMode(e.getAttribute("formula"));if(!pR.get("saveHandTraces")){o=gR.removeAnnotation(o,"application/json");}var s=n.toView(o).getChild(0);return i(t,s);}function o(e,t){var i=t.createContainerElement("span",{"class":"ck-math-widget"});var n=s(e,t);t.insert(t.createPositionAt(i,0),n);return Ev(i,t);}function s(t,i){var n=new pp(i.document);var o=t.getAttribute("formula");var s=MR.initParse(o,e.config.get("language"));var r=n.toView(s).getChild(0);return i.createEmptyElement("img",r.getAttributes());}}},{key:"_exposeWiris",value:function _exposeWiris(){window.WirisPlugin={Core:JR,Parser:MR,Image:AR,MathML:gR,Util:xR,Configuration:pR,Listeners:wR,IntegrationModel:XR,Latex:vR};}}],[{key:"requires",get:function get(){return[nk];}},{key:"pluginName",get:function get(){return"MathType";}}]);return iL;}(bw);var nL=/*#__PURE__*/function(_w40){_inherits(nL,_w40);function nL(){_classCallCheck(this,nL);return _possibleConstructorReturn(this,_getPrototypeOf(nL).apply(this,arguments));}_createClass(nL,[{key:"execute",value:function execute(){var _this353=this;var e=this.editor.model;var t=e.document;e.change(function(i){oL(_this353.editor.model,i,t.selection,e.schema);_this353.fire("afterExecute",{writer:i});});}}]);return nL;}(_w);function oL(e,t,i,n){var o=i.isCollapsed;var s=i.getFirstRange();var r=s.start.parent;var a=s.end.parent;if(n.isLimit(r)||n.isLimit(a)){if(!o&&r==a){e.deleteContent(i);}return;}if(o){var _e417=cS(t.model.schema,i.getAttributes());sL(t,s.start);t.setSelectionAttribute(_e417);}else{var _n229=!(s.start.isAtStart&&s.end.isAtEnd);var _o138=r==a;e.deleteContent(i,{leaveUnmerged:_n229});if(_n229){if(_o138){sL(t,i.focus);}else{t.setSelection(a,0);}}}}function sL(e,t){e.split(t);e.setSelection(t.parent.nextSibling,0);}var rL=/*#__PURE__*/function(_bw114){_inherits(rL,_bw114);function rL(){_classCallCheck(this,rL);return _possibleConstructorReturn(this,_getPrototypeOf(rL).apply(this,arguments));}_createClass(rL,[{key:"init",value:function init(){var e=this.editor;var t=e.editing.view;var i=t.document;t.addObserver(mS);e.commands.add("enter",new nL(e));this.listenTo(i,"enter",function(i,n){n.preventDefault();if(n.isSoft){return;}e.execute("enter");t.scrollToTheSelection();},{priority:"low"});}}],[{key:"pluginName",get:function get(){return"Enter";}}]);return rL;}(bw);var aL=/*#__PURE__*/function(){function aL(e){var _this354=this;var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:20;_classCallCheck(this,aL);this.model=e;this.size=0;this.limit=t;this.isLocked=false;this._changeCallback=function(e,t){if(t.type!="transparent"&&t!==_this354._batch){_this354._reset(true);}};this._selectionChangeCallback=function(){_this354._reset();};this.model.document.on("change",this._changeCallback);this.model.document.selection.on("change:range",this._selectionChangeCallback);this.model.document.selection.on("change:attribute",this._selectionChangeCallback);}_createClass(aL,[{key:"input",value:function input(e){this.size+=e;if(this.size>=this.limit){this._reset(true);}}},{key:"lock",value:function lock(){this.isLocked=true;}},{key:"unlock",value:function unlock(){this.isLocked=false;}},{key:"destroy",value:function destroy(){this.model.document.off("change",this._changeCallback);this.model.document.selection.off("change:range",this._selectionChangeCallback);this.model.document.selection.off("change:attribute",this._selectionChangeCallback);}},{key:"_reset",value:function _reset(e){if(!this.isLocked||e){this._batch=null;this.size=0;}}},{key:"batch",get:function get(){if(!this._batch){this._batch=this.model.createBatch();}return this._batch;}}]);return aL;}();var cL=/*#__PURE__*/function(_w41){_inherits(cL,_w41);function cL(e,t){var _this355;_classCallCheck(this,cL);_this355=_possibleConstructorReturn(this,_getPrototypeOf(cL).call(this,e));_this355._buffer=new aL(e.model,t);_this355._batches=new WeakSet();return _this355;}_createClass(cL,[{key:"destroy",value:function destroy(){_get(_getPrototypeOf(cL.prototype),"destroy",this).call(this);this._buffer.destroy();}},{key:"execute",value:function execute(){var _this356=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor.model;var i=t.document;var n=e.text||"";var o=n.length;var s=e.range?t.createSelection(e.range):i.selection;var r=e.resultRange;t.enqueueChange(this._buffer.batch,function(e){_this356._buffer.lock();t.deleteContent(s);if(n){t.insertContent(e.createText(n,i.selection.getAttributes()),s);}if(r){e.setSelection(r);}else if(!s.is("documentSelection")){e.setSelection(s);}_this356._buffer.unlock();_this356._buffer.input(o);_this356._batches.add(_this356._buffer.batch);});}},{key:"buffer",get:function get(){return this._buffer;}}]);return cL;}(_w);function lL(e){var t=null;var i=e.model;var n=e.editing.view;var o=e.commands.get("input");if(Cl.isAndroid){n.document.on("beforeinput",function(e,t){return s(t);},{priority:"lowest"});}else{n.document.on("keydown",function(e,t){return s(t);},{priority:"lowest"});}n.document.on("compositionstart",r,{priority:"lowest"});n.document.on("compositionend",function(){t=i.createSelection(i.document.selection);},{priority:"lowest"});function s(e){var s=i.document;var r=n.document.isComposing;var c=t&&t.isEqual(s.selection);t=null;if(!o.isEnabled){return;}if(uL(e)||s.selection.isCollapsed){return;}if(r&&e.keyCode===229){return;}if(!r&&e.keyCode===229&&c){return;}a();}function r(){var e=i.document;var t=e.selection.rangeCount===1?e.selection.getFirstRange().isFlat:true;if(e.selection.isCollapsed||t){return;}a();}function a(){var e=o.buffer;e.lock();i.enqueueChange(e.batch,function(){i.deleteContent(i.document.selection);});e.unlock();}}var dL=[Ll("arrowUp"),Ll("arrowRight"),Ll("arrowDown"),Ll("arrowLeft"),9,16,17,18,19,20,27,33,34,35,36,45,91,93,144,145,173,174,175,176,177,178,179,255];for(var _e418=112;_e418<=135;_e418++){dL.push(_e418);}function uL(e){if(e.ctrlKey){return true;}return dL.includes(e.keyCode);}function hL(e,t){var i=[];var n=0;var o;e.forEach(function(e){if(e=="equal"){s();n++;}else if(e=="insert"){if(r("insert")){o.values.push(t[n]);}else{s();o={type:"insert",index:n,values:[t[n]]};}n++;}else{if(r("delete")){o.howMany++;}else{s();o={type:"delete",index:n,howMany:1};}}});s();return i;function s(){if(o){i.push(o);o=null;}}function r(e){return o&&o.type==e;}}function fL(e){if(e.length==0){return false;}var _iteratorNormalCompletion436=true;var _didIteratorError436=false;var _iteratorError436=undefined;try{for(var _iterator436=e[Symbol.iterator](),_step436;!(_iteratorNormalCompletion436=(_step436=_iterator436.next()).done);_iteratorNormalCompletion436=true){var _t366=_step436.value;if(_t366.type==="children"&&!mL(_t366)){return true;}}}catch(err){_didIteratorError436=true;_iteratorError436=err;}finally{try{if(!_iteratorNormalCompletion436&&_iterator436["return"]!=null){_iterator436["return"]();}}finally{if(_didIteratorError436){throw _iteratorError436;}}}return false;}function mL(e){if(e.newChildren.length-e.oldChildren.length!=1){return;}var t=vd(e.oldChildren,e.newChildren,gL);var i=hL(t,e.newChildren);if(i.length>1){return;}var n=i[0];if(!(!!n.values[0]&&n.values[0].is("text"))){return;}return n;}function gL(e,t){if(!!e&&e.is("text")&&!!t&&t.is("text")){return e.data===t.data;}else{return e===t;}}function pL(e){e.editing.view.document.on("mutations",function(t,i,n){new bL(e).handle(i,n);});}var bL=/*#__PURE__*/function(){function bL(e){_classCallCheck(this,bL);this.editor=e;this.editing=this.editor.editing;}_createClass(bL,[{key:"handle",value:function handle(e,t){if(fL(e)){this._handleContainerChildrenMutations(e,t);}else{var _iteratorNormalCompletion437=true;var _didIteratorError437=false;var _iteratorError437=undefined;try{for(var _iterator437=e[Symbol.iterator](),_step437;!(_iteratorNormalCompletion437=(_step437=_iterator437.next()).done);_iteratorNormalCompletion437=true){var _i378=_step437.value;this._handleTextMutation(_i378,t);this._handleTextNodeInsertion(_i378);}}catch(err){_didIteratorError437=true;_iteratorError437=err;}finally{try{if(!_iteratorNormalCompletion437&&_iterator437["return"]!=null){_iterator437["return"]();}}finally{if(_didIteratorError437){throw _iteratorError437;}}}}}},{key:"_handleContainerChildrenMutations",value:function _handleContainerChildrenMutations(e,t){var i=wL(e);if(!i){return;}var n=this.editor.editing.view.domConverter;var o=n.mapViewToDom(i);var s=new Dd(this.editor.editing.view.document);var r=this.editor.data.toModel(s.domToView(o)).getChild(0);var a=this.editor.editing.mapper.toModelElement(i);if(!a){return;}var c=Array.from(r.getChildren());var l=Array.from(a.getChildren());var d=c[c.length-1];var u=l[l.length-1];if(d&&d.is("softBreak")&&u&&!u.is("softBreak")){c.pop();}var h=this.editor.model.schema;if(!_L(c,h)||!_L(l,h)){return;}var f=c.map(function(e){return e.is("text")?e.data:"@";}).join("").replace(/\u00A0/g," ");var m=l.map(function(e){return e.is("text")?e.data:"@";}).join("").replace(/\u00A0/g," ");if(m===f){return;}var g=vd(m,f);var _vL=vL(g),p=_vL.firstChangeAt,b=_vL.insertions,w=_vL.deletions;var _=null;if(t){_=this.editing.mapper.toModelRange(t.getFirstRange());}var v=f.substr(p,b);var k=this.editor.model.createRange(this.editor.model.createPositionAt(a,p),this.editor.model.createPositionAt(a,p+w));this.editor.execute("input",{text:v,range:k,resultRange:_});}},{key:"_handleTextMutation",value:function _handleTextMutation(e,t){if(e.type!="text"){return;}var i=e.newText.replace(/\u00A0/g," ");var n=e.oldText.replace(/\u00A0/g," ");if(n===i){return;}var o=vd(n,i);var _vL2=vL(o),s=_vL2.firstChangeAt,r=_vL2.insertions,a=_vL2.deletions;var c=null;if(t){c=this.editing.mapper.toModelRange(t.getFirstRange());}var l=this.editing.view.createPositionAt(e.node,s);var d=this.editing.mapper.toModelPosition(l);var u=this.editor.model.createRange(d,d.getShiftedBy(a));var h=i.substr(s,r);this.editor.execute("input",{text:h,range:u,resultRange:c});}},{key:"_handleTextNodeInsertion",value:function _handleTextNodeInsertion(e){if(e.type!="children"){return;}var t=mL(e);var i=this.editing.view.createPositionAt(e.node,t.index);var n=this.editing.mapper.toModelPosition(i);var o=t.values[0].data;this.editor.execute("input",{text:o.replace(/\u00A0/g," "),range:this.editor.model.createRange(n)});}}]);return bL;}();function wL(e){var t=e.map(function(e){return e.node;}).reduce(function(e,t){return e.getCommonAncestor(t,{includeSelf:true});});if(!t){return;}return t.getAncestors({includeSelf:true,parentFirst:true}).find(function(e){return e.is("containerElement")||e.is("rootElement");});}function _L(e,t){return e.every(function(e){return t.isInline(e);});}function vL(e){var t=null;var i=null;for(var _n230=0;_n230<e.length;_n230++){var _o139=e[_n230];if(_o139!="equal"){t=t===null?_n230:t;i=_n230;}}var n=0;var o=0;for(var _s97=t;_s97<=i;_s97++){if(e[_s97]!="insert"){n++;}if(e[_s97]!="delete"){o++;}}return{insertions:o,deletions:n,firstChangeAt:t};}var kL=/*#__PURE__*/function(_bw115){_inherits(kL,_bw115);function kL(){_classCallCheck(this,kL);return _possibleConstructorReturn(this,_getPrototypeOf(kL).apply(this,arguments));}_createClass(kL,[{key:"init",value:function init(){var e=this.editor;var t=new cL(e,e.config.get("typing.undoStep")||20);e.commands.add("input",t);lL(e);pL(e);}},{key:"isInput",value:function isInput(e){var t=this.editor.commands.get("input");return t._batches.has(e);}}],[{key:"pluginName",get:function get(){return"Input";}}]);return kL;}(bw);var yL=/*#__PURE__*/function(_w42){_inherits(yL,_w42);function yL(e,t){var _this357;_classCallCheck(this,yL);_this357=_possibleConstructorReturn(this,_getPrototypeOf(yL).call(this,e));_this357.direction=t;_this357._buffer=new aL(e.model,e.config.get("typing.undoStep"));return _this357;}_createClass(yL,[{key:"execute",value:function execute(){var _this358=this;var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var t=this.editor.model;var i=t.document;t.enqueueChange(this._buffer.batch,function(n){_this358._buffer.lock();var o=n.createSelection(e.selection||i.selection);var s=o.isCollapsed;if(o.isCollapsed){t.modifySelection(o,{direction:_this358.direction,unit:e.unit});}if(_this358._shouldEntireContentBeReplacedWithParagraph(e.sequence||1)){_this358._replaceEntireContentWithParagraph(n);return;}if(o.isCollapsed){return;}var r=0;o.getFirstRange().getMinimalFlatRanges().forEach(function(e){r+=fl(e.getWalker({singleCharacters:true,ignoreElementEnd:true,shallow:true}));});t.deleteContent(o,{doNotResetEntireContent:s,direction:_this358.direction});_this358._buffer.input(r);n.setSelection(o);_this358._buffer.unlock();});}},{key:"_shouldEntireContentBeReplacedWithParagraph",value:function _shouldEntireContentBeReplacedWithParagraph(e){if(e>1){return false;}var t=this.editor.model;var i=t.document;var n=i.selection;var o=t.schema.getLimitElement(n);var s=n.isCollapsed&&n.containsEntireContent(o);if(!s){return false;}if(!t.schema.checkChild(o,"paragraph")){return false;}var r=o.getChild(0);if(r&&r.name==="paragraph"){return false;}return true;}},{key:"_replaceEntireContentWithParagraph",value:function _replaceEntireContentWithParagraph(e){var t=this.editor.model;var i=t.document;var n=i.selection;var o=t.schema.getLimitElement(n);var s=e.createElement("paragraph");e.remove(e.createRangeIn(o));e.insert(s,o);e.setSelection(s,0);}},{key:"buffer",get:function get(){return this._buffer;}}]);return yL;}(_w);var xL=/*#__PURE__*/function(_Yd7){_inherits(xL,_Yd7);function xL(e){var _this359;_classCallCheck(this,xL);_this359=_possibleConstructorReturn(this,_getPrototypeOf(xL).call(this,e));var t=e.document;var i=0;t.on("keyup",function(e,t){if(t.keyCode==Rl["delete"]||t.keyCode==Rl.backspace){i=0;}});t.on("keydown",function(e,t){var o={};if(t.keyCode==Rl["delete"]){o.direction="forward";o.unit="character";}else if(t.keyCode==Rl.backspace){o.direction="backward";o.unit="codePoint";}else{return;}var s=Cl.isMac?t.altKey:t.ctrlKey;o.unit=s?"word":o.unit;o.sequence=++i;n(e,t.domEvent,o);});if(Cl.isAndroid){t.on("beforeinput",function(t,i){if(i.domEvent.inputType!="deleteContentBackward"){return;}var o={unit:"codepoint",direction:"backward",sequence:1};var s=i.domTarget.ownerDocument.defaultView.getSelection();if(s.anchorNode==s.focusNode&&s.anchorOffset+1!=s.focusOffset){o.selectionToRemove=e.domConverter.domSelectionToView(s);}n(t,i.domEvent,o);});}function n(e,i,n){var o;t.once("delete",function(e){return o=e;},{priority:Number.POSITIVE_INFINITY});t.fire("delete",new Gu(t,i,n));if(o&&o.stop.called){e.stop();}}return _this359;}_createClass(xL,[{key:"observe",value:function observe(){}}]);return xL;}(Yd);var AL=/*#__PURE__*/function(_bw116){_inherits(AL,_bw116);function AL(){_classCallCheck(this,AL);return _possibleConstructorReturn(this,_getPrototypeOf(AL).apply(this,arguments));}_createClass(AL,[{key:"init",value:function init(){var e=this.editor;var t=e.editing.view;var i=t.document;t.addObserver(xL);e.commands.add("forwardDelete",new yL(e,"forward"));e.commands.add("delete",new yL(e,"backward"));this.listenTo(i,"delete",function(i,n){var o={unit:n.unit,sequence:n.sequence};if(n.selectionToRemove){var _t367=e.model.createSelection();var _i379=[];var _iteratorNormalCompletion438=true;var _didIteratorError438=false;var _iteratorError438=undefined;try{for(var _iterator438=n.selectionToRemove.getRanges()[Symbol.iterator](),_step438;!(_iteratorNormalCompletion438=(_step438=_iterator438.next()).done);_iteratorNormalCompletion438=true){var _t368=_step438.value;_i379.push(e.editing.mapper.toModelRange(_t368));}}catch(err){_didIteratorError438=true;_iteratorError438=err;}finally{try{if(!_iteratorNormalCompletion438&&_iterator438["return"]!=null){_iterator438["return"]();}}finally{if(_didIteratorError438){throw _iteratorError438;}}}_t367.setTo(_i379);o.selection=_t367;}e.execute(n.direction=="forward"?"forwardDelete":"delete",o);n.preventDefault();t.scrollToTheSelection();});if(Cl.isAndroid){var _e419=null;this.listenTo(i,"delete",function(t,i){var n=i.domTarget.ownerDocument.defaultView.getSelection();_e419={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset};},{priority:"lowest"});this.listenTo(i,"keyup",function(t,i){if(_e419){var _t369=i.domTarget.ownerDocument.defaultView.getSelection();_t369.collapse(_e419.anchorNode,_e419.anchorOffset);_t369.extend(_e419.focusNode,_e419.focusOffset);_e419=null;}});}}}],[{key:"pluginName",get:function get(){return"Delete";}}]);return AL;}(bw);var CL=/*#__PURE__*/function(_bw117){_inherits(CL,_bw117);function CL(){_classCallCheck(this,CL);return _possibleConstructorReturn(this,_getPrototypeOf(CL).apply(this,arguments));}_createClass(CL,null,[{key:"requires",get:function get(){return[kL,AL];}},{key:"pluginName",get:function get(){return"Typing";}}]);return CL;}(bw);var TL=/*#__PURE__*/function(_bw118){_inherits(TL,_bw118);function TL(){_classCallCheck(this,TL);return _possibleConstructorReturn(this,_getPrototypeOf(TL).apply(this,arguments));}_createClass(TL,null,[{key:"requires",get:function get(){return[lx,rL,gS,CL,ZT];}},{key:"pluginName",get:function get(){return"Essentials";}}]);return TL;}(bw);var ML=/*#__PURE__*/function(_gw){_inherits(ML,_gw);function ML(){_classCallCheck(this,ML);return _possibleConstructorReturn(this,_getPrototypeOf(ML).apply(this,arguments));}return ML;}(gw);ML.builtinPlugins=[Dw,Hw,Qw,s_,z_,Y_,rv,wv,Hk,ey,by,yy,px,yx,eA,rA,OC,pT,cM,HM,GM,qP,YP,ZP,eS,aS,VS,JS,eI,uI,PI,rN,aN,fN,_N,HO,dR,hR,iL,TL,X_];}])["default"];});
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! ./../../node_modules/webpack/buildin/harmony-module.js */ "./node_modules/webpack/buildin/harmony-module.js")(module)))

/***/ }),

/***/ 1:
/*!****************************************!*\
  !*** multi ./resources/js/ckeditor.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__(/*! D:\gitreposite\blog\resources\js\ckeditor.js */"./resources/js/ckeditor.js");


/***/ })

/******/ });